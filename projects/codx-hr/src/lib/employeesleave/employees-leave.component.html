<codx-views #view funcID="HRT04" service="HR" entityName="HR_Employees" [views]="views" idField="employeeID"
    (selectedChange)="selectedChange($event)" assemblyName="ERM.Business.HR" className="EmployeesBusiness"
    method="GetModelFormEmployAsync" (requestEnded)="requestEnded($event)" [selectedFirst]="true"
    [predicate]="predicate" [dataValue]="dataValue" [itemSelected]="itemSelected" [viewActiveType]="'1'">
</codx-views>


<ng-template #cardTemp let-data>
    <codx-card-center cardCss="border w-250px h-100" [formModel]="view.formModel" [imageId]="data.employeeID"
        [title]="data.employeeName" [subTitle]="(data.positionName || 'Bộ phận')" [dataItem]="data"
        [imageObjName]="data.employeeName" [desc]="(data.birthday | date: 'dd/MM/yyyy') || 'dd/MM/yyyy'"
        [footer]="footer" [typeMF]="'hover'" (clickMF)="clickMF($event, data)">
    </codx-card-center>
</ng-template>

<ng-template #footer let-data>
    <div class="d-flex align-items-top mt-2">
        <span class="icon-email icon-16 me-2"> </span>
        <span class="text-dark fw-bold">
            <span #email>{{ data.email | formatvalue: view.formModel:"email":email | async }}</span>
        </span>
    </div>
    <div class="d-flex align-items-center">
        <span class="icon-phone_android icon-16 me-2"></span>
        <span class="text-dark fw-bold">
            <span #phone>{{ data.phone | formatvalue: view.formModel:"phone":phone | async }}</span>
        </span>
    </div>
</ng-template>

<ng-template #itemAction let-data>
    <codx-mfunc [formModel]="view.formModel" [itemSelected]="itemSelected" (clickMF)="clickMF($event, data)"
        [dataItem]="data" [typeMF]="'hover'">
    </codx-mfunc>
</ng-template>

<ng-template #itemEmployee let-data>
    <div class="d-flex align-items-top">
        <div class="d-flex align-items-start">
            <codx-img [width]="35" class="me-4" [objectId]="data.employeeID" [objectName]="data.employeeName"
                objectType="HR_Employees">
            </codx-img>
            <div class="d-flex flex-column flex-grow-1">
                <div class="d-flex align-items-center">
                    <div class="text-dark fw-bold fs-6 me-2 text-nowrap">
                        {{data.employeeName}}
                    </div>
                    <ng-container *ngIf="data.gender">
                        <codx-vll class="badge badge-sm" [name]="'HR001'" [value]="data.gender" 
                            [showText]="true"
                            [showBgColor]="true">
                        </codx-vll>
                    </ng-container>
                    
                </div>

                <div class="text-gray-800 fw-bold" *ngIf="data.positionName">
                    {{data.positionName}}
                </div>
                <div class="text-gray-400" *ngIf="!data.positionName">
                    <codx-label name="lblPositionName" formName="Employees" default="Vị trí công việc">
                    </codx-label>
                </div>

                <!-- <span class="text-dark fw-bold">
                    <span #positionName>{{ data.positionName | formatvalue: view.formModel:"positionName":positionName | async }}</span>
                </span> -->

                <div class="" *ngIf="data.organizationName">{{data.organizationName}}</div>
                <div class="text-gray-400" *ngIf="!data.organizationName">
                    <codx-label name="lblOrganizationName" formName="Employees" default="Bộ phận">
                    </codx-label>
                </div>

                <!-- <span class="text-dark fw-bold">
                    <span #organizationName>{{ data.organizationName | formatvalue: view.formModel:"organizationName":organizationName | async }}</span>
                </span> -->

                <div>
                    <span class="fs-7" *ngIf="data.departmentName">{{data.departmentName}} |
                    </span>
                    <span class="fs-7 text-gray-400" *ngIf="!data.departmentName">
                        <codx-label name="lblOrganizationName" formName="Employees" default="Bộ phận">
                        </codx-label>
                    </span>
                    <span></span>
                    <span class="fs-7" *ngIf="data.divisionName">{{data.divisionName}}</span>
                    <span class="fs-7 text-gray-400" *ngIf="!data.divisionName">
                        <codx-label name="lblDivisionName" formName="Employees" default="Khối">
                        </codx-label>
                    </span>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #itemContact let-data>
    <div class="d-flex flex-column employee-add">
        <div class="d-flex">
            <span class="icon-email icon-16 text-gray-600 me-2"></span>
            <span class="text-dark">
                <span #email>{{ data.email | formatvalue: view.formModel:"email":email | async }}</span>
            </span>

        </div>
        <div class="d-flex my-1">
            <span class="icon-phone_android icon-16 text-gray-600 me-2"></span>
            <span class="text-dark">
                <span #phone>{{ data.phone | formatvalue: view.formModel:"phone":phone | async }}</span>
            </span>
        </div>
        <div class="d-flex">
            <span class="icon-place icon-16 text-gray-600 me-2"></span>
            <span class="text-dark">
                <span #street>{{ data.street | formatvalue: view.formModel:"street":street | async }}</span>
            </span>
        </div>
    </div>
</ng-template>

<ng-template #itemInfoPersonal let-data>
    <div class="d-flex flex-column employee-info">
        <div class="align-items-center1 fs-7">
            <span class="text-gray-600 me-2">
                <codx-label name="lblBirthday" formName="Employees" default="Ngày sinh: "></codx-label>
            </span>
            <!-- <span class="text-gray-800" *ngIf="data.birthday">{{data.birthday | date: "dd/MM/yyyy" }}</span>
            <span class="text-gray-400" *ngIf="!data.birthday">{{data.birthday | date: "dd/MM/yyyy" }}</span> -->

            <span class="text-dark">
                <span #birthday>{{ data.birthday | formatvalue: view.formModel:"birthday":birthday | async }}</span>
            </span>
        </div>
        <div class="align-items-center my-1">
            <span class="text-gray-600 me-2">
                <codx-label name="lblBirthPlace" formName="Employees" default="Nơi sinh: "></codx-label>
            </span>
            <!-- <span class="text-gray-800">{{data?.provinceName || data.birthPlace}}</span> -->
            <span class="text-dark">
                <span #birthPlace>{{ data.provinceName | formatvalue: view.formModel:"birthPlace":birthPlace | async
                    }}</span>
            </span>
        </div>
        <div class="align-items-center">
            <span class="text-gray-600 me-2">
                <codx-label name="lblEducation" formName="Employees" default="Trình độ: "></codx-label>
            </span>
            <!-- <span class="text-gray-800">{{data.education}}</span> -->
            <span class="text-dark">
                <span #education>{{ data.education | formatvalue: view.formModel:"education":education | async }}</span>
            </span>
        </div>
    </div>
</ng-template>

<ng-template #itemStatusName let-data>
    <div class="d-flex flex-column employee-info">
        <div class="d-flex">
            <span class="badge badge-success badge-sm badge-inline"
                [style.background]="data.statusColor">{{data.statusName}}
            </span>
        </div>

        <div class="align-items-center my-1">
            <span class="text-gray-600 me-2">
                <codx-label name="lblJoinedOn" formName="Employees" default="Ngày vào làm: ">
                </codx-label>
            </span>
            <span class="text-gray-800">
                <span #joinedOn>{{ data.joinedOn | formatvalue: view.formModel:"joinedOn":joinedOn | async }}</span>
            </span>
            <!-- <span class="text-gray-800" *ngIf="data.joinedOn">
                {{ data.joinedOn | date: "dd/MM/yyyy" }}
            </span>
            <span class="text-gray-400" *ngIf="!data.joinedOn">
                {{ data.joinedOn | date: "dd/MM/yyyy" }}
            </span> -->
        </div>
        <div class="align-items-center">
            <span class="text-gray-600 me-2">
                <codx-label name="lblSenioritydate" formName="Employees" default="Thâm niên: ">
                </codx-label>
            </span>
            <span *ngIf="!data?.senioritydate"></span>
            <span *ngIf="data?.senioritydate">{{data?.senioritydate }}</span>
        </div>
    </div>
</ng-template>