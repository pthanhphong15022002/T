<codx-views #view funcID="WPT05" service="HR" entityName="HR_Employees" [views]="views" [buttons]="buttons"
  [formModel]="view.formModel" idField="employeeID" assemblyName="ERM.Business.HR" className="EmployeesBusiness"
  method="GetModelFormEmployAsync" (viewChanged)="changeView($event)" [pageSize]="100"
  (requestEnded)="requestEnded($event)" [selectedFirst]="true">
</codx-views>

<ng-template #panelLeftRef>
  <div class="content d-flex flex-column flex-column-fluid paneltree">
    <div class="searorg">
      <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
        <div class="input-group input-group-solid background-transparent erm-search">
          <span class="icon-search icon-20"></span>
          <input type="text" class="form-control text-dark px-0" #eleSearchChart
            placeholder="Nhập thông tin bạn muốn tìm..." (keydown)="search($event,eleSearchChart)">
        </div>
      </div>
    </div>
    <div class="contact-orgchat">
      <codx-treeview id="chartOrg" #chartOrg [pageSize]=10 [itemTemplate]="templateorg" funcId="HRS0201"
        entityName="HR_OrganizationUnits" service="HR" type="treeView" textField="orgUnitName"
        gridViewName="grvOrganizationUnits" formName="OrganizationUnits" [enableCheck]=false idField="orgUnitID"
        (onSelectionChanged)="onSelectionChanged($event)" parentIdField="ParentID">
      </codx-treeview>
    </div>
  </div>
</ng-template>

<ng-template #templateorg let-data>
  {{data.orgUnitName}}
</ng-template>

<ng-template #cardTemp let-data>
  <codx-card-center cardCss="border w-250px h-100" [formModel]="view.formModel" [imageId]="data.employeeID"
    [title]="data.employeeName" [subTitle]="(data.positionName || 'Bộ phận')" [dataItem]="data"
    [desc]="(data.birthday | date: 'dd/MM/yyyy') || 'dd/MM/yyyy'" [footer]="footer" [typeMF]="'hover'"
    (clickMF)="clickMF($event, data)">
  </codx-card-center>
</ng-template>

<ng-template #footer let-data>
  <div class="d-flex align-items-top mt-2">
    <span class="icon-email icon-16 me-2"> </span>
    <span class="text-dark fw-bold">
      <span #email>{{ data.email | formatvalue: view.formModel:"email":email | async }}</span>
    </span>
  </div>
  <div class="d-flex align-items-center">
    <span class="icon-phone_android icon-16 me-2"></span>
    <span class="text-dark fw-bold">
      <span #phone>{{ data.phone | formatvalue: view.formModel:"phone":phone | async }}</span>
    </span>
  </div>
</ng-template>



<ng-template #itemEmployee let-data>
  <div class="d-flex align-items-center">
    <codx-img class="symbol symbol-30 symbol-circle me-3" [width]="40" [objectId]="data.employeeID"
      objectType="HR_Employees">
    </codx-img>
    <div class="d-flex flex-column flex-grow-1">
      <div class="d-flex align-items-center">
        <div class="text-dark font-weight-bold me-2">{{data.employeeName}}</div>
      </div>
      <div>
        <!-- <div class="text-dark-50 font-size-sm mt-1" *ngIf="data.positionName != '---'">
          {{data.positionName}}</div>
        <div class="text-muted font-size-sm mt-1" *ngIf="data.positionName != '---'">
          <codx-label formName="Employees" name="" default="Bộ phận">
          </codx-label>
        </div> -->

        <span class="text-dark-75 font-size-sm">
          <span #positionName>{{ data.positionName | formatvalue: view.formModel:"positionName":positionName | async
            }}</span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemStatusName let-data>
  <div class="badge badge-danger me-2" [style.background-color]="data?.statusColor">
    {{data.statusName}}
  </div>
</ng-template>

<ng-template #itemBirthDay let-data>
  <div class="d-flex flex-column employee-info">
    <div class="d-flex align-items-center1">
      <span class="text-dark-75">
        <span #birthday>{{ data.birthday | formatvalue: view.formModel:"birthday":birthday | async
          }}</span>
      </span>
    </div>
  </div>
</ng-template>

<ng-template #itemJoinOn let-data>
  <div class="d-flex align-items-center">
    <span class="text-dark-75">
      <span #joinedOn>{{ data.joinedOn | formatvalue: view.formModel:"joinedOn":joinedOn | async
        }}</span>
    </span>
  </div>
</ng-template>

<ng-template #itemPhone let-data>
  <div class="d-flex align-items-center employee-add">
    <span class="icon-phone_android icon-16 me-2"></span>
    <span class="text-dark-75">
      <span #phone>{{ data.phone | formatvalue: view.formModel:"phone":phone | async
        }}</span>
    </span>
  </div>
</ng-template>

<ng-template #itemEmail let-data>
  <div class="d-flex align-items-center employee-email">
    <span class="icon-email icon-16 me-2"></span>
    <span class="text-dark-75">
      <span #email>{{ data.email | formatvalue: view.formModel:"email":email | async
        }}</span>
    </span>
  </div>
</ng-template>