<codx-views
  #view
  [funcID]="funcID"
  service="HR"
  assemblyName="ERM.Business.HR"
  entityName="HR_EBusinessTravels"
  className="EBusinessTravelsBusiness"
  [method]="method"
  [views]="views"
  [autoLoad]="true"
  idField="recID"
  [button]="buttonAdd"
  (buttonClick)="addJobSalaries($event)"
  (selectedChange)="changeItemDetail($event)"
>
</codx-views>

<ng-template #templateList let-data>
  {{ console.log(data) }}
  <div class="d-flex align-items-center p-3 border-bottom w-100">
    <div class="w-50 p-3">
      <div class="d-flex align-items-start">
        <div class="d-flex flex-column">
          <codx-img
            [width]="35"
            class="me-3"
            [objectId]="data?.emp?.employeeID"
            [referType]="'avt'"
            [objectName]="data?.emp?.employeeName"
            [objectType]="'HR_Employees'"
          >
          </codx-img>
          <codx-vll
            class="badge badge-sm"
            [name]="genderGrvSetup?.referedValue"
            [value]="data?.emp?.gender"
            [showText]="true"
            [showIcon]="false"
            [showBgColor]="false"
          >
          </codx-vll>
        </div>
        <div class="d-flex flex-column">
          <div>
            <div class="fw-bold">
              <span class="me-2 text-dark">{{ data?.emp?.employeeName }}</span>
              <i class="icon-qr_code_scanner text-danger icon-14 me-1"></i>
              <span class="text-danger">{{ data?.emp?.employeeID }}</span>
            </div>
          </div>
          <div class="text-gray-700 fs-7 mb-1">
            <span
              [innerHTML]="
                data?.emp?.positionID
                  | formatvalue : view.formModel : 'positionID'
                  | async
              "
            ></span>
          </div>
          <div class="text-gray-700">
            <span
              [innerHTML]="
                data?.emp?.orgUnitID
                  | formatvalue : view.formModel : 'orgUnitID'
                  | async
              "
            ></span>
          </div>
        </div>
      </div>
    </div>

    <div class="w-25 p-3">
      <div
        class="d-flex flex-column"
        [class]="data.isCurrent ? 'text-primary' : 'text-gray-700'"
      >
        <div class="d-flex flex-row">
          <div class="d-flex flex-row">
            <div
              class="align-self-center fw-bold"
              [ngbTooltip]="grvSetup?.kowID?.headerText"
            >
              <span
                class="align-self-center fw-bold"
                [innerHTML]="
                  data.kowID | formatvalue : view.formModel : 'kowID' | async
                "
              >
              </span>
            </div>
          </div>
        </div>

        <div class="d-flex flex-column">
          <div class="d-flex flex-row">
            <span class="icon-calendar_today icon-15 me-1"></span>
            <div class="align-self-center fw-bold">
              <span
                [title]="eJobSalaryHeader ? eJobSalaryHeader['BeginDate'] : ''"
                [ngbTooltip]="grvSetup?.beginDate?.headerText"
                [innerHTML]="
                  data.beginDate
                    | formatvalue : view.formModel : 'beginDate'
                    | async
                "
              >
              </span>
              <span *ngIf="data.beginDate !== data.endDate"> - </span>
              <span
                *ngIf="data.beginDate !== data.endDate"
                [title]="eJobSalaryHeader ? eJobSalaryHeader['EndDate'] : ''"
                [ngbTooltip]="grvSetup?.endDate?.headerText"
                [innerHTML]="
                  data.endDate
                    | formatvalue : view.formModel : 'endDate'
                    | async
                "
              >
              </span>
            </div>
          </div>
        </div>

        <div class="d-flex flex-row">
          <div class="d-flex flex-row">
            <div
              class="align-self-center fw-bold"
              [ngbTooltip]="grvSetup?.days?.headerText"
            >
              <span
                class="align-self-center fw-bold"
                [innerHTML]="
                  data.days | formatvalue : view.formModel : 'days' | async
                "
              >
              </span>
              <span> ngày </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="w-25 p-3">
      <div class="d-flex flex-column">
        <div class="text-gray-700 fs-7 mb-1">
          <span
            [innerHTML]="
              data?.businessPlace
                | formatvalue : view.formModel : 'businessPlace'
                | async
            "
          ></span>
        </div>

        <div class="d-flex flex-row">
          <div class="me-2">
            <codx-attachment-temp
              [objectID]="data?.recID"
              [formModel]="view.formModel"
            >
            </codx-attachment-temp>

            <!-- <div class="d-flex flex-row" *ngIf="data?.attachments > 0">
              <i class="icon-attach_file text-primary icon-15"></i>
              <div class="align-self-center notification-count me-4">
                {{ data?.attachments }}
              </div>
            </div> -->
          </div>
          <codx-vll
            [formModel]="view.formModel"
            [field]="'Status'"
            [value]="data?.status"
            [showText]="true"
            [showIcon]="false"
            [showBgColor]="true"
            ngClass="badge badge-sm"
          >
          </codx-vll>
        </div>
      </div>
    </div>

    <div class="align-self-center">
      <div style="height: 35px" class="has-action-menu">
        <codx-mfunc
          [formModel]="view.formModel"
          (clickMF)="clickMF($event, data)"
          (changeDataMF)="changeDataMF($event, data)"
          [dataItem]="data"
          type="hover"
        >
        </codx-mfunc>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #headerTemplate let-data>
  <div class="d-flex w-100 ps-2 pe-4">
    <div class="w-50 text-dark p-3 fw-bold fw-500">
      <codx-label name="lblStaff" [default]="'Nhân viên'"></codx-label>
    </div>
    <div class="w-25 text-dark p-3 fw-bold fw-500">
      <codx-label
        name="lblCategory"
        [default]="'Loại công tác | Thời gian công tác'"
      ></codx-label>
    </div>
    <div class="w-25 text-dark p-3 fw-bold fw-500">
      <codx-label name="lblLocation" [default]="'Nơi công tác'"></codx-label>
    </div>
  </div>
</ng-template>
