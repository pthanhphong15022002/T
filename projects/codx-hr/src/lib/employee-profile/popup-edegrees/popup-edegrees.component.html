<codx-layout-add
  #form
  [title]="headerText"
  [tabInfo]="tabInfo"
  [formModel]="formModel"
  [subHeader]=""
  [footer]="footer"
  [dialog]="dialog"
  [openMore]="true"
  (setTitle)="setTitle($event)"
  [tabContent]="[degreeOveralInf, degreeMoreInf]"
  [data]="degreeObj"
  *ngIf="isAfterRender"
>
</codx-layout-add>

<ng-template #degreeOveralInf>
  <div class="form-group row mt-5">
    <codx-label fiedName="DegreeName" [formModel]="formModel"></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="degreeName"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label
        fiedName="TrainFieldID"
        [formModel]="formModel"
      ></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="trainFieldID"
        [Group]="formGroup"
        [formModel]="formModel"
        (valueChange)="valueChange($event)"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="TrainLevel" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="trainLevel"
        [Group]="formGroup"
        [formModel]="formModel"
        (valueChange)="valueChange($event)"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <codx-label
      fiedName="TrainFieldDetail"
      [formModel]="formModel"
    ></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="trainFieldDetail"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="CourseName" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="courseName"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="TrainForm" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="trainForm"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label
        fiedName="YearGraduated"
        [formModel]="formModel"
      ></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="yearGraduated"
        [Group]="formGroup"
        [formModel]="formModel"
        [showSpinButton]="false"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="IsMain" [formModel]="formModel"></codx-label>
      <div>
        <codx-input
        [disabled]="disabledInput"
          field="isMain"
          [Group]="formGroup"
          [formModel]="formModel"
        ></codx-input>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="TotalScore" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="totalScore"
        [Group]="formGroup"
        [formModel]="formModel"
        [showSpinButton]="false"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="Ranking" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="ranking"
        [Group]="formGroup"
        [formModel]="formModel"
        [showSpinButton]="false"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <codx-label fiedName="Note" [formModel]="formModel"></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="note"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="fs-6 fw-bold text-primary mt-6 mb-3">
    <codx-label
      name="lblAttachFile"
      [formModel]="formModel"
      [default]="'File đính kèm'"
    >
    </codx-label>
  </div>

  <div class=" flex-nowrap">
    <codx-attachment
      #attachment
      [objectType]="formModel?.entityName"
      showMessage="0"
      hideBtnSave="1"
      hideFolder="1"
      hideUploadBtn="1"
      hideDes="1"
      hideImageUpload="0"
      hideImageThumb="0"
      [objectId]="degreeObj?.recID"
      [allowMultiFile]="1"
      [idBrowse]="'add'"
      displayThumb="full"
      [functionID]="funcID"
      (fileAdded)="addFiles($event)">
      [referType]="'source'"
      >
    </codx-attachment>
  </div>
</ng-template>

<ng-template #degreeMoreInf>
  <div class="fs-6 fw-bold text-primary mt-6 mb-3">
    <codx-label
      name="lblTrainInfo"
      [formModel]="formModel"
      [default]="'Thông tin đào tạo'"
    >
    </codx-label>
  </div>
  <div class="form-group row">
    <codx-label
      fiedName="TrainSupplierID"
      [formModel]="formModel"
    ></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="trainSupplierID"
      [Group]="formGroup"
      [formModel]="formModel"
      (valueChange)="valueChange($event)"
    ></codx-input>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="TrainFrom" [formModel]="formModel"></codx-label>
      <codx-dropdown-calendar [disabled]="disabledInput" [emptyText]="headerTextCalendar[0]" [firstChange]="isNullFrom" cssPopup="h-500px w-500px" [value]="Date(degreeObj.trainFromDate)" [selectedType]="fromDateFormat" [displayOption]="ops"
          cssClass="w-100 om-calendar" class="me-4" (change)="changeCalendar($event, 'FromDate')"></codx-dropdown-calendar>
    </div>
    <div class="col-6">
      <codx-label fiedName="TrainTo" [formModel]="formModel"></codx-label>
      <codx-dropdown-calendar [disabled]="disabledInput" [emptyText]="headerTextCalendar[1]" [firstChange]="isNullTo" cssPopup="h-500px w-500px" [value]="Date(degreeObj.trainToDate)" [selectedType]="toDateFormat" [displayOption]="ops"
      cssClass="w-100 om-calendar" class="me-4" (change)="changeCalendar($event, 'ToDate')"></codx-dropdown-calendar>
    </div>
  </div>

  <div class="fs-6 fw-bold text-primary mt-6 mb-3">
    <codx-label
      name="lblDegreeInfo"
      [formModel]="formModel"
      [default]="'Thông tin văn bằng'"
    >
    </codx-label>
  </div>
  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="DecisionNo" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="decisionNo"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="IssuedDate" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="issuedDate"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="DegreeNo" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="degreeNo"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="BookNo" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="bookNo"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row" >
    <div class="d-flex flex-stack">
      <codx-label fiedName="IssuedPlace" [formModel]="formModel"></codx-label>
      <span class="text-end align-items-end mb-1"  *ngIf="actionType != 'view'">
        <a
          class="btn btn-sm border border-gray-300 btn-active-light-primary align-items-center d-flex flex-row text-italic"
          (click)="setIssuedPlace()"
        >
          <span class="icon-south text-danger btn-text-primary me-2"></span>
          <codx-label
            name="lblSetIssuedPlace"
            default="(=Nơi đào tạo)"
            [formModel]="formModel"
          ></codx-label>
        </a>
      </span>
    </div>

    <codx-input
    [disabled]="disabledInput"
      field="issuedPlace"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <codx-label fiedName="IssuedBy" [formModel]="formModel"></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="issuedBy"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>
</ng-template>

<!-- <codx-form
    #form
    [headerText] = "headerText"
    [body]="body"
    [formModel]="formModel"
    [footer]="footer"
    [dialog]="dialog"
    [data]="degreeObj"
    *ngIf="isAfterRender"
>

<ng-template #body>
  <div class="form-group row mt-5">
    <codx-label fiedName="DegreeName" [formModel]="formModel"></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="degreeName"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label
        fiedName="TrainFieldID"
        [formModel]="formModel"
      ></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="trainFieldID"
        [Group]="formGroup"
        [formModel]="formModel"
        (valueChange)="valueChange($event)"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="TrainLevel" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="trainLevel"
        [Group]="formGroup"
        [formModel]="formModel"
        (valueChange)="valueChange($event)"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <codx-label
      fiedName="TrainFieldDetail"
      [formModel]="formModel"
    ></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="trainFieldDetail"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <codx-label
      fiedName="TrainSupplierID"
      [formModel]="formModel"
    ></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="trainSupplierID"
      [Group]="formGroup"
      [formModel]="formModel"
      (valueChange)="valueChange($event)"
    ></codx-input>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="CourseName" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="courseName"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="TrainForm" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="trainForm"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="TrainFrom" [formModel]="formModel"></codx-label>
      <codx-dropdown-calendar [emptyText]="headerTextCalendar[0]" [firstChange]="isNullFrom" cssPopup="h-500px w-500px" [value]="Date(degreeObj.trainFromDate)" [selectedType]="fromDateFormat" [displayOption]="ops"
          cssClass="w-100 om-calendar" class="me-4" (change)="changeCalendar($event, 'FromDate')"></codx-dropdown-calendar>
    </div>
    <div class="col-6">
      <codx-label fiedName="TrainTo" [formModel]="formModel"></codx-label>
      <codx-dropdown-calendar [emptyText]="headerTextCalendar[1]" [firstChange]="isNullTo" cssPopup="h-500px w-500px" [value]="Date(degreeObj.trainToDate)" [selectedType]="toDateFormat" [displayOption]="ops"
      cssClass="w-100 om-calendar" class="me-4" (change)="changeCalendar($event, 'ToDate')"></codx-dropdown-calendar>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="ExamDate" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="examDate"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label
        fiedName="YearGraduated"
        [formModel]="formModel"
      ></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="yearGraduated"
        [Group]="formGroup"
        [formModel]="formModel"
        [showSpinButton]="false"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="TotalScore" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="totalScore"
        [Group]="formGroup"
        [formModel]="formModel"
        [showSpinButton]="false"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="Ranking" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="ranking"
        [Group]="formGroup"
        [formModel]="formModel"
        [showSpinButton]="false"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="IsGraduated" [formModel]="formModel"></codx-label>
      <div>
        <codx-input
        [disabled]="disabledInput"
          field="isGraduated"
          [Group]="formGroup"
          [formModel]="formModel"
        ></codx-input>
      </div>
    </div>
    <div class="col-6">
      <codx-label fiedName="IsMain" [formModel]="formModel"></codx-label>
      <div>
        <codx-input
        [disabled]="disabledInput"
          field="isMain"
          [Group]="formGroup"
          [formModel]="formModel"
        ></codx-input>
      </div>
    </div>
  </div>

  <hr>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="DecisionNo" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="decisionNo"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="IssuedDate" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="issuedDate"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="DegreeNo" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="degreeNo"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="BookNo" [formModel]="formModel"></codx-label>
      <codx-input
      [disabled]="disabledInput"
        field="bookNo"
        [Group]="formGroup"
        [formModel]="formModel"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="d-flex flex-stack">
      <codx-label fiedName="IssuedPlace" [formModel]="formModel"></codx-label>
      <span class="text-end align-items-end mb-1">
        <a
          class="btn btn-sm border border-gray-300 btn-active-light-primary align-items-center d-flex flex-row text-italic"
          (click)="setIssuedPlace()"
        >
          <span class="icon-south text-danger btn-text-primary me-2"></span>
          <codx-label
            name="lblSetIssuedPlace"
            default="(=Nơi đào tạo)"
            [formModel]="formModel"
          ></codx-label>
        </a>
      </span>
    </div>

    <codx-input
    [disabled]="disabledInput"
      field="issuedPlace"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <codx-label fiedName="IssuedBy" [formModel]="formModel"></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="issuedBy"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>

  <div class="form-group row">
    <codx-label fiedName="Note" [formModel]="formModel"></codx-label>
    <codx-input
    [disabled]="disabledInput"
      field="note"
      [Group]="formGroup"
      [formModel]="formModel"
    ></codx-input>
  </div>
</ng-template>
</codx-form> -->

<ng-template #footer>
  <div class="d-flex justify-content-between" *ngIf="actionType != 'view'">
    <button
    class="btn btn-sm btn-outline btn-outline-primary btn-active-light-primary d-flex flex-row"
    (click)="openFormUploadFile()"
  >
    <codx-label
      name="lblAddFile"
      default="Đính kèm file"
      [formModel]="formModel"
    ></codx-label>
  </button>

    <button class="btn btn-primary" (click)="onSaveForm()">
      <i class="icon-save"></i>
      <codx-label
        default="Lưu"
        name="lblSave"
        [formModel]="formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>