<codx-form
  #form
  [headerText]="headerText"
  [body]="body"
  [formModel]="formModel"
  [footer]="footer"
  [dialog]="dialog"
  [data]="dayoffObj"
  *ngIf="isAfterRender"
>
  <ng-template #body>
    <div class="form-group row d-flex flex-row" *ngIf="fromListView">
      <div class="col-10">
        <div class="d-flex">
          <div class="d-flex flex-column position-relative">
            <codx-img
              [width]="40"
              class="me-3"
              [objectId]="empObj?.employeeID"
              [referType]="'avt'"
              [objectName]="empObj?.employeeName"
              [objectType]="'HR_Employees'"
            >
            </codx-img>
          </div>
          <div class="d-flex flex-column">
            <div class="text-dark fw-bold">
              <span>
                {{ empObj?.employeeName }}
              </span>
            </div>
            <div class="text-gray-700" *ngIf="empObj?.positionID">
              <span
                [innerHTML]="
                  empObj?.positionID
                    | formatvalue : formModel : 'positionID'
                    | async
                "
              ></span>
            </div>
            <span class="text-gray-700" *ngIf="empObj?.orgUnitName">{{
              empObj?.orgUnitName
            }}</span>
            <!-- <div class="text-gray-700" *ngIf="empObj?.orgUnitID">
              <span
                [innerHTML]="
                  empObj?.orgUnitID
                    | formatvalue : formModel : 'orgUnitID'
                    | async
                "
              ></span>
            </div> -->
          </div>
        </div>
      </div>
      <div class="col-2 d-flex justify-content-end">
        <codx-input
          [showInput]="false"
          field="employeeID"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="handleSelectEmp($event)"
        >
        </codx-input>
      </div>
      <!-- <div class="col-6">
        <div class="d-flex align-items-start">
          <div class="d-flex flex-column me-2">
            <codx-img
              [width]="35"
              [objectId]="empObj?.employeeID"
              [referType]="'avt'"
              [objectName]="empObj?.employeeName"
              [objectType]="'HR_Employees'"
            >
            </codx-img>
          </div>
          <div class="d-flex flex-column">
            <div class="me-2 text-dark fw-bold text-nowrap">
              <span>{{ empObj?.employeeName }}</span>
            </div>
            <div class="text-gray-500 fs-7">
              <span [innerHTML]="empObj?.positionID"></span>
            </div>
            <div class="text-gray-700">
              <span [innerHTML]="empObj?.orgUnitID"></span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-6" *ngIf="actionType != 'edit'">
        <codx-label fiedName="EmployeeID" [formModel]="formModel"></codx-label>
        <codx-input
          field="employeeID"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="handleSelectEmp($event)"
        >
        </codx-input>
      </div> -->
    </div>
    <div class="form-group row mt-5">
      <div class="col-6">
        <codx-label
          fiedName="RegisteredDate"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          disabled="true"
          field="registeredDate"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="RegisteredBy"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          disabled="true"
          field="registeredBy"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <codx-label fiedName="KowID" [formModel]="formModel"></codx-label>
      <codx-input
        field="kowID"
        [formModel]="formModel"
        [Group]="formGroup"
        (valueChange)="kowIDValuechange()"
      ></codx-input>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="BeginDate" [formModel]="formModel"></codx-label>
        <codx-input
          field="beginDate"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="valueChangedDate($event)"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label fiedName="EndDate" [formModel]="formModel"></codx-label>
        <codx-input
          field="endDate"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="valueChangedDate($event)"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="PeriodType" [formModel]="formModel"></codx-label>
        <codx-input
          field="periodType"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="valueChangedDate($event)"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="ActualEndDate"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="actualEndDate"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <div class="text-primary">
          <codx-label default="Loại trừ các ngày"></codx-label>
        </div>
        <div>
          <codx-input
            field="isSubHoliday"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
          <codx-label
            class="ms-2"
            fiedName="IsSubHoliday"
            [formModel]="formModel"
          ></codx-label>
        </div>

        <div>
          <codx-input
            field="isSubWeekOff"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
          <codx-label
            class="ms-2"
            fiedName="IsSubWeekOff"
            [formModel]="formModel"
          ></codx-label>
        </div>

        <div>
          <codx-input
            field="isSubSunday"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
          <codx-label
            class="ms-2"
            fiedName="IsSubSunday"
            [formModel]="formModel"
          ></codx-label>
        </div>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="TotalSubDays"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          [showSpinButton]="false"
          disabled="true"
          field="totalSubDays"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="TotalDays" [formModel]="formModel"></codx-label>
        <codx-input
          field="totalDays"
          [formModel]="formModel"
          [Group]="formGroup"
          [showSpinButton]="false"
          (valueChange)="calTotalDayoff($event)"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="TotalDaysOff"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="totalDaysOff"
          [formModel]="formModel"
          [Group]="formGroup"
          [showSpinButton]="false"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <codx-label fiedName="Reason" [formModel]="formModel"></codx-label>
      <codx-input
        field="reason"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label fiedName="Note" [formModel]="formModel"></codx-label>
      <codx-input
        field="note"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <div class="row mt-5 mb-1" *ngIf="showInfoDayoffType == true">
      <codx-label
        class="fw-bold text-primary fs-5"
        default="THÔNG TIN LOẠI NGHỈ CHẾ ĐỘ"
        [formModel]="formModel"
      ></codx-label>
    </div>

    <div
      id="groupA"
      *ngIf="groupKowTypeView['groupA'].isShow"
      class="form-group row"
    >
      <div class="col-6">
        <codx-label fiedName="SILeaveNo" [formModel]="formModel"></codx-label>
        <codx-input
          field="SILeaveNo"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="HospitalLine"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="hospitalLine"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div
      id="groupB"
      *ngIf="groupKowTypeView['groupB'].isShow"
      class="form-group row"
    >
      <div class="col-6">
        <codx-label fiedName="ChildID" [formModel]="formModel"></codx-label>
        <codx-input
          field="childID"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="ChildHICardNo"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="childHICardNo"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div
      id="groupC"
      *ngIf="groupKowTypeView['groupC'].isShow"
      class="form-group row"
    >
      <div class="col-6">
        <codx-label
          fiedName="PregnancyFrom"
          [formModel]="formModel"
        ></codx-label>
        <!-- <codx-input
                    field="pregnancyFrom"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input> -->
        <ejs-datepicker
          [start]="start"
          [depth]="depth"
          [value]="pregnancyFromVal"
          [format]="format"
          (valueChange)="UpdateFromDate($event)"
        ></ejs-datepicker>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="PregnancyWeeks"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          [showSpinButton]="false"
          field="pregnancyWeeks"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div id="groupD" *ngIf="groupKowTypeView['groupD'].isShow">
      <div class="form-group row">
        <div class="col-6">
          <codx-label
            fiedName="NewChildBirthDate"
            [formModel]="formModel"
          ></codx-label>
          <codx-input
            field="newChildBirthDate"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
        </div>
        <div class="col-6">
          <codx-label
            fiedName="NewChildNum"
            [formModel]="formModel"
          ></codx-label>
          <codx-input
            field="newChildNum"
            [showSpinButton]="false"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-6">
          <!-- <codx-label
                        fiedName="NewChildBirthType"
                        [formModel]="formModel"
                        ></codx-label> -->
          <div *ngIf="lstPregnantType">
            <codx-input
              type="checkbox"
              [label]="lstPregnantType[0].text"
              [checked]="isnormalPregnant"
              (valueChange)="
                HandlePregnantTypeChange($event, lstPregnantType[0])
              "
            ></codx-input>
          </div>

          <div *ngIf="lstPregnantType">
            <codx-input
              type="checkbox"
              [checked]="isNotNormalPregnant"
              [label]="lstPregnantType[1].text"
              (valueChange)="
                HandlePregnantTypeChange($event, lstPregnantType[1])
              "
            ></codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              fiedName="IsNewChildUnder32W"
              [formModel]="formModel"
            ></codx-label>
          </div>
          <div>
            <codx-input
              field="isNewChildUnder32W"
              [formModel]="formModel"
              [Group]="formGroup"
            ></codx-input>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <codx-label fiedName="WifeID" [formModel]="formModel"></codx-label>
        <codx-input
          field="wifeID"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>

      <div class="form-group row">
        <div class="col-6">
          <codx-label
            fiedName="WifeIDCardNo"
            [formModel]="formModel"
          ></codx-label>
          <codx-input
            field="wifeIDCardNo"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
        </div>
        <div class="col-6">
          <codx-label fiedName="WifeSINo" [formModel]="formModel"></codx-label>
          <codx-input
            field="wifeSINo"
            [formModel]="formModel"
            [Group]="formGroup"
          ></codx-input>
        </div>
      </div>
    </div>

    <div class="form-group row" *ngIf="showInfoDayoffType == true">
      <codx-label fiedName="RegimeNote" [formModel]="formModel"></codx-label>
      <codx-input
        field="regimeNote"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
  </ng-template>
</codx-form>

<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button class="btn btn-primary" (click)="onSaveForm()" [disabled]="!formModel.currentData.updateColumn">
      <i class="icon-save"></i>
      <codx-label
        default="Lưu"
        name="lblSave"
        [formModel]="formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>
