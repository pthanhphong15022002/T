<!-- <layout-list-detail
    #lstDetail
    [title]="headerText"
    [formModel] = "formModel"
    [footer]="footer"
    [dialog] = "dialog"
    [data] = "EBasicSalaryObj"
    [leftTemlate]="LeftTemlate"
    [RightTemlate]="body"
    *ngIf="isAfterRender"
>
    <ng-template #body>
        <div class="form-group row">
            <div class="col-6">
                <codx-label
                    fiedName="DecisionNo"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="decisionNo"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input>
            </div>
            <div class="col-6">
                    <div>
                        <codx-label
                            fiedName="IsCurrent"
                            [formModel]="formModel"
                        ></codx-label>
                    </div>
                    <codx-input
                        field="isCurrent"
                        [formModel]="formModel"
                        [disabled]="true"
                        [Group]="formGroup"
                    ></codx-input>
                </div>
        </div>

        <div class="form-group row">
            <div class="col-6">
                <codx-label
                    fiedName="EffectedDate"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="effectedDate"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input>
            </div>
            <div class="col-6">
                    <codx-label
                        fiedName="ExpiredDate"
                        [formModel]="formModel"
                    ></codx-label>
                    <codx-input
                        field="expiredDate"
                        [formModel]="formModel"
                        [Group]="formGroup"
                    ></codx-input>
            </div>
        </div>

        <div class="form-group row">
            <div class="col-6">
                <codx-label
                    fiedName="BSalary"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="BSalary"
                    [formModel]="formModel"
                    [Group]="formGroup"
                    [showSpinButton]="false" 
                ></codx-input>
            </div>
            <div class="col-6">
                    <codx-label
                        fiedName="SISalary"
                        [formModel]="formModel"
                    ></codx-label>
                    <codx-input
                        field="SISalary"
                        [formModel]="formModel"
                        [Group]="formGroup"
                        [showSpinButton]="false" 
                    ></codx-input>
            </div>
        </div>

        <hr>

        <div class="form-group row">
            <div class="col-6">
                <codx-label
                    fiedName="SignedDate"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="signedDate"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input>
            </div>
            <div class="col-6">
                    <codx-label
                        fiedName="SignStatus"
                        [formModel]="formModel"
                    ></codx-label>
                    <codx-input
                        field="signStatus"
                        [formModel]="formModel"
                        [Group]="formGroup"
                    ></codx-input>
            </div>
        </div>

        <div class="form-group row">
                <codx-label
                    fiedName="SignerID"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="signerID"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input>
        </div>

        <div class="form-group row">
                <codx-label
                    fiedName="SignerPosition"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="signerPosition"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input>
        </div>

        <div class="form-group row">
                <codx-label
                    fiedName="Note"
                    [formModel]="formModel"
                ></codx-label>
                <codx-input
                    field="note"
                    [formModel]="formModel"
                    [Group]="formGroup"
                ></codx-input>
        </div>
    </ng-template>
    <ng-template #footer>
    <div class="d-flex justify-content-end">
        <button class="btn btn-primary" (click)="onSaveForm()">
        <i class="icon-save"></i>
        <codx-label
            default="Lưu"
            name="lblSave"
            [formModel]="formModel"
        ></codx-label>
        </button>
    </div>
    </ng-template>
</layout-list-detail>

<ng-template #LeftTemlate>
<codx-listview
    #listView
    [type]="'cardView'"
    [service]="'HR'"
    [assemblyName]="'HR'"
    [entityName]="'HR_EBasicSalaries'"
    [className]="'EBasicSalariesBusiness'"
    [method]="'GetListEBasicSalariesAsync'"
    [predicate]="'EmployeeID=@0'"
    [dataValue]="employeeId"
    [itemTemplate]="itemTemplate"
    (afterRender) = "afterRenderListView($event)"
    [selectFirst]="true"
>
</codx-listview>
</ng-template>

    <ng-template #itemTemplate let-data>
    <codx-temp-full
        [formModel]="formModel"
        [typeMF]="'hover'"
        [titleTmp]="tmplateEBasicSalaries"
        [icoTitleCss]="'icon-attach_money'"
        cardCss="card codx_cardcenter px-2 pt-4 pb-2"
        [dataItem]="data"
        typeMF="hover"
        [hideMF]="true"
        (click)="click(data)"
    >
    </codx-temp-full>
    </ng-template>

<ng-template #tmplateEBasicSalaries let-data1>
<div class="d-flex flex-column">
    <div><i class="icon-attach_money"></i>data1.bSalary<i class="icon-attach_money"></i>data1.siSalary</div>
    <div><i class="icon-edit_fill"></i>{{(data1.effectedDate | fmDT) + ' - ' + (data1.expiredDate | fmDT)}}</div>
    <div><i class="icon-format_list_bulleted"></i>{{(data1.decisionNo)}} <i class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 me-2 text-gray-400"></i> {{(data1.signedDate | fmDT)}}</div>
</div>
</ng-template> -->

<codx-form
  #form
  [headerText]="headerText"
  [body]="body"
  [formModel]="formModel"
  [footer]="footer"
  [dialog]="dialog"
  [data]="EBasicSalaryObj"
  *ngIf="isAfterRender"
>
</codx-form>
<ng-template #body>
  <div *ngIf="fromListView" class="form-group row">
    <div class="col-6">
      <div class="d-flex">
        <div
          class="d-flex flex-column position-relative"
          (click)="clickOpenPopup(codxInput)"
        >
          <codx-img
            [width]="40"
            [objectId]="employeeObj?.employeeID"
            [referType]="'avt'"
            [objectName]="employeeObj?.employeeName"
            [objectType]="'HR_Employees'"
          >
          </codx-img>
          <codx-vll
            [showText]="true"
            [showBgColor]="true"
            class="text-primary bi bi-pencil badge badge-primary badge-sm position-absolute"
            [ngStyle]="{
              background: 'aliceblue',
              width: '30px',
              fontSize: '10px',
              cursor: 'pointer',
              right: '-5px',
              bottom: '-5px'
            }"
          >
          </codx-vll>
        </div>
        <div class="d-flex flex-column ms-2">
          <div class="text-dark fw-bold">
            <span>{{ employeeObj?.employeeName }}</span>
          </div>
          <div class="text-gray-500 fs-7">
            <span [innerHTML]="employeeObj?.positionID"></span>
          </div>
          <div class="text-gray-700">
            <span [innerHTML]="employeeObj?.orgUnitID"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-6 d-none">
      <codx-label fiedName="EmployeeID" [formModel]="formModel"></codx-label>
      <codx-input
        #codxInput
        field="employeeID"
        [formModel]="formModel"
        [Group]="formGroup"
        (valueChange)="handleSelectEmp($event)"
      >
      </codx-input>
    </div>
  </div>

  <div class="row mt-5 mb-3">
    <div class="col-6">
      <span
        [innerHTML]="EBasicSalaryObj?.status | formatvalue : formModel : 'status' | async"
      >
      </span>
    </div>
    <div class="col-6">
      <div class="d-flex align-items-center">
        <span class="me-2">
          <codx-input
            field="isCurrent"
            [formModel]="formModel"
            [disabled]="true"
            [Group]="formGroup"
          ></codx-input>
        </span>
        <codx-label class="fw-bold" fiedName="IsCurrent" [formModel]="formModel"></codx-label>
      </div>
    </div>
  </div>


  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="EffectedDate" [formModel]="formModel"></codx-label>
      <codx-input
        field="effectedDate"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="ExpiredDate" [formModel]="formModel"></codx-label>
      <codx-input
        field="expiredDate"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="BSalary" [formModel]="formModel"></codx-label>
      <codx-input
        field="BSalary"
        [formModel]="formModel"
        [Group]="formGroup"
        [showSpinButton]="false"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="SISalary" [formModel]="formModel"></codx-label>
      <codx-input
        field="SISalary"
        [formModel]="formModel"
        [Group]="formGroup"
        [showSpinButton]="false"
      ></codx-input>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="JSalary" [formModel]="formModel"></codx-label>
      <codx-input
        field="JSalary"
        [formModel]="formModel"
        [Group]="formGroup"
        [showSpinButton]="false"
      ></codx-input>
    </div>
  </div>

  <hr />

  <div class="form-group row">
    <div class="col-6">
      <codx-label fiedName="DecisionNo" [formModel]="formModel"></codx-label>
      <codx-input
        field="decisionNo"
        [disabled]="true"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
    <div class="col-6">
      <codx-label fiedName="SignedDate" [formModel]="formModel"></codx-label>
      <codx-input
        field="signedDate"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
  </div>

  <div class="form-group border-bottom pb-1">
    <codx-label fiedName="SignerID" [formModel]="formModel"></codx-label>
    <codx-input
      field="signerID"
      [formModel]="formModel"
      [Group]="formGroup"
      (valueChange)="handleSelectEmp($event)"
    ></codx-input>
  </div>

  <div class="form-group row">
    <codx-label fiedName="SignerPosition" [formModel]="formModel"></codx-label>
    <codx-input
      field="signerPosition"
      [formModel]="formModel"
      [Group]="formGroup"
    ></codx-input>
  </div>

  <div class="form-group row">
    <codx-label fiedName="Note" [formModel]="formModel"></codx-label>
    <codx-input
      field="note"
      [formModel]="formModel"
      [Group]="formGroup"
    ></codx-input>
  </div>
</ng-template>
<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button class="btn btn-primary" (click)="onSaveForm()">
      <i class="icon-save"></i>
      <codx-label
        default="Lưu"
        name="lblSave"
        [formModel]="formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>
