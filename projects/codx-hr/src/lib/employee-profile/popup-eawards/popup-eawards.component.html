<!-- <layout-list-detail
  #lstDetail
  [title]="headerText"
  [formModel]="formModel"
  [footer]="footer"
  [dialog]="dialog"
  [data]="awardObj"
  [leftTemlate]="LeftTemlate"
  [RightTemlate]="body"
  *ngIf="isAfterRender"
>
  <ng-template #body>
    <div class="form-group row">
      <codx-label fiedName="AwardID" [formModel]="formModel"></codx-label>
      <codx-input
        field="awardID"
        [formModel]="formModel"
        [Group]="formGroup"
        (valueChange)="valueChange($event)"
      ></codx-input>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="AwardDate" [formModel]="formModel"></codx-label>
        <codx-input
          field="awardDate"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="handleSelectAwardDate($event)"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label fiedName="InYear" [formModel]="formModel"></codx-label>
        <ejs-datepicker
          #picker
          start="Decade"
          depth="Decade"
          [value]="valueYear"
          [format]="'y'"
          locale="vi"
          (change)="inYearSelect($event)"
        >
        </ejs-datepicker>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label
          fiedName="AwardFormCategory"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="awardFormCategory"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="AwardLevelCategory"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="awardLevelCategory"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <codx-label fiedName="AwardPlace" [formModel]="formModel"></codx-label>
      <codx-input
        field="awardPlace"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label fiedName="Reason" [formModel]="formModel"></codx-label>
      <codx-input
        field="reason"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <hr />

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="DecisionNo" [formModel]="formModel"></codx-label>
        <codx-input
          field="decisionNo"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label fiedName="SignedDate" [formModel]="formModel"></codx-label>
        <codx-input
          field="signedDate"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <div class="d-flex flex-stack mb-4">
        <codx-label fiedName="Signer" [formModel]="formModel"></codx-label>
        <codx-input
          field="signerID"
          [formModel]="formModel"
          [showInput]="false"
          [multiple]="false"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>

      <codx-input
        field="signer"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label
        fiedName="SignerPosition"
        [formModel]="formModel"
      ></codx-label>
      <codx-input
        field="signerPosition"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label fiedName="Note" [formModel]="formModel"></codx-label>
      <codx-input
        field="note"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
  </ng-template>

  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <button class="btn btn-primary" (click)="onSaveForm()">
        <i class="icon-save"></i>
        <codx-label
          default="LÆ°u"
          name="lblSave"
          [formModel]="formModel"
        ></codx-label>
      </button>
    </div>
  </ng-template>
</layout-list-detail>

<ng-template #LeftTemlate>
  <codx-listview
    #listView
    [type]="'cardView'"
    [service]="'HR'"
    [assemblyName]="'HR'"
    [entityName]="'HR_EAwards'"
    [className]="'EAwardsBusiness'"
    [method]="'GetListAwardByDataRequestAsync'"
    [predicate]="'EmployeeID=@0'"
    [dataValue]="employId"
    [itemTemplate]="itemTemplate"
    (afterRender)="afterRenderListView($event)"
    [selectFirst]="true"
  ></codx-listview>
</ng-template>

<ng-template #itemTemplate let-data>
  <codx-temp-full
    [formModel]="formModel"
    [typeMF]="'hover'"
    [title]="data.awardPlace"
    [icoTitleCss]="'icon-i-question-circle-fill icon-16 ms-1 pb-1'"
    [subTitleTmp]="tmplateEAWardsMenuList"
    cardCss="card codx_cardcenter px-2 pt-4 pb-2  "
    [hideMF]="true"
    typeMF="hover"
    [dataItem]="data"
    (click)="click(data)"
  ></codx-temp-full>
</ng-template>

<ng-template #tmplateEAWardsMenuList let-data>
  <div class="d-flex flex-column ps-1">
    <div class="d-flex align-items-center pb-1 pt-1">
      <i class="icon-event icon-18 pe-1 "></i>
      {{ data.issuedDate | date : "yyyy" }}
      <i class="icon-i-arrow-down-left-circle-fill icon_style pe-1"></i>
      {{ data.awardDate | fmDT }}
      <i class="icon-i-layout-text-sidebar-reverse icon-12 pe-1 ps-1"></i>
      {{ data.decisionNo }}
    </div>
    <div class="d-flex align-items-center">
      <i class="icon-edit pe-1"></i>{{ data.awardFormCategory }}
    </div>
  </div>
  <div><i class="icon-edit_fill"></i>{{ data.awardFormCategory }}</div>
</ng-template> -->

<codx-form
  #form
  [headerText]="headerText"
  [body]="body"
  [formModel]="formModel"
  [footer]="footer"
  [dialog]="dialog"
  [data]="awardObj"
  *ngIf="isAfterRender"
>
  <ng-template #body>
    <div *ngIf="fromListView" class="form-group row d-flex flex-row">
      <div class="col-10">
        <div class="d-flex">
          <div class="d-flex flex-column position-relative">
            <codx-img
              [width]="40"
              class="me-3"
              [objectId]="empObj?.employeeID"
              [referType]="'avt'"
              [objectName]="empObj?.employeeName"
              [objectType]="'HR_Employees'"
            >
            </codx-img>
          </div>
          <div class="d-flex flex-column">
            <div class="text-dark fw-bold">
              <span>
                {{ empObj?.employeeName }}
              </span>
            </div>
            <div class="text-gray-700" *ngIf="empObj?.positionID">
              <span
                [innerHTML]="
                  empObj?.positionID
                    | formatvalue : formModel : 'positionID'
                    | async
                "
              ></span>
            </div>
            <span class="text-gray-700" *ngIf="empObj.orgUnitName">{{
              empObj?.orgUnitName
            }}</span>
            <!-- <div class="text-gray-700" *ngIf="empObj?.orgUnitID">
              <span
                [innerHTML]="
                  empObj?.orgUnitID
                    | formatvalue : formModel : 'orgUnitID'
                    | async
                "
              ></span>
            </div> -->
          </div>
        </div>
      </div>
      <div class="col-2 d-flex justify-content-end">
        <codx-input
          [showInput]="false"
          field="employeeID"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="handleSelectEmp($event)"
        >
        </codx-input>
      </div>
      <!-- <div class="col-6">
        <div class="d-flex align-items-start">
          <div class="d-flex flex-column me-2">
            <codx-img [width]="35" [objectId]="empObj?.employeeID" [referType]="'avt'"
              [objectName]="empObj?.employeeName" [objectType]="'HR_Employees'">
            </codx-img>
          </div>
          <div class="d-flex flex-column">
            <div class="me-2 text-dark fw-bold text-nowrap">
              <span>{{ empObj?.employeeName }}</span>
            </div>
            <div class="text-gray-500 fs-7">
              <span [innerHTML]="empObj?.positionID"></span>
            </div>
            <div class="text-gray-700">
              <span [innerHTML]="empObj?.orgUnitID"></span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-6" *ngIf="actionType != 'edit'">
        <codx-label fiedName="EmployeeID" [formModel]="formModel"></codx-label>
        <codx-input field="employeeID" [formModel]="formModel" [Group]="formGroup"
          (valueChange)="handleSelectEmp($event)">
        </codx-input>
      </div> -->
    </div>

    <div class="form-group row mt-5">
      <codx-label fiedName="AwardID" [formModel]="formModel"></codx-label>
      <codx-input
        field="awardID"
        [formModel]="formModel"
        [Group]="formGroup"
        (valueChange)="valueChange($event)"
      ></codx-input>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="AwardDate" [formModel]="formModel"></codx-label>
        <codx-input
          field="awardDate"
          [formModel]="formModel"
          [Group]="formGroup"
          (valueChange)="handleSelectAwardDate($event)"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label fiedName="InYear" [formModel]="formModel"></codx-label>
        <ejs-datepicker
          #picker
          start="Decade"
          depth="Decade"
          [value]="valueYear"
          [format]="'y'"
          locale="vi"
          (change)="inYearSelect($event)"
        >
        </ejs-datepicker>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-6">
        <codx-label
          fiedName="AwardFormCategory"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="awardFormCategory"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label
          fiedName="AwardLevelCategory"
          [formModel]="formModel"
        ></codx-label>
        <codx-input
          field="awardLevelCategory"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <codx-label fiedName="AwardPlace" [formModel]="formModel"></codx-label>
      <codx-input
        field="awardPlace"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label fiedName="Reason" [formModel]="formModel"></codx-label>
      <codx-input
        field="reason"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>

    <hr />

    <div class="form-group row">
      <div class="col-6">
        <codx-label fiedName="DecisionNo" [formModel]="formModel"></codx-label>
        <codx-input
          field="decisionNo"
          [formModel]="formModel"
          [disabled]="autoNumField === 'DecisionNo'"
          [Group]="formGroup"
        ></codx-input>
      </div>
      <div class="col-6">
        <codx-label fiedName="SignedDate" [formModel]="formModel"></codx-label>
        <codx-input
          field="signedDate"
          [formModel]="formModel"
          [Group]="formGroup"
        ></codx-input>
      </div>
    </div>

    <div class="form-group row">
      <div class="d-flex flex-stack">
        <codx-label fiedName="Signer" [formModel]="formModel"></codx-label>
        <codx-input
          field="signerID"
          [Group]="formGroup"
          [formModel]="formModel"
          [showInput]="true"
          [multiple]="false"
          (valueChange)="handleSelectEmp($event)"
        >
        </codx-input>
      </div>

      <codx-input
        field="signer"
        [formModel]="formModel"
        [Group]="formGroup"
        [disabled]="awardObj?.signerID ? true : false"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label
        fiedName="SignerPosition"
        [formModel]="formModel"
      ></codx-label>
      <codx-input
        field="signerPosition"
        [formModel]="formModel"
        [Group]="formGroup"
        [disabled]="awardObj?.signerID ? true : false"
      ></codx-input>
    </div>

    <div class="form-group row">
      <codx-label fiedName="Note" [formModel]="formModel"></codx-label>
      <codx-input
        field="note"
        [formModel]="formModel"
        [Group]="formGroup"
      ></codx-input>
    </div>
  </ng-template>
</codx-form>

<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button class="btn btn-primary" (click)="onSaveForm()" [disabled]="!formModel.currentData.updateColumn">
      <i class="icon-save"></i>
      <codx-label
        default="LÆ°u"
        name="lblSave"
        [formModel]="formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>
