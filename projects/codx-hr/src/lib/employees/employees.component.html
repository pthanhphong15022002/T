<codx-views #view service="HR" entityName="HR_Employees" [views]="views" [button]="button" 
  (buttonClick)="btnClick($event)"
  idField="employeeID" assemblyName="ERM.Business.HR" className="EmployeesBusiness" method="GetModelFormEmployAsync"
  [selectedFirst]="true" [itemSelected]="itemSelected">
</codx-views>

<ng-template #panelLeftRef>
  <div class="content d-flex flex-column flex-column-fluid paneltree">
    <div class="contact-orgchat">
      <codx-treeview id="chartOrg" #chartOrg [pageSize]="10" [itemTemplate]="templateTree" funcId="HRS0201"
        entityName="HR_OrganizationUnits" service="HR" type="treeView" textField="orgUnitName"
        gridViewName="grvOrganizationUnits" formName="OrganizationUnits" [enableCheck]="false" idField="orgUnitID"
        (onSelectionChanged)="onSelectionChanged($event)">
      </codx-treeview>
    </div>
  </div>
</ng-template>

<ng-template #templateTree let-data>
  <span>{{ data.orgUnitName }}</span>
</ng-template>

<ng-template #cardTemp let-data>
  <ng-container>
    <div (dblclick)="doubleClick(data)">
      <codx-card-center cardCss="border w-250px h-200" [formModel]="view.formModel" [imageId]="data.employeeID"
        [imageObjType]="view.formModel.entityName" [imgOn]="data?.modifiedOn" [imageObjName]="data.employeeName"
        [title]="placeholder(data.employeeName, view.formModel, 'EmployeeName') | async"
        [subTitle]="placeholder(data.positionName, view.formModel, 'PositionID') | async" [dataItem]="data"
        [desc]="placeholder(data.birthday | fmDT,view.formModel,'Birthday') | async" [footer]="footer"
        [typeMF]="'hover'" (clickMF)="clickMF($event, data)">
      </codx-card-center>
    </div>
  </ng-container>
</ng-template>

<ng-template #footer let-data>
  <div class="d-flex align-items-top mt-2">
    <span class="icon-email icon-16 me-2"> </span>
    <span class="text-dark fw-bold">
      <span #email>{{
        data.email | formatvalue: view.formModel:"email":email | async
        }}</span>
    </span>
  </div>
  <div class="d-flex align-items-center">
    <span class="icon-phone_android icon-16 me-2"></span>
    <span class="text-dark fw-bold">
      <span #phone>{{
        data.phone | formatvalue: view.formModel:"phone":phone | async
        }}</span>
    </span>
  </div>
</ng-template>

<ng-template #itemAction let-data>
  <codx-mfunc 
    [formModel]="view.formModel" 
    (clickMF)="clickMF($event, data)"
    [dataItem]="data" [typeMF]="'hover'">
  </codx-mfunc>
</ng-template>

<ng-template #itemEmployee let-data>
  <div (dblclick)="doubleClick(data)" class="w-100">
    <div class="d-flex align-items-top">
      <div class="d-flex align-items-start">
        <codx-img [width]="35" class="me-3" [objectId]="data.employeeID" [objectName]="data.employeeName"
          objectType="HR_Employees">
        </codx-img>
        <div class="d-flex flex-column flex-grow-1">
          <div class="float-left">
            <div class="text-dark fw-bold fs-6 me-2 text-nowrap">
              {{ data.employeeName }}
            </div>
            <codx-vll 
              class="badge badge-sm" 
              [name]="'HR001'" 
              [value]="data.gender" 
              [showText]="true"
              [showBgColor]="true">
            </codx-vll>
          </div>
          <div class="text-gray-700">
            <span #positionName>{{
              data.positionName
              | formatvalue: view.formModel:"positionID":positionName
              | async
              }}</span>
          </div>

          <div class="text-gray-700">
            <span #organizationName>{{
              data.organizationName
              | formatvalue: view.formModel:"orgUnitID":organizationName
              | async
              }}</span>
          </div>

          <div class="text-gray-700">
            <span #departmentName>{{
              data.departmentName
              | formatvalue: view.formModel:"departmentID":departmentName
              | async
              }}</span>
            <span #divisionName>{{
              data.divisionName
              | formatvalue: view.formModel:"divisionID":divisionName
              | async
              }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemContact let-data>
  <div (dblclick)="doubleClick(data)" class="w-100">
    <div class="d-flex flex-column employee-add">
      <div class="d-flex">
        <span class="icon-email icon-16 text-gray-600 me-2"></span>
        <span class="text-dark">
          <span #email>{{
            data.email | formatvalue: view.formModel:"email":email | async
            }}</span>
        </span>
      </div>
      <div class="d-flex my-1">
        <span class="icon-phone_android icon-16 text-gray-600 me-2"></span>
        <span class="text-dark">
          <span #phone>{{
            data.phone | formatvalue: view.formModel:"phone":phone | async
            }}</span>
        </span>
      </div>
      <div class="d-flex">
        <span class="icon-place icon-16 text-gray-600 me-2"></span>
        <span class="text-dark">
          <span #street>{{
            data.street | formatvalue: view.formModel:"street":street | async
            }}</span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemInfoPersonal let-data>
  <div (dblclick)="doubleClick(data)" class="w-100">
    <div class="d-flex flex-column employee-info">
      <div class="d-flex align-items-center">
        <span class="text-gray-600 me-1">
          <codx-label name="lblBirthday" formName="Employees" default="Ngày sinh: "></codx-label>
        </span>
        <span class="text-dark fw-bold">
          <span #birthday>{{data.birthday | formatvalue: view.formModel:"birthday":birthday| async}}</span>
        </span>
      </div>
      <div class="d-flex align-items-center my-1">
        <span class="text-gray-600 me-1">
          <codx-label name="lblBirthPlace" formName="Employees" default="Nơi sinh: "></codx-label>
        </span>
        <span class="text-dark fw-bold">
          <span #birthPlace>{{data.provinceName | formatvalue: view.formModel:"birthPlace":birthPlace | async}}</span>
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="text-gray-600 me-1">
          <codx-label name="lblEducation" formName="Employees" default="Trình độ: "></codx-label>
        </span>
        <span class="text-dark fw-bold">
          <span #education>{{
            data.education
            | formatvalue: view.formModel:"education":education
            | async
            }}</span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemStatusName let-data>
  <div (dblclick)="doubleClick(data)" class="w-100">
    <div class="d-flex flex-column employee-info">
      <div class="d-flex">
        <!-- <span class="badge badge-success badge-sm badge-inline" [style.background]="data.statusColor">
          {{data.statusName}}
        </span> -->
        <span class="badge badge-success badge-sm badge-inline"
          [style.background]="data.status | vll:'L0225':'color' | async">
          {{data.status | vll:'L0225' : 'text' | async}}
        </span>
      </div>
      <div class="align-items-center my-1">
        <span class="text-gray-600 me-1">
          <codx-label name="lblJoinedOn" formName="Employees" default="Ngày vào làm: ">
          </codx-label>
        </span>
        <ng-container *ngIf="data.joinedOn">
          <span class="text-gray-800">
            <span #joinedOn>{{data.joinedOn | formatvalue: view.formModel:"joinedOn":joinedOn | async}}</span>
          </span>
        </ng-container>
      </div>
      <div class="align-items-center">
        <span class="text-gray-600 me-1">
          <codx-label name="lblSenioritydate" formName="Employees" default="Thâm niên: ">
          </codx-label>
        </span>
        <span>{{data.senioritydate | timeAgo}}</span>
      </div>
    </div>
  </div>
</ng-template>