<codx-views
  #view
  service="HR"
  entityName="HR_Employees"
  [views]="views"
  [button]="button"
  (buttonClick)="btnClick()"
  idField="employeeID"
  assemblyName="ERM.Business.Core"
  className="DataBusiness"
  method="LoadDataAsync"
  [selectedFirst]="true"
  [itemSelected]="itemSelected"
>
</codx-views>

<ng-template #panelLeftRef>
  <div class="content d-flex flex-column flex-column-fluid paneltree">
    <div class="contact-orgchat">
      <codx-treeview
        id="chartOrg"
        #chartOrg
        [pageSize]="10"
        [itemTemplate]="templateTree"
        funcId="HRS0201"
        entityName="HR_OrganizationUnits"
        service="HR"
        type="treeView"
        textField="orgUnitName"
        gridViewName="grvOrganizationUnits"
        formName="OrganizationUnits"
        [enableCheck]="false"
        idField="orgUnitID"
        (onSelectionChanged)="onSelectionChanged($event)"
      >
      </codx-treeview>
    </div>
  </div>
</ng-template>

<ng-template #templateTree let-data>
  <span>{{ data.orgUnitName }}</span>
</ng-template>

<ng-template #cardTemp let-data>
  <ng-container>
    <div (dblclick)="doubleClick(data)">
      <codx-card-center
        cardCss="border w-250px h-200"
        [formModel]="view.formModel"
        [imageId]="data.employeeID"
        [imageObjType]="view.formModel.entityName"
        [imgOn]="data?.modifiedOn"
        [imageObjName]="data.employeeName"
        [title]="
          data?.employeeName
            | formatvalue : view.formModel : 'employeeName'
            | async
        "
        [subTitle]="
          data?.positionID | formatvalue : view.formModel : 'positionID' | async
        "
        [dataItem]="data"
        [desc]="
          data?.birthday | formatvalue : view.formModel : 'birthday' | async
        "
        [footer]="footer"
        [typeMF]="'hover'"
        (clickMF)="clickMF($event, data)"
      >
      </codx-card-center>
    </div>
  </ng-container>
</ng-template>

<ng-template #footer let-data>
  <div class="d-flex align-items-top mt-2">
    <span class="icon-email icon-16 me-2"> </span>
    <span class="text-dark fw-bold">
      <span #email>{{
        data.email | formatvalue : view.formModel : "email" : email | async
      }}</span>
    </span>
  </div>
  <div class="d-flex align-items-center">
    <span class="icon-phone_android icon-16 me-2"></span>
    <span class="text-dark fw-bold">
      <span #phone>{{
        data.phone | formatvalue : view.formModel : "phone" : phone | async
      }}</span>
    </span>
  </div>
</ng-template>

<ng-template #itemAction let-data>
  <codx-mfunc
    [formModel]="view.formModel"
    [itemSelected]="itemSelected"
    (clickMF)="clickMF($event, data)"
    [dataItem]="data"
    [typeMF]="'hover'"
  >
  </codx-mfunc>
</ng-template>

<ng-template #itemEmployee let-data>
  <div (dblclick)="doubleClick(data)">
    <div class="d-flex align-items-top">
      <div class="d-flex align-items-start">
        <codx-img
          [width]="40"
          class="me-4"
          [objectId]="data.employeeID"
          [objectName]="data.employeeName"
          objectType="HR_Employees"
        >
        </codx-img>
        <div class="d-flex flex-column flex-grow-1">
          <div class="d-flex align-items-center">
            <div class="text-dark fw-bold fs-6 me-2 text-nowrap">
              {{ data.employeeName }}
            </div>
            <div
              class="badge badge-success badge-sm badge-inline flex-wrap"
              *ngIf="data.gender"
              [style.background]="data.genderColor"
            >
              {{ data.gender | vll : "HR001" : "text" | async }}
            </div>
          </div>

          <span class="text-dark">
            <span #positionName>{{
              data?.positionID
                | formatvalue : view.formModel : "positionID"
                | async
            }}</span>
          </span>

          <span class="text-dark">
            <span #organizationName>{{
              data?.orgUnitID
                | formatvalue : view.formModel : "orgUnitID"
                | async
            }}</span>
          </span>

          <div>
            <span class="text-dark">
              <span #departmentName>{{
                data?.departmentID
                  | formatvalue : view.formModel : "departmentID"
                  | async
              }}</span>
            </span>

            <span class="text-gray-400"> | </span>

            <span class="text-dark">
              <span #divisionName>{{
                data?.divisionID
                  | formatvalue : view.formModel : "divisionID"
                  | async
              }}</span>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemContact let-data>
  <div (dblclick)="doubleClick(data)">
    <div class="d-flex flex-column employee-add">
      <div class="d-flex align-items-center">
        <span class="icon-email icon-16 text-gray-800 me-1"></span>
        <span class="text-dark fw-bold">
          <span #email>{{
            data.email | formatvalue : view.formModel : "email" : email | async
          }}</span>
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="icon-phone_android icon-16 text-gray-800 me-1"></span>
        <span class="text-dark fw-bold">
          <span #phone>{{
            data.phone | formatvalue : view.formModel : "phone" : phone | async
          }}</span>
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="icon-place icon-16 text-gray-800 me-1"></span>
        <span class="text-dark fw-bold">
          <span #street>{{
            data.street
              | formatvalue : view.formModel : "street" : street
              | async
          }}</span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemInfoPersonal let-data>
  <div (dblclick)="doubleClick(data)">
    <div class="d-flex flex-column employee-info">
      <div class="align-items-center1 fs-7">
        <span class="text-gray-600 me-1">
          <codx-label
            name="lblBirthday"
            formName="Employees"
            default="Ngày sinh: "
          ></codx-label>
        </span>
        <span class="text-dark fw-bold">
          <span #birthday>{{
            data.birthday
              | formatvalue : view.formModel : "birthday" : birthday
              | async
          }}</span>
        </span>
      </div>
      <div class="align-items-center fs-7">
        <span class="text-gray-600 me-1">
          <codx-label
            name="lblBirthPlace"
            formName="Employees"
            default="Nơi sinh: "
          ></codx-label>
        </span>

        <span class="text-dark fw-bold">
          <span #birthPlace>{{
            data?.birthPlace
              | formatvalue : view.formModel : "birthPlace"
              | async
          }}</span>
        </span>
      </div>
      <div class="align-items-center fs-7">
        <span class="text-gray-600 me-1">
          <codx-label
            name="lblEducation"
            formName="Employees"
            default="Trình độ: "
          ></codx-label>
        </span>

        <span class="text-dark fw-bold">
          <span #education>{{
            data.education
              | formatvalue : view.formModel : "education" : education
              | async
          }}</span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #itemStatusName let-data>
  <div (dblclick)="doubleClick(data)">
    <div class="d-flex flex-column employee-info">
      <div class="d-flex">
        <codx-vll
          field="Status"
          [formModel]="view.formModel"
          [value]="data.status"
          [showBgColor]="true"
          [showIcon]="false"
          [showText]="true"
        >
        </codx-vll>
        <span
          #statusName
          class="badge badge-success badge-sm badge-inline"
          [style.background]="data.statusColor"
        >
          <!-- {{ data?.statusName | formatvalue : HRT03a : "statusName" | async }} -->
          <!-- {{
            data.statusName
              | formatvalue: view.formModel: "statusName" : statusName
              | async
          }} -->
          {{ data?.status | formatvalue : view.formModel : "status" | async }}
        </span>
      </div>

      <div class="align-items-center fs-7 mt-1">
        <span class="text-gray-600 me-1">
          <codx-label
            name="lblJoinedOn"
            formName="Employees"
            default="Ngày vào làm: "
          >
          </codx-label>
        </span>
        <ng-container *ngIf="data.joinedOn">
          <span class="text-gray-800">
            <span #joinedOn>{{
              data.joinedOn
                | formatvalue : view.formModel : "joinedOn" : joinedOn
                | async
            }}</span>
          </span>
        </ng-container>
      </div>
      <div class="align-items-center fs-7">
        <span class="text-gray-600 me-1">
          <codx-label
            name="lblSenioritydate"
            formName="Employees"
            default="Thâm niên: "
          >
          </codx-label>
        </span>
        <span>{{ data.senioritydate | timeAgo }}</span>
      </div>
    </div>
  </div>
</ng-template>
