<codx-views #view idField="employeeID" [views]="views" [autoLoad]="true">
</codx-views>
<ng-template #panelContent>
  <div class="page-pw h-employee pb-0">
    <div class="page-profile">
      <div class="d-flex" style="margin-top: 20px">
        <!-- Side Bar -->
        <div class="me-4" style="min-width: fit-content !important; max-width: 370px !important">
          <!-- Card Info -->
          <div class="d-flex flex-column">
            <div class="info-card-header d-flex align-items-center">
              <!-- Image -->
              <div class="d-flex justify-content-center mx-5 text-center" style="height: 77px">
                <div class="position-relative" style="top: -15px">
                  <codx-img [funcId]="funcID" [objectId]="infoPersonal?.employeeID"
                    [objectName]="infoPersonal?.employeeName" [objectType]="'HR_Employees'" [imageType]="'circle'"
                    [isAllowEdit]="true" [updateDirect]="true" [isAllowChangeInputID]="true" class="pic-emloyee"
                    [width]="60">
                  </codx-img>

                  <div ngbDropdown class="position-absolute" style="top: 37px; left: 45px">
                    <span type="button" class="btn btn-icon btn-sm rounded-circle" style="background-color: #0BB51C"
                      ngbDropdownToggle>
                      <i class="icon-keyboard_arrow_down" style="color: white"></i>
                    </span>
                    <div ngbDropdownMenu class="" style="min-width: 400px">
                      <div class="card card-flush" *ngIf="eInfoFormModel && LoadedEInfo == true">
                        <div class="card-body py-2 px-3">
                          <div class="d-flex flex-column">
                            <div class="d-flex flex-wrap align-items-center mb-2">
                              <div class="d-flex align-items-bottom me-2">
                                <span class="icon-cake icon-16 text-gray-800 me-1"></span>
                                <span class="text-dark fw-bold">
                                  <span [innerHTML]="
                                    infoPersonal?.birthday
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'birthday'
                                      | async
                                  "></span>
                                </span>
                              </div>
                              <div class="d-flex align-items-center">
                                <span #gender>
                                  <codx-vll [name]="'HRGender'" [showText]="true" [field]="'Gender'"
                                    [showBgColor]="true" [formModel]="eInfoFormModel" [showIcon]="false"
                                    [value]="infoPersonal?.gender">
                                  </codx-vll>
                                </span>
                              </div>
                              <div class="d-flex align-items-center">
                                <span class="icon-i-info-circle-fill icon-6 me-2 text-gray-400"></span>
                                <span class="fw-bold" [innerHTML]="
                                  infoPersonal?.maritalStatus
                                    | formatvalue
                                      : eInfoFormModel
                                      : 'maritalStatus'
                                    | async
                                ">
                                </span>
                              </div>
                            </div>
                            <div class="d-flex align-items-center mb-2">
                              <span class="text-dark">
                                <span [innerHTML]="
                                  infoPersonal?.personalEmail
                                    | formatvalue
                                      : eInfoFormModel
                                      : 'personalEmail'
                                    | async
                                "></span>
                              </span>
                            </div>

                            <div class="d-flex justify-content-between mb-2">
                              <codx-label class="text-gray-700" fiedName="PITNumber" [formModel]="eInfoFormModel">
                              </codx-label>
                              <span [innerHTML]="
                                infoPersonal?.pitNumber
                                  | formatvalue : eInfoFormModel : 'pitNumber'
                                  | async
                              "></span>
                            </div>

                            <div class="d-flex d-flex justify-content-between mb-2">
                              <codx-label class="text-gray-700" fiedName="SIRegisterNo" [formModel]="eInfoFormModel">
                              </codx-label>
                              <span class="text-dark" [innerHTML]="
                                infoPersonal?.siRegisterNo
                                  | formatvalue
                                    : eInfoFormModel
                                    : 'siRegisterNo'
                                  | async
                              "></span>
                            </div>
                            <hr class="m-0" />
                            <div class="info-dropdownlist pt-2">
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel" fiedName="joinedOn">
                                </codx-label>
                                <span class="text-dark fw-bold">
                                  <span [innerHTML]="
                                    infoPersonal?.joinedOn
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'joinedOn'
                                      | async
                                  "></span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel" fiedName="hiredOn">
                                </codx-label>
                                <span class="text-dark">
                                  <span [innerHTML]="
                                    infoPersonal?.hiredOn
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'hiredOn'
                                      | async
                                  "></span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eContractFormModel"
                                  fiedName="ContractTypeID" [default]="'Hợp đồng hiện tại'">
                                </codx-label>
                                <span class="text-primary">
                                  <span [innerHTML]="
                                    crrEContract?.contractTypeID
                                      | formatvalue
                                        : eContractFormModel
                                        : 'contractTypeID'
                                      | async
                                  "></span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel"
                                  fiedName="EmployeeTypeID">
                                </codx-label>
                                <span class="text-primary">
                                  <span [innerHTML]="
                                    infoPersonal?.employeeTypeID
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'employeeTypeID'
                                      | async
                                  "></span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel" fiedName="DomainUser">
                                </codx-label>
                                <span class="text-primary">
                                  <span [innerHTML]="
                                    infoPersonal?.domainUser
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'domainUser'
                                      | async
                                  ">
                                  </span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel" fiedName="lineManager">
                                </codx-label>
                                <span *ngIf="loadedLineManager">
                                  <span *ngIf="lineManager; else noLineManagerInfo2" class="fw-bold text-dark">
                                    {{ lineManager?.employeeName }}
                                  </span>
                                  <ng-template #noLineManagerInfo2>
                                    <span class="fw-bold text-dark" [innerHTML]="
                        null
                          | formatvalue : eInfoFormModel : 'lineManager'
                          | async
                      "></span>
                                  </ng-template>
                                </span>
                              </div>

                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel" fiedName="timeCardNo">
                                </codx-label>

                                <span class="text-dark fw-bold">
                                  <span>{{ infoPersonal?.timeCardNo }}</span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel"
                                  fiedName="shiftCalendarID">
                                </codx-label>
                                <span class="text-dark fw-bold">
                                  <span>{{
                                    infoPersonal?.shiftCalendarID
                                    }}</span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between mb-3">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel" fiedName="ALObjectID">
                                </codx-label>

                                <span class="text-dark fw-bold">
                                  <span [innerHTML]="
                                    infoPersonal?.alObjectID
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'alObjectID'
                                      | async
                                  "></span>
                                </span>
                              </div>
                              <div class="d-flex justify-content-between">
                                <codx-label class="text-gray-700" [formModel]="eInfoFormModel"
                                  fiedName="payrollGroupID">
                                </codx-label>

                                <span class="text-dark fw-bold">
                                  <span [innerHTML]="
                                    infoPersonal?.payrollGroupID
                                      | formatvalue
                                        : eInfoFormModel
                                        : 'payrollGroupID'
                                      | async
                                  "></span>
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Image -->
              <!-- Content -->
              <div class="mx-2">
                <div class="d-flex flex-wrap">
                  <div class="fs-7 d-flex flex-wrap align-items-center fw-boldest">
                    <span class="fw-bold" placement="bottom" [title]="eInfoHeaderText?.EmployeeName"
                      style="color: white">
                      {{ infoPersonal?.employeeName }}</span>
                      <div class="d-flex">
                        <span class="icon-16 icon-qr_code_scanner mx-1"></span>
                        <span style="margin-top: 2px; color: #FF001B" #id placement="bottom"
                          [title]="eInfoHeaderText?.EmployeeID">
                          {{ employeeID}}</span>
                      </div>
                  </div>
                </div>
                <div placement="bottom" [title]="eInfoHeaderText?.PositionID" class="d-flex" style="color: #F3F3F3"
                  *ngIf="infoPersonal">
                  {{this.infoPersonal.PositionName}}
                </div>
                <div class="d-flex" style="color: #D3E8FF">
                  <div [title]="eInfoHeaderText?.OrgUnitID" *ngIf="infoPersonal">{{orgUnitStr}}
                  </div>

                  <!-- <div [title]="eInfoHeaderText?.DepartmentID" *ngIf="infoPersonal && orgUnitStr != DepartmentStr">
                    {{DepartmentStr}}</div> -->
                </div>
              </div>
              <!-- End Content -->
              <!-- QR -->
              <div>
                <img class="w-50px" src="..\src\assets\img\feedback\gift 1.png">
              </div>
              <!-- End QR -->
            </div>

          </div>
          <!-- End Card -->

          <!-- Tree View -->

          <div class="tree-bar bg-white border-bottom d-flex flex-column mt-5" *ngIf="infoPersonal && LoadedEInfo == true">
            <div class="d-flex flex-column flex-wrap justify-content-center mb-1">
              <div class="w-100" style="border-bottom: 1px lightgray solid">
                <lib-sidebar-treeview></lib-sidebar-treeview>
              </div>
              <div style="text-align: center;">
                <button class="border-0 bg-white pt-3" style="font-size: 13px; display: inline-flex; align-items: center; color: #005DC7;">
                    <i class="icon-i-chevron-double-down" style="margin-right: 5px; color: #005DC7;"></i>
                    Mở rộng
                </button>
            </div>
            </div>
          </div>
          
          <!-- End TreeView -->
          <!-- Employee -->
          <div class="bg-white border mt-5 user-left">
            <div>
              <!-- <codx-listview
              entityName="HR_Employees"
              idField="employeeID"
              service="HR"
              assemblyName="ERM.Business.HR"
              className="EmployeesBusiness_Old"
              method="GetModelFormEmployAsync"
              [headerTemplate]="headerList"
              [itemTemplate]="itemTemplateList"
              [selectFirst]="true"
                >
              </codx-listview> -->
              <div>
                <div class="align-items-center d-flex justify-content-between mb-5 mt-5 px-4">
                  <span>Nhân viên</span>
                  <div>
                    <button class="btn-add"><i class="icon-add"></i><span>Thêm</span></button>
                    <button><i class="icon-i-chevron-down"></i></button>
                  </div>
                </div>
                <div class="px-3">
                  <codx-searchbar></codx-searchbar>
                </div>
              </div>
              <!-- List Employee -->
              <ng-container *ngFor="let person of dataMyTeam; index as i;">
                <div class="d-flex flex-row gap-3 align-items-center pointer py-3 px-3">
                  <div class="user-avatar">
                    <codx-img [funcId]="'HRT03b'" [objectId]="'2308070001'" [objectName]="'Nguyễn Công Phượng'"
                      [objectType]="'HR_Employees'" [imageType]="'circle'" class="user-img" [width]="40">
                    </codx-img>
                    <div class="user-status " [ngClass]="{}"></div>
                  </div>
                  <div class="d-flex flex-column align-items-start gap-1">
                    <div class="name fs-6 fw-bold">{{person.name}}</div>
                    <div class="text-gray-500">{{person.job}}</div>
                    <div class="YOW fw-bold">{{person.YOW}}</div>
                  </div>
                </div>
              </ng-container>
            </div>

            <!-- <div class="user-menu scroll-y w-100 border-top">
              
              <ul class="nav nav-tabs nav-pills flex-column border-0 p-3 pb-0 w-100">
                <ng-container *ngFor="let item of lstTab; let index = index">
                  <li class="nav-item w-100 mb-1">
                    <a class="nav-link w-100 btn btn-lg btn-clean" data-bs-toggle="tab" [id]="'tab_' + index"
                      [class]="crrFuncTab == item.functionID ? 'active' : ''" (click)="clickTab(item)">
                      <div class="d-flex align-items-center">
                        <span class="icon-18 me-2" [ngClass]="
                          item?.largeIcon ? item?.largeIcon : 'icon-person'
                        "></span>
                        <div class="fw-bold">
                          {{ item.customName }}
                        </div>
                      </div>
                    </a>
                  </li>
                </ng-container>
              </ul>
            </div> -->
          </div>
          <!-- End Employee -->
        </div>

        <div class="w-100 user-right overflow-hidden">
          <div class="tab-content">
            <!-- Pane 1: Sơ yếu lí lịch -->
            <div *ngIf="curriculumVitaeFunc && curriculumVitaeFunc.isActive == true" class="tab-pane fade show"
              id="pane_1" [class]="crrFuncTab == curriculumVitaeFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="curriculumVitae"></ng-container>
            </div>
            <!-- Pane 2: Thông tin công việc-->
            <div *ngIf="jobInfoFunc && jobInfoFunc.isActive == true" class="tab-pane fade show" id="pane_2"
              [class]="crrFuncTab == jobInfoFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="jobInfo"></ng-container>
            </div>
            <!-- Pane 3: Lương phúc lợi-->
            <div *ngIf="salaryBenefitInfoFunc && salaryBenefitInfoFunc.isActive == true" class="tab-pane fade show"
              id="pane_3" [class]="crrFuncTab == salaryBenefitInfoFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="benefit"></ng-container>
            </div>
            <!-- Pane 4: Quá trình làm việc-->
            <div *ngIf="workingProcessInfoFunc && workingProcessInfoFunc.isActive == true" class="tab-pane fade show"
              id="pane_4" [class]="crrFuncTab == workingProcessInfoFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="workingProcess"></ng-container>
            </div>
            <!-- Pane 5: Kiến thức-->
            <div *ngIf="knowledgeInfoFunc && knowledgeInfoFunc.isActive == true" class="tab-pane fade show" id="pane_5"
              [class]="crrFuncTab == knowledgeInfoFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="knowledge"></ng-container>
            </div>
            <!-- Pane 6: Sức khỏe-->
            <div *ngIf="healthInfoFunc && healthInfoFunc.isActive == true " class="tab-pane fade show" id="pane_6"
              [class]="crrFuncTab == healthInfoFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="healthInfo"></ng-container>
            </div>
            <!-- Pane 7: Nghỉ việc -->
            <div *ngIf="quitJobInfoFunc && quitJobInfoFunc.isActive == true " class="tab-pane fade show" id="pane_7"
              [class]="crrFuncTab == quitJobInfoFuncID ? 'active' : ''">
              <ng-container [ngTemplateOutlet]="quitJob"></ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- panel Sơ yếu lí lịch -->
<ng-template #curriculumVitae>
  <div class="tab-scroll mb-4">
    <div class="tab-horizone bg-white h-od-tab">
      <ul class="align-items-end justify-content-between nav nav-tabs px-4 tab-height">
        <ng-container *ngFor="let item of lstFuncCurriculumVitae">
          <li class="nav-item" (click)="navChange(item.functionID, 0, $event.target)">
            <a class="nav-link" [ngClass]="item.functionID == active[0] ? 'active' : ''">
              <i class="icon-attach_money" style="color: #005DC7"></i>
              <div class="text-uppercase fw-bold">{{ item.customName }}</div>
            </a>
          </li>
        </ng-container>
      </ul>
    </div>
  </div>

  <div class="pw-content w-100 scroll-y" data-kt-scroll-activate="{default: true}" data-kt-scroll-max-height="auto"
    data-kt-scroll-dependencies=".pw-profile,.pw-menu" data-kt-scroll-wrappers=".employee-container"
    data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']" (sectionChange)="onSectionChange($event, 0)">
    <ng-container>
      <!-- Thông tin bản thân -->
      <div class="user-profile overview d-block" [id]="eInfoFuncID"
        *ngIf="curriculumVitaePermission.eInfoFuncID.view == true">
        <hr-personal-info *ngIf="eInfoFunc" [employeeID]="employeeID" [function]="eInfoFunc"></hr-personal-info>
      </div>
      <!--Thông tin pháp lý -->
      <div class="user-profile overview d-block" [id]="legalInfoFuncID"
        *ngIf="curriculumVitaePermission.legalInfoFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4" *ngIf="eInfoFormModel && LoadedEInfo == true">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <span class="icon-folder_special icon-20 me-2"></span>
              <div class="fs-5-sm fw-bold text-uppercase mt-1">
                {{ legalInfoFuncID| transText:lstFuncCurriculumVitae }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="curriculumVitaePermission.legalInfoFuncID.write == true && legalInfoFunc.isPortal == false && infoPersonal && infoPersonal.status != '90'">
              <button type="button" class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="editAssuranceTaxBankAccountInfo(editHeaderText)"></span>
              </button>
            </div>
          </div>
          <div #insurance class="mb-1" *ngIf="eInfoFormModel">
            <div class="d-flex align-items-center mt-6 mb-4">
              <span class="icon-i-filter-right icon-20 me-2"></span>
              <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
                <codx-label name="lblEmployeeInfo" [formModel]="eInfoFormModel" default="Bảo hiểm">
                </codx-label>
              </div>
            </div>

            <!-- Số BHXH/ Ngày cấp -->
            <div class="row mb-3">
              <div class="col-4">
                <div class="text-gray-600 pb-1 d-flex">
                  <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="SIRegisterNo" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="fw-bold text-dark ms-7" [innerHTML]="
                    infoPersonal?.siRegisterNo
                      | formatvalue : eInfoFormModel : 'siRegisterNo'
                      | async
                  "></div>
              </div>
              <div class="col-8">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="SIRegisterOn" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.siRegisterOn
                        | formatvalue : eInfoFormModel : 'siRegisterOn'
                        | async
                    "></span>
                </div>
              </div>
            </div>
            <!-- Sỗ BHYT/ Hạn thẻ BHYT -->
            <div class="row mb-3">
              <div class="col-4">
                <div class="text-gray-600 pb-1 d-flex">
                  <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="HICardNo" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div #HICardNo class="fw-bold text-dark ms-7" [innerHTML]="
                    infoPersonal?.hiCardNo
                      | formatvalue : eInfoFormModel : 'hiCardNo'
                      | async
                  "></div>
              </div>
              <div class="col-8">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="HICardFrom" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.hiCardFrom
                        | formatvalue : eInfoFormModel : 'hiCardFrom'
                        | async
                    "></span>
                  <span *ngIf="infoPersonal?.hiCardTo">
                    &nbsp;-&nbsp;
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.hiCardTo
                          | formatvalue : eInfoFormModel : 'hiCardTo'
                          | async
                      "></span>
                  </span>
                </div>
              </div>
            </div>
            <!-- Thời điểm đủ 5 năm/ Nơi khám chữa bệnh đầu tiên -->
            <div class="row mb-3">
              <div class="col-4">
                <div class="text-gray-600 pb-1 d-flex">
                  <span class="icon-event icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="HIDateOf5Years" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="ms-7">
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.hiDateOf5Years
                        | formatvalue : eInfoFormModel : 'hiDateOf5Years'
                        | async
                    "></span>
                </div>
              </div>

              <div class="col-4">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="HIHospitalID" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.hiHospitalID
                        | formatvalue : eInfoFormModel : 'hiHospitalID'
                        | async
                    "></span>
                </div>
              </div>
            </div>
          </div>
          <hr />
          <div #tax class="mb-1" *ngIf="eInfoFormModel">
            <div class="d-flex align-items-center mt-6 mb-4">
              <span class="icon-i-filter-right icon-20 me-2"></span>
              <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
                <codx-label name="lblEmployeeInfo" [formModel]="eInfoFormModel" default="Mã số thuế thu nhập cá nhân">
                </codx-label>
              </div>
            </div>
            <!-- Mã số thuế/ Ngày cấp/ Nơi cấp -->
            <div class="row mb-5">
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="PITNumber" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark ms-7" [innerHTML]="
                        infoPersonal?.pitNumber
                          | formatvalue : eInfoFormModel : 'pitNumber'
                          | async
                      "></span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="PITIssuedOn" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.pitIssuedOn
                          | formatvalue : eInfoFormModel : 'pitIssuedOn'
                          | async
                      "></span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="PITPlace" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.pitPlace
                          | formatvalue : eInfoFormModel : 'pitPlace'
                          | async
                      "></span>
                </div>
              </div>
            </div>
          </div>
          <hr />
          <div #account class="mb-1" *ngIf="eInfoFormModel">
            <div class="d-flex align-items-center mt-6 mb-4">
              <span class="icon-i-filter-right icon-20 me-2"></span>
              <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
                <codx-label name="lblEmployeeInfo" [formModel]="eInfoFormModel" default="Tài khoản cá nhân">
                </codx-label>
              </div>
            </div>
            <div>
              <!-- Số tài khoản/ Ngân hàng -->
              <div class="row mb-5">
                <div class="col-4">
                  <div class="text-gray-600 pb-1 d-flex">
                    <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                    <codx-label fiedName="AccountNo" [formModel]="eInfoFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark ms-7" [innerHTML]="
                          infoPersonal?.accountNo
                            | formatvalue : eInfoFormModel : 'accountNo'
                            | async
                        "></span>
                  </div>
                </div>
                <div class="col-8">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="AccountBankID" [formModel]="eInfoFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark" [innerHTML]="
                          infoPersonal?.accountBankID
                            | formatvalue : eInfoFormModel : 'accountBankID'
                            | async
                        ">

                    </span>
                  </div>
                </div>
              </div>
              <!-- Tên chủ tài khoản/ Chi nhánh ngân hàng -->
              <div class="row mb-5">
                <div class="col-4">
                  <div class="text-gray-600 pb-1 d-flex">
                    <span class="icon-account_box me-2"></span>
                    <codx-label fiedName="AccountName" [formModel]="eInfoFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark ms-7" [innerHTML]="
                          infoPersonal?.accountName
                            | formatvalue : eInfoFormModel : 'accountName'
                            | async
                        "></span>
                  </div>
                </div>
                <div class="col-8">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="AccountBankBranch" [formModel]="eInfoFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark" [innerHTML]="
                          infoPersonal?.accountBankBranch
                            | formatvalue
                              : eInfoFormModel
                              : 'accountBankBranch'
                            | async
                        "></span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Hộ chiếu -->

          <div #passport class="mb-1"
            *ngIf="ePassportFormModel && curriculumVitaePermission.legalInfoFuncID.passportFuncID.view == true">
            <hr />
            <div class="d-flex align-items-center mt-6 mb-4 justify-content-between">
              <div class="d-flex align-items-center">
                <span class="icon-i-filter-right icon-20 me-2"></span>
                <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
                  <codx-label name="lblEmployeePassport" [formModel]="ePassportFormModel" default="Hộ chiếu">
                  </codx-label>
                </div>
              </div>
              <div class="d-flex align-items-center ms-5"
                *ngIf="curriculumVitaePermission.legalInfoFuncID.passportFuncID.write == true && (fromWS == false || curriculumVitaePermission.legalInfoFuncID.passportFuncID.isPortal == false)">
                <button class="btn btn-icon btn-sm btn-white"
                  (click)="handleEmployeePassportInfo(addHeaderText, 'add', null)">
                  <span class="icon-add icon-18"></span>
                </button>
              </div>
            </div>


            <div class="row mb-2 py-2 hover-active bg-hover cursor-pointer">
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                  <codx-label [setRequire]="false" fiedName="PassportNo" [formModel]="ePassportFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="ms-7 fw-bold item-active" (click)="clickViewDetail(crrPassport, ePassportFuncID)">
                    {{ crrPassport?.passportNo }}
                  </span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="PassportType" [formModel]="ePassportFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center"
                  [innerHTML]="crrPassport?.passportType | formatvalue : ePassportFormModel : 'passportType'| async">
                </div>
              </div>
              <div class="col has-action-menu">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="ExpiredDate" [formModel]="ePassportFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span
                    [innerHTML]="crrPassport?.expiredDate | formatvalue : ePassportFormModel : 'expiredDate'| async"></span>
                  <span *ngIf="passPortIsExpired == true" class="icon-notifications" [style.color]="'#F64E60'"
                    [title]="'Hết hạn'"></span>
                </div>
                <codx-mfunc *ngIf="crrPassport && fromWS == false && infoPersonal && infoPersonal.status != '90'"
                  [formModel]="ePassportFormModel" (clickMF)="clickMF($event, crrPassport, 'passport')" type="hover"
                  [dataItem]="crrPassport">
                </codx-mfunc>

                <codx-mfunc *ngIf="(crrPassport && fromWS == true) || infoPersonal && infoPersonal.status == '90'"
                  [formModel]="ePassportFormModel" (clickMF)="clickMF($event, crrPassport, 'passport')" type="hover"
                  (changeDataMF)="handleShowHideMfWs($event, ePassportFunc)" [dataItem]="crrPassport">
                </codx-mfunc>
              </div>
            </div>
          </div>
          <hr />
          <div #Visa class="mb-1"
            *ngIf="eVisaFormModel && curriculumVitaePermission.legalInfoFuncID.visaFuncID.view == true">
            <div class="d-flex align-items-center mt-6 mb-4 justify-content-between">
              <div class="d-flex align-items-center">
                <span class="icon-i-filter-right icon-20 me-2"></span>
                <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
                  <codx-label name="lblEmployeeInfo" [formModel]="eVisaFormModel" default="Thị thực">
                  </codx-label>
                </div>
              </div>
              <div class="d-flex align-items-center ms-5"
                *ngIf="curriculumVitaePermission.legalInfoFuncID.visaFuncID.write == true && (fromWS == false || curriculumVitaePermission.legalInfoFuncID.visaFuncID.isPortal == false)">
                <button class="btn btn-icon btn-sm btn-white"
                  (click)="handleEmployeeVisaInfo(addHeaderText, 'add', null)">
                  <span class="icon-add icon-18"></span>
                </button>
              </div>
            </div>
          </div>
          <div class="row mb-2 py-2 hover-active bg-hover cursor-pointer">
            <div class="row mb-5 ">
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="VisaNo" [setRequire]="false" [formModel]="eVisaFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold ms-7 item-active" (click)="clickViewDetail(crrVisa, eVisaFuncID)" [innerHTML]="
                      crrVisa?.visaNo
                        | formatvalue : eVisaFormModel : 'visaNo'
                        | async
                    ">
                    {{ crrVisa?.visaNo }}
                  </span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="VisaType" [formModel]="eVisaFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                          crrVisa?.visaType
                            | formatvalue : eVisaFormModel : 'visaType'
                            | async
                        ">
                  </span>
                </div>
              </div>
              <div class="col has-action-menu">
                <div class="text-gray-600 pb-1">
                  <codx-label [default]="'Thời hạn'" [name]="'lblTimeEvisa'" [formModel]="eVisaFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span [innerHTML]="crrVisa?.effectedDate
                        | formatvalue : eVisaFormModel : 'effectedDate'
                        | async">
                  </span>
                  <span class="mx-1" [ngClass]="crrVisa ? 'fw-bold text-dark' : 'text-muted'">-</span>
                  <span [innerHTML]="crrVisa?.expiredDate
                        | formatvalue : eVisaFormModel : 'expiredDate'
                        | async">
                  </span>
                  <span *ngIf="visaIsExpired == true" class="icon-notifications" [style.color]="'#F64E60'"
                    [title]="'Hết hạn'"></span>
                </div>
                <codx-mfunc *ngIf="crrVisa && fromWS == false && infoPersonal && infoPersonal.status != '90'"
                  [formModel]="eVisaFormModel" (clickMF)="clickMF($event, crrVisa, 'visa')" type="hover"
                  [dataItem]="crrVisa">
                </codx-mfunc>

                <codx-mfunc *ngIf="(crrVisa && fromWS == true) || infoPersonal && infoPersonal.status == '90'"
                  [formModel]="eVisaFormModel" (clickMF)="clickMF($event, crrVisa, 'visa')" type="hover"
                  [dataItem]="crrVisa" (changeDataMF)="handleShowHideMfWs($event, eVisaFunc)">
                </codx-mfunc>
              </div>
            </div>

            <div class="row mb-5">
              <div class="col-4">
                <div class="text-gray-600 pb-1 d-flex">
                  <span class="icon-account_box me-2"></span>
                  <codx-label fiedName="NationalityID" [formModel]="eVisaFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark ms-7" [innerHTML]="
                          crrVisa?.nationalityID
                            | formatvalue : eVisaFormModel : 'nationalityID'
                            | async
                        ">
                  </span>
                </div>
              </div>
              <div class="col-8">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="IssuedPlace" [formModel]="eVisaFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                      crrVisa?.issuedPlace
                        | formatvalue : eVisaFormModel : 'issuedPlace'
                        | async
                    ">
                    {{ crrVisa?.issuedPlace }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Lao động nước ngoài -->
      <div class="user-profile overview d-block" [id]="foreignWorkerFuncID"
        *ngIf="curriculumVitaePermission.foreignWorkerFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4" *ngIf="eInfoFormModel && LoadedEInfo == true">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <span class="icon-folder_special icon-20 me-2"></span>
              <div class="fs-5-sm fw-bold text-uppercase mt-1">
                {{ foreignWorkerFuncID | transText: lstFuncCurriculumVitae }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="curriculumVitaePermission.foreignWorkerFuncID.write == true && foreignWorkerFunc.isPortal == false && infoPersonal && infoPersonal.status != '90'">
              <button type="button" class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="editEmployeeForeignWorkerInfo(editHeaderText)"></span>
              </button>
            </div>
          </div>

          <div class="row mb-5 mt-5">
            <div class="col" *ngIf="infoPersonal?.isForeigner">
              <span class="me-2">
                <codx-input field="isForeigner" [formModel]="eInfoFormModel" [crrValue]="infoPersonal?.isForeigner"
                  [disabled]="true"></codx-input>
              </span>
              <codx-label fiedName="IsForeigner" [formModel]="eInfoFormModel">
              </codx-label>
            </div>
            <div class="col" *ngIf="infoPersonal?.foNotReside">
              <span class="me-2">
                <codx-input field="FoNotReside" [formModel]="eInfoFormModel" [crrValue]="infoPersonal?.foNotReside"
                  [disabled]="true"></codx-input>
              </span>

              <codx-label fiedName="FoNotReside" [formModel]="eInfoFormModel">
              </codx-label>
            </div>
            <div class="col" *ngIf="infoPersonal?.foNationalities">
              <span class="me-2">
                <codx-input [type]="'checkbox'" [checked]="'true'"></codx-input>
              </span>
              <span class="me-2" [innerHTML]="
                  infoPersonal?.foNationalities
                    | formatvalue : eInfoFormModel : 'foNationalities'
                    | async
                ">
              </span>
            </div>
          </div>

          <div class="row mb-3">
            <div class="text-gray-600 pb-1">
              <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>

              <codx-label fiedName="FoWorking" [formModel]="eInfoFormModel">
              </codx-label>
            </div>
            <div class="d-flex align-items-center">
              <span class="fw-bold text-dark ms-7" [innerHTML]="
                  infoPersonal?.foWorking
                    | formatvalue : eInfoFormModel : 'foWorking'
                    | async
                ">
              </span>
            </div>
          </div>

          <div class="row mb-3">
            <div class="text-gray-600 pb-1">
              <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
              <codx-label fiedName="FoKind" [formModel]="eInfoFormModel">
              </codx-label>
            </div>
            <div class="d-flex align-items-center">
              <span class="fw-bold text-dark ms-7" [innerHTML]="
                  infoPersonal?.foKind
                    | formatvalue : eInfoFormModel : 'foKind'
                    | async
                ">
              </span>
            </div>
          </div>

          <hr />
          <div #workPermit class="mb-1"
            *ngIf="curriculumVitaePermission.foreignWorkerFuncID.workPermitFuncID.view == true">
            <div class="d-flex align-items-center mt-6 mb-4 justify-content-between">
              <div class="d-flex align-items-center">
                <span class="icon-i-filter-right icon-20 me-2"></span>
                <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
                  <codx-label name="lblEmployeeInfo" [formModel]="eInfoFormModel" default="Giấy phép lao động">
                  </codx-label>
                </div>
              </div>
              <div class="d-flex align-items-center ms-5"
                *ngIf="curriculumVitaePermission.foreignWorkerFuncID.workPermitFuncID.write == true && (fromWS == false || curriculumVitaePermission.foreignWorkerFuncID.workPermitFuncID.isPortal == false)">
                <button class="btn btn-icon btn-sm btn-white"
                  (click)="handleEmployeeWorkingPermitInfo(addHeaderText, 'add', null)">
                  <span class="icon-add icon-18"></span>
                </button>
              </div>
            </div>

            <div *ngIf="eWorkPermitFormModel" class="row mb-2 py-2 hover-active bg-hover cursor-pointer">
              <div class="row mb-5">
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                    <codx-label [setRequire]="false" fiedName="workPermitNo" [formModel]="eWorkPermitFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold item-active ms-7" (click)="clickViewDetail(crrWorkpermit, eWorkPermitFuncID)">
                      {{ crrWorkpermit?.workPermitNo }}
                    </span>
                  </div>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="WorkPermitType" [formModel]="eWorkPermitFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark" [innerHTML]="
                        crrWorkpermit?.workPermitType
                          | formatvalue
                            : eWorkPermitFormModel
                            : 'workPermitType'
                          | async
                      ">
                    </span>
                  </div>
                </div>
                <div class="col has-action-menu">
                  <div class="text-gray-600 pb-1">
                    <codx-label [default]="'Thời hạn'" [name]="'lblTimeEworkpermit'" [formModel]="eWorkPermitFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center" *ngIf="crrWorkpermit?.fromDate || crrWorkpermit?.toDate">
                    <span [ngClass]="crrWorkpermit ? 'fw-bold text-dark' : ''">
                      {{ crrWorkpermit?.fromDate | fmDT }} -
                      {{ crrWorkpermit?.toDate | fmDT }}
                    </span>
                    <span *ngIf="workpermitIsExpired == true" class="icon-notifications" [style.color]="'#F64E60'"
                      [title]="'Hết hạn'"></span>
                  </div>
                  <codx-mfunc *ngIf="crrWorkpermit && fromWS == false && infoPersonal && infoPersonal.status != '90'"
                    [formModel]="eWorkPermitFormModel" (clickMF)="clickMF($event, crrWorkpermit, 'workpermit')"
                    type="hover" [dataItem]="crrWorkpermit">
                  </codx-mfunc>

                  <codx-mfunc *ngIf="(crrWorkpermit && fromWS == true) || infoPersonal && infoPersonal.status == '90'"
                    [formModel]="eWorkPermitFormModel" (clickMF)="clickMF($event, crrWorkpermit, 'workpermit')"
                    type="hover" [dataItem]="crrWorkpermit"
                    (changeDataMF)="handleShowHideMfWs($event, eWorkPermitFunc)">
                  </codx-mfunc>
                </div>
              </div>

              <div class="row mb-3">
                <div class="text-gray-600 pb-1">
                  <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="JobAssign" [formModel]="eWorkPermitFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark ms-7">
                    {{ crrWorkpermit?.jobAssign }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Thông tin Đảng - Đoàn -->
      <div class="user-profile overview d-block" [id]="ePartyFuncID"
        *ngIf="curriculumVitaePermission.ePartyFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4" *ngIf="eInfoFormModel && LoadedEInfo == true">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <span class="icon-folder_special icon-20 me-2"></span>
              <div class="fs-5-sm fw-bold text-uppercase mt-1">
                {{ ePartyFuncID | transText: lstFuncCurriculumVitae }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="curriculumVitaePermission.ePartyFuncID.write == true  && ePartyFunc.isPortal == false && infoPersonal && infoPersonal.status != '90'">
              <button type="button" class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="editEmployeePartyInfo(editHeaderText)"></span>
              </button>
            </div>
          </div>
          <div #DangDoan class="mt-5">
            <div class="row mb-3">
              <div class="col-4">
                <div class="text-gray-600 pb-1 d-flex align-items-center">
                  <span class="icon-event icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="yUnionDate" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>

                <div class="ms-7">
                  <span class="text-dark fw-bold" [innerHTML]="
                      infoPersonal?.yUnionDate
                        | formatvalue : eInfoFormModel : 'yUnionDate'
                        | async
                    "></span>
                </div>
              </div>
              <div class="col-8">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="yUnionAt" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex">
                  <span #yUnionAt class="text-dark fw-bold" [innerHTML]="
                      infoPersonal?.yUnionAt
                        | formatvalue : eInfoFormModel : 'yUnionAt'
                        | async
                    "></span>
                </div>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-4">
                <div class="text-gray-600 pb-1 d-flex align-items-center">
                  <span class="icon-event icon-16 text-gray-600 me-2"></span>
                  <codx-label fiedName="partyDate" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="ms-7">
                  <span #partyDate class="text-dark fw-bold" [innerHTML]="
                      infoPersonal?.partyDate
                        | formatvalue : eInfoFormModel : 'partyDate'
                        | async
                    "></span>
                </div>
              </div>
              <div class="col-8">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="partyAt" [formModel]="eInfoFormModel">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span #partyAt class="text-dark fw-bold" [innerHTML]="
                      infoPersonal?.partyAt
                        | formatvalue : eInfoFormModel : 'partyAt'
                        | async
                    "></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Quan hệ gia đình -->
      <div class="user-profile overview d-block" [id]="eFamiliesFuncID"
        *ngIf="curriculumVitaePermission.eFamiliesFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4" *ngIf="eFamilyFormModel">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <span class="icon-family icon-20 me-2"></span>
              <div class="fs-5-sm fw-bold text-uppercase mt-1">
                {{ eFamiliesFuncID | transText: lstFuncCurriculumVitae }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="curriculumVitaePermission.eFamiliesFuncID.write == true && (fromWS == false || curriculumVitaePermission.eFamiliesFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-white">
                <span class="icon-add icon-18" (click)="handleEFamilyInfo(addHeaderText, 'add', null)"></span>
              </button>
            </div>
          </div>

          <div #family class="mt-5">
            <div class="row" *ngIf="lstFamily?.length > 0 && eFamilyFormModel; else emptyDataTemplate">
              <ng-container *ngFor="let item of lstFamily">
                <div class="col-6 mb-5 ps-9 ">
                  <div class="rounded rounded-2 border border-gray-150 w-325px mw-325px">
                    <codx-temp-full *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
                      (clickMF)="clickMF($event, item, 'family')"
                      cardCss="card-template p-3 w-325px mw-325px h-100 mb-2 py-2 hover-active bg-hover cursor-pointer"
                      [moreFuncCss]="'me-10'" [imageId]="item.recID" [imageObjType]="'HR_EFamilies'" [imageWidth]="35"
                      [imgCss]="'me-3 '" [titleTmp]="titleTmp" [subTitleTmp]="subtitleTmp"
                      [formModel]="eFamilyFormModel" [dataItem]="item" [imgOn]="item?.modifiedOn" [typeMF]="'hover'"
                      [baseHeaderRightTmp]="baseHeaderRightTmp">
                    </codx-temp-full>

                    <codx-temp-full *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
                      (clickMF)="clickMF($event, item, 'family')"
                      cardCss="card-template p-3 w-325px mw-325px h-100 mb-2 py-2 hover-active bg-hover cursor-pointer"
                      [moreFuncCss]="'me-10'" [imageId]="item.recID" [imageObjType]="'HR_EFamilies'" [imageWidth]="35"
                      [imgCss]="'me-3 '" [titleTmp]="titleTmp" [subTitleTmp]="subtitleTmp"
                      [formModel]="eFamilyFormModel" [dataItem]="item" [imgOn]="item?.modifiedOn" [typeMF]="'hover'"
                      [baseHeaderRightTmp]="baseHeaderRightTmp"
                      (changeDataMF)="handleShowHideMfWs($event, eFamiliesFunc)">
                    </codx-temp-full>
                    <ng-template #titleTmp let-data>
                      <div class="fs-6 mb-1 item-active" (click)="clickViewDetail(data, eFamiliesFuncID)">
                        {{data?.relationName}}
                      </div>
                    </ng-template>

                    <ng-template #subtitleTmp let-data>
                      <div class="w-100">
                        <div class="d-flex mb-1">
                          <div class="d-flex flex-wrap">
                            <span class="fw-bold me-1">{{
                              item.relationType
                              | vll : "HR006" : "text"
                              | async
                              }}</span>
                            <span>
                              <span *ngIf="data.birthday">
                                <codx-label [default]="'| Tuổi:'" [name]="'lblNameEFam'" [formModel]="formModel">
                                </codx-label>
                                {{data.age}}
                              </span>
                            </span>
                          </div>
                        </div>
                        <div class="d-flex flex-wrap">
                          <span class="me-2 mb-1" placement="bottom" [title]="eFamilyHeaderText?.Mobile"
                            [ngClass]="data.isEmergency ? 'text-danger' : ''" [innerHTML]="
                            data?.mobile
                                  | formatvalue : eFamilyFormModel : 'mobile'
                                  | async
                              "></span>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template #baseHeaderRightTmp let-data>
                      <div *ngIf="data.isDependent" #popOver="ngbPopover" [openDelay]="500"
                        (mouseenter)="popOver.open()" (mouseleave)="popOver.close()" placement="left"
                        [ngbPopover]="popIsDependent" [style.color]="'#FFA800'"
                        class="icon-attribution icon-18 ms-auto"></div>

                      <ng-template #popIsDependent>
                        <span>
                          <codx-label name="lblIsDependent" [formModel]="eFamilyFormModel"
                            default="Phụ thuộc giảm trừ gia cảnh"></codx-label>
                        </span>
                      </ng-template>
                    </ng-template>
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
      <!-- Kinh nghiệm trước đây -->
      <div class="user-profile overview d-block" [id]="eExperienceFuncID"
        *ngIf="curriculumVitaePermission.eExperienceFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-1" *ngIf="eExperienceFormModel">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <div class="user-status d-flex align-items-center">
                <span class="icon-check icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eExperienceFuncID| transText :lstFuncCurriculumVitae }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="curriculumVitaePermission.eExperienceFuncID.write == true && (fromWS == false || curriculumVitaePermission.eExperienceFuncID.isPortal == false)">
              <button class="btn btn-icon btn-sm btn-white"
                (click)="handlEmployeeExperiences(addHeaderText, 'add', null)">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>

          <div *ngIf="lstExperiences?.length > 0; else emptyDataTemplate">
            <div class="mt-6 ms-9">
              <div class="timeline-exper">
                <div class="timeline-exper-items">
                  <ng-container *ngFor="let item of lstExperiences">
                    <div class="timeline-exper-item" [ngClass]="lstExperiences ? 'has-action-menu' : ''">
                      <div class="timeline-exper-nav w-100 d-flex pb-5">
                        <div class="timeline-media w-125px min-w-125px">
                          <span class="stepper-number fw-bold">
                            <span *ngIf="item.fromDate">
                              {{ item.fromDate | date : "MM/yyyy" }}
                            </span>
                            <span *ngIf="item.toDate">
                              -
                              {{ item.toDate | date : "MM/yyyy" }}
                            </span>
                          </span>
                        </div>
                        <div class="me-3 timeline-exper-node">
                          <span class="icon-fiber_manual_record text-gray-600"></span>
                        </div>
                        <div class="stepper-label min-w-350px has-action-menu hover-active bg-hover cursor-pointer">
                          <div class="stepper-title line-clamp line-clamp-3 mb-1">
                            <i class="icon-business icon-16 text-gray-700 me-2"></i>
                            <span class="fs-6 fw-bold item-active" (click)="clickViewDetail(item, eExperienceFuncID)">{{
                              item?.companyName }}</span>
                          </div>
                          <div class="stepper-desc text-gray-500 ">
                            {{ item?.position }}
                          </div>
                          <div class="stepper-desc text-gray-500 ">
                            {{ item?.note }}
                          </div>

                          <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
                            [formModel]="eExperienceFormModel" (clickMF)="clickMF($event, item, 'eExperiences')"
                            type="hover" [dataItem]="item">
                          </codx-mfunc>

                          <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
                            [formModel]="eExperienceFormModel" (clickMF)="clickMF($event, item, 'eExperiences')"
                            type="hover" [dataItem]="item" (changeDataMF)="handleShowHideMfWs($event, eExperienceFunc)">
                          </codx-mfunc>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="div_final"></div>
    </ng-container>
  </div>
</ng-template>

<!-- panel Thông tin công việc-->
<ng-template #jobInfo>
  <div class="tab-horizone bg-white h-od-tab mb-4">
    <ul class="nav nav-tabs px-4">
      <ng-container *ngFor="let item of lstFuncJobInfo; let i = index">
        <li class="nav-item" (click)="navChange(item.functionID, 1 , $event.target)">
          <a class="nav-link" [ngClass]="item.functionID == active[1] ? 'active' : ''">
            <div class="text-uppercase fw-bold">{{ item.customName }}</div>
          </a>
        </li>
      </ng-container>
    </ul>
  </div>

  <div class="pw-content w-100 scroll-y" data-kt-scroll="true" data-kt-scroll-activate="{default: true}"
    data-kt-scroll-max-height="auto" data-kt-scroll-dependencies=".pw-profile,.pw-menu"
    data-kt-scroll-wrappers=".employee-container" data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']"
    (sectionChange)="onSectionChange($event, 1)">
    <!-- <div
      class="user-content flex-row-fluid"
      scrollSpy
      (sectionChange)="onSectionChange($event)"
    > -->
    <ng-container>
      <!-- Thông tin chung -->
      <div class="user-profile overview d-block" [id]="jobGeneralFuncID"
        *ngIf="LoadedEInfo == true && jobInfoPer.jobGeneralFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status d-flex align-items-center text-primary">
                <span class="icon-assignment_ind icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ jobGeneralFuncID | transText : lstFuncJobInfo }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="jobInfoPer.jobGeneralFuncID.write == true && jobGeneralFunc.isPortal == false && infoPersonal && infoPersonal.status != '90'">
              <a class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="HandleEmployeeJobGeneralInfo(editHeaderText, 'edit')"></span>
              </a>
            </div>
          </div>
          <div id="generalJobInfo" class="mb-1">
            <div class="mt-5" *ngIf="eInfoFormModel">
              <!-- Số lưu hồ sơ/ Tình trạng nhân viên/ Loại nhân viên -->
              <div class="row mb-5">
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="DocumentNo" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <i class="icon-book text-primary icon-16 me-1"></i>
                    <div class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.documentNo
                          | formatvalue : eInfoFormModel : 'documentNo'
                          | async
                      "></div>
                  </div>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="Status" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <codx-vll class="badge" [field]="'Status'" [value]="infoPersonal?.status" [formModel]="eInfoFormModel"
                    [showText]="true" [showBgColor]="true"></codx-vll>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="EmployeeTypeID" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="fw-bold text-primary" [innerHTML]="
                      infoPersonal?.employeeTypeID
                        | formatvalue : eInfoFormModel : 'employeeTypeID'
                        | async
                    "></div>
                </div>
              </div>
              <!-- Ngày vào làm/ ngày hợp đồng chính thức/ tài khoản portal -->
              <div class="row mb-5">
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="JoinedOn" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="icon-event icon-16 text-primary me-2"></span>
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.joinedOn
                          | formatvalue : eInfoFormModel : 'joinedOn'
                          | async
                      "></span>
                  </div>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="HiredOn" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="icon-event icon-16 text-gray-600 me-2"></span>
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.hiredOn
                          | formatvalue : eInfoFormModel : 'hiredOn'
                          | async
                      ">
                    </span>
                  </div>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="DomainUser" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="icon-assignment_ind icon-16 text-gray-600 me-2"></span>
                    <div class="fw-bold text-primary" [innerHTML]="
                        infoPersonal?.domainUser
                          | formatvalue : eInfoFormModel : 'DomainUser'
                          | async
                      ">
                      <!-- <codx-vll
                            [showText]="true"
                            [showBgColor]="false"
                            [showIcon]="false"
                            [formModel]="eInfoFormModel"
                            [field]="'MaritalStatus'"
                            [value]="data?.maritalStatus"
                            class="text-dark"
                          >
                          </codx-vll> -->
                    </div>
                  </div>
                </div>
              </div>
              <!-- Bộ phận làm việc -->
              <div class="row mb-5">
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="orgUnitID" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="fw-bold text-dark" *ngIf="!lstOrg" [innerHTML]="
                      infoPersonal?.orgUnitID
                        | formatvalue : eInfoFormModel : 'orgUnitID'
                        | async
                    "></div>
                  <div class="d-flex align-items-center mb-2">
                    <span class="d-flex flex-wrap align-items-center fw-bold text-dark" *ngIf="lstOrg">
                      <span class="icon-connection-point icon-16 text-primary me-2"></span>
                      <ng-container *ngFor="let org of lstOrg; let i = index">
                        <span class="icon-i-dot text-gray-500" *ngIf="i > 0"></span>
                        <span>{{ org.orgUnitName }}</span>
                      </ng-container>
                    </span>
                  </div>
                </div>
              </div>
              <!-- Địa điểm làm việc -->
              <div class="row mb-5">
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="LocationID" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <i class="icon-place icon-16 me-1"></i>
                    <span #idCardNo class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.locationID
                          | formatvalue : eInfoFormModel : 'locationID'
                          | async
                      ">
                    </span>
                  </div>
                </div>
              </div>
              <!-- Chức danh công việc/ Cấp bậc -->
              <div class="row mb-5">
                <div class="col-4">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="PositionID" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="icon-book icon-16 text-primary me-2"></span>
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.positionID
                          | formatvalue : eInfoFormModel : 'positionID'
                          | async
                      "></span>
                  </div>
                </div>
                <div class="col-8">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="JobLevel" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.jobLevel
                          | formatvalue : eInfoFormModel : 'jobLevel'
                          | async
                      ">
                    </span>
                  </div>
                </div>
              </div>
              <!-- Quản lí trực tiếp/ Quản lí gián tiếp -->
              <div class="row mb-5">
                <div class="col-4">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="LineManager" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center" *ngIf="loadedLineManager">
                    <span *ngIf="lineManager; else noLineManagerInfo" class="fw-bold text-dark">
                      {{ lineManager?.employeeName }}
                    </span>
                    <ng-template #noLineManagerInfo>
                      <span class="fw-bold text-dark" [innerHTML]="
                          null
                            | formatvalue : eInfoFormModel : 'lineManager'
                            | async
                        "></span>
                    </ng-template>
                  </div>
                </div>
                <div class="col-8">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="IndirectManager" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center" *ngIf="loadedIndirectManager">
                    <span *ngIf="indirectManager; else noIndirectManagerInfo" class="fw-bold text-dark">
                      {{ indirectManager?.employeeName }}
                    </span>
                    <ng-template #noIndirectManagerInfo>
                      <span class="fw-bold text-dark" [innerHTML]="
                          null
                            | formatvalue : eInfoFormModel : 'indirectManager'
                            | async
                        "></span>
                    </ng-template>
                  </div>
                </div>
              </div>
              <!-- Loại lao động/ Điều kiện lao động -->
              <div class="row mb-5">
                <div class="col-4">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="LabourType" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.labourType
                          | formatvalue : eInfoFormModel : 'labourType'
                          | async
                      "></span>
                  </div>
                </div>
                <div class="col-8">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="LabourConditions" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.labourConditions
                          | formatvalue : eInfoFormModel : 'labourConditions'
                          | async
                      ">
                    </span>
                  </div>
                </div>
              </div>
              <!-- Tham gia công đoàn/ Là chuyên gia tuyển dụng/ Là chuyên gia đào tạo -->
              <div class="row mb-5">
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="IsTUnion" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="me-2">
                      <codx-input field="isTUnion" [type]="'checkbox'" [Group]="eInfoFormGroup"
                        [formModel]="eInfoFormModel" [disabled]="true"></codx-input>
                    </span>
                    <span class="fw-bold text-dark" [innerHTML]="
                        infoPersonal?.tUnionDate
                          | formatvalue : eInfoFormModel : 'tUnionDate'
                          | async
                      "></span>
                  </div>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="IsExpertRecruit" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <codx-input field="isExpertRecruit" [Group]="eInfoFormGroup" [type]="'checkbox'"
                      [formModel]="eInfoFormModel" [disabled]="true"></codx-input>
                  </div>
                </div>
                <div class="col">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="IsExpertTrain" [formModel]="eInfoFormModel" [setRequire]="false">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <codx-input field="isExpertTrain" [Group]="eInfoFormGroup" [formModel]="eInfoFormModel"
                      [type]="'checkbox'" [disabled]="true"></codx-input>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Thông tin chấm công -->
      <div class="user-profile overview d-block" [id]="eTimeCardFuncID"
        *ngIf="LoadedEInfo == true && jobInfoPer.eTimeCardFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status d-flex align-items-center text-primary">
                <span class="icon-assignment_ind icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eTimeCardFuncID | transText :lstFuncJobInfo }}
              </div>
            </div>

            <div class="d-flex align-items-center ms-5"
              *ngIf="jobInfoPer.eTimeCardFuncID.write == true && eTimeCardFunc.isPortal == false && infoPersonal && infoPersonal.status != '90'">
              <a class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="editEmployeeTimeCardInfo(editHeaderText)"></span>
              </a>
            </div>
          </div>
          <div #timeKeepingInfo class="mb-1 mt-6" *ngIf="eInfoFormModel">
            <!-- Mã chấm công/ lịch làm việc/ đối tượng tính phép năm -->
            <div class="row mb-5">
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="TimeCardNo" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="icon-fingerprint icon-16 text-gray-600 me-2"></span>
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.timeCardNo
                        | formatvalue : eInfoFormModel : 'timeCardNo'
                        | async
                    "></span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="ShiftCalendarID" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="icon-event icon-16 text-gray-600 me-2"></span>
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.shiftCalendarID
                        | formatvalue : eInfoFormModel : 'shiftCalendarID'
                        | async
                    ">
                  </span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label fiedName="ALObjectID" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>

                <div class="fw-bold text-dark" [innerHTML]="
                    infoPersonal?.alObjectID
                      | formatvalue : eInfoFormModel : 'alObjectID'
                      | async
                  "></div>
              </div>
            </div>
            <!-- Không cần quét thẻ/ Không tính công ngoài giờ -->
            <div class="row mb-5">
              <div class="col-4 d-flex align-items-center" id="isNotScan">
                <span class="me-2">
                  <codx-input field="IsNotScan" [formModel]="eInfoFormModel" [crrValue]="infoPersonal?.isNotScan"
                    [disabled]="true"></codx-input></span>

                <codx-label class="fw-bold me-2" [formModel]="eInfoFormModel" fiedName="IsNotScan">
                </codx-label>
              </div>
              <div class="col-8 d-flex align-items-center" id="isNotOTKow">
                <span class="me-2">
                  <codx-input field="IsExpertTrain" [formModel]="eInfoFormModel" [crrValue]="infoPersonal?.isNotOTKow"
                    [disabled]="true"></codx-input></span>
                <codx-label class="fw-bold me-2" [formModel]="eInfoFormModel" fiedName="isNotOTKow"
                  [setRequire]="false">
                </codx-label>
              </div>
            </div>
            <!-- Không tính đi trễ/ Không tính nghỉ bù-->
            <div class="row mb-5">
              <div class="col-4 d-flex align-items-center" id="isNotLateEarly">
                <span class="me-2">
                  <codx-input field="IsNotLateEarly" [formModel]="eInfoFormModel"
                    [crrValue]="infoPersonal?.isNotLateEarly" [disabled]="true"></codx-input>
                </span>
                <codx-label class="fw-bold me-2" [formModel]="eInfoFormModel" fiedName="isNotLateEarly"
                  [setRequire]="false">
                </codx-label>
              </div>
              <div class="col-8 d-flex align-items-center" id="isNotCLeaveKow">
                <span class="me-2">
                  <codx-input field="IsNotCLeaveKow" [formModel]="eInfoFormModel"
                    [crrValue]="infoPersonal?.isNotCLeaveKow" [disabled]="true"></codx-input></span>
                <codx-label class="fw-bold me-2" [formModel]="eInfoFormModel" fiedName="IsNotCLeaveKow"
                  [setRequire]="false">
                </codx-label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Thông tin tính lương -->
      <div class="user-profile overview d-block" [id]="eCalSalaryFuncID"
        *ngIf="LoadedEInfo == true && jobInfoPer.eCalSalaryFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status d-flex align-items-center text-primary">
                <span class="icon-assignment_ind icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eCalSalaryFuncID | transText : lstFuncJobInfo }}
              </div>
            </div>

            <div class="d-flex align-items-center ms-5"
              *ngIf="jobInfoPer.eCalSalaryFuncID.write == true && eCalSalaryFunc.isPortal == false && infoPersonal && infoPersonal.status != '90'">
              <a class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="editEmployeeCaculateSalaryInfo(editHeaderText)"></span>
              </a>
            </div>
          </div>

          <div #salaryInfo class="mb-1 mt-6" *ngIf="eInfoFormModel">
            <!-- Nhóm tính lương/ Nguyên tệ tính lương/ Mức đóng thuế -->
            <div class="row mb-5">
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label name="GroupSalCode" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.groupSalCode
                        | formatvalue : eInfoFormModel : 'groupSalCode'
                        | async
                    "></span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label name="CurrencyID" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.currencyID
                        | formatvalue : eInfoFormModel : 'currencyID'
                        | async
                    ">
                  </span>
                </div>
              </div>
              <div class="col">
                <div class="text-gray-600 pb-1">
                  <codx-label name="TaxTableID" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <span class="icon-local_atm icon-16 text-danger me-2"></span>
                  <div class="fw-bold text-dark" [innerHTML]="
                      infoPersonal?.taxTableID
                        | formatvalue : eInfoFormModel : 'taxTableID'
                        | async
                    "></div>
                </div>
              </div>
            </div>
            <!-- Cam kết quyết toàn thuế/ Tạm ứng lương theo số tiền quyết định -->
            <div class="row mb-5">
              <div class="col-4">
                <div class="text-gray-600 pb-1">
                  <codx-label name="IsSettleTax" [formModel]="eInfoFormModel" [setRequire]="false">
                  </codx-label>
                </div>
                <div class="d-flex align-items-center">
                  <codx-input field="IsSettleTax" [formModel]="eInfoFormModel" [crrValue]="infoPersonal?.isSettleTax"
                    [disabled]="true"></codx-input>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Hồ sơ cần nộp-->
      <div class="user-profile overview d-block" [id]="eNeedToSubmitProfileFuncID">
        <div class="rounded-2 p-5 bg-white mb-1">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status d-flex align-items-center text-primary">
                <span class="icon-assignment_ind icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                <codx-label [formModel]="eInfoFormModel" name="lblEmployeeJobGeneralTitle" [default]="'Hồ sơ cần nộp'"
                  [setRequire]="false">
                </codx-label>
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="jobInfoPer.eNeedToSubmitProfileFuncID.write == true && (fromWS == false || jobInfoPer.eNeedToSubmitProfileFuncID.isPortal == false)">
              <button class="btn btn-icon btn-sm btn-white" (click)="HandleEDocumentInfo(addHeaderText, 'add', null)">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>

          <div #eDocument class="mb-1 mt-6" *ngIf="eInfoFormModel">
            <div *ngFor="let doc of lstEmpDocument">
              <div
                class="has-action-menu d-flex align-items-center py-2 border-bottom hover-active cursor-pointer border-gray-100 bg-hover">
                <div class="w-100 d-flex align-items-center">
                  <div class="issubcheck me-3 w-25px h-25px position-relative">
                    <span class="icon-i-circle-fill icon-22 text-gray-300 position-absolute top-0 left-0"></span>
                    <span class="position-absolute top-0 left-0" *ngIf="doc?.isSubmitted == true">
                      <span class="icon-i-check-circle-fill icon-22 text-primary"></span>
                    </span>
                    <span *ngIf="doc?.isRequired == true" class="h-15px position-absolute end-0 bottom-0">
                      <span class="icon-i-asterisk icon-10 text-danger"></span>
                    </span>
                  </div>

                  <span class="fs-6 fw-bold item-active" (click)="clickViewDetail(doc, eNeedToSubmitProfileFuncID)"
                    [innerHTML]="
                    doc?.documentTypeID | formatvalue : edocumentFormModel : 'documentTypeID' | async
                    ">
                  </span>
                </div>
                <div class="min-w-350px w-350px d-flex align-items-center">
                  <div *ngIf="doc?.submittedDate" class="me-5 d-flex align-items-center">
                    <span class="icon-date_range text-gray-600 icon-16 me-1"></span>
                    <span>{{doc?.submittedDate | fmDT}}</span>
                  </div>
                  <ng-container *ngIf="doc?.lstFile && doc?.lstFile?.length > 0">
                    <codx-thumbnail [files]="doc?.lstFile" displayThumb="simple" [hideHover]="'0'">
                    </codx-thumbnail>
                  </ng-container>
                  <codx-mfunc [formModel]="edocumentFormModel" (clickMF)="clickMF($event, doc, 'eDocument')"
                    type="hover" [dataItem]="doc" (changeDataMF)="handleShowHideMF($event, eNeedToSubmitProfileFunc)">
                  </codx-mfunc>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="div_final"></div>
    </ng-container>

    <codx-combobox-popup *ngIf="!isHiddenCbxDocument" [comboboxName]="eDocumentGrvSetup.DocumentTypeID.referedValue"
      [multiple]="true" [width]="600" [height]="500" [value]="strCurrentDocuments"
      (clickSave)="onClickHideComboboxPopup($event)">
    </codx-combobox-popup>
    <!-- </div> -->
  </div>
</ng-template>

<!-- panel Lương & Phúc lợi -->
<ng-template #benefit>
  <div class="tab-horizone bg-white h-od-tab mb-4">
    <ul class="nav nav-tabs px-4">
      <ng-container *ngFor="let item of lstFuncSalaryBenefit; let i = index">
        <li class="nav-item" (click)="navChange(item.functionID, 2, $event.target)">
          <a class="nav-link" [ngClass]="item.functionID == active[2] ? 'active' : ''">
            <div class="text-uppercase fw-bold">{{ item.customName }}</div>
          </a>
        </li>
      </ng-container>
    </ul>
  </div>
  <div class="pw-content w-100 scroll-y" data-kt-scroll="true" data-kt-scroll-activate="{default: true}"
    data-kt-scroll-max-height="auto" data-kt-scroll-dependencies=".pw-profile,.pw-menu"
    data-kt-scroll-wrappers=".employee-container" data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']"
    (sectionChange)="onSectionChange($event, 2)">

    <!-- Lương -->
    <div class="user-profile overview d-block" [id]="eBasicSalaryFuncID"
      *ngIf="salaryBenefitInfoPer.eBasicSalaryFuncID.view == true">
      <div class="rounded-2 p-5 bg-white mb-4">
        <div class="d-flex align-items-center justify-content-between" *ngIf="eBasicSalaryFormmodel">
          <div class="d-flex align-items-center text-primary">
            <div class="user-status d-flex align-items-center">
              <span class="icon-attach_money icon-20 me-2"></span>
            </div>
            <div class="fs-5-sm fw-bold text-primary text-uppercase">
              {{ eBasicSalaryFuncID | transText:lstFuncSalaryBenefit }}
            </div>
          </div>
          <div class="d-flex align-items-center ms-5 me-3">
            <div
              *ngIf="salaryBenefitInfoPer.eBasicSalaryFuncID.write == true && (fromWS == false || salaryBenefitInfoPer.eBasicSalaryFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white" (click)="
                  handleEBasicSalaries(addHeaderText, 'add', null)
                ">
                <span class="icon-add icon-18"></span>
              </button>
              <span class="text-gray-400 mx-2">|</span>
            </div>
            <button type="button" class="btn btn-sm btn-white text-primary" (click)="valueChangeViewAllEBasicSalary()">
              <codx-label name="lblSeeAllBSalaries" [formModel]="eInfoFormModel" default="Xem tất cả">
              </codx-label>
            </button>
          </div>
        </div>

        <ng-container *ngIf="loadedESalary && eBasicSalaryFormmodel">

          <div class="row mb-2 py-2 hover-active bg-hover cursor-pointer" *ngIf="crrEBSalary; else emptyDataTemplate">
            <codx-temp-full *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
              (clickMF)="clickMF($event, crrEBSalary, 'basicSalary')" [dataItem]="crrEBSalary"
              [formModel]="eBasicSalaryFormmodel" [footer]="footerEBSalaries" cardCss="ms-8 mt-3" [typeMF]="'hover'">
            </codx-temp-full>

            <codx-temp-full *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
              (clickMF)="clickMF($event, crrEBSalary, 'basicSalary')" [dataItem]="crrEBSalary"
              [formModel]="eBasicSalaryFormmodel" [footer]="footerEBSalaries" cardCss="ms-8 mt-3" [typeMF]="'hover'"
              (changeDataMF)="handleShowHideMfWs($event, eBasicSalaryFunc)">
            </codx-temp-full>
            <ng-template #footerEBSalaries let-data>
              <div class="row">
                <div class="col-4">
                  <div class="d-flex align-items-center text-gray-700 mb-3">
                    <span class="icon-attach_money icon-16 me-2"></span>
                    <codx-label fiedName="BSalary" [setRequire]="false" [formModel]="eBasicSalaryFormmodel">
                    </codx-label>
                  </div>

                  <div class="d-flex align-items-center text-gray-700 mb-3">
                    <span class="icon-monetization_on text-danger icon-16 me-2"></span>
                    <codx-label fiedName="SISalary" [setRequire]="false" [formModel]="eBasicSalaryFormmodel">
                    </codx-label>
                  </div>

                  <div class="d-flex align-items-center text-gray-700 mb-0">
                    <span class="icon-attach_money icon-16 me-2"></span>
                    <codx-label fiedName="JSalary" [formModel]="eBasicSalaryFormmodel">
                    </codx-label>
                  </div>
                </div>
                <div class="col-2">
                  <div class="mb-3 d-flex justify-content-end">
                    <span class="fw-bold item-active" (click)="clickViewDetail(data, eBasicSalaryFuncID)" [innerHTML]="
                          data?.bSalary
                            | formatvalue : eBasicSalaryFormmodel : 'bSalary'
                            | async
                        ">
                    </span>
                  </div>
                  <div class="mb-3 d-flex justify-content-end">
                    <span class="fw-bold text-dark" [innerHTML]="
                          data?.siSalary
                            | formatvalue : eBasicSalaryFormmodel : 'siSalary'
                            | async
                        ">
                    </span>
                  </div>
                  <div class="mb-0 d-flex justify-content-end">
                    <span class="fw-bold text-dark">
                      <span [innerHTML]="
                            data.jSalary
                              | formatvalue : eBasicSalaryFormmodel : 'jSalary'
                              | async
                          "></span>
                    </span>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>

        </ng-container>
      </div>
    </div>
    <!--Removed Lương chức danh -->
    <div class="user-profile overview d-block" [id]="eJobSalFuncID">
      <div class="rounded-2 p-5 bg-white mb-4" *ngIf="eJobSalaryFormModel">
        <div class="d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center text-primary">
            <div class="user-status d-flex align-items-center">
              <span class="icon-attach_money icon-20 me-2"></span>
            </div>
            <div class="fs-5-sm fw-bold text-primary text-uppercase">
              {{ eJobSalFuncID|transText:lstFuncID }}
            </div>
          </div>
          <div class="d-flex align-items-center ms-5 me-3">
            <button type="button" class="btn btn-icon btn-sm btn-white" (click)="
                HandleEmployeeJobSalariesInfo(addHeaderText, 'add', null)
              ">
              <i class="icon-add icon-18"></i>
            </button>
            <span class="text-gray-400 mx-2">|</span>
            <button type="button" class="btn btn-sm btn-white tect-primary">
              <codx-label name="lblSeeAllEBenefit" [formModel]="eInfoFormModel" default="Xem tất cả">
              </codx-label>
            </button>
            <span class="mt-1">
              <codx-input type="switch" (valueChange)="valueChangeViewAllEJobSalary($event)"
                [checked]="ViewAllEJobSalaryFlag"></codx-input></span>
          </div>
        </div>

        <div class="mb-1">
          <div class="me-4 mb-2" *ngIf="crrJobSalaries != null && eJobSalaryFormModel">
            <codx-temp-full (clickMF)="clickMF($event, crrJobSalaries, 'jobSalary')" [dataItem]="crrJobSalaries"
              [formModel]="eJobSalaryFormModel" [footer]="footerJobSalaries" cardCss="px-2 pt-4 pb-2"
              [typeMF]="'hover'">
            </codx-temp-full>

            <ng-template #footerJobSalaries let-data>
              <div class="row">
                <div class="col-4">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="JSalary" [formModel]="eJobSalaryFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="icon-attach_money icon-16 text-primary me-2"></span>
                    <span class="fw-bold text-primary">
                      <span [innerHTML]="
                          data.jSalary
                            | formatvalue : eJobSalaryFormModel : 'bSalary'
                            | async
                        "></span>
                    </span>
                  </div>
                </div>
                <div class="col-8">
                  <div class="text-gray-600 pb-1">
                    <codx-label fiedName="EffectedDate" [formModel]="eJobSalaryFormModel">
                    </codx-label>
                  </div>
                  <div class="d-flex align-items-center">
                    <span class="icon-event icon-16 text-gray-600 me-2"></span>
                    <span class="fw-bold text-dark">
                      <span [innerHTML]="
                          data?.effectedDate
                            | formatvalue : eJobSalaryFormModel : 'effectedDate'
                            | async
                        "></span>
                    </span>
                    <span class="mx-1 text-gray-400">-</span>
                    <span class="fw-bold text-dark">
                      <span [innerHTML]="
                          data?.expiredDate
                            | formatvalue : eJobSalaryFormModel : 'expiredDate'
                            | async
                        "></span>
                    </span>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>

          <div class="" *ngIf="ViewAllEJobSalaryFlag">
            <div class="d-flex align-items-center mt-7 mb-3">
              <span class="icon-i-filter-right icon-20 me-2"></span>
              <div class="d-flex align-items-center me-3">
                <codx-label default="Chi tiết" class="fw-bold text-uppercase fs-5-sm text-gray-600">
                </codx-label>
                <span class="text-gray-500 mx-2"> | </span>
                <span class="text-gray-500">({{ eJobSalaryRowCount }})</span>
              </div>
            </div>
            <div>
              <codx-gridview *ngIf="jobSalaryColumnGrid && eJobSalaryFormModel" #jobSalaryGridview
                [formModel]="eJobSalaryFormModel" [columnsGrid]="jobSalaryColumnGrid" [service]="'HR'"
                [assemblyName]="'Core'" [className]="'DataBusiness'" [method]="'LoadDataAsync'"
                [predicates]="'EmployeeID=@0'" [dataValues]="employeeID" height="auto"></codx-gridview>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Phụ cấp -->
    <div class="user-profile overview d-block" [id]="benefitFuncID"
      *ngIf="salaryBenefitInfoPer.benefitFuncID.view == true">
      <div class="rounded-2 p-5 bg-white mb-4" *ngIf="benefitFormodel">
        <div class="d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center text-primary">
            <div class="user-status d-flex align-items-center">
              <span class="icon-attach_money icon-20 me-2"></span>
            </div>
            <div class="fs-5-sm fw-bold text-uppercase mt-1">
              {{ benefitFuncID | transText : lstFuncSalaryBenefit }}
            </div>
          </div>
          <div class="d-flex align-items-center ms-5 me-3">
            <div
              *ngIf="salaryBenefitInfoPer.benefitFuncID.write == true && (fromWS == false || salaryBenefitInfoPer.benefitFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white"
                (click)="handlEmployeeBenefit(addHeaderText, 'add', null)">
                <i class="icon-add icon-18"></i>
              </button>
              <span class="text-gray-400 mx-2">|</span>
            </div>

            <button type="button" class="btn btn-sm btn-white text-primary"
              (click)="valueChangeViewAllEBenefit($event)">
              <codx-label name="lblSeeAllEBenefit" [formModel]="benefitFormodel" default="Xem tất cả">
              </codx-label>
            </button>
          </div>
        </div>
        <ng-container *ngIf="
            loadEBenefit && listCrrBenefit?.length > 0;
            else emptyDataTemplate
          ">

          <div class="mt-4 row">
            <ng-container *ngFor="let benefit of listCrrBenefit">
              <div class="ps-8 w-100">
                <codx-temp-full *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
                  (clickMF)="clickMF($event, benefit, 'eBenefit')" [dataItem]="benefit" [formModel]="benefitFormodel"
                  [footer]="footerBenefit" cardCss="hover-active bg-hover cursor-pointer" [typeMF]="'hover'">
                </codx-temp-full>

                <codx-temp-full *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
                  (clickMF)="clickMF($event, benefit, 'eBenefit')" [dataItem]="benefit" [formModel]="benefitFormodel"
                  [footer]="footerBenefit" cardCss="hover-active bg-hover cursor-pointer" [typeMF]="'hover'"
                  (changeDataMF)="handleShowHideMfWs($event, benefitFunc)">
                </codx-temp-full>
                <ng-template #footerBenefit let-data>
                  <div class="d-flex align-items-center py-1 rounded-1 min-h-30px">
                    <div class="w-150px min-w-150px">
                      <div class="d-flex align-items-top">
                        <span class="icon-card_giftcard text-gray-700 me-2 icon-16"></span>
                        <span class="item-active" (click)="clickViewDetail(data, benefitFuncID)" [innerHTML]="
                            data.benefitID
                              | formatvalue : benefitFormodel : 'benefitID'
                              | async
                          ">
                        </span>
                      </div>
                    </div>
                    <div class="w-100">
                      <div class="d-flex align-items-center">
                        <div class="w-100px d-flex justify-content-end">
                          <span class="text-dark fw-bold" [innerHTML]="
                              data?.benefitAmt
                                | formatvalue : benefitFormodel : 'benefitAmt'
                                | async
                            "></span>
                        </div>
                        <div class="w-100px d-flex align-items-center">
                          <span class="text-gray-400 mx-2">/</span>
                          <span class="text-gray-600" [innerHTML]="
                              data?.benefitNorm
                                | formatvalue : benefitFormodel : 'benefitNorm'
                                | async
                            ">
                          </span>
                        </div>

                      </div>
                    </div>
                    <!-- <div class="col-4">
                      <span
                        class="icon-event text-gray-600 icon-14 pe-2"
                      ></span
                      >Hiệu lực
                      <span
                        class="text-dark fw-bold"
                        [innerHTML]="
                          data?.effectedDate
                            | formatvalue : benefitFormodel : 'effectedDate'
                            | async
                        "
                      >
                      </span>
                    </div> 
                  -->
                  </div>
                </ng-template>
              </div>
            </ng-container>
          </div>

        </ng-container>
      </div>
    </div>
    <div class="div_final"></div>
  </div>
</ng-template>

<!-- panel Quá trình làm việc-->
<ng-template #workingProcess>
  <div class="tab-horizone bg-white h-od-tab mb-4">
    <ul class="nav nav-tabs px-4">
      <ng-container *ngFor="let item of lstFuncHRProcess; let i = index">
        <li class="nav-item" (click)="navChange(item.functionID, 3, $event.target)">
          <a class="nav-link" [ngClass]="item.functionID == active[3] ? 'active' : ''">
            <div class="text-uppercase fw-bold">{{ item.customName }}</div>
          </a>
        </li>
      </ng-container>
    </ul>
  </div>
  <div class="pw-content w-100 scroll-y" data-kt-scroll="true" data-kt-scroll-activate="{default: true}"
    data-kt-scroll-max-height="auto" data-kt-scroll-dependencies=".pw-profile,.pw-menu"
    data-kt-scroll-wrappers=".employee-container" data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']"
    (sectionChange)="onSectionChange($event, 3)">
    <!-- [spiedTags]="['DIV']" -->
    <!-- <div
      class="user-content flex-row-fluid"
      scrollSpy
      (sectionChange)="onSectionChange($event)"
    > -->
    <ng-container>
      <!-- Hợp đồng lao động -->
      <div class="user-profile overview d-block" [id]="eContractFuncID"
        *ngIf="workingProcessInfoPer.eContractFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <div class="user-status d-flex align-items-center">
                <span class="icon-check icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase mt-1">
                {{ eContractFuncID | transText : lstFuncHRProcess }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5 me-3">
              <button type="button" class="btn btn-sm btn-white text-primary" (click)="popupViewAllContract()">
                <codx-label name="lblSeeAllEContract" [formModel]="eInfoFormModel" default="Xem tất cả">
                </codx-label>
              </button>
              <div
                *ngIf="workingProcessInfoPer.eContractFuncID.write == true && (fromWS == false || workingProcessInfoPer.eContractFuncID.isPortal == false)">
                <span class="text-gray-400 mx-2">|</span>
                <button type="button" class="btn btn-icon btn-sm btn-white"
                  (click)="HandleEContractInfo(addHeaderText, 'add', null)">
                  <span class="icon-add icon-18"></span>
                </button>
              </div>

            </div>
          </div>

          <div class="mt-5 row mb-2 py-2 hover-active bg-hover cursor-pointer"
            *ngIf="crrEContract && eContractFormModel; else emptyDataTemplate">
            <codx-temp-full *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
              (clickMF)="clickMF($event, crrEContract, 'eContract')" [dataItem]="crrEContract"
              [formModel]="eContractFormModel" [footer]="footerEContract" cardCss="px-2 pt-4 pb-2" [typeMF]="'hover'">
            </codx-temp-full>

            <codx-temp-full *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
              (clickMF)="clickMF($event, crrEContract, 'eContract')" [dataItem]="crrEContract"
              [formModel]="eContractFormModel" [footer]="footerEContract" cardCss="px-2 pt-4 pb-2" [typeMF]="'hover'"
              (changeDataMF)="handleShowHideMfWs($event, eContractFunc)">
            </codx-temp-full>
            <ng-template #footerEContract let-data>
              <div class="row mb-2">
                <div class="col-4">
                  <div class="d-flex align-items-center">
                    <span class="icon-wysiwyg icon-1 me-2"></span>
                    <codx-label [setRequire]="false" fiedName="ContractTypeID" [formModel]="eContractFormModel">
                    </codx-label>
                  </div>
                </div>
                <div class="col-8">
                  <div class="d-flex align-items-center ">
                    <div class=" fw-bold item-active" (click)="clickViewDetail(data, eContractFuncID)" [innerHTML]="
                        data?.contractTypeID
                          | formatvalue : eContractFormModel : 'contractTypeID'
                          | async
                      "></div>
                  </div>
                </div>
              </div>

              <div class="row mb-2">
                <div class="col-4">
                  <div class="d-flex align-items-center">
                    <span class="icon-event_note icon-16 me-2"></span>
                    <codx-label [name]="'lblEContractMainTimeLimit'" [formModel]="eContractFormModel"
                      [default]="'Thời hạn hợp đồng'">
                    </codx-label>
                  </div>
                </div>
                <div class="col-8">
                  <div class="d-flex align-items-center">
                    <span class="text-dark">
                      <span [innerHTML]="
                          data?.effectedDate
                            | formatvalue : eContractFormModel : 'effectedDate'
                            | async
                        "></span>
                    </span>
                    <span class="mx-2 text-gray-400">-</span>
                    <span class="text-dark">
                      <span [innerHTML]="
                          data?.expiredDate
                            | formatvalue : eContractFormModel : 'expiredDate'
                            | async
                        "></span>
                    </span>
                  </div>
                </div>
              </div>

              <div class="row mb-2">
                <div class="col-4">
                  <div class="d-flex align-items-center">
                    <span class="icon-hd icon-16 me-2"></span>
                    <codx-label class="text-dark" fiedName="ContractNo" [setRequire]="false"
                      [formModel]="eContractFormModel">
                    </codx-label>
                    <span class="mx-2">-</span>
                    <codx-label class="text-dark" fiedName="SignedDate" [setRequire]="false"
                      [formModel]="eContractFormModel">
                    </codx-label>
                  </div>
                </div>
                <div class="col-8">
                  <div class="d-flex align-items-center">
                    <span class="text-dark fw-bold">
                      <span>{{ crrEContract?.contractNo }}</span>
                    </span>
                    <span class="icon-i-arrow-down-left-circle-fill fs-icon icon-4 mx-2 text-gray-400"></span>
                    <div class="text-gray-600">
                      <span [innerHTML]="
                          data?.signedDate
                            | formatvalue : eContractFormModel : 'signedDate'
                            | async
                        "></span>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
      <!-- Bổ nhiệm - Điều chuyển -->
      <div class="user-profile overview d-block" [id]="appointionFuncID"
        *ngIf="workingProcessInfoPer.appointionFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <span class="icon-assignment_ind icon-20 me-2"></span>
              <div class="fs-5-sm fw-bold text-primary text-uppercase mt-1">
                {{ appointionFuncID | transText: lstFuncHRProcess }}
              </div>
              <!-- <span class="text-gray-500 mx-2">|</span>
              <span class="text-gray-800">({{ appointionRowCount }})</span> -->
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="workingProcessInfoPer.appointionFuncID.write == true && (fromWS == false || workingProcessInfoPer.appointionFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white" (click)="
                HandleEmployeeAppointionInfo(addHeaderText, 'add', null)
                ">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>
          <div class="mt-3">
            <div *ngIf="appointionFormModel && appointionColumnGrid">
              <!-- <codx-gridview
                *ngIf="appointionColumnGrid"
                #appointionGridView
                [formModel]="appointionFormModel"
                [columnsGrid]="appointionColumnGrid"
                [service]="'HR'"
                [assemblyName]="'Core'"
                [className]="'DataBusiness'"
                [method]="'LoadDataAsync'"
                [predicates]="'EmployeeID=@0'"
                [dataValues]="employeeID"
                [pageSize]="numPageSizeGridView"
                [entityName]="'HR_EAppointions'"
                [emptyTemplate]="emptyDataTemplate"
              ></codx-gridview> -->

              <codx-gridview-v2 #appointionGridView [entityName]="appointionFormModel?.entityName"
                [columnsGrid]="appointionColumnGrid" [service]="'HR'" [assemblyName]="'Core'"
                [className]="'DataBusiness'" [autoFitColumns]="false" [hideMoreFunc]="true"
                [sorts]="[appointionSortModel]" [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'"
                [dataValues]="employeeID" [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>
      <!-- Nghỉ phép -->
      <div class="user-profile overview d-block" [id]="dayoffFuncID"
        *ngIf="workingProcessInfoPer.dayoffFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4" *ngIf="dayoffFormModel">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div class="d-flex align-items-center">
              <span class="icon-deck icon-20 me-2 text-primary"></span>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ dayoffFuncID | transText : lstFuncHRProcess }}
              </div>
              <!-- <span class="text-gray-500 mx-2">|</span>
              <span class="text-gray-800">({{ dayoffRowCount }})</span> -->
            </div>
            <div class="d-flex align-items-center ms-5">
              <codx-dropdown-select *ngIf="eDayOffGrvSetup && dayoffHeaderTexts" [cssClass]="'rounded-pill border-1'"
                cssPopup="h-350px w-300px" [emptyText]="dayoffHeaderTexts['KowID']" [isMulti]="true" type="combobox"
                field="KowID" [refValue]="eDayOffGrvSetup?.KowID?.referedValue"
                (valueChange)="valueChangeFilterDayOff($event)"></codx-dropdown-select>
              <span class="ms-2 codx-dropdown-sm">
                <codx-dropdown-calendar [cssPopup]="'w-550px h-350px'" emptyText="Chọn năm..." [displayOption]="ops"
                  [selectedType]="'y'" [cssClass]="'rounded-pill'"
                  (change)="valueChangeYearFilterDayOff($event)"></codx-dropdown-calendar>
                <!-- [firstChange]="false" -->
              </span>
              <div
                *ngIf="workingProcessInfoPer.dayoffFuncID.write == true && (fromWS == false || workingProcessInfoPer.dayoffFuncID.isPortal == false)">
                <span class="text-gray-500 mx-2">|</span>
                <button class="btn btn-icon btn-sm btn-white"
                  (click)="HandleEmployeeDayOffInfo(addHeaderText, 'add', null)">
                  <span class="icon-add icon-18"></span>
                </button>
              </div>
            </div>
          </div>

          <div class="pt-2">
            <div class="d-flex flex-wrap align-items-center">
              <div class="d-flex align-items-center">
                <span class="icon-date_range icon-16 me-2"></span>
                <span class="text-gray-600 me-1">Tiêu chuẩn phép năm: </span>
                <span class="text-primary fw-bold me-1">14</span>
                <span class="fw-bold">ngày/năm</span>
              </div>
              <span class="mx-2 text-gray-400">|</span>
              <div class="d-flex flex-wrap">
                <span class="text-gray-600 me-1">Còn lại năm trước:</span>
                <span class="text-primary fw-bold me-1">1</span>
                <span class="fw-bold">ngày</span>
                <span class="icon-i-dot text-gray-400"></span>
                <span class="text-gray-600 me-1">Còn năm nay:</span>
                <span class="text-primary fw-bold me-1">14</span>
                <span class="fw-bold">ngày</span>
              </div>
            </div>
            <!-- String này đang gán cứng chờ module phát triển -->
          </div>

          <div class="mb-1 mt-4" *ngIf="dayoffFormModel && dayoffColumnGrid; else emptyDataTemplate">
            <!-- <codx-gridview
              *ngIf="dayoffColumnGrid"
              [sort]="[dayOffSortModel]"
              #dayoffGridView
              [formModel]="dayoffFormModel"
              [columnsGrid]="dayoffColumnGrid"
              [service]="'HR'"
              [assemblyName]="'Core'"
              [className]="'DataBusiness'"
              [method]="'LoadDataAsync'"
              [predicates]="'EmployeeID=@0'"
              [dataValues]="employeeID"
              [pageSize]="numPageSizeGridView"
              [entityName]="'HR_EDayOffs'"
              height="auto"
              [emptyTemplate]="emptyDataTemplate"
            ></codx-gridview> -->

            <codx-gridview-v2 #dayoffGridView [entityName]="dayoffFormModel?.entityName"
              [columnsGrid]="dayoffColumnGrid" [service]="'HR'" [sorts]="[dayOffSortModel]" [assemblyName]="'Core'"
              [autoFitColumns]="false" [className]="'DataBusiness'" [hideMoreFunc]="true" [method]="'LoadDataAsync'"
              [predicates]="dayOffInitPredicate" [dataValues]="employeeID"
              [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
          </div>
        </div>
      </div>
      <!-- Nhật ký công tác -->
      <div class="user-profile overview d-block" [id]="eBusinessTravelFuncID"
        *ngIf="workingProcessInfoPer.eBusinessTravelFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4" *ngIf="EBusinessTravelFormodel">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-local_taxi icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-primary mt-1">
                <span class="text-uppercase">
                  {{eBusinessTravelFuncID | transText : lstFuncHRProcess }}
                </span>
              </div>
              <!-- <span class="text-gray-500 mx-2"> | </span>
              <span class="text-gray-800">({{ eBusinessTravelRowCount }})</span> -->
            </div>
            <div class="d-flex align-items-center ms-5">
              <codx-dropdown-calendar [cssPopup]="'w-550px h-350px'" emptyText="Năm" [firstChange]="false"
                [displayOption]="ops" [selectedType]="'y'" [cssClass]="'rounded-pill'"
                (change)="valueChangeYearFilterBusinessTravel($event)"></codx-dropdown-calendar>
              <div
                *ngIf="workingProcessInfoPer.eBusinessTravelFuncID.write == true && (fromWS == false || workingProcessInfoPer.eBusinessTravelFuncID.isPortal == false)">
                <span class="text-gray-500 mx-2">|</span>
                <button class="btn btn-icon btn-sm btn-white"
                  (click)="HandleEBusinessTravel(addHeaderText, 'add', null)">
                  <span class="icon-add icon-18"></span>
                </button>
              </div>
            </div>
          </div>
          <div class="mb-1 mt-5" *ngIf="EBusinessTravelFormodel && businessTravelColumnGrid; else emptyDataTemplate">
            <div>
              <!-- <codx-gridview
                *ngIf="businessTravelColumnGrid"
                #businessTravelGrid
                [sort]="[businessTravelSortModel]"
                [formModel]="EBusinessTravelFormodel"
                [columnsGrid]="businessTravelColumnGrid"
                [service]="'HR'"
                [assemblyName]="'Core'"
                [className]="'DataBusiness'"
                [method]="'LoadDataAsync'"
                [predicates]="'EmployeeID=@0'"
                [dataValues]="employeeID"
                [pageSize]="numPageSizeGridView"
                [entityName]="'HR_EBusinessTravels'"
                [emptyTemplate]="emptyDataTemplate"
              ></codx-gridview> -->

              <codx-gridview-v2 #businessTravelGrid [entityName]="EBusinessTravelFormodel?.entityName"
                [columnsGrid]="businessTravelColumnGrid" [sorts]="[businessTravelSortModel]" [service]="'HR'"
                [assemblyName]="'Core'" [className]="'DataBusiness'" [autoFitColumns]="false" [hideMoreFunc]="true"
                [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
                [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>
      <!-- Khen thưởng -->
      <div class="user-profile overview d-block" [id]="awardFuncID"
        *ngIf="workingProcessInfoPer.awardFuncID.view == true">
        <ngx-skeleton-loader count="5" animation="progress"></ngx-skeleton-loader>

        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status d-flex align-items-center text-primary">
                <span class="icon-sentiment_satisfied icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ awardFuncID | transText : lstFuncHRProcess }}
              </div>
              <!-- <span class="text-gray-500 mx-2"> | </span>
              <span class="text-dark">
                <span>({{ awardRowCount }})</span>
              </span> -->
            </div>
            <div class="d-flex align-items-center ms-5">
              <!-- <codx-dropdown-calendar
                *ngIf="awardHeaderText"
                [cssPopup]="'w-550px h-350px'"
                [emptyText]="awardHeaderText['InYear']"
                [firstChange]="false"
                [displayOption]="ops"
                [selectedType]="'y'"
                [cssClass]="'rounded-pill'"
                (change)="valueChangeYearFilterAward($event)"
              ></codx-dropdown-calendar>
              <span class="text-gray-500 mx-2">|</span> -->
              <button
                *ngIf="workingProcessInfoPer.awardFuncID.write == true && (fromWS == false || workingProcessInfoPer.awardFuncID.isPortal == false)"
                type="button" class="btn btn-icon btn-sm btn-white"
                (click)="HandleEmployeeEAwardsInfo(addHeaderText, 'add', null)">
                <i class="icon-add icon-18"></i>
              </button>
            </div>
          </div>

          <div class="mb-1 mt-5" *ngIf="awardFormModel && awardColumnsGrid; else emptyDataTemplate">
            <ng-container>
              <codx-gridview-v2 #eAwardGridView [entityName]="awardFormModel?.entityName"
                [columnsGrid]="awardColumnsGrid" [service]="'HR'" [assemblyName]="'Core'" [className]="'DataBusiness'"
                [autoFitColumns]="false" [hideMoreFunc]="true" [sorts]='[eAwardsSortModel1, eAwardsSortModel2]'
                [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
                [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </ng-container>
          </div>
        </div>
      </div>
      <!-- Kỷ luật -->
      <div class="user-profile overview d-block" [id]="eDisciplineFuncID"
        *ngIf="workingProcessInfoPer.eDisciplineFuncID.view == true">
        <ngx-skeleton-loader count="5" animation="progress"></ngx-skeleton-loader>
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-sentiment_dissatisfied icon-20 me-2"></span>
              </div>

              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eDisciplineFuncID | transText :lstFuncHRProcess }}
              </div>
              <!-- <span class="text-gray-500 mx-2">|</span>
              <span class="text-dark">
                <span>({{ eDisciplineRowCount }})</span>
              </span> -->
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="workingProcessInfoPer.eDisciplineFuncID.write == true && (fromWS == false || workingProcessInfoPer.eDisciplineFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white" (click)="
                  HandleEmployeeEDisciplinesInfo(addHeaderText, 'add', null)
                ">
                <i class="icon-add icon-18"></i>
              </button>
            </div>
          </div>

          <div class="mb-1 mt-5" *ngIf="eDisciplineFormModel && eDisciplineColumnsGrid; else emptyDataTemplate">
            <div>
              <!-- <codx-gridview
                *ngIf="eDisciplineColumnsGrid && eDisciplineFormModel"
                #eDisciplineGridView
                [formModel]="eDisciplineFormModel"
                [columnsGrid]="eDisciplineColumnsGrid"
                [service]="'HR'"
                [sort]="[disciplinesSortModel]"
                [assemblyName]="'Core'"
                [className]="'DataBusiness'"
                [method]="'LoadDataAsync'"
                [predicates]="'EmployeeID=@0'"
                [dataValues]="employeeID"
                [pageSize]="numPageSizeGridView"
                [entityName]="'HR_EDisciplines'"
                [emptyTemplate]="emptyDataTemplate"
              >
              </codx-gridview> -->

              <codx-gridview-v2 #eDisciplineGridView [entityName]="eDisciplineFormModel?.entityName"
                [columnsGrid]="eDisciplineColumnsGrid" [sorts]="[disciplinesSortModel]" [service]="'HR'"
                [assemblyName]="'Core'" [autoFitColumns]="false" [className]="'DataBusiness'" [hideMoreFunc]="true"
                [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
                [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>

      <div class="div_final"></div>
    </ng-container>
    <!-- </div> -->
  </div>
</ng-template>

<!-- panel Kiến thức-->
<ng-template #knowledge>
  <div class="tab-horizone bg-white h-od-tab mb-4">
    <ul class="nav nav-tabs px-4">
      <ng-container *ngFor="let item of lstFuncKnowledge; let i = index">
        <li class="nav-item" (click)="navChange(item.functionID, 4, $event.target)">
          <a class="nav-link" [ngClass]="item.functionID == active[4] ? 'active' : ''">
            <div class="text-uppercase fw-bold">{{ item.customName }}</div>
          </a>
        </li>
      </ng-container>
    </ul>
  </div>

  <div class="pw-content w-100 scroll-y" data-kt-scroll="true" data-kt-scroll-activate="{default: true}"
    data-kt-scroll-max-height="auto" data-kt-scroll-dependencies=".pw-profile,.pw-menu"
    data-kt-scroll-wrappers=".employee-container" data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']"
    (sectionChange)="onSectionChange($event, 4)">
    <!-- <div class="user-content flex-row-fluid"> -->
    <ng-container>
      <!-- Bằng cấp -->
      <div class="user-profile overview d-block" [id]="eDegreeFuncID"
        *ngIf="knowledgeInfoPer.eDegreeFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-school icon-20 me-2"></span>
              </div>

              <div class="fs-5-sm fw-bold text-uppercase text-primary">
                {{ eDegreeFuncID | transText: lstFuncKnowledge }}
              </div>
              <!-- <span class="text-gray-500 mx-2">|</span>
              <span class="text-dark">({{ eDegreeRowCount }})</span>
            -->
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="knowledgeInfoPer.eDegreeFuncID.write == true && (fromWS == false || knowledgeInfoPer.eDegreeFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white"
                (click)="HandleEmployeeEDegreeInfo(addHeaderText, 'add', null)">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>
          <div class="mb-1 mt-5">
            <div *ngIf="eDegreeFormModel && eDegreeColumnsGrid; else emptyDataTemplate">
              <codx-gridview-v2 #eDegreeGridView [entityName]="eDegreeFormModel?.entityName"
                [columnsGrid]="eDegreeColumnsGrid" [service]="'HR'" [autoFitColumns]="false"
                [sorts]="[issuedDateSortModel]" [assemblyName]="'Core'" [className]="'DataBusiness'"
                [hideMoreFunc]="true" [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'"
                [dataValues]="employeeID" [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>
      <!-- Chứng chỉ -->
      <div class="user-profile overview d-block" [id]="eCertificateFuncID"
        *ngIf="knowledgeInfoPer.eCertificateFuncID.view == true">
        <div class="rounded-2 p-4 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-class icon-20 me-2"></span>
              </div>

              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eCertificateFuncID | transText: lstFuncKnowledge }}
              </div>
              <!-- <span class="text-gray-500 mx-2">|</span>
              <span class="text-dark">({{ eCertificateRowCount }})</span> -->
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="knowledgeInfoPer.eCertificateFuncID.write == true && (fromWS == false || knowledgeInfoPer.eCertificateFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white position-relative" (click)="
                  HandleEmployeeECertificateInfo(addHeaderText, 'add', null)
                ">
                <i class="icon-add icon-18"></i>
              </button>
            </div>
          </div>

          <div class="mb-1 mt-5">
            <div *ngIf="eCertificateFormModel && eCertificateColumnGrid; else emptyDataTemplate">
              <codx-gridview-v2 #eCertificateGridView [entityName]="eCertificateFormModel?.entityName"
                [autoFitColumns]="false" [columnsGrid]="eCertificateColumnGrid" [sorts]="[issuedDateSortModel]"
                [service]="'HR'" [assemblyName]="'Core'" [className]="'DataBusiness'" [hideMoreFunc]="true"
                [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
                [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>
      <!-- Kỹ năng -->
      <div class="user-profile overview d-block" [id]="eSkillFuncID" *ngIf="knowledgeInfoPer.eSkillFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <div class="user-status d-flex align-items-center">
                <span class="icon-fitness_center icon-20 me-2"></span>
              </div>

              <div class="fs-5-sm fw-bold text-uppercase mt-1">
                {{ eSkillFuncID | transText: lstFuncKnowledge }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5">
              <button
                *ngIf="knowledgeInfoPer.eSkillFuncID.write == true && (fromWS == false || knowledgeInfoPer.eSkillFuncID.isPortal == false)"
                type="button" class="btn btn-icon btn-sm btn-white"
                (click)="HandleEmployeeESkillsInfo(addHeaderText, 'add', null)">
                <i class="icon-add icon-18"></i>
              </button>
            </div>
          </div>
          <div class="mb-1 mt-7" *ngIf="eSkillFormmodel && eSkillColumnGrid; else emptyDataTemplate">
            <codx-gridview-v2 #eSkillGridViewID [entityName]="eSkillFormmodel?.entityName" [autoFitColumns]="false"
              [columnsGrid]="eSkillColumnGrid" [service]="'HR'" [assemblyName]="'Core'" [className]="'DataBusiness'"
              [sorts]="[skillIDSortModel, skillGradeSortModel]" [hideMoreFunc]="true" [method]="'LoadDataAsync'"
              [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
              [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
          </div>
        </div>
      </div>

      <!-- Đào tạo -->
      <div class="user-profile overview d-block" [id]="eTrainCourseFuncID"
        *ngIf="knowledgeInfoPer.eTrainCourseFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status">
                <span class="icon-local_library icon-20 me-2 text-primary"></span>
              </div>

              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eTrainCourseFuncID| transText :lstFuncKnowledge }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5">
              <codx-dropdown-select *ngIf="eTrainCourseGrvSetup" [emptyText]="eTrainCourseGrvSetup.TrainForm.headerText"
                [cssClass]="'rounded-pill border-1'" cssPopup="h-350px w-300px" [isMulti]="true" type="valuelist"
                field="TrainForm" [refValue]="eTrainCourseGrvSetup.TrainForm.referedValue"
                (valueChange)="valueChangeFilterTrainCourse($event)"></codx-dropdown-select>
              <span class="ms-1">
                <codx-dropdown-calendar *ngIf="eTrainCourseGrvSetup" [cssPopup]="'w-550px h-350px'" emptyText="Năm"
                   [firstChange]="false" [displayOption]="ops"
                  [selectedType]="'y'" [cssClass]="'rounded-pill'"
                  (change)="valueChangeYearFilterETrainCourse($event)"></codx-dropdown-calendar></span>
              <span class="text-gray-500 mx-2">|</span>
              <span class="ms-3">
                <button
                  *ngIf="knowledgeInfoPer.eTrainCourseFuncID.write == true && (fromWS == false || knowledgeInfoPer.eTrainCourseFuncID.isPortal == false)"
                  type="button" class="btn btn-icon btn-sm btn-white" (click)="
                    HandleEmployeeTrainCourseInfo(addHeaderText, 'add', null)
                  ">
                  <i class="icon-add icon-18"></i>
                </button>
              </span>
            </div>
          </div>

          <div class="mb-1 mt-5" *ngIf="eTrainCourseFormModel && eTrainCourseColumnGrid; else emptyDataTemplate">
            <div>
              <codx-gridview-v2 #eTrainCourseGridView [entityName]="eTrainCourseFormModel?.entityName"
                [autoFitColumns]="false" [columnsGrid]="eTrainCourseColumnGrid" [sorts]="[TrainFromDateSortModel]"
                [service]="'HR'" [assemblyName]="'Core'" [className]="'DataBusiness'" [hideMoreFunc]="true"
                [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
                [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>
      <div class="div_final"></div>

    </ng-container>
    <!-- </div> -->
  </div>
</ng-template>

<!-- panel Sức khỏe-->
<ng-template #healthInfo>
  <div class="tab-horizone bg-white h-od-tab mb-4">
    <ul class="nav nav-tabs px-4">
      <ng-container *ngFor="let item of lstFuncHealth; let i = index">
        <li class="nav-item" (click)="navChange(item.functionID, 5, $event.target)">
          <a class="nav-link" [ngClass]="item.functionID == active[5] ? 'active' : ''">
            <div class="text-uppercase fw-bold">{{ item.customName }}</div>
          </a>
        </li>
      </ng-container>
    </ul>
  </div>

  <div class="pw-content w-100 scroll-y" data-kt-scroll="true" data-kt-scroll-activate="{default: true}"
    data-kt-scroll-max-height="auto" data-kt-scroll-dependencies=".pw-profile,.pw-menu"
    data-kt-scroll-wrappers=".employee-container" data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']"
    (sectionChange)="onSectionChange($event, 5)">
    <!-- <div class="user-content flex-row-fluid"> -->
    <ng-container>
      <!-- Tai nạn lao động -->
      <div class="user-profile overview d-block" [id]="eAccidentsFuncID"
        *ngIf="healthInfoPer.eAccidentsFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center text-primary">
              <div class="user-status d-flex align-items-center">
                <span class="icon-wheelchair_pickup icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary">
                {{ eAccidentsFuncID|transText:lstFuncHealth }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5">
              <button
                *ngIf="healthInfoPer.eAccidentsFuncID.write == true && (fromWS == false || healthInfoPer.eAccidentsFuncID.isPortal == false)"
                type="button" class="btn btn-icon btn-sm btn-white"
                (click)="HandleEmployeeAccidentInfo(addHeaderText, 'add', null)">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>
          <div class="mb-1" *ngIf="eAccidentsFormModel && eAccidentsColumnsGrid; else emptyDataTemplate">
            <codx-gridview-v2 #eAccidentGridView [entityName]="eAccidentsFormModel?.entityName" [autoFitColumns]="false"
              [columnsGrid]="eAccidentsColumnsGrid" [sorts]="[accidentDateSortModel]" [service]="'HR'"
              [assemblyName]="'Core'" [className]="'DataBusiness'" [hideMoreFunc]="true" [method]="'LoadDataAsync'"
              [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
              [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
          </div>
        </div>
      </div>
      <!-- Bệnh nghề nghiệp -->
      <div class="user-profile overview d-block" [id]="eDiseasesFuncID"
        *ngIf="healthInfoPer.eDiseasesFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-sick icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eDiseasesFuncID|transText:lstFuncHealth }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5" *ngIf="eDiseasesHeaderText">
              <button
                *ngIf="healthInfoPer.eDiseasesFuncID.write == true && (fromWS == false || healthInfoPer.eDiseasesFuncID.isPortal == false)"
                type="button" class="btn btn-icon btn-sm btn-white" (click)="
                  HandleEmployeeEDiseasesInfo(addHeaderText, 'add', null)
                ">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>

          <!--Griddiseases-->
          <div class="mt-7" *ngIf="eDiseasesFormModel && eDiseasesColumnsGrid; else emptyDataTemplate">
            <codx-gridview-v2 #eDiseasesGridView [entityName]="eDiseasesFormModel?.entityName"
              [columnsGrid]="eDiseasesColumnsGrid" [sorts]="[diseasesFromDateSortModel]" [service]="'HR'"
              [autoFitColumns]="false" [assemblyName]="'Core'" [className]="'DataBusiness'" [hideMoreFunc]="true"
              [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
              [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
          </div>
        </div>
      </div>

      <!-- Khám sức khỏe -->
      <div class="user-profile overview d-block" [id]="eHealthFuncID" *ngIf="healthInfoPer.eHealthFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status d-flex align-items-center">
                <span class="icon-accessibility icon-20 me-2 text-primary"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eHealthFuncID | transText: lstFuncHealth }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="healthInfoPer.eHealthFuncID.write == true && (fromWS == false || healthInfoPer.eHealthFuncID.isPortal == false)">
              <button type="button" class="btn btn-icon btn-sm btn-white"
                (click)="HandleEmployeeEHealths(addHeaderText, 'add', null)">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>
          <div class="mb-1 mt-6" *ngIf="eHealthFormModel && eHealthColumnGrid; else emptyDataTemplate">
            <div>
              <codx-gridview-v2 #eHealthsGridView [entityName]="eHealthFormModel?.entityName"
                [columnsGrid]="eHealthColumnGrid" [sorts]="[healthDateSortModel]" [service]="'HR'"
                [autoFitColumns]="false" [assemblyName]="'Core'" [className]="'DataBusiness'" [hideMoreFunc]="true"
                [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
                [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
            </div>
          </div>
        </div>
      </div>
      <!-- Tiêm vaccine -->
      <div class="user-profile overview d-block" [id]="eVaccinesFuncID"
        *ngIf="healthInfoPer.eVaccinesFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-colorize icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eVaccinesFuncID| transText :lstFuncHealth }}
              </div>
            </div>
            <div class="d-flex align-items-center ms-5" *ngIf="eVaccineHeaderText">
              <button
                *ngIf="healthInfoPer.eVaccinesFuncID.write == true && (fromWS == false || healthInfoPer.eVaccinesFuncID.isPortal == false)"
                type="button" class="btn btn-icon btn-sm btn-white"
                (click)="HandleEVaccinesInfo(addHeaderText, 'add', null)">
                <span class="icon-add icon-18"></span>
              </button>
            </div>
          </div>
          <div class="mt-7" *ngIf="eVaccineFormModel && eVaccineColumnGrid; else emptyDataTemplate">
            <codx-gridview-v2 #eVaccinesGridView [entityName]="eVaccineFormModel?.entityName"
              [columnsGrid]="eVaccineColumnGrid" [service]="'HR'" [autoFitColumns]="false" [assemblyName]="'Core'"
              [className]="'DataBusiness'" [sorts]="[injectDateSortModel]" [hideMoreFunc]="true"
              [method]="'LoadDataAsync'" [predicates]="'EmployeeID=@0'" [dataValues]="employeeID"
              [emptyTemplate]="emptyDataTemplate"></codx-gridview-v2>
          </div>
        </div>
      </div>
      <div class="div_final"></div>

    </ng-container>
    <!-- </div> -->
  </div>
</ng-template>

<!-- panel Thôi việc-->
<ng-template #quitJob>
  <div class="tab-horizone bg-white h-od-tab mb-4">
    <ul class="nav nav-tabs px-4">
      <ng-container *ngFor="let item of lstFuncQuitJob; let i = index">
        <li class="nav-item" (click)="navChange(item.functionID, 6, $event.target)">
          <a class="nav-link active">
            <!-- [ngClass]="item.functionID == active[6] ? 'active' : ''" -->
            <div class="text-uppercase fw-bold">{{ item.customName }}</div>
          </a>
        </li>
      </ng-container>
    </ul>
  </div>

  <div class="pw-content w-100 scroll-y" data-kt-scroll="true" data-kt-scroll-activate="{default: true}"
    data-kt-scroll-max-height="auto" data-kt-scroll-dependencies=".pw-profile,.pw-menu"
    data-kt-scroll-wrappers=".employee-container" data-kt-scroll-offset="0px" scrollSpy [spiedTags]="['DIV']"
    (sectionChange)="onSectionChange($event, 6)">
    <!-- <div class="user-content flex-row-fluid"> -->
    <ng-container>
      <!-- Thông tin thôi việc -->
      <div class="user-profile overview d-block" [id]="eDiseasesFuncID"
        *ngIf="quitjobInfoPer.eQuitJobFuncID.view == true">
        <div class="rounded-2 p-5 bg-white mb-4">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div class="d-flex align-items-center">
              <div class="user-status text-primary">
                <span class="icon-sick icon-20 me-2"></span>
              </div>
              <div class="fs-5-sm fw-bold text-uppercase text-primary mt-1">
                {{ eQuitJobFuncID| transText: lstFuncQuitJob }}
              </div>
              <!-- <span class="text-gray-500 mx-2"> | </span>
              <span class="text-dark">
                <span>({{ eDiseasesRowCount }})</span>
              </span> -->
            </div>
            <div class="d-flex align-items-center ms-5"
              *ngIf="quitjobInfoPer.eQuitJobFuncID.write == true && eQuitJobFunc.isPortal == false">
              <button type="button" class="btn btn-icon btn-white">
                <span class="icon-edit icon-18" (click)="editEmployeeQuitJobInfo(editHeaderText)"></span>
              </button>
            </div>
          </div>

          <div class="row mb-5">
            <div class="col">
              <div class="text-gray-600 pb-1">
                <span class="icon-event icon-16 text-gray-600 me-2"></span>
                <codx-label fiedName="submitDate" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center ms-7">
                <span [ngClass]="infoPersonal?.submitDate? 'text-dark fw-bold' : 'text-gray-400 text-italic' ">
                  {{ infoPersonal?.submitDate | fmDT }}
                </span>
              </div>
            </div>
            <div class="col">
              <div class="text-gray-600 pb-1">
                <codx-label fiedName="StoppedOn" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center">
                <span [ngClass]="infoPersonal?.stoppedOn? 'text-dark fw-bold' : 'text-gray-400 text-italic' ">
                  {{ infoPersonal?.stoppedOn | fmDT }}</span>
              </div>
            </div>
            <div class="col has-action-menu">
              <div class="text-gray-600 pb-1">
                <codx-label fiedName="ViolatedDays" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center">
                <span class="text-dark fw-bold">
                  {{ infoPersonal?.violatedDays }}
                </span>
              </div>
            </div>
          </div>

          <div class="row mb-5">
            <div class="col-4">
              <div class="text-gray-600 pb-1 d-flex">
                <span class="icon-wysiwyg icon-16 text-gray-600 me-2"></span>
                <codx-label fiedName="QuitForm" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center">
                <span class="ms-7 text-dark fw-bold" [innerHTML]="
                    infoPersonal?.quitForm
                      | formatvalue : formModel : 'quitForm'
                      | async
                  ">
                </span>
              </div>
            </div>
            <div class="col-4">
              <codx-label fiedName="QuitReason" [formModel]="formModel">
              </codx-label>
              <div class="d-flex align-items-center">
                <span class="text-dark fw-bold" [innerHTML]="
                    infoPersonal?.quitReason
                      | formatvalue : formModel : 'quitReason'
                      | async
                  ">
                  {{ infoPersonal?.quitReason }}
                </span>
              </div>
            </div>
          </div>

          <div class="row mb-5">
            <div class="col">
              <div class="text-gray-600 pb-1">
                <span class="icon-text_snippet icon-16 text-gray-600 me-2"></span>
                <codx-label fiedName="QuitDecisionNo" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center ms-7">
                <span class="text-dark fw-bold">
                  {{ infoPersonal?.quitDecisionNo}}
                </span>
              </div>
            </div>
            <div class="col">
              <div class="text-gray-600 pb-1">
                <codx-label fiedName="ContractClosedDate" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center">
                <span [ngClass]="infoPersonal?.contractClosedDate? 'text-dark fw-bold' : 'text-gray-400 text-italic' ">
                  {{ infoPersonal?.contractClosedDate | fmDT }}</span>
              </div>
            </div>
            <div class="col has-action-menu">
              <div class="text-gray-600 pb-1">
                <codx-label fiedName="ContractNo" [formModel]="formModel">
                </codx-label>
              </div>
              <div class="d-flex align-items-center">
                <span class="text-dark fw-bold">
                  {{ infoPersonal?.contractNo }}
                </span>
              </div>
            </div>
          </div>
          <hr />
          <div class="d-flex align-items-center mt-6 mb-4">
            <span class="icon-i-filter-right icon-20 me-2"></span>
            <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
              <codx-label name="lblEmpResponsible" [formModel]="formModel" default="Trách nhiệm nhân viên">
              </codx-label>
            </div>
          </div>
          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isHandOverWork == true ? true : false" [disabled]="true"
              field="isHandOverWork"></codx-input>
            <codx-label class="ms-3" fiedName="IsHandOverWork" [formModel]="formModel"></codx-label>
          </div>
          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isHandOverProperty  == true ? true : false" [disabled]="true"
              field="isHandOverProperty"></codx-input>

            <codx-label class="ms-3" fiedName="IsHandOverProperty" [formModel]="formModel"></codx-label>
          </div>
          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isPaidDebt  == true ? true : false" [disabled]="true"
              field="isPaidDebt"></codx-input>
            <codx-label class="ms-3" fiedName="IsPaidDebt" [formModel]="formModel"></codx-label>
          </div>
          <hr />
          <div class="d-flex align-items-center mt-6 mb-4">
            <span class="icon-i-filter-right icon-20 me-2"></span>
            <div class="fw-bold text-uppercase fs-5-sm text-gray-600">
              <codx-label name="lblEmpResponsible" [formModel]="eInfoFormModel" default="Trách nhiệm công ty">
              </codx-label>
            </div>
          </div>
          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isLockAccount  == true ? true : false" [disabled]="true"
              field="isLockAccount"></codx-input>
            <codx-label class="ms-3" fiedName="IsLockAccount" [formModel]="formModel"></codx-label>
          </div>

          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isNotify  == true ? true : false" [disabled]="true"
              field="isNotify"></codx-input>
            <codx-label class="ms-3" fiedName="IsNotify" [formModel]="formModel"></codx-label>
          </div>

          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isReductedSI  == true ? true : false" [disabled]="true"
              field="isReductedSI"></codx-input>
            <codx-label class="ms-3" fiedName="IsReductedSI" [formModel]="formModel"></codx-label>
          </div>

          <div class="d-flex flex-wrap mb-2">
            <codx-input [formModel]="formModel" [type]="'checkbox'"
              [checked]="infoPersonal?.isClosedSI  == true ? true : false" [disabled]="true"
              field="isClosedSI"></codx-input>
            <codx-label class="ms-3" fiedName="IsClosedSI" [formModel]="formModel"></codx-label>
          </div>
          <div class="d-flex flex-wrap mb-2">
            <codx-input *ngIf="infoPersonal?.returnSIBook != null" [type]="'checkbox'" [checked]="true" class="me-3"
              [disabled]="true"></codx-input>
            <codx-input *ngIf="infoPersonal?.returnSIBook == null" [disabled]="true" [type]="'checkbox'" class="me-3"
              [checked]="false"></codx-input>
            <span [innerHTML]="infoPersonal?.returnSIBook | formatvalue : formModel : 'returnSIBook' | async ">
            </span>
          </div>
          <div class="d-flex flex-wrap mb-2">
            <codx-input *ngIf="infoPersonal?.returnTermination != null" [disabled]="true" [type]="'checkbox'"
              class="me-3" [checked]="true"></codx-input>
            <codx-input *ngIf="infoPersonal?.returnTermination == null" [disabled]="true" [type]="'checkbox'"
              class="me-3" [checked]="false"></codx-input>

            <span
              [innerHTML]="infoPersonal?.returnTermination | formatvalue : formModel : 'returnTermination' | async ">
            </span>
          </div>

        </div>
      </div>
    </ng-container>
    <!-- </div> -->
  </div>
</ng-template>

<ng-template #healthPeriodID let-data>
  {{ data }}
  {{ infoPersonal?.healthPeriodName }}
</ng-template>
<ng-template #healthPeriodDate let-data>
  <div>
    {{ infoPersonal?.fromDate }}
  </div>
</ng-template>
<ng-template #healthPeriodPlace let-data>
  <div>
    {{ infoPersonal?.hospitalID }}
  </div>
</ng-template>
<ng-template #healthType let-data>
  {{ infoPersonal?.healthType }}
</ng-template>
<ng-template #healthPeriodResult let-data>
  {{ infoPersonal?.healthPeriodResult }}
</ng-template>

<ng-template #EExperience let-data>
  <tr class="tr-ip-add-tmp has-action-menu">
    <td class="w-15">
      <span>{{ data?.fromDate }}</span>
    </td>
    <td class="w-20">
      <span>{{ data?.toDate }}</span>
    </td>
    <td class="w-15">
      <span>{{ data?.companyName }}</span>
    </td>
    <td class="w-15">
      <span>{{ data?.position }}</span>
    </td>
    <td class="w-15">
      <div class="action-menu d-flex justify-content-center align-items-center cursor-pointer mt-1">
        <i class="icon-edit text-primary icon-16 mx-1"></i>
        <i class="icon-close text-danger icon-16 mx-1"></i>
      </div>
    </td>
  </tr>
</ng-template>

<ng-template #button let-data>
  <h1>{{ data.companyName }}</h1>
  <button>123</button>
</ng-template>

<ng-template #tempFromDate let-data>
  {{ data?.fromDate | fmDT }}
</ng-template>

<ng-template #tempToDate let-data>
  {{ data?.toDate | fmDT }}
</ng-template>

<ng-template #itemAction let-data>
  <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eInfoFormModel"
    (clickMF)="clickMF($event, data)" [dataItem]="data">
  </codx-mfunc>

  <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eInfoFormModel"
    (clickMF)="clickMF($event, data)" [dataItem]="data" (changeDataMF)="handleShowHideMfWs($event, eInfoFunc)">
  </codx-mfunc>
</ng-template>

<!-- #region template Phụ cấp  -->
<ng-template #templateBenefitID let-data>
  <div [class]="data.isCurrent ? 'text-primary' : ''" [innerHTML]="
      data?.benefitID | formatvalue : benefitFormodel : 'benefitID' | async
    ">
    <span *ngIf="data.isCurrent == true"
      class="bullet bullet-vertical d-flex align-items-center min-h-30px mh-100 me-3 bg-primary">
    </span>

    <span class="icon-i-plus-circle icon-12 pe-2" [style.color]="getBenefitFontColor(data)"></span>
  </div>
</ng-template>

<ng-template #templateBenefitAmt let-data>
  <div #benefitNorm [class]="data.isCurrent ? 'text-primary' : ''">
    <span [innerHTML]="
        data?.benefitAmt | formatvalue : benefitFormodel : 'benefitAmt' | async
      ">
    </span>
    <span class="mx-1">/</span>
    <span [innerHTML]="
        data?.benefitNorm
          | formatvalue : benefitFormodel : 'benefitNorm'
          | async
      "></span>
  </div>
</ng-template>

<ng-template #templateBenefitEffected let-data>
  <div [class]="
      data.isCurrent ? 'text-primary has-action-menu' : 'has-action-menu'
    ">
    <span [innerHTML]="
        data?.effectedDate
          | formatvalue : benefitFormodel : 'effectedDate'
          | async
      "></span>
    <span class="mx-2"> - </span>
    <span [innerHTML]="
        data?.expiredDate
          | formatvalue : benefitFormodel : 'expiredDate'
          | async
      "></span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="benefitFormodel"
      (clickMF)="clickMF($event, data, 'eBenefit')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="benefitFormodel"
      (clickMF)="clickMF($event, data, 'eBenefit')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, benefitFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<!--#endregion -->

<!--#region template Bằng cấp 123123-->
<ng-template #templateEDegreeGridCol1 let-data>
  <!-- {{logDataDegree(data)}} -->
  <div class="py-2 hover-active cursor-pointer">
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center mb-1">
        <div class="item-active fs-6 fw-bold" (click)="viewGridDetail(data, eDegreeFuncID)" placement="top"
          [title]="eDegreeHeaderText.DegreeName">{{ data?.degreeName }}</div>
      </div>
      <div>
        <div class="text-dark mb-1" placement="top" [title]="eDegreeHeaderText.TrainFieldID" [innerHTML]="
          data?.trainFieldID
            | formatvalue : eDegreeFormModel : 'trainFieldID'
            | async
          "></div>
        <div class="text-gray-500" placement="top" [title]="eDegreeHeaderText.TrainFieldDetail">{{
          data?.trainFieldDetail }}</div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #templateEDegreeGridCol2 let-data>
  <div class="py-2">
    <div placement="top" [title]="eDegreeHeaderText.TrainSupplierID" class="text-dark mb-2" [innerHTML]="
        data?.trainSupplierID
          | formatvalue : eDegreeFormModel : 'trainSupplierID'
          | async
      "></div>
    <div class="d-flex flex-wrap">
      <div class="d-flex align-items-center mb-1">
        <span class="icon-insights icon-14 text-warning me-2"></span>
        <span placement="top" [title]="eDegreeHeaderText.Ranking" class="text-warning" #ranking [innerHTML]="
            data?.ranking | formatvalue : eDegreeFormModel : 'ranking' | async
          ">
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="icon-i-arrow-down-left-circle-fill icon-4 mx-2 text-gray-400"></span>
        <span class="fw-bold text-warning">
          <span placement="top" [title]="eDegreeHeaderText.TotalScore" [innerHTML]="
              data?.totalScore
                | formatvalue : eDegreeFormModel : 'totalScore'
                | async
            "></span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #templateEDegreeGridCol3 let-data>
  <div class="has-action-menu py-2">
    <div class="d-flex align-items-center mb-2">
      <span class="icon-event icon-16 me-2"></span>
      <span class="text-dark" placement="top" [title]="eDegreeHeaderText.YearGraduated">{{data.yearGraduated}}</span>
      <span *ngIf="data.yearGraduated" class="icon-i-info-circle-fill icon-4 text-gray-400 mx-2"></span>
      <span class="text-gray-600" placement="top" [title]="eDegreeHeaderText.IssuedDate" [innerHTML]="
          data?.issuedDate
            | formatvalue : eDegreeFormModel : 'issuedDate'
            | async
        ">
      </span>
    </div>
    <div *ngIf="data.isMain">
      <span class="badge badge-success badge-sm">Là bằng cấp chính</span>
    </div>

    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eDegreeFormModel"
      (clickMF)="clickMF($event, data, 'eDegrees')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eDegreeFormModel"
      (clickMF)="clickMF($event, data, 'eDegrees')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, eDegreeFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!--#endregion-->

<ng-template #templateECertificateGridCol1 let-data>
  <div class="d-flex align-items-center mb-5px mt-2 hover-active cursor-pointer">
    <!-- <i class="icon-class icon-16 text-primary me-2"></i> -->
    <span class="fw-bold item-active" (click)="viewGridDetail(data, eCertificateFuncID)" placement="top"
      [title]="eCertificateHeaderText.CertificateID" [innerHTML]="
        data?.certificateID
          | formatvalue : eCertificateFormModel : 'certificateID'
          | async
      ">
    </span>
    <i class="icon-i-info-circle-fill icon-circle-group text-gray-400 mx-1"></i>
    <span placement="top" [title]="eCertificateHeaderText.CertificateGradeID" [innerHTML]="
      data?.certificateGradeID
        | formatvalue : eCertificateFormModel : 'certificateGradeID'
        | async
    "></span>
  </div>
  <div class="d-flex align-items-center">
    <!-- <i class="icon-dashboard icon-16 text-primary me-2"></i> -->
    <span class="fw-bold" placement="top" [title]="eCertificateHeaderText.CertificateType" [innerHTML]="
        data?.certificateType
          | formatvalue : eCertificateFormModel : 'certificateType'
          | async
      "></span>
  </div>
</ng-template>

<ng-template #templateECertificateGridCol2 let-data>
  <div class="py-2">
    <div class="d-flex align-items-center mb-5px" placement="top" [title]="eCertificateHeaderText.TrainSupplierID"
      [innerHTML]="
        data?.trainSupplierID
          | formatvalue : eCertificateFormModel : 'trainSupplierID'
          | async
      "></div>
    <div class="d-flex flex-wrap">
      <div class="d-flex align-items-center">
        <span class="icon-insights icon-14 text-warning me-1"></span>
        <span class="text-warning" placement="top" [title]="eCertificateHeaderText.Ranking" #ranking [innerHTML]="
            data?.ranking
              | formatvalue : eCertificateFormModel : 'ranking'
              | async
          ">
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 ms-2 me-2 text-gray-400"></span>
        <span class="fw-bold text-primary">
          <span class="text-danger" placement="top" [title]="eCertificateHeaderText.TotalScore" [innerHTML]="
              data?.totalScore
                | formatvalue : eCertificateFormModel : 'totalScore'
                | async
            ">
          </span>
        </span>
      </div>
    </div>
  </div>
  <!--{{data?.trainSupplierID | formatvalue: degreeFormodel:"trainSupplierID" | async}}-->
</ng-template>

<ng-template #templateECertificateGridCol3 let-data>
  <div class="has-action-menu">
    <div class="text-dark fw-bold">
      <span placement="top" [title]="eCertificateHeaderText.EffectedDate" [innerHTML]="
          data?.effectedDate
            | formatvalue : eCertificateFormModel : 'effectedDate'
            | async
        "></span>
      <span *ngIf="data?.expiredDate" class="me-2">-</span>
      <span *ngIf="data?.expiredDate" placement="top" [title]="eCertificateHeaderText.ExpiredDate" [innerHTML]="
          data?.expiredDate
            | formatvalue : eCertificateFormModel : 'expiredDate'
            | async
        "></span>
    </div>

    <div class="d-flex align-items-center mb-5px">
      <i class="icon-event icon-16 text-gray-600 me-2"></i>
      <span placement="top" [title]="eCertificateHeaderText.IssuedDate" [innerHTML]="
          data?.issuedDate
            | formatvalue : eCertificateFormModel : 'issuedDate'
            | async
        ">
      </span>
      <span *ngIf="data?.isExpire" class="badge badge-danger border-0 ms-2">
        Hết hạn
      </span>
      <!--{{data?.trainSupplierID | formatvalue: degreeFormodel:"trainSupplierID" | async}}-->
    </div>

    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
      [formModel]="eCertificateFormModel" (clickMF)="clickMF($event, data, 'eCertificate')" [dataItem]="data"
      type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
      [formModel]="eCertificateFormModel" (clickMF)="clickMF($event, data, 'eCertificate')" [dataItem]="data"
      type="hover" (changeDataMF)="handleShowHideMfWs($event, eCertificateFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<!--Template ESkills-->
<ng-template #templateESkillGridCol1 let-data>
  <div class="hover-active cursor-pointer">
    <div class="fw-bold mb-5px item-active" placement="top" [title]="eSkillHeaderText.SkillID"
      (click)="viewGridDetail(data, eSkillFuncID)" [innerHTML]="
      data?.skillID | formatvalue : eSkillFormmodel : 'skillID' | async
    "></div>
    <div>
      <span class="badge" [ngClass]="
        isMaxGrade(data)
          ? 'badge-primary border-0'
          : 'border-1 text-dark badge-secondary fw-bold'
      " [style.border-color]="isMaxGrade(data) ? '' : 'black'" placement="top" [title]="eSkillHeaderText.SkillGradeID"
        [innerHTML]="
        data?.skillGradeID
          | formatvalue : eSkillFormmodel : 'skillGradeID'
          | async
      ">
      </span>
    </div>
  </div>


</ng-template>

<ng-template #templateESkillGridCol2 let-data>
  <div class="mb-5px" placement="top" [title]="eSkillHeaderText.TrainSupplierID" [innerHTML]="
      data?.trainSupplierID
        | formatvalue : eSkillFormmodel : 'trainSupplierID'
        | async
    "></div>

  <div class="d-flex flex-wrap">
    <div class="d-flex align-items-center">
      <span class="icon-insights icon-14 text-warning me-1"></span>
      <span class="text-warning" placement="top" [title]="eSkillHeaderText.Ranking" #ranking [innerHTML]="
          data?.ranking | formatvalue : eSkillFormmodel : 'ranking' | async
        ">
      </span>
    </div>
    <div class="d-flex align-items-center">
      <span class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 ms-2 me-2 text-gray-400"></span>
      <span class="fw-bold text-danger">
        <span placement="top" [title]="eSkillHeaderText.TotalScore" [innerHTML]="
            data?.totalScore
              | formatvalue : eSkillFormmodel : 'totalScore'
              | async
          ">
        </span>
      </span>
    </div>
  </div>
</ng-template>

<ng-template #templateESkillGridCol3 let-data>
  <div class="has-action-menu">
    <div class="mb-1">
      <!-- <span
    placement="top" [title]="eSkillHeaderText.TrainFrom"

        [innerHTML]="
          data?.trainFrom
            | formatvalue : eSkillFormmodel : 'trainFrom'
            | async
        "
      ></span> -->

      <span *ngIf="data?.trainFrom == 'day'" placement="top" [title]="eSkillHeaderText.TrainFrom" [innerHTML]="
                data?.trainFromDate
                    | dateformat : 'day'
                ">
      </span>

      <span *ngIf="data?.trainFrom == 'month'" placement="top" [title]="eSkillHeaderText.TrainFrom" [innerHTML]="
                  data?.trainFromDate
                      | dateformat : 'month'
                  ">
      </span>

      <span *ngIf="data?.trainFrom == 'year'" placement="top" [title]="eSkillHeaderText.TrainFrom" [innerHTML]="
                    data?.trainFromDate
                        | dateformat : 'year'
                    ">
      </span>
      <span *ngIf="data?.trainTo"> - </span>
      <!-- <span
    placement="top" [title]="eSkillHeaderText.TrainTo"

        [innerHTML]="
          data?.trainTo
            | formatvalue : eSkillFormmodel : 'trainTo'
            | async
        "
      ></span> -->

      <span *ngIf="data?.trainTo == 'day'" placement="top" [title]="eSkillHeaderText.TrainTo" [innerHTML]="
      data?.trainToDate
          | dateformat : 'day'
      "></span>

      <span *ngIf="data?.trainTo == 'month'" placement="top" [title]="eSkillHeaderText.TrainTo" [innerHTML]="
        data?.trainToDate
            | dateformat : 'month'
        "></span>

      <span *ngIf="data?.trainTo == 'year'" placement="top" [title]="eSkillHeaderText.TrainTo" [innerHTML]="
          data?.trainToDate
              | dateformat : 'year'
          "></span>

    </div>
    <div class="d-flex align-items-center">
      <i class="icon-menu_book icon-16 text-primary me-2"></i>
      <span class="text-primary" placement="top" [title]="eSkillHeaderText.TrainForm" [innerHTML]="
          data?.trainForm | formatvalue : eSkillFormmodel : 'trainForm' | async
        ">
      </span>
    </div>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eSkillFormmodel"
      (clickMF)="clickMF($event, data, 'eSkill')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eSkillFormmodel"
      (clickMF)="clickMF($event, data, 'eSkill')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, eSkillFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<ng-template #templateEExperienceGridCol4 let-data>
  <div class="has-action-menu h-40px">
    {{ data?.position }}
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
      [formModel]="eExperienceFormModel" (clickMF)="clickMF($event, data, 'eExperiences')" [dataItem]="data"
      type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eExperienceFormModel"
      (clickMF)="clickMF($event, data, 'eExperiences')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, eExperienceFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<ng-template #templateEAssetCol1 let-data>
  <div>
    <div class="badge border-0 mb-1 badge-primary" [style.background]="getAssetBackgroundColor(data.assetCategory)"
      [style.color]="getAssetFontColor(data.assetCategory)" [innerHTML]="
        data?.assetCategory
          | formatvalue : eAssetFormModel : 'assetCategory'
          | async
      "></div>
    <div class="d-flex align-items-center">
      <i class="icon-class icon-16 me-1 text-primary"></i>
      <span>{{ data?.assetNo }}</span>
    </div>
  </div>
</ng-template>

<ng-template #templateEAssetCol2 let-data>
  <div class="mb-1">
    <span [innerHTML]="
        data?.issuedDate | formatvalue : eAssetFormModel : 'issuedDate' | async
      "></span>

    <!-- {{ data?.issuedDate | fmDT }} -->
  </div>
  <div *ngIf="data?.isAllowReturn == true" class="badge border-0 me-2 badge-primary">
    {{ eAssetHeaderText["IsAllowReturn"] }}
  </div>
</ng-template>

<ng-template #templateEAssetCol3 let-data>
  <div class="has-action-menu min-h-40px">
    <div *ngIf="data?.isReturned == true" class="has-action-menu">
      <div class="badge border-0 mb-1 badge-primary">
        {{ eAssetHeaderText["IsReturned"] }}
      </div>
      <div class="d-flex align-items-center">
        <i class="icon-calendar_today icon-16 me-1"></i>
        <span [innerHTML]="
            data?.returnedDate
              | formatvalue : eAssetFormModel : 'returnedDate'
              | async
          "></span>

        <!-- <span> {{ data?.returnedDate | fmDT }}</span> -->
      </div>
    </div>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eAssetFormModel"
      (clickMF)="clickMF($event, data, 'Assets')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eAssetFormModel"
      (clickMF)="clickMF($event, data, 'Assets')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, eAssetFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<!-- #region Lương cơ bản columnGrid templates-->
<ng-template #basicSalaryCol1 let-data>
  <div class="d-flex align-items-center">
    <span class="bullet bullet-vertical d-flex align-items-center min-h-30px mh-100 me-3"
      [class]="data.isCurrent ? 'bg-primary' : 'bg-transparent'"></span>
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center" [ngClass]="
          data.isCurrent ? 'text-primary fw-bold' : 'text-dark fw-bold'
        ">
        <span class="icon-attach_money icon-16 me-1"></span>
        <span class="">
          <span [innerHTML]="
              data?.bSalary
                | formatvalue : eBasicSalaryFormmodel : 'bSalary'
                | async
            "></span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #basicSalaryCol2 let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center">
      <span class="icon-monetization_on icon-16 me-2" [ngClass]="
          data.isCurrent ? 'text-primary fw-bold' : 'text-dark fw-bold'
        "></span>
      <span [ngClass]="
          data.isCurrent ? 'text-primary fw-bold' : 'text-dark fw-bold'
        ">
        <span [innerHTML]="
            data?.siSalary
              | formatvalue : eBasicSalaryFormmodel : 'siSalary'
              | async
          "></span>
      </span>
    </div>
  </div>
</ng-template>

<ng-template #basicSalaryCol3 let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center mb-5px"
      [ngClass]="data.isCurrent ? 'text-primary fw-bold' : 'text-dark fw-bold'">
      <span class="icon-attach_money icon-16 me-2"></span>
      <span [innerHTML]="
          data?.jSalary
            | formatvalue : eBasicSalaryFormmodel : 'jSalary'
            | async
        "></span>
    </div>
  </div>
</ng-template>

<ng-template #basicSalaryCol4 let-data>
  <div class="has-action-menu">
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center" [ngClass]="
          data.isCurrent ? 'text-primary fw-bold' : 'text-dark fw-bold'
        ">
        <span class="icon-event icon-16 text-gray-500 me-2"></span>
        <span [innerHTML]="
            data?.effectedDate
              | formatvalue : eBasicSalaryFormmodel : 'effectedDate'
              | async
          "></span>
        <span class="mx-2">-</span>
        <span [innerHTML]="
            data?.expiredDate
              | formatvalue : eBasicSalaryFormmodel : 'expiredDate'
              | async
          "></span>
      </div>
    </div>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
      [formModel]="eBasicSalaryFormmodel" (clickMF)="clickMF($event, data, 'basicSalary')" type="hover"
      [dataItem]="data">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
      [formModel]="eBasicSalaryFormmodel" (clickMF)="clickMF($event, data, 'basicSalary')" type="hover"
      [dataItem]="data" (changeDataMF)="handleShowHideMfWs($event, eBasicSalaryFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion -->

<!-- #region Lương chức danh columnGrid templates-->
<ng-template #jobSalaryCol1 let-data>
  <div class="d-flex align-items-center">
    <span class="bullet bullet-vertical d-flex align-items-center min-h-30px mh-100 me-3"
      [class]="data.isCurrent ? 'bg-primary' : 'bg-transparent'"></span>
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center" [ngClass]="data.isCurrent ? 'text-primary' : 'text-dark'">
        <span class="icon-attach_money icon-16 me-2"></span>
        <span class="">
          <span [innerHTML]="
              data?.jSalary
                | formatvalue : eJobSalaryFormModel : 'jSalary'
                | async
            "></span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #jobSalaryCol2 let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center mb-2">
      <span class="icon-event icon-16 text-gray-500 me-2"></span>
      <span class="text-dark">
        <span [innerHTML]="
            data?.effectedDate
              | formatvalue : eJobSalaryFormModel : 'effectedDate'
              | async
          "></span>
      </span>
      <span class="mx-2">-</span>
      <span class="text-dark">
        <span [innerHTML]="
            data?.expiredDate
              | formatvalue : eJobSalaryFormModel : 'expiredDate'
              | async
          "></span>
      </span>
    </div>
  </div>
</ng-template>

<ng-template #jobSalaryCol3 let-data>
  <div class="has-action-menu">
    <div class="d-flex flex-column">
      <div class="d-flex flex-wrap mb-2">
        <div class="d-flex align-items-center" *ngIf="data?.decisionNo">
          <span class="icon-qr_code_scanner icon-16 me-1"></span>
          <span class="fw-bold">
            <span>{{ data?.decisionNo }}</span>
          </span>
        </div>

        <div class="d-flex align-items-center">
          <span class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 ms-2 me-2 text-gray-400"></span>
          <span class="text-gray-600 fw-bold">
            <span [innerHTML]="
                data?.signedDate
                  | formatvalue : eJobSalaryFormModel : 'signedDate'
                  | async
              "></span>
          </span>
        </div>
      </div>
      <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
        [formModel]="eBasicSalaryFormmodel" (clickMF)="clickMF($event, data, 'jobSalary')" type="hover"
        [dataItem]="data">
      </codx-mfunc>

      <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
        [formModel]="eBasicSalaryFormmodel" (clickMF)="clickMF($event, data, 'jobSalary')" type="hover"
        [dataItem]="data" (changeDataMF)="handleShowHideMfWs($event, eBasicSalaryFunc)">
      </codx-mfunc>
    </div>
  </div>
</ng-template>
<!-- #endregion -->

<!-- #region Đào tạo -->
<ng-template #templateTrainCourseGridCol1 let-data>
  <div class="hover-active cursor-pointer">
    <div class="fw-bold mb-1 item-active" (click)="viewGridDetail(data, eTrainCourseFuncID)" placement="top"
      [title]="eTrainCourseHeaderText.TrainCourseID" [innerHTML]="
        data?.trainCourseID
          | formatvalue : eTrainCourseFormModel : 'trainCourseID'
          | async
      "></div>
    <div class="d-flex align-items-center">
      <!-- <i class="icon-menu_book icon-16 text-primary me-2"></i> -->
      <span class="text-primary" placement="top" [title]="eTrainCourseHeaderText.TrainForm" [innerHTML]="
          data?.trainForm
            | formatvalue : eTrainCourseFormModel : 'trainForm'
            | async
        "></span>
    </div>
  </div>
</ng-template>

<ng-template #templateTrainCourseGridCol3 let-data>
  <div class="has-action-menu min-h-40px">
    <div class="d-flex align-items-center mb-1">
      <i class="icon-event icon-16 text-gray-600 me-2"></i>

      <span *ngIf="data?.trainFrom == 'day'" placement="top" [title]="eTrainCourseHeaderText.TrainFrom" [innerHTML]="
                  data?.trainFromDate
                      | dateformat : 'day'
                  ">
      </span>

      <span *ngIf="data?.trainFrom == 'month'" placement="top" [title]="eTrainCourseHeaderText.TrainFrom" [innerHTML]="
                    data?.trainFromDate
                        | dateformat : 'month'
                    ">
      </span>

      <span *ngIf="data?.trainFrom == 'year'" placement="top" [title]="eTrainCourseHeaderText.TrainFrom" [innerHTML]="
                      data?.trainFromDate
                          | dateformat : 'year'
                      ">
      </span>
      <span *ngIf="data?.trainTo"> - </span>

      <!-- <span placement="top" [title]="eTrainCourseHeaderText.TrainFrom">
        {{ data?.trainFrom | fmDT }} 
      </span> -->

      <span *ngIf="data?.trainTo == 'day'" placement="top" [title]="eTrainCourseHeaderText.TrainTo" [innerHTML]="
      data?.trainToDate
          | dateformat : 'day'
      "></span>

      <span *ngIf="data?.trainTo == 'month'" placement="top" [title]="eTrainCourseHeaderText.TrainTo" [innerHTML]="
        data?.trainToDate
            | dateformat : 'month'
        "></span>

      <span *ngIf="data?.trainTo == 'year'" placement="top" [title]="eTrainCourseHeaderText.TrainTo" [innerHTML]="
          data?.trainToDate
              | dateformat : 'year'
          "></span>

      <!-- <span placement="top" [title]="eTrainCourseHeaderText.TrainTo" *ngIf="data?.trainTo"> 
        - 
        {{ data?.trainTo | fmDT }}
      </span> -->
    </div>
    <div class="d-flex align-items-center">
      <i class="icon-year icon-14 text-gray-600 me-2"></i>
      <span class="fw-bold text-dark" placement="top" [title]="eTrainCourseHeaderText.InYear" [innerHTML]="
          data?.inYear | formatvalue : eTrainCourseFormModel : 'inYear' | async
        ">
      </span>

    </div>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
      [formModel]="eTrainCourseFormModel" (clickMF)="clickMF($event, data, 'eTrainCourses')" type="hover"
      [dataItem]="data">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
      [formModel]="eTrainCourseFormModel" (clickMF)="clickMF($event, data, 'eTrainCourses')" type="hover"
      [dataItem]="data" (changeDataMF)="handleShowHideMfWs($event, eTrainCourseFunc)">
    </codx-mfunc>
  </div>

</ng-template>

<ng-template #templateTrainCourseGridCol2 let-data>
  <div class=" min-h-40px">
    <div class="text-gray-600 mb-1" placement="top" [title]="eTrainCourseHeaderText.TrainSupplierID" [innerHTML]="
        data?.trainSupplierID
          | formatvalue : eTrainCourseFormModel : 'trainSupplierID'
          | async
      "></div>
    <div class="d-flex flex-wrap">
      <div class="d-flex align-items-center">
        <span class="icon-insights icon-16 text-warning me-2"></span>
        <span class="text-warning" placement="top" [title]="eTrainCourseHeaderText.Ranking" #ranking [innerHTML]="
            data?.ranking
              | formatvalue : eTrainCourseFormModel : 'ranking'
              | async
          ">
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 mx-2 text-gray-400"></span>
        <span class="fw-bold text-danger">
          <span placement="top" [title]="eTrainCourseHeaderText.TotalScore" [innerHTML]="
              data?.totalScore
                | formatvalue : eTrainCourseFormModel : 'totalScore'
                | async
            "></span>
        </span>
      </div>
      <div class="d-flex align-items-center">
        <span class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 mx-2 text-gray-400"></span>
        <span class="fw-bold text-warning">
          <span placement="top" [title]="eTrainCourseHeaderText.Result" [innerHTML]="
              data?.result
                | formatvalue : eTrainCourseFormModel : 'result'
                | async
            "></span>
        </span>
      </div>
    </div>


  </div>
</ng-template>

<!-- #endregion -->

<!-- #region Bổ nhiệm columnGrid templates -->
<ng-template #templateAppointionGridCol1 let-data>
  <div class="py-2 hover-active cursor-pointer">
    <div class="mb-2 fw-bold fs-6 item-active" (click)="viewGridDetail(data, appointionFuncID)" placement="top"
      [title]="appointionHeaderTexts.Appoint" [innerHTML]="
        data?.appoint | formatvalue : appointionFormModel : 'appoint' | async
      "></div>
    <div class="d-flex align-items-center">
      <span class="icon-calendar_today icon-14 me-2"></span>
      <span class="text-gray-700">
        <span placement="top" [title]="appointionHeaderTexts.EffectedDate">
          {{ data?.effectedDate | fmDT }}

        </span>
        <span *ngIf="data?.expiredDate" placement="top" [title]="appointionHeaderTexts.ExpiredDate">
          - {{ data?.expiredDate | fmDT }}
        </span>
      </span>
    </div>
  </div>
</ng-template>

<ng-template #templateAppointionGridCol2 let-data>
  <div class="py-1">
    <div placement="bottom" [title]="appointionHeaderTexts.PositionID" container="body" class="mb-2 text-dark fw-bold"
      [innerHTML]="
        data?.positionID
          | formatvalue : appointionFormModel : 'positionID'
          | async
      "></div>
    <ng-container *ngIf="data?.oldPositionID">
      <div class="text-gray-700" placement="bottom" [title]="appointionHeaderTexts.OldPositionID" container="body">
        <span [innerHTML]="
            data?.oldPositionID
              | formatvalue : appointionFormModel : 'oldPositionID'
              | async
          "></span>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateAppointionGridCol3 let-data>
  <div class="has-action-menu py-1">
    <div placement="bottom" [title]="appointionHeaderTexts.OrgUnitID" container="body" class="mb-2 text-dark fw-bold"
      [innerHTML]="
        data?.orgUnitID
          | formatvalue : appointionFormModel : 'orgUnitID'
          | async
      "></div>
    <ng-container *ngIf="data?.oldPositionID">
      <div class="text-gray-700" placement="bottom" [title]="appointionHeaderTexts.OldOrgUnitID" container="body">
        <span [innerHTML]="
            data?.oldOrgUnitID
              | formatvalue : appointionFormModel : 'oldOrgUnitID'
              | async
          "></span>
      </div>
    </ng-container>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="appointionFormModel"
      (clickMF)="clickMF($event, data, 'eAppointions')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="appointionFormModel"
      (clickMF)="clickMF($event, data, 'eAppointions')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, appointionFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<!-- #region Nghỉ phép -->
<ng-template #templateDayOffGridCol1 let-data>
  <div class="d-flex align-items-top mb-2 mt-2 hover-active cursor-pointer">
    <div class="d-flex flex-column">
      <div placement="top" [title]="dayoffHeaderTexts.KowID" class="fw-bold fs-6 mb-2 item-active"
        (click)="viewGridDetail(data, dayoffFuncID)" [innerHTML]="
          data?.kowID | formatvalue : dayoffFormModel : 'kowID' | async
        "></div>
      <span placement="top" [title]="dayoffHeaderTexts.RegisteredDate" class="text-gray-700" [innerHTML]="
          data?.registeredDate
            | formatvalue : dayoffFormModel : 'registeredDate'
            | async
        "></span>
    </div>
  </div>
</ng-template>

<ng-template #templateDayOffGridCol2 let-data>
  <div class="d-flex align-items-center mb-2 mt-2">
    <i class="icon-event text-dark icon-16 me-2"></i>
    <div placement="top" [title]="dayoffHeaderTexts.BeginDate" class="text-dark" [innerHTML]="
        data?.beginDate | formatvalue : dayoffFormModel : 'beginDate' | async
      "></div>
    <span class="mx-2"> - </span>
    <span placement="top" [title]="dayoffHeaderTexts.EndDate" class="text-dark" [innerHTML]="
        data?.endDate | formatvalue : dayoffFormModel : 'endDate' | async
      "></span>
  </div>
  <div class="d-flex align-items-center" *ngIf="data?.totalDaysOff">
    <i class="icon-i-circle-fill icon-circle-group icon-12 text-gray-400 px-2"></i>
    <span class="text-primary fw-bold me-1" placement="top" [title]="dayoffHeaderTexts.TotalDaysOff">
      {{ data?.totalDaysOff }}
    </span>
  </div>
</ng-template>

<ng-template #templateDayOffGridCol3 let-data>
  <div class="d-flex align-items-center has-action-menu min-h-40px">
    <span class="text-gray-700" placement="top" [title]="dayoffHeaderTexts.Reason">
      {{ data?.reason }}
    </span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="dayoffFormModel"
      (clickMF)="clickMF($event, data, 'eDayoff')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="dayoffFormModel"
      (clickMF)="clickMF($event, data, 'eDayoff')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, dayoffFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion Nghỉ phép -->

<!-- #region Nhật ký công tác -->
<ng-template #templateBusinessTravelGridCol1 let-data>
  <div class="py-2 hover-active cursor-pointer">
    <div class="d-flex align-items-center mb-2">
      <!-- <span class="icon-home_work icon-16 me-2"></span> -->
      <span class="item-active fw-bold fs-6" (click)="viewGridDetail(data, eBusinessTravelFuncID)" placement="top"
        [title]="eBusinessTravelHeaderTexts.BusinessPlace">{{ data?.businessPlace }}</span>
    </div>
    <div class="d-flex align-items-center">
      <!-- <i class="icon-connection-point icon-16 me-2 text-primary"></i> -->
      <span class="text-primary fs-7" placement="top" [title]="eBusinessTravelHeaderTexts.KowID" [innerHTML]="
          data?.kowID | formatvalue : EBusinessTravelFormodel : 'kowID' | async
        ">
      </span>
    </div>
  </div>
</ng-template>

<ng-template #templateBusinessTravelGridCol2 let-data>
  <div class="py-2">
    <div class="d-flex align-items-center mb-2">
      <span class="icon-calendar_today icon-16 me-2"></span>
      <span class="text-dark" placement="top" [title]="eBusinessTravelHeaderTexts.BeginDate" [innerHTML]="
          data?.beginDate
            | formatvalue : EBusinessTravelFormodel : 'beginDate'
            | async
        "></span>
      <span class="mx-2">-</span>
      <span class="text-dark" placement="top" [title]="eBusinessTravelHeaderTexts.EndDate" [innerHTML]="
          data?.endDate
            | formatvalue : EBusinessTravelFormodel : 'endDate'
            | async
        "></span>
    </div>
    <div class="d-flex align-items-center" *ngIf="data?.days">
      <span class="icon-i-circle-fill icon-4 text-gray-400 mx-2"></span>
      <span class="text-primary" placement="top" [title]="eBusinessTravelHeaderTexts.Days">
        {{ data?.days }}
        <codx-label [default]="'ngày'" [name]="'lblDaysBusinessTravel'" [formModel]="EBusinessTravelFormodel"
          class="text-gray-400">
        </codx-label>
      </span>
    </div>
  </div>
</ng-template>

<ng-template #templateBusinessTravelGridCol3 let-data>
  <div class="has-action-menu min-h-40px">
    <span class="text-dark" placement="top" [title]="eBusinessTravelHeaderTexts.BusinessPurpose">
      {{ data?.businessPurpose }}
    </span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
      [formModel]="EBusinessTravelFormodel" (clickMF)="clickMF($event, data, 'eBusinessTravels')" [dataItem]="data"
      type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
      [formModel]="EBusinessTravelFormodel" (clickMF)="clickMF($event, data, 'eBusinessTravels')" [dataItem]="data"
      type="hover" (changeDataMF)="handleShowHideMfWs($event, eBusinessTravelFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion Nhật ký công tác -->

<!--region Award - Khen thưởng-->
<ng-template #templateAwardGridCol1 let-data>
  <div class="py-2 hover-active cursor-pointer">
    <div class="mb-2 item-active" placement="top" [title]="awardHeaderText.AwardID"
      (click)="viewGridDetail(data, awardFuncID)" [innerHTML]="
        data?.awardID | formatvalue : awardFormModel : 'awardID' | async
      "></div>
    <div class="text-primary" placement="top" [title]="awardHeaderText.AwardFormCategory" [innerHTML]="
        data?.awardFormCategory
          | formatvalue : awardFormModel : 'awardFormCategory'
          | async
      "></div>
  </div>
</ng-template>

<ng-template #templateAwardGridCol2 let-data>
  <div class="d-flex flex-wrap mt-2">
    <div class="d-flex align-items-center mb-2 me-4" #ranking>
      <span class="icon-event icon-16 me-2"></span>
      <span class="text-dark" placement="top" [title]="awardHeaderText.AwardDate">

        {{ data?.awardDate | fmDT }}
      </span>
      <!-- <i
        class="icon-i-circle-fill icon-circle-group icon-10 text-gray-400 mx-2"
      ></i>
      <span
        class="text-dark"
        [innerHTML]="
          data?.inYear | formatvalue : awardFormModel : 'inYear' | async
        "
      ></span> -->
    </div>
    <div class="d-flex align-items-center mb-2">
      <span class="icon-library_books icon-16 me-2"></span>
      <span class="text-dark" placement="top" [title]="awardHeaderText.DecisionNo">
        {{ data?.decisionNo }}
      </span>
      <!-- <i
        class="icon-i-circle-fill icon-circle-group icon-10 text-gray-400 mx-2"
      ></i>

      <span class="text-dark">
        {{ data?.signedDate | fmDT }}
      </span> -->
    </div>
  </div>
  <!-- <div>
    <i class="icon-calendar_today text-primary"></i>
    {{ data?.awardDate | fmDT }}
    <i
      class="icon-i-circle-fill icon-circle-group icon-14 text-gray-600 me-1"
    ></i>
    <i class="icon-year"></i>
    {{ data?.inYear | formatvalue : awardFormModel : "inYear" | async }}
  </div>
 -->
</ng-template>

<ng-template #templateAwardGridCol3 let-data>
  <div class="has-action-menu py-2">
    <div class="min-h-40px" placement="top" [title]="awardHeaderText.Reason" [innerHTML]="
        data?.reason | formatvalue : awardFormModel : 'reason' | async
      "></div>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="awardFormModel"
      (clickMF)="clickMF($event, data, 'eAwards')" type="hover" [dataItem]="data">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="awardFormModel"
      (clickMF)="clickMF($event, data, 'eAwards')" type="hover" [dataItem]="data"
      (changeDataMF)="handleShowHideMfWs($event, awardFunc)">
    </codx-mfunc>

  </div>
</ng-template>
<!--#end region-->

<ng-template #templateDisciplineGridCol1 let-data>
  <div class="py-2 hover-active cursor-pointer">
    <div class="fw-bold mb-2 item-active" (click)="viewGridDetail(data, eDisciplineFuncID)" placement="top"
      [title]="eDisciplineHeaderText.DisciplineID" [innerHTML]="
        data?.disciplineID
          | formatvalue : eDisciplineFormModel : 'DisciplineID'
          | async
      "></div>
    <div class="text-warning" placement="top" [title]="eDisciplineHeaderText.DisciplineFormCategory" [innerHTML]="
        data?.disciplineFormCategory
          | formatvalue : eDisciplineFormModel : 'disciplineFormCategory'
          | async
      "></div>
  </div>
</ng-template>

<ng-template #templateDisciplineGridCol2 let-data>
  <div class="py-2">
    <div class="d-flex align-items-center mb-2">
      <span class="icon-event icon-16 me-2 text-danger"></span>
      <div class="text-gray-700" placement="top" [title]="eDisciplineHeaderText.DisciplineDate">
        {{ data?.disciplineDate | fmDT }}
      </div>
    </div>
    <div class="d-flex align-items-center">
      <!-- <i class="icon-event icon-16 me-2 text-gray-500"></i>
      <span class="text-dark me-4">{{ data?.fromDate | fmDT }}</span> -->

      <span class="icon-library_books icon-16 me-2"></span>
      <span class="text-gray-700" placement="top" [title]="eDisciplineHeaderText.DecisionNo" [innerHTML]="
          data?.decisionNo
            | formatvalue : eDisciplineFormModel : 'decisionNo'
            | async
        ">
      </span>
    </div>
  </div>
</ng-template>

<ng-template #templateDisciplineGridCol3 let-data>
  <div class="has-action-menu min-h-40px py-2" placement="top" [title]="eDisciplineHeaderText.Reason">
    {{ data?.reason }}
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
      [formModel]="eDisciplineFormModel" (clickMF)="clickMF($event, data, 'eDisciplines')" [dataItem]="data"
      type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eDisciplineFormModel"
      (clickMF)="clickMF($event, data, 'eDisciplines')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, eDisciplineFunc)">
    </codx-mfunc>
  </div>
</ng-template>

<!-- #region Sức khỏe column gridview -->

<!-- #region Bệnh nghề nghiệp column template-->
<ng-template #templateDiseasesGridCol1 let-data>
  <div class="hover-active cursor-pointer">
    <div class="d-flex align-items-center mb-3">
      <span class="fw-bold item-active" (click)="viewGridDetail(data, eDiseasesFuncID)" placement="top"
        [title]="eDiseasesHeaderText.DiseaseID" [innerHTML]="
          data?.diseaseID | formatvalue : eDiseasesFormModel : 'diseaseID' | async
        ">
      </span>
    </div>
    <div class="d-flex align-items-center">
      <span class="icon-calendar_today icon-16 me-2"></span>
      <span class="fw-bold text-dark me-2" placement="top" [title]="eDiseasesHeaderText.DiseaseDate" [innerHTML]="
          data?.diseaseDate
            | formatvalue : eDiseasesFormModel : 'diseaseDate'
            | async
        ">
      </span>
      <span class="badge badge-success fw-bold border-0" *ngIf="data.isInspect">
        Có giám định Y khoa
      </span>
    </div>
  </div>
</ng-template>
<ng-template #templateDiseasesGridCol2 let-data>
  <div class="d-flex align-items-center fw-bold">
    <div class="text-dark text-dark icon-event icon-16 me-1"></div>
    <span class="text-dark" placement="top" [title]="eDiseasesHeaderText.FromDate" [innerHTML]="
        data?.fromDate | formatvalue : eDiseasesFormModel : 'fromDate' | async
      ">
    </span>
  </div>
  <div class="text-dark" placement="top" [title]="eDiseasesHeaderText.TreatHopitalID" [innerHTML]="
      data?.treatHopitalID
        | formatvalue : eDiseasesFormModel : 'treatHopitalID'
        | async
    "></div>
</ng-template>
<ng-template #templateDiseasesGridCol3 let-data>
  <div class="d-flex align-items-center has-action-menu min-h-40px">
    <span class="text-dark" placement="top" [title]="eDiseasesHeaderText.Conclusion" [innerHTML]="
        data?.conclusion
          | formatvalue : eDiseasesFormModel : 'Conclusion'
          | async
      "></span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eDiseasesFormModel"
      (clickMF)="clickMF($event, data, 'eDiseases')" [dataItem]="data" type="hover">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eDiseasesFormModel"
      (clickMF)="clickMF($event, data, 'eDiseases')" [dataItem]="data" type="hover"
      (changeDataMF)="handleShowHideMfWs($event, eDiseasesFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion -->

<!-- #region Tai nạn lao động column template  -->
<ng-template #templateEAccidentCol1 let-data>
  <div class="hover-active cursor-pointer">
    <div class="d-flex align-items-center">
      <span class="d-flex fw-bold item-active" (click)="viewGridDetail(data, eAccidentsFuncID)" placement="top"
        [title]="eAccidentHeaderText.AccidentID" [innerHTML]="
          data?.accidentID
            | formatvalue : eAccidentsFormModel : 'accidentID'
            | async
        "></span>
    </div>
    <div class="d-flex align-items-center">
      <span class="icon-event icon-16 text-danger icon-16 me-2"></span>
      <div class="text-dark" placement="top" [title]="eAccidentHeaderText.AccidentDate" [innerHTML]="
          data?.accidentDate
            | formatvalue : eAccidentsFormModel : 'accidentDate'
            | async
        "></div>
    </div>
  </div>
</ng-template>
<ng-template #templateEAccidentCol2 let-data>
  <div class="d-flex align-items-center">
    <span class="icon-place icon-16 text-gray-500 me-2"></span>
    <span class="text-dark fw-bold">
      <span placement="top" [title]="eAccidentHeaderText.AccidentPlace" [innerHTML]="
          data?.accidentPlace
            | formatvalue : eAccidentsFormModel : 'accidentPlace'
            | async
        "></span>
    </span>
  </div>
  <div class="d-flex align-items-center text-warning">
    <span class="icon-gamepad icon-16 me-2"></span>
    <span placement="top" [title]="eAccidentHeaderText.AccidentReasonID" [innerHTML]="
        data?.accidentReasonID
          | formatvalue : eAccidentsFormModel : 'accidentReasonID'
          | async
      "></span>
  </div>
</ng-template>
<ng-template #templateEAccidentCol3 let-data>
  <div class="d-flex align-items-center has-action-menu min-h-40px">
    <span class="text-dark" placement="top" [title]="eAccidentHeaderText.AccidentLevel" [innerHTML]="
        data?.accidentLevel
          | formatvalue : eAccidentsFormModel : 'accidentLevel'
          | async
      "></span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eAccidentsFormModel"
      (clickMF)="clickMF($event, data, 'eAccidents')" type="hover" [dataItem]="data">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eAccidentsFormModel"
      (clickMF)="clickMF($event, data, 'eAccidents')" type="hover" [dataItem]="data"
      (changeDataMF)="handleShowHideMfWs($event, eAccidentsFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion -->

<!-- #region Khám sức khỏe column template -->
<ng-template #tempCol1EHealthGrid let-data>
  <div class="hover-active cursor-pointer">
    <div class="d-flex align-items-center">
      <i class="icon-calendar_today text-dark icon-16 text-dark me-2"></i>
      <span placement="top" [title]="eHealthHeaderText.HealthDate" class="fw-bold item-active"
        (click)="viewGridDetail(data, eHealthFuncID)" [innerHTML]="
          data?.healthDate | formatvalue : eHealthFormModel : 'healthDate' | async
        ">
      </span>
      <span class="icon-i-circle-fill icon-4 px-2"></span>
      <span class="text-primary" placement="top" [title]="eHealthHeaderText.HealthPeriodID" [innerHTML]="
          data?.healthPeriodID
            | formatvalue : eHealthFormModel : 'healthPeriodID'
            | async
        ">
      </span>
    </div>
    <div class="d-flex align-items-center">
      <i class="bi-bag-plus icon-15 text-gray-500 me-2"></i>
      <span class="text-dark" placement="top" [title]="eHealthHeaderText.HospitalID" [innerHTML]="
          data?.hospitalID | formatvalue : eHealthFormModel : 'hospitalID' | async
        ">
      </span>
    </div>
  </div>
</ng-template>
<ng-template #tempCol2EHealthGrid let-data>
  <div class="d-flex align-items-center text-primary fw-bold" placement="top" [title]="eHealthHeaderText.HealthType">
    <div class="bi-caret-right icon-16 me-1"></div>
    <span *ngIf="data?.healthType"> Loại </span>
    <span class="text-primary ms-1" [innerHTML]="
        data?.healthType | formatvalue : eHealthFormModel : 'healthType' | async
      ">
    </span>
  </div>
  <div class="text-dark">
    <span class="text-dark" placement="top" [title]="eHealthHeaderText.FinalConclusion" [innerHTML]="
        data?.finalConclusion
          | formatvalue : eHealthFormModel : 'finalConclusion'
          | async
      ">
    </span>
  </div>
</ng-template>
<ng-template #tempCol3EHealthGrid let-data>
  <div class="d-flex align-items-center has-action-menu min-h-40px">
    <span class="text-dark" placement="top" [title]="eHealthHeaderText.Suggestion" [innerHTML]="
        data?.suggestion | formatvalue : eHealthFormModel : 'suggestion' | async
      ">
    </span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eHealthFormModel"
      (clickMF)="clickMF($event, data, 'eHealth')" type="hover" [dataItem]="data">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eHealthFormModel"
      (clickMF)="clickMF($event, data, 'eHealth')" type="hover" [dataItem]="data"
      (changeDataMF)="handleShowHideMfWs($event, eHealthFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion -->

<!-- #region Tiêm vaccine template -->
<ng-template #tempEVaccineGridCol1 let-data>
  <div class="hover-active cursor-pointer py-3">
    <div class="d-flex align-items-center mb-5px">
      <!-- <span class="icon-i-arrow-down-left-circle-fill icon-12 me-2"
        [style.color]="getVaccineBackgroundColor(data)"></span> -->
      <span class="fw-bold item-active" (click)="viewGridDetail(data, eVaccinesFuncID)" placement="top"
        [title]="eVaccineHeaderText.VaccineTypeID" [innerHTML]="
          data?.vaccineTypeID
            | formatvalue : eVaccineFormModel : 'vaccineTypeID'
            | async
        ">
      </span>
      <span class="icon-i-circle-fill icon-4 text-gray-400 mx-2"></span>
      <span class="text-primary" placement="top" [title]="eVaccineHeaderText.VaccineName" [innerHTML]="
          data?.vaccineName
            | formatvalue : eVaccineFormModel : 'vaccineName'
            | async
        ">
      </span>
    </div>
    <div class="d-flex align-self-center text-gray-500 fs-7" placement="top" [title]="eVaccineHeaderText.HopitalID"
      [innerHTML]="
        data?.hopitalID | formatvalue : eVaccineFormModel : 'hopitalID' | async
      "></div>

  </div>
</ng-template>
<ng-template #tempEVaccineGridCol2 let-data>
  <div class="py-3">
    <div class="d-flex align-items-center mb-5px">
      <i class="icon-calendar_today icon-14 text-dark me-2"></i>
      <span class="text-dark" placement="top" [title]="eVaccineHeaderText.InjectDate" [innerHTML]="
          data?.injectDate
            | formatvalue : eVaccineFormModel : 'injectDate'
            | async
        ">
      </span>
    </div>
    <div class="d-flex align-items-center">
      <i class="icon-calendar_today icon-14 text-dark me-2"></i>
      <span class="text-dark" placement="top" [title]="eVaccineHeaderText.NextInjectDate" [innerHTML]="
          data?.nextInjectDate
            | formatvalue : eVaccineFormModel : 'nextInjectDate'
            | async
        ">
      </span>
    </div>
  </div>
</ng-template>
<ng-template #tempEVaccineGridCol3 let-data>
  <div class="d-flex align-items-center has-action-menu min-h-40px">
    <!-- <i class="icon-edit text-gray-500 icon-16 me-1"></i> -->
    <span placement="top" [title]="eVaccineHeaderText.Note" [innerHTML]="
        data?.note | formatvalue : eVaccineFormModel : 'note' | async
      "></span>
    <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'" [formModel]="eVaccineFormModel"
      (clickMF)="clickMF($event, data, 'eVaccine')" type="hover" [dataItem]="data">
    </codx-mfunc>

    <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'" [formModel]="eVaccineFormModel"
      (clickMF)="clickMF($event, data, 'eVaccine')" type="hover" [dataItem]="data"
      (changeDataMF)="handleShowHideMfWs($event, eVaccinesFunc)">
    </codx-mfunc>
  </div>
</ng-template>
<!-- #endregion -->

<!-- #endregion Sức khỏe column gridview -->

<!-- #region Hợp đồng lao động column template  -->

<ng-template #eContractCol1 let-data>
  <div class="d-flex align-items-center" [ngClass]="data?.isCurrent ? 'text-primary' : ''">
    <!-- <span
      class="bullet bullet-vertical d-flex align-items-center min-h-50px mh-100 me-4"
      [class]="
        !data.isAppendix && data.isCurrent ? 'bg-primary' : 'bg-transparent'
      "
    ></span> -->
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center" *ngIf="data.isAppendix">
        <div class="d-flex flex-wrap mb-1">
          <div class="d-flex align-items-center">
            <span class="badge border-0 me-2 badge-primary">
              <codx-label [formModel]="eContractFormModel" [name]="'lblIsAppendix'"
                [default]="'Phụ lục hợp đồng'"></codx-label>
            </span>
          </div>
        </div>
      </div>
      <div class="d-flex align-items-center mb-2" *ngIf="!data.isAppendix">
        <span class="fw-bolder">
          <span [innerHTML]="
              data?.contractTypeID
                | formatvalue : eContractFormModel : 'contractTypeID'
                | async
            "></span>
        </span>
      </div>

      <div class="d-flex align-items-center mb-2">
        <span class="icon-event icon-16 text-gray-800 me-1"></span>
        <span class="fw-bold">
          <span [innerHTML]="
              data?.effectedDate
                | formatvalue : eContractFormModel : 'effectedDate'
                | async
            "></span>
        </span>
        <span class="me-1 ms-1 fw-bolder">-</span>
        <span class="fw-bold">
          <span [innerHTML]="
              data?.expiredDate
                | formatvalue : eContractFormModel : 'expiredDate'
                | async
            "></span>
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #eContractCol2 let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center">
      <div class="d-flex flex-wrap mb-1">
        <div class="d-flex align-items-center" *ngIf="data.isAppendix">
          <span class="fw-bold">
            <span class="me-1 icon-i-layout-text-sidebar-reverse icon-10 text-gray-800"></span>
            <span [title]="eContractHeaderText.CefContractNo" [innerHTML]="
                data?.refContractNo
                  | formatvalue : eContractFormModel : 'refContractNo'
                  | async
              "></span>
          </span>
        </div>

        <div class="d-flex align-items-center">
          <span class="me-1 icon-i-layout-text-sidebar-reverse icon-10 text-gray-800"></span>
          <span class="text-dark">
            <span [title]="eContractHeaderText.ContractNo">{{
              data?.contractNo
              }}</span>
          </span>
        </div>
        <div class="d-flex align-items-center">
          <span class="icon-i-arrow-down-left-circle-fill fs-icon fs-10 ms-2 me-2 text-gray-400"></span>
          <span class="fw-bold">
            <span [title]="eContractHeaderText.SignedDate" [innerHTML]="
                data?.signedDate
                  | formatvalue : eContractFormModel : 'signedDate'
                  | async
              "></span>
          </span>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #eContractCol3 let-data>
  <div class="has-action-menu min-h-40px">
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center mb-2">
        <span class="icon-edit icon-16 text-gray-800 me-1"></span>
        <span class="fw-bold">
          <span [innerHTML]="
              data?.note | formatvalue : eContractFormModel : 'note' | async
            "></span>
        </span>
      </div>
      <codx-mfunc *ngIf="fromWS == false && infoPersonal && infoPersonal.status != '90'"
        [formModel]="eAccidentsFormModel" (clickMF)="clickMF($event, data, 'eContract')" type="hover" [dataItem]="data">
      </codx-mfunc>

      <codx-mfunc *ngIf="fromWS == true || infoPersonal && infoPersonal.status == '90'"
        [formModel]="eAccidentsFormModel" (clickMF)="clickMF($event, data, 'eContract')" type="hover" [dataItem]="data"
        (changeDataMF)="handleShowHideMfWs($event, eAccidentsFunc)">
      </codx-mfunc>
    </div>
  </div>
</ng-template>

<!-- #endregion -->

<ng-template #emptyDataTemplate>
  <div class="ms-9 mt-5">
    <span class="text-gray-700">
      {{ "SYS011" | mssg | async }}
    </span>
  </div>
</ng-template>

<ng-template #headTempAwards1>
  <codx-label [formModel]="awardFormModel" [name]="'lblAwardsGridCol1'" default="Loại khen thưởng"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAwards2>
  <codx-label [formModel]="awardFormModel" [name]="'lblAwardsGridCol2'" default="Ngày khen thưởng"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAwards3>
  <codx-label [formModel]="awardFormModel" [name]="'lblAwardsGridCol3'" default="Lý do khen thưởng"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDisciplines1>
  <codx-label [formModel]="eDisciplineFormModel" [name]="'lblDisciplineGridCol1'" default="Loại kỷ luật"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDisciplines2>
  <codx-label [formModel]="eDisciplineFormModel" [name]="'lblDisciplineGridCol2'" default="Ngày vi phạm"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDisciplines3>
  <codx-label [formModel]="eDisciplineFormModel" [name]="'lblDisciplineGridCol3'" default="Nội dung vi phạm"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #tmpViewAllContract let-dialog1>
  <div class="">
    <div class="codx-form card w-100 h-100 rounded-0 border-0">
      <div class="card-header flex-column">
        <div class="d-flex align-items-center justify-content-between w-100">
          <div class="card-title">
            <div class="d-flex flex-column">
              <div class="d-flex align-items-center mb-3 mt-5">
                <span class="icon-i-filter-right icon-20 me-2"></span>
                <div class="d-flex align-items-center me-3">
                  <codx-label [formModel]="eContractFormModel" [name]="'lblViewAllEContract'"
                    default="Hợp đồng lao động" class="fw-bold text-uppercase fs-5-sm text-gray-600">
                  </codx-label>
                </div>
              </div>
            </div>
          </div>
          <div class="card-toolbar">
            <button type="button" class="btn btn-flex text-dark-75 text-hover-primary px-0" (click)="close2(dialog1)">
              <span class="icon-close icon-18"></span>
            </button>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="mt-4">
          <codx-gridview *ngIf="eContractColumnGrid && eContractFormModel" #passportGridview
            [formModel]="eContractFormModel" [columnsGrid]="eContractColumnGrid" [service]="'HR'"
            [assemblyName]="'Core'" [className]="'DataBusiness'" [method]="'LoadDataAsync'"
            [predicates]="'EmployeeID=@0'" [dataValues]="employeeID" [emptyTemplate]="emptyDataTemplate"
            [dataService]="dataService" height="auto" [sort]="[eContractSortModel]"></codx-gridview>
        </div>
      </div>
      <div class="card-footer border-0">
        <div class="d-flex justify-content-end"></div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #headTempDayOff1>
  <codx-label [formModel]="dayoffFormModel" [name]="'lblDayOffGridCol1'" default="Loại nghỉ"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDayOff2>
  <codx-label [formModel]="dayoffFormModel" [name]="'lblDayOffGridCol2'" default="Thời gian nghỉ"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDayOff3>
  <codx-label [formModel]="dayoffFormModel" [name]="'lblDayOffGridCol3'" default="Lý do nghỉ"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempBusinessTravel1>
  <codx-label [formModel]="EBusinessTravelFormodel" [name]="'lblBusinessTravelGridCol1'" default="Nơi đến công tác"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempBusinessTravel2>
  <codx-label [formModel]="EBusinessTravelFormodel" [name]="'lblBusinessTravelGridCol2'" default="Thời gian công tác"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempBusinessTravel3>
  <codx-label [formModel]="EBusinessTravelFormodel" [name]="'lblBusinessTravelGridCol3'" default="Mục đích công tác"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAppointion1>
  <codx-label [formModel]="EBusinessTravelFormodel" [name]="'lblAppointionGridCol1'" default="Loại quyết định"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAppointion2>
  <codx-label [formModel]="EBusinessTravelFormodel" [name]="'lblAppointionGridCol2'" default="Chức danh"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAppointion3>
  <codx-label [formModel]="EBusinessTravelFormodel" [name]="'lblAppointionGridCol3'" default="Phòng ban"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDegree1>
  <codx-label [formModel]="eDegreeFormModel" [name]="'lblDegreeGridCol1'" [default]="'Tên bằng cấp'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="
      eDegreeHeaderText['DegreeName'] +
      ' | ' +
      eDegreeHeaderText['TrainFieldID']
    " -->
  </codx-label>
</ng-template>

<ng-template #headTempDegree2>
  <codx-label [formModel]="eDegreeFormModel" [name]="'lblDegreeGridCol2'" [default]="'Nơi đào tạo'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="
      eDegreeHeaderText['TrainSupplierID'] +
      ' | ' +
      eDegreeHeaderText['Ranking']
    "
    default="Nơi đào tạo | Xếp loại tốt nghiệp" -->
  </codx-label>
</ng-template>

<ng-template #headTempDegree3>
  <codx-label [formModel]="eDegreeFormModel" [default]="'Năm tốt nghiệp'" [name]="'lblDegreeGridCol3'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="
      eDegreeHeaderText['YearGraduated'] +
      ' | ' +
      eDegreeHeaderText['IssuedDate']
    " -->
  </codx-label>
</ng-template>

<ng-template #headTempCertificate1>
  <codx-label [formModel]="eCertificateFormModel" [name]="'lblCertificateGridCol1'"
    [default]="eCertificateHeaderText['CertificateID']" class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempCertificate2>
  <codx-label [formModel]="eCertificateFormModel" name="TrainSupplierID" [default]="'Nơi đào tạo'"></codx-label>
  <span class="mx-1">|</span>
  <codx-label [formModel]="eCertificateFormModel" name="Ranking" [default]="'Xếp loại'"></codx-label>


</ng-template>

<ng-template #headTempCertificate3>
  <codx-label [formModel]="eCertificateFormModel" name="IssuedDate" [default]="'Ngày cấp'"></codx-label>
  <!-- custom lblExpiredDate vì trong gridviewsetup ko có headerText Thời hạn -->
  <codx-label [formModel]="eCertificateFormModel" name="lblExpiredDate" [default]="'Thời hạn'"></codx-label>

</ng-template>

<ng-template #headTempSkill1>
  <codx-label [formModel]="eSkillFormmodel" [name]="'lblSkillGridCol1'" [default]="'Kỹ năng'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="
      eSkillHeaderText['SkillID'] + ' | ' + eSkillHeaderText['SkillGradeID']
    " -->
  </codx-label>
</ng-template>

<ng-template #headTempSkill2>
  <codx-label [formModel]="eSkillFormmodel" [name]="'lblSkillGridCol2'" [default]="'Nơi đào tạo'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempSkill3>
  <codx-label [formModel]="eSkillFormmodel" [default]="'Thời gian đào tạo'" [name]="'lblSkillGridCol3'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempTrainCourse1>
  <codx-label [formModel]="eTrainCourseFormModel" [name]="'lblTrainCourseGridCol1'" [default]="'Khóa đào tạo'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>

</ng-template>

<ng-template #headTempTrainCourse2>
  <codx-label [formModel]="eTrainCourseFormModel" [name]="'lblTrainCourseGridCol2'" [default]="'Nơi đào tạo'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempTrainCourse3>
  <codx-label [formModel]="eTrainCourseFormModel" [default]="'Thời gian đào tạo'" [name]="'lblTrainCourseGridCol3'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAccident1>
  <codx-label [formModel]="eAccidentsFormModel" [name]="'lblAccidentGridCol1'" [default]="'Loại tai nạn'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAccident2>
  <codx-label [formModel]="eAccidentsFormModel" [name]="'lblAccidentGridCol2'" [default]="'Nơi xảy ra'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempAccident3>
  <codx-label [formModel]="eAccidentsFormModel" [default]="'Mức dộ tại nạn'" [name]="'lblAccidentGridCol3'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="eAccidentHeaderText['AccidentLevel']" -->
  </codx-label>
</ng-template>

<ng-template #headTempDiseases1>
  <codx-label [formModel]="eDiseasesFormModel" [name]="'lblheadDiseasesCol1'" [default]="'Bệnh nghề nghiệp'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="eDiseasesHeaderText['DiseaseID']" -->
  </codx-label>
</ng-template>

<ng-template #headTempDiseases2>
  <codx-label [formModel]="eDiseasesFormModel" [name]="'lblheadDiseasesCol2'" [default]="'Thời gian điều trị'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempDiseases3>
  <codx-label [formModel]="eDiseasesFormModel" [default]="'Kết quả chẩn đoán'" [name]="'lblheadDiseasesCol3'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="eDiseasesHeaderText['Conclusion']" -->
  </codx-label>
</ng-template>

<ng-template #headTempHealth1>
  <codx-label [formModel]="eHealthFormModel" [name]="'lblHealthGridCol1'" [default]="'Ngày khám'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempHealth2>
  <codx-label [formModel]="eHealthFormModel" [name]="'lblHealthGridCol2'" [default]="'Kết quả'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempHealth3>
  <codx-label [formModel]="eHealthFormModel" [name]="'lblHealthGridCol3'" [default]="'Ghi chú'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="eHealthHeaderText['Suggestion']" -->
  </codx-label>
</ng-template>

<ng-template #headTempVaccine1>
  <codx-label [formModel]="eVaccineFormModel" [name]="'lblVaccineGridCol1'" [default]="'Loại vaccine'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempVaccine2>
  <codx-label [formModel]="eVaccineFormModel" [default]="'Ngày tiêm'" [name]="'lblVaccineGridCol2'"
    class="fw-bold fs-6 text-gray-800">
  </codx-label>
</ng-template>

<ng-template #headTempVaccine3>
  <codx-label [formModel]="eVaccineFormModel" [default]="'Ghi chú'" [name]="'lblVaccineGridCol3'"
    class="fw-bold fs-6 text-gray-800">
    <!-- [default]="eVaccineHeaderText['Note']" -->
  </codx-label>
</ng-template>