<div class="container mt-2 h-100 w-100">
    <ng-container *ngIf="showManager">
        <div class="d-flex align-items-top p-3">
            <div class="me-5">
                <codx-img #empAvatar [width]="50" [objectId]="manager?.employeeID ? manager?.employeeID : ''"
                    [objectName]="manager?.employeeName ? manager?.employeeName : ''" [objectType]="'HR_Employees'"
                    [imageType]="'circle'">
                </codx-img>
            </div>
            <div class="d-flex align-items-top w-100 justify-content-between">
                <div class="d-flex flex-column">
                    <div class="mb-1">
                        <ng-container *ngIf="manager?.employeeName; else lblEmployeeName">
                            <span class="fw-bold text-dark fs-5">{{manager.employeeName}}</span>
                        </ng-container>
                        <ng-template #lblEmployeeName>
                            <span class="place-holder">{{grvSetup['EmployeeName']?.headerText}}</span>
                        </ng-template>
                    </div>
                    <div class="mb-1">
                        <ng-container *ngIf="manager?.positionID; else lblPositionName">
                            <span class="text-gray-500">{{manager.positionName? manager.positionName:
                                manager.positionID}}</span>
                        </ng-container>
                        <ng-template #lblPositionName>
                            <span class="place-holder">{{grvSetup['PositionID']?.headerText}}</span>
                        </ng-template>
                        <span class="ms-2 me-2 text-gray-500">|</span>
                        <ng-container *ngIf="manager?.orgUnitID; else lblOrgUnitName">
                            <span class="text-gray-700">{{manager.orgUnitName? manager.orgUnitName:
                                manager.orgUnitID}}</span>
                        </ng-container>
                        <ng-template #lblOrgUnitName>
                            <span class="place-holder"> {{grvSetup['OrgUnitID']?.headerText}}</span>
                        </ng-template>
                    </div>
                    <div>
                        <ng-container *ngIf="manager?.phone; else lblPhone">
                            <span class="text-gray-700">{{ manager?.phone }}</span>
                        </ng-container>
                        <ng-template #lblPhone>
                            <span class="place-holder"> {{grvSetup['Phone']?.headerText}}</span>
                        </ng-template>
                        <span class="mx-2">|</span>
                        <ng-container *ngIf="manager?.email; else lblEmail">
                            <span class="text-gray-700">{{ manager.email }}</span>
                        </ng-container>
                        <ng-template #lblEmail>
                            <span class="place-holder"> {{grvSetup['Email']?.headerText}}</span>
                        </ng-template>
                    </div>
                </div>
                <div class="w-150px text-center">
                    <div class="fs-1 fw-bold text-primary mb-1">{{ grid?.dataService?.rowCount }}</div>
                    <codx-label class="text-gray-600" [formModel]="formModel" name="lblTotalEmployee"
                        default="Tổng số nhân viên"></codx-label>
                </div>
            </div>
        </div>
    </ng-container>

    <div *ngIf="columnsGrid" class="h-100 org-gridview">
        <codx-gridview-v2 #grid [formModel]="formModel" [columnsGrid]="columnsGrid" [service]="'HR'"
            [entityName]="'HR_Employees'" assemblyName="ERM.Business.HR" [className]="'EmployeesBusiness'"
            [hideMoreFunc]="true" [method]="'GetEmployeeListByOrgUnitIDGridView'" [dataValues]="orgUnitID"
            [emptyTemplate]="emptyDataTemplate" [autoLoad]="false" [showRowNumber]="true" [autoFitColumns]="false"
            [allowResizing]="false" [allowFiltering]="false" [allowSorting]="false" idField="employeeID" rowHeight="50"
            height="auto"></codx-gridview-v2>
    </div>
</div>

<ng-template #templateName let-data>
    <div class="d-flex align-items-center emp-list">
        <codx-img class="me-3" [width]="30" [objectId]="data.employeeID" [objectName]="data.employeeName"
            objectType="HR_Employees" [referType]="'avt'">
        </codx-img>
        <div class="d-flex flex-column flex-grow-1">
            <div class="d-flex align-items-center">
                <div class="text-dark fw-bold me-2">{{ data.employeeName }}</div>
            </div>
            <div class="mt-1">
                <span *ngIf="data.positionName; else noPosName" class="text-gray-600 fs-7">
                    <span>{{data.positionName? data.positionName : data.positionID}}</span>
                </span>
                <ng-template #noPosName>
                    <span class="place-holder fs-7">
                        <span>{{grvSetup['PositionID']?.headerText}}</span>
                    </span>
                </ng-template>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #templateBirthday let-item>
    <ng-container *ngIf="item.birthday; else noBirthday">
        <span class="text-gray-700">{{ item.birthday | fmDT }}</span>
    </ng-container>
    <ng-template #noBirthday>
        <span class="place-holder">{{ grvSetup["Birthday"]?.headerText }}</span>
    </ng-template>
</ng-template>
<ng-template #templatePhone let-data>
    <div class="d-flex align-items-center employee-add">
        <span *ngIf="formModel.formName != 'EmployeeInfomation'" class="icon-phone_android icon-16 me-2"></span>
        <span class="text-gray-600" [innerHTML]="data.phone | formatvalue: formModel:'phone' | async"></span>
    </div>
</ng-template>
<ng-template #templateEmail let-data>
    <div class="d-flex align-items-center employee-email">
        <span *ngIf="formModel.formName != 'EmployeeInfomation'" class="icon-email icon-16 me-2"> </span>
        <span class="text-gray-600" [innerHTML]="data.email | formatvalue: formModel:'email' | async"></span>
    </div>
</ng-template>
<ng-template #templateJoinedOn let-item>
    <div *ngIf="item.joinedOn; else noJoinedOn">{{item.joinedOn | fmDT}}</div>
    <ng-template #noJoinedOn>
        <div class="place-holder">{{grvSetup['JoinedOn']?.headerText}}</div>
    </ng-template>
</ng-template>
<ng-template #templateStatus let-item>
    <div class="d-flex align-items-center has-action-menu">
        <ng-container *ngIf="item.status">
            <codx-vll [formModel]="formModel" [classList]="'badge badge-sm badge-inline'" [name]="'HR003'"
                [value]="item.status" [showText]="true" [showBgColor]="true">
            </codx-vll>
        </ng-container>
        <div class="align-self-center" *ngIf="editable">
            <div style="height: 40px">
              <codx-mfunc [formModel]="view.formModel" (clickMF)="clickMF($event, item)"
                (changeDataMF)="clickMF($event, item)" [dataItem]="item" type="hover">
              </codx-mfunc>
            </div>
          </div>
    </div>
</ng-template>
<ng-template #emptyDataTemplate>
    <div class="d-flex ms-1">
        <span class="text-gray-500 fw-bold">
            {{ "SYS011" | mssg | async }}
        </span>
    </div>
</ng-template>