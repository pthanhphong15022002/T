<div class="page-questions w-100 mt-4">
  <div class="d-flex w-100">
    <div class="d-flex flex-column">
      <div class="box">
        <div *ngFor="let itemSession of questions">
          <div
            class="card-survey"
            [id]="'card-survey-' + itemSession.seqNo"
            (click)="clickToScroll(itemSession.seqNo, null, 'S')"
          >
            <div *ngIf="questions.length > 1" class="count-session">
              <div class="d-flex num-session">
                <codx-label fiedName="AOS" default="Phần"></codx-label>
                <span
                  >&nbsp;{{
                    itemSession.seqNo + 1 + " / " + questions.length
                  }}</span
                >
              </div>
            </div>
            <div
              class="col-lg-8 control-section inplace-editor-control-section form-lafyout"
              id="inplace-editor-control"
            >
              <div
                [ngClass]="{
                  'content-wrapper': true,
                  'b-t b-l-session': itemSession.active,
                  'b-t': !itemSession.active,
                  'b-t-title': itemSession.category == 'T'
                }"
              >
                <form id="formSession" class="form-horizontal example-box">
                  <ng-container #body>
                    <ng-container
                      *ngTemplateOutlet="
                        template_card_session;
                        context: {
                          itemSession: itemSession
                        }
                      "
                    ></ng-container>
                  </ng-container>
                </form>
              </div>
            </div>
          </div>
          <div
            cdkDropList
            class="list example-boundary"
            (cdkDropListDropped)="drop(itemSession.seqNo, $event)"
          >
            <div *ngFor="let itemQuestion of itemSession.children">
              <div
                class="card-survey"
                [id]="'card-survey-question-' + itemQuestion.recID"
                (click)="
                  clickToScroll(itemSession.seqNo, itemQuestion.recID, 'Not-S')
                "
                cdkDragBoundary=".example-boundary"
                cdkDrag
              >
                <div
                  class="col-lg-8 control-section inplace-editor-control-section form-layout"
                  id="inplace-editor-control"
                >
                  <div
                    [ngClass]="
                      itemQuestion.active
                        ? 'content-wrapper b-l'
                        : 'content-wrapper'
                    "
                  >
                    <form id="formId" class="form-horizontal example-box">
                      <ng-container #header>
                        <div class="example-handle" cdkDragHandle>
                          <span class="icon-reorder"></span>
                        </div>
                      </ng-container>
                      <ng-container #body>
                        <div *ngIf="itemQuestion.category == 'Q'">
                          <div *ngIf="!itemQuestion.showAnswer">
                            <ng-container
                              *ngTemplateOutlet="
                                template_card_question;
                                context: {
                                  itemSession: itemSession,
                                  itemQuestion: itemQuestion
                                }
                              "
                            ></ng-container>
                          </div>
                          <div *ngIf="itemQuestion.showAnswer">
                            <ng-container
                              *ngTemplateOutlet="
                                template_card_question_showAnswer;
                                context: {
                                  itemSession: itemSession,
                                  itemQuestion: itemQuestion
                                }
                              "
                            ></ng-container>
                          </div>
                        </div>
                        <div
                          *ngIf="
                            itemQuestion.category == 'P' ||
                            itemQuestion.category == 'V'
                          "
                        >
                          <ng-container
                            *ngTemplateOutlet="
                              template_card_image_video;
                              context: {
                                itemSession: itemSession,
                                itemQuestion: itemQuestion
                              }
                            "
                          ></ng-container>
                        </div>
                        <div *ngIf="itemQuestion.category == 'T'">
                          <ng-container
                            *ngTemplateOutlet="
                              template_card_title;
                              context: {
                                itemSession: itemSession,
                                itemQuestion: itemQuestion
                              }
                            "
                          ></ng-container>
                        </div>
                      </ng-container>
                      <ng-container
                        #footer
                        *ngIf="
                          (itemQuestion?.active &&
                            !itemQuestion?.showAnswer &&
                            itemQuestion.category == 'Q') ||
                          itemQuestion.category == 'R' ||
                          itemQuestion.category == 'O2' ||
                          itemQuestion.category == 'C2'
                        "
                      >
                        <hr />
                        <div class="d-flex justify-content-between p-3">
                          <div
                            class="d-flex align-items-center pointer"
                            (click)="
                              showAnswer(itemSession.seqNo, itemQuestion.seqNo)
                            "
                          >
                            <span
                              class="icon-check-correct icon-22 primary me-1"
                              ngbPopover="Đáp án và điểm"
                              triggers="mouseenter:mouseleave"
                              placement="bottom"
                              [autoClose]="'outside'"
                            ></span>
                            <codx-label
                              fiedName="Answer"
                              default="Đáp án"
                              class="primary fw-bold"
                              [formModel]="formModel"
                            ></codx-label>
                            <span class="ms-2"
                              >({{ itemQuestion.scores }}
                              <codx-label
                                fiedName="Scores"
                                default="điểm"
                                class=""
                                [formModel]="formModel"
                              ></codx-label
                              >)
                            </span>
                          </div>
                          <div
                            class="d-flex align-items-center justify-content-end"
                          >
                            <span
                              (click)="copyCard(itemSession, itemQuestion, 'Q')"
                              class="icon-content_copy icon-20 me-2 btn btn-icon btn-active-light-primary position-relative"
                            ></span>
                            <span
                              (click)="
                                deleteCard(
                                  itemSession.seqNo,
                                  itemQuestion.seqNo,
                                  itemQuestion.recID,
                                  'Not-S'
                                )
                              "
                              class="icon-delete_outline icon-22 me-2 btn btn-icon btn-active-light-primary position-relative"
                            ></span>
                            <span class="split"></span>
                            <codx-label
                              fiedName=""
                              default="Bắt buộc"
                              class="me-2"
                            ></codx-label>
                            <codx-input
                              type="switch"
                              class="pd-t-10"
                              (valueChange)="
                                valueChangeMandatory($event, itemQuestion)
                              "
                              [crrValue]="itemQuestion.mandatory"
                            ></codx-input>
                            <div ngbDropdown class="dropdown" container="body">
                              <a
                                href="javascript:void(0)"
                                class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
                                ngbDropdownToggle
                                id="dropdownMenuButton1"
                                aria-expanded="false"
                              >
                                <span
                                  class="icon-more_vert icon-22 me-2 btn btn-icon btn-active-light-primary position-relative"
                                >
                                </span>
                              </a>
                              <ul
                                ngbDropdownMenu
                                aria-labelledby="dropdownMenuButton1"
                                class="MF"
                              >
                                <li>
                                  <a
                                    (click)="
                                      hideComment(
                                        itemSession.seqNo,
                                        itemQuestion.seqNo
                                      )
                                    "
                                    ngbDropdownItem
                                    href="javascript:void(0)"
                                    class="mt-30px"
                                  >
                                    <div class="d-flex">
                                      <span
                                        *ngIf="itemQuestion?.hideComment"
                                        class="icon-check icon-22 ps-6 pe-6"
                                      ></span>
                                      <codx-label
                                        fiedName="formatAlignLeft"
                                        default="Mô tả"
                                      ></codx-label>
                                    </div>
                                  </a>
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                      <div
                        #footer_active_showAnswer
                        *ngIf="itemQuestion?.active && itemQuestion?.showAnswer"
                      >
                        <hr />
                        <div class="d-flex justify-content-end pe-6 pb-6 pt-6">
                          <button
                            type="button"
                            class="btn btn-primary"
                            (click)="
                              showAnswer(itemSession.seqNo, itemQuestion.seqNo)
                            "
                          >
                            <codx-label
                              fiedName="Done"
                              default="Xong"
                            ></codx-label>
                          </button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ng-container #moreFC *ngIf="questions && questions.length > 0">
        <div class="moreFC rounded-2 py-2">
          <div
            class="icon-MF d-flex justify-content-center"
            (click)="clickMF('LTN01')"
          >
            <span
              class="icon-add_circle_outline icon-22 text-hover-primary"
              ngbPopover="Thêm câu hỏi"
              triggers="mouseenter:mouseleave"
              placement="right"
              [autoClose]="'outside'"
            ></span>
          </div>
          <div
            class="icon-MF d-flex justify-content-center"
            (click)="clickMF('LTN02')"
          >
            <span
              class="icon-input icon-22 text-hover-primary"
              ngbPopover="Nhập câu hỏi"
              triggers="mouseenter:mouseleave"
              placement="right"
              [autoClose]="'outside'"
            ></span>
          </div>
          <div
            class="icon-MF d-flex justify-content-center"
            (click)="clickMF('LTN03')"icon-image
          >
            <span
              class="icon-format_size icon-22 text-hover-primary"
              ngbPopover="Thêm tiêu đề và mô tả"
              triggers="mouseenter:mouseleave"
              placement="right"
              [autoClose]="'outside'"
            ></span>
          </div>
          <div
            class="icon-MF d-flex justify-content-center"
            (click)="clickMF('LTN04', ATM_Image)"
          >
            <span
              class="icon-image icon-22 text-hover-primary"
              ngbPopover="Thêm hình ảnh"
              triggers="mouseenter:mouseleave"
              placement="right"
              [autoClose]="'outside'"
            ></span>
          </div>
          <div
            class="icon-MF d-flex justify-content-center"
            (click)="clickMF('LTN05')"
          >
            <span
              class="icon-video_library icon-22 text-hover-primary"
              ngbPopover="Thêm video"
              triggers="mouseenter:mouseleave"
              placement="right"
              [autoClose]="'outside'"
            ></span>
          </div>
          <div
            class="icon-MF d-flex justify-content-center"
            (click)="clickMF('LTN06')"
          >
            <span
              class="icon-calendar_today icon-dns icon-22 text-hover-primary"
              ngbPopover="Thêm phần"
              triggers="mouseenter:mouseleave"
              placement="right"
              [autoClose]="'outside'"
            ></span>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
<ng-template
  #templateQuestionMF
  let-seqNoSession="seqNoSession"
  let-itemQuestion="itemQuestion"
  let-answerType="answerType"
>
  <div ngbDropdown container="body">
    <button
      type="button"
      class="btn btn-outline-dark btn-sm dropdown1"
      ngbDropdownToggle
    >
      <div class="d-flex" *ngIf="answerType == 'T'">
        <span class="icon-short_text icon-22 me-2"></span>
        <codx-label fiedName="" default="Trả lời ngắn"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'T2'">
        <span class="icon-text_snippet icon-22"></span>
        <codx-label fiedName="" default="Trả lời đoạn"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'O'">
        <span class="icon-radio_button_checked icon-22"></span>
        <codx-label fiedName="" default="Trắc nghiệm"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'C'">
        <span class="icon-check_box icon-22"></span>
        <codx-label fiedName="" default="Hộp kiểm"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'L'">
        <span class="icon-arrow_drop_down_circle icon-22"></span>
        <codx-label fiedName="" default="Menu thả xuống"></codx-label>
      </div>
      <!-- <div class="d-flex" *ngIf="answerType == 'A'">
        <span class="icon-cloud_upload icon-22"></span>
        <codx-label fiedName="" default="Tải tệp lên"></codx-label>
      </div> -->
      <div class="d-flex" *ngIf="answerType == 'R'">
        <span class="icon-22"></span>
        <codx-label fiedName="" default="Phạm vi tuyến tính"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'O2'">
        <span class="icon-22"></span>
        <codx-label fiedName="" default="Lưới trắc nghiệm"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'C2'">
        <span class="icon-view_module icon-22"></span>
        <codx-label fiedName="" default="Lưới hộp kiểm"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'D'">
        <span class="icon-calendar_today icon-22"></span>
        <codx-label fiedName="" default="Ngày"></codx-label>
      </div>
      <div class="d-flex" *ngIf="answerType == 'H'">
        <span class="icon-access_time icon-22"></span>
        <codx-label fiedName="" default="Giờ"></codx-label>
      </div>
    </button>
    <div ngbDropdownMenu>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'T')"
      >
        <div class="d-flex">
          <span class="icon-short_text icon-22"></span>
          <codx-label fiedName="" default="Trả lời ngắn"></codx-label>
        </div>
      </button>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'T2')"
      >
        <div class="d-flex">
          <span class="icon-text_snippet icon-22"></span>
          <codx-label fiedName="" default="Trả lời đoạn"></codx-label>
        </div>
      </button>
      <hr />
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'O')"
      >
        <div class="d-flex">
          <span class="icon-radio_button_checked icon-22"></span>
          <codx-label fiedName="" default="Trắc nghiệm"></codx-label>
        </div>
      </button>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'C')"
      >
        <div class="d-flex">
          <span class="icon-check_box icon-22"></span>
          <codx-label fiedName="" default="Hộp kiểm"></codx-label>
        </div>
      </button>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'L')"
      >
        <div class="d-flex">
          <span class="icon-arrow_drop_down_circle icon-22"></span>
          <codx-label fiedName="" default="Menu thả xuống"></codx-label>
        </div>
      </button>
      <hr />
      <!-- <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'A')"
      >
        <div class="d-flex">
          <span class="icon-cloud_upload icon-22"></span>
          <codx-label fiedName="" default="Tải tệp lên"></codx-label>
        </div>
      </button>
      <hr /> -->
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'R')"
      >
        <div class="d-flex">
          <span class="icon-22"></span>
          <codx-label fiedName="" default="Phạm vi tuyến tính"></codx-label>
        </div>
      </button>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'O2')"
      >
        <div class="d-flex">
          <span class="icon-22"></span>
          <codx-label fiedName="" default="Lưới trắc nghiệm"></codx-label>
        </div>
      </button>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'C2')"
      >
        <div class="d-flex">
          <span class="icon-view_module icon-22"></span>
          <codx-label fiedName="" default="Lưới hộp kiểm"></codx-label>
        </div>
      </button>
      <hr />
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'D')"
      >
        <div class="d-flex">
          <span class="icon-calendar_today icon-22"></span>
          <codx-label fiedName="" default="Ngày"></codx-label>
        </div>
      </button>
      <button
        ngbDropdownItem
        (click)="clickQuestionMF(seqNoSession, itemQuestion, 'H')"
      >
        <div class="d-flex">
          <span class="icon-access_time icon-22"></span>
          <codx-label fiedName="" default="Giờ"></codx-label>
        </div>
      </button>
    </div>
  </div>
</ng-template>
<ng-template
  #tempIconAnswers
  let-seqNoSession="seqNoSession"
  let-itemQuestion="itemQuestion"
  let-itemAnswer="itemAnswer"
>
  <div>
    <span
      *ngIf="itemQuestion.answerType == 'O' && !itemQuestion?.showAnswer"
      class="icon-radio_button_unchecked icon-radio"
    ></span>
    <span
      *ngIf="itemQuestion.answerType == 'C' && !itemQuestion?.showAnswer"
      class="icon-check_box_outline_blank pd-t-7"
    ></span>
    <span *ngIf="itemQuestion.answerType == 'L' && itemAnswer" class="pd-t-7"
      >{{ itemAnswer?.seqNo + 1 }}.</span
    >
    <span *ngIf="itemQuestion.answerType == 'L' && !itemAnswer" class="pd-t-7"
      >{{
        questions[seqNoSession].children[itemQuestion.seqNo].answers.length + 1
      }}.</span
    >
    <span
      *ngIf="itemQuestion.answerType == 'D'"
      class="icon-calendar_today"
    ></span>
    <span
      *ngIf="itemQuestion.answerType == 'H'"
      class="icon-access_time"
    ></span>
  </div>
</ng-template>
<ng-template
  #tempAnswers
  let-seqNoSession="seqNoSession"
  let-itemQuestion="itemQuestion"
  let-itemAnswer="itemAnswer"
>
  <div class="d-flex">
    <div
      class="e-input-group"
      *ngIf="
        itemQuestion.answerType == 'O' ||
        itemQuestion.answerType == 'C' ||
        itemQuestion.answerType == 'L'
      "
    >
      <!-- <input class="e-input" type="text" placeholder="{{ itemAnswer.other ? 'Khác...' : '' }}"
        (focus)="focusIn($event.target)" (blur)="focusOut($event.target)" [value]="itemAnswer.answer"
        [disabled]="itemAnswer.other ? true : false" (change)="changeInput($event)"/> -->
      <codx-input
        type="text"
        class="border-0"
        placeholder="{{ itemAnswer.other ? 'Khác...' : '' }}"
        [disabled]="itemAnswer.other ? true : false"
        [crrValue]="itemAnswer.answer"
        field="answer"
        (valueChange)="
          valueChangeAnswer($event, seqNoSession, itemQuestion, itemAnswer)
        "
      >
      </codx-input>
    </div>
    <div
      class="e-input-group short-text"
      *ngIf="itemQuestion.answerType == 'T'"
    >
      <input
        class="e-input"
        type="text"
        placeholder="Văn bản câu trả lời ngắn"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div
      class="e-input-group long-text"
      *ngIf="itemQuestion.answerType == 'T2'"
    >
      <input
        class="e-input"
        type="text"
        placeholder="Văn bản câu trả lời dài"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div class="e-input-group date-time" *ngIf="itemQuestion.answerType == 'D'">
      <input
        class="e-input"
        type="text"
        placeholder="Ngày, tháng, năm"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div class="e-input-group date-time" *ngIf="itemQuestion.answerType == 'H'">
      <input
        class="e-input"
        type="text"
        placeholder="Giờ"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div *ngIf="itemQuestion.answerType == 'R'">
      <div class="d-flex ps-6">
        <div ngbDropdown container="body" class="pe-3">
          <button
            type="button"
            class="btn btn-outline-primary btn-sm dropdown"
            ngbDropdownToggle
          >
            <div class="d-flex">
              <span>{{ valueFrom }}</span>
              <span class="icon-arrow_drop_down icon-18"></span>
            </div>
          </button>
          <div ngbDropdownMenu>
            <button ngbDropdownItem (click)="changeRating('0', 'FROM')">
              <div class="d-flex">
                <span>0</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('1', 'FROM')">
              <div class="d-flex">
                <span>1</span>
              </div>
            </button>
          </div>
        </div>
        <codx-label fiedName="To" default="đến"></codx-label>
        <div ngbDropdown container="body" class="ps-3">
          <button
            type="button"
            class="btn btn-outline-primary btn-sm dropdown"
            ngbDropdownToggle
          >
            <div class="d-flex">
              <span>{{ valueTo }}</span>
              <span class="icon-arrow_drop_down icon-18"></span>
            </div>
          </button>
          <div ngbDropdownMenu>
            <button ngbDropdownItem (click)="changeRating('2', 'TO')">
              <div class="d-flex">
                <span>2</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('3', 'TO')">
              <div class="d-flex">
                <span>3</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('4', 'TO')">
              <div class="d-flex">
                <span>4</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('5', 'TO')">
              <div class="d-flex">
                <span>5</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('6', 'TO')">
              <div class="d-flex">
                <span>6</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('7', 'TO')">
              <div class="d-flex">
                <span>7</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('8', 'TO')">
              <div class="d-flex">
                <span>8</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('9', 'TO')">
              <div class="d-flex">
                <span>9</span>
              </div>
            </button>
            <button ngbDropdownItem (click)="changeRating('10', 'TO')">
              <div class="d-flex">
                <span>10</span>
              </div>
            </button>
          </div>
        </div>
      </div>
      <div class="d-flex e-input-group e-input-group-full me-2">
        <span>{{ valueFrom }}</span>
        <input
          class="e-input ps-6"
          type="text"
          placeholder="Nhãn (không bắt buộc)"
          (focus)="focusIn($event.target)"
          (blur)="focusOut($event.target)"
        />
        <!-- <codx-input
          type="text"
          class="border-0"
          placeholder="{{ itemAnswer.answer ? '' : 'Nhãn (không bắt buộc)' }}"
          [disabled]="itemAnswer.other ? true : false"
          [crrValue]="itemAnswer.answer"
          field="R"
          (valueChange)="valueChangeAnswer($event, seqNoSession, itemQuestion, itemAnswer)"
        >
        </codx-input> -->
      </div>
      <div class="d-flex e-input-group e-input-group-full me-2">
        <span>{{ valueTo }}</span>
        <input
          class="e-input ps-6"
          type="text"
          placeholder="Nhãn (không bắt buộc)"
          (focus)="focusIn($event.target)"
          (blur)="focusOut($event.target)"
        />
      </div>
    </div>
    <ng-container
      #iconRight
      *ngIf="
        itemQuestion.active &&
        (itemQuestion.answerType == 'O' || itemQuestion.answerType == 'C')
      "
    >
      <div class="has-action-menu" *ngIf="!itemAnswer.other">
        <div class="action-menu">
          <span
            class="icon-image icon-22 me-2"
            (click)="
              popupUploadFile(
                'P',
                'upload',
                true,
                seqNoSession,
                itemQuestion.seqNo,
                itemAnswer
              )
            "
          ></span>
        </div>
      </div>
      <div
        (click)="deleteAnswer(seqNoSession, itemQuestion.seqNo, itemAnswer)"
        [ngClass]="itemAnswer.other ? 'm-l-6' : ''"
        *ngIf="itemQuestion.answers?.length > 1"
      >
        <span class="icon-close icon-22 pd-s-e-10"></span>
      </div>
    </ng-container>
  </div>
</ng-template>
<ng-template
  #tempAnswers_showAnswer
  let-seqNoSession="seqNoSession"
  let-itemQuestion="itemQuestion"
  let-itemAnswer="itemAnswer"
>
  <div class="d-flex pb-8">
    <div
      [ngClass]="
        input_check?.value ? 'e-input-group bg-active' : 'e-input-group'
      "
      *ngIf="
        itemQuestion.answerType == 'O' ||
        itemQuestion.answerType == 'C' ||
        itemQuestion.answerType == 'L'
      "
    >
      <codx-input
        #input_check
        id="input_check{{ itemAnswer.seqNo }}"
        class="check-circle"
        [checked]="itemAnswer?.check"
        [label]="itemAnswer.answer"
        type="checkbox"
        field="check"
        (valueChange)="
          valueChangeShowAnswer(
            $event,
            seqNoSession,
            itemQuestion.seqNo,
            itemAnswer.seqNo
          )
        "
      >
      </codx-input>
    </div>
    <div
      class="e-input-group short-text"
      *ngIf="itemQuestion.answerType == 'T'"
    >
      <input
        class="e-input"
        type="text"
        placeholder="Văn bản câu trả lời ngắn"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div
      class="e-input-group long-text"
      *ngIf="itemQuestion.answerType == 'T2'"
    >
      <input
        class="e-input"
        type="text"
        placeholder="Văn bản câu trả lời dài"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div class="e-input-group date-time" *ngIf="itemQuestion.answerType == 'D'">
      <input
        class="e-input"
        type="text"
        placeholder="Ngày, tháng, năm"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div class="e-input-group date-time" *ngIf="itemQuestion.answerType == 'H'">
      <input
        class="e-input"
        type="text"
        placeholder="Giờ"
        (focus)="focusIn($event.target)"
        (blur)="focusOut($event.target)"
        [disabled]="true"
      />
    </div>
    <div *ngIf="itemQuestion.answerType == 'R'"></div>
    <ng-container #iconRight> </ng-container>
  </div>
</ng-template>
<ng-template
  #template_card_question
  let-itemSession="itemSession"
  let-itemQuestion="itemQuestion"
>
  <div class="d-flex align-items-top">
    <div #header>
      <div class="form-group question">
        <div
          [ngClass]="
            itemQuestion?.active ? 'title-des title-des-hover' : 'title-des'
          "
        >
          <ejs-inplaceeditor
            #inplaceCommentEditor
            mode="Inline"
            emptyText="Câu hỏi"
            submitOnEnter="false"
            type="RTE"
            name="rte"
            data-underline="false"
            [model]="titleEditorModel"
            [validationRules]="commentRule"
            [value]="itemQuestion.question"
            (valueChange)="
              valueChangeQuestionEJS(
                $event,
                itemSession,
                itemQuestion,
                'question'
              )
            "
          >
          </ejs-inplaceeditor>
        </div>
      </div>
      <div class="form-group question" *ngIf="itemQuestion.hideComment">
        <div class="title-des">
          <ejs-inplaceeditor
            #inplaceCommentEditor
            mode="Inline"
            emptyText="Mô tả"
            submitOnEnter="false"
            type="RTE"
            name="rte"
            data-underline="false"
            [model]="titleEditorModel"
            [validationRules]="commentRule"
            [value]="itemQuestion.comment"
            (valueChange)="
              valueChangeQuestionEJS(
                $event,
                itemSession,
                itemQuestion,
                'comment'
              )
            "
          >
          </ejs-inplaceeditor>
        </div>
      </div>
    </div>
    <ng-container #questionMF *ngIf="itemQuestion?.active">
      <div class="d-flex align-items-center justify-content-center" style="margin-top:-35px">
        <span
          class="icon-image icon-26 pointer me-4"
          (click)="
            popupUploadFile(
              'P',
              'upload',
              true,
              itemSession.seqNo,
              itemQuestion.seqNo
            )
          ">
        </span>
        <ng-container
          *ngTemplateOutlet="
            templateQuestionMF;
            context: {
              seqNoSession: itemSession.seqNo,
              itemQuestion: itemQuestion,
              answerType: itemQuestion.answerType
            }
          "
        ></ng-container>
      </div>
    </ng-container>
  </div>
  <div
    #contentByImage
    *ngIf="itemQuestion?.qPicture && lstEditIV.length > 0"
    class="pb-12"
  >
    <div *ngFor="let item of lstEditIV">
      <div
        class="w-100 min-h-253px"
        *ngIf="item.objectID == itemQuestion.recID"
      >
        <div
          [ngClass]="
            itemQuestion?.alignCenterImg
              ? 'position-relative w-100 d-flex justify-content-center'
              : itemQuestion?.alignRightImg
              ? 'position-relative w-100 d-flex justify-content-end'
              : 'position-relative w-100 d-flex'
          "
        >
          <img [src]="getSrcImage(item)" />
          <div class="d-flex align-items-center icon-MF-image-outside">
            <div ngbDropdown class="dropdown" container="body">
              <a
                href="javascript:void(0)"
                class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
                ngbDropdownToggle
                id="dropdownMenuButton1"
                aria-expanded="false"
              >
                <span class="icon-more_vert icon-22"> </span>
              </a>
              <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
                <li>
                  <a
                    ngbDropdownItem
                    href="javascript:void(0)"
                    (click)="
                      alignImg(
                        itemSession.seqNo,
                        itemQuestion.seqNo,
                        'alignLeftImg',
                        'alignCenterImg',
                        'alignRightImg'
                      )
                    "
                  >
                    <span class="icon-format_align_left"></span>
                    <codx-label
                      fiedName="formatAlignLeft"
                      default="Căn trái"
                    ></codx-label>
                  </a>
                </li>
                <li>
                  <a
                    ngbDropdownItem
                    href="javascript:void(0)"
                    (click)="
                      alignImg(
                        itemSession.seqNo,
                        itemQuestion.seqNo,
                        'alignRightImg',
                        'alignCenterImg',
                        'alignLeftImg'
                      )
                    "
                  >
                    <span class="icon-format_align_right"></span>
                    <codx-label
                      fiedName="formatAlignRight"
                      default="Căn phải"
                    ></codx-label>
                  </a>
                </li>
                <li>
                  <a
                    ngbDropdownItem
                    href="javascript:void(0)"
                    (click)="
                      alignImg(
                        itemSession.seqNo,
                        itemQuestion.seqNo,
                        'alignCenterImg',
                        'alignLeftImg',
                        'alignRightImg'
                      )
                    "
                  >
                    <span class="icon-format_align_center"></span>
                    <codx-label
                      fiedName="formatAlignCenter"
                      default="Căn giữa"
                    ></codx-label>
                  </a>
                </li>
                <li>
                  <a
                    (click)="
                      popupUploadFile(
                        'P',
                        'change',
                        true,
                        itemSession.seqNo,
                        itemQuestion.seqNo
                      )
                    "
                    ngbDropdownItem
                    href="javascript:void(0)"
                  >
                    <span class="icon-image"></span>
                    <codx-label
                      fiedName="changeImage"
                      default="Thay đổi"
                    ></codx-label>
                  </a>
                </li>
                <li>
                  <a
                    (click)="delFileInline(item.objectID)"
                    ngbDropdownItem
                    href="javascript:void(0)"
                  >
                    <span class="icon-delete"></span>
                    <codx-label
                      fiedName="deleteImage"
                      default="Xóa"
                    ></codx-label>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    *ngIf="
      (itemQuestion.answerType == 'O2' || itemQuestion.answerType == 'C2') &&
      itemQuestion?.active
    "
    class="w-700 pt-6 ps-6"
  >
    <div class="row">
      <div class="col">
        <codx-label
          fiedName="Row"
          default="Hàng"
          class="text-row-column"
        ></codx-label>
        <div
          class="e-input-group e-input-group1 pd-t-5p answerRow"
          cdkDropList
          (cdkDropListDropped)="
            dropAnswerRC($event, itemSession.seqNo, itemQuestion.seqNo, 'row')
          "
        >
          <div
            *ngFor="let itemAnswerR of itemQuestion.answers"
            cdkDragBoundary=".answerRow"
            cdkDrag
          >
            <div
              *ngIf="!itemAnswerR.isColumn"
              class="d-flex w-100 pd-t-5p has-action-menu"
            >
              <div class="action-menu example-handle" cdkDragHandle>
                <span class="icon-reorder"></span>
              </div>
              <span>{{ itemAnswerR.seqNo + 1 }}.</span>
              <input
                class="e-input me-2"
                type="text"
                placeholder="Thêm hàng"
                [value]="itemAnswerR.answer"
                (focus)="focusIn($event.target)"
                (blur)="focusOut($event.target)"
                [(ngModel)]="itemAnswerR.answer"
              />
              <span
                class="icon-close icon-22 pd-s-e-10"
                (click)="
                  deleteAnswerRC(
                    itemSession.seqNo,
                    itemQuestion.seqNo,
                    itemAnswerR,
                    'row'
                  )
                "
              ></span>
            </div>
          </div>
        </div>
        <div class="d-flex pd-t-5p ps-6">
          <span>{{ amountOfRow }}.</span>
          <input
            (click)="addAnswerR(itemSession.seqNo, itemQuestion.seqNo)"
            class="e-input me-2"
            type="text"
            placeholder="Thêm hàng"
            (focus)="focusIn($event.target)"
            (blur)="focusOut($event.target)"
          />
        </div>
      </div>
      <div class="col">
        <codx-label
          fiedName="Column"
          default="Cột"
          class="text-row-column"
        ></codx-label>
        <div
          class="e-input-group e-input-group2 pd-t-5p answerColumn"
          cdkDropList
          (cdkDropListDropped)="
            dropAnswerRC(
              $event,
              itemSession.seqNo,
              itemQuestion.seqNo,
              'column'
            )
          "
        >
          <div
            *ngFor="let itemAnswerC of itemQuestion.answers"
            cdkDragBoundary=".answerColumn"
            cdkDrag
          >
            <div
              *ngIf="itemAnswerC.isColumn"
              class="d-flex w-100 pd-t-5p has-action-menu"
            >
              <div class="action-menu example-handle" cdkDragHandle>
                <span class="icon-reorder"></span>
              </div>
              <span
                class="icon-radio_button_unchecked icon-radio pt-1 aqua"
                *ngIf="itemQuestion.answerType == 'O2'"
              ></span>
              <span
                class="icon-check_box_outline_blank"
                *ngIf="itemQuestion.answerType == 'C2'"
              ></span>
              <input
                class="e-input me-2"
                type="text"
                [value]="itemAnswerC.answer"
                placeholder="Thêm cột"
                (focus)="focusIn($event.target)"
                (blur)="focusOut($event.target)"
              />
              <span
                class="icon-close icon-22 pd-s-e-10"
                (click)="
                  deleteAnswerRC(
                    itemSession.seqNo,
                    itemQuestion.seqNo,
                    itemAnswerC,
                    'column'
                  )
                "
              ></span>
            </div>
          </div>
        </div>
        <div class="d-flex pd-t-5p ps-6">
          <span
            class="icon-radio_button_unchecked icon-radio mt-1 red"
            *ngIf="itemQuestion.answerType == 'O2'"
          ></span>
          <span
            class="icon-check_box_outline_blank"
            *ngIf="itemQuestion.answerType == 'C2'"
          ></span>
          <input
            (click)="addAnswerC(itemSession.seqNo, itemQuestion.seqNo)"
            class="e-input me-2"
            type="text"
            placeholder="Thêm cột"
            (focus)="focusIn($event.target)"
            (blur)="focusOut($event.target)"
          />
        </div>
      </div>
    </div>
  </div>

  <div
    *ngIf="
      (itemQuestion.answerType == 'O2' || itemQuestion.answerType == 'C2') &&
      !itemQuestion?.active
    "
  >
    <table>
      <tr>
        <th scope="col" class="w-20"></th>
        <th
          *ngFor="let itemC of filterDataColumn(itemQuestion.answers)"
          scope="col"
        >
          <span>{{ itemC.answer }}</span>
        </th>
      </tr>
      <tr *ngFor="let itemR of filterDataRow(itemQuestion.answers)">
        <td>
          {{ itemR.answer }}
        </td>
        <td *ngFor="let itemC of filterDataColumn(itemQuestion.answers)">
          <span
            class="icon-radio_button_unchecked icon-radio red"
            *ngIf="itemQuestion.answerType == 'O2'"
          ></span>
          <span
            class="icon-check_box_outline_blank"
            *ngIf="itemQuestion.answerType == 'C2'"
          ></span>
        </td>
      </tr>
    </table>
  </div>
  <div
    *ngIf="itemQuestion.answerType != 'O2' || itemQuestion.answerType != 'C2'"
    cdkDropList
    class="list answer"
    (cdkDropListDropped)="dropAnswer($event, itemQuestion.seqNo)"
  >
    <div
      class="box"
      *ngFor="let itemAnswer of itemQuestion.answers"
      cdkDragBoundary=".answer"
      cdkDrag
    >
      <div class="has-action-menu">
        <div class="d-flex">
          <div class="action-menu">
            <div
              class="example-handle-answer"
              cdkDragHandle
              *ngIf="
                itemQuestion.answerType != 'T2' &&
                itemQuestion.answerType != 'T' &&
                itemQuestion.answerType != 'R' &&
                itemQuestion.answerType != 'C2' &&
                itemQuestion.answerType != 'O2'
              "
            >
              <span class="icon-reorder"></span>
            </div>
          </div>
          <div class="d-flex align-items-center size-input">
            <ng-container
              *ngTemplateOutlet="
                tempIconAnswers;
                context: {
                  seqNoSession: itemSession.seqNo,
                  itemQuestion: itemQuestion,
                  itemAnswer: itemAnswer
                }
              "
            ></ng-container>
            <ng-container
              *ngTemplateOutlet="
                tempAnswers;
                context: {
                  seqNoSession: itemSession.seqNo,
                  itemQuestion: itemQuestion,
                  itemAnswer: itemAnswer
                }
              "
            ></ng-container>
          </div>
        </div>
        <div #imageInlineAnswer *ngIf="itemAnswer.hasPicture">
          <div *ngFor="let item of lstEditIV" class="ms-12 mt-3">
            <div
              *ngIf="item.objectID == itemAnswer.recID"
              class="position-relative has-action-menu"
            >
              <img
                class="w-100px border-gray"
                [src]="getSrcImage(item)"
                alt=""
              />
              <span
                (click)="delFileInline(item.objectID)"
                class="icon-close icon-20 icon-MF-image-outside-answer action-menu pointer"
              ></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      class="d-flex size-input-other"
      *ngIf="
        (itemQuestion?.active && itemQuestion.answerType == 'O') ||
        itemQuestion.answerType == 'C'
      "
    >
      <ng-container
        *ngTemplateOutlet="
          tempIconAnswers;
          context: {
            seqNoSession: itemSession.seqNo,
            seqNoQuestion: itemQuestion.seqNo,
            itemQuestion: itemQuestion
          }
        "
      ></ng-container>
      <div
        class="e-input-group-other"
        (click)="addAnswer(itemSession.seqNo, itemQuestion.seqNo)"
      >
        <input
          class="e-input answer-other"
          type="text"
          placeholder="Thêm bình chọn"
          (focus)="focusIn($event.target)"
          (blur)="focusOut($event.target)"
        />
      </div>
      <ng-container
        *ngIf="
          (itemQuestion?.answerType == 'O' ||
            itemQuestion?.answerType == 'C') &&
          !itemQuestion.other
        "
        class="d-flex"
      >
        <div class="text-or">
          <codx-label fiedName="" default="hoặc"></codx-label>
        </div>
        <div
          class="add-answer-other"
          (click)="addOtherAnswer(itemSession.seqNo, itemQuestion.seqNo)"
        >
          <codx-label
            fiedName=""
            default='thêm "Câu trả lời khác"'
          ></codx-label>
        </div>
      </ng-container>
    </div>
  </div>
</ng-template>
<ng-template
  #template_card_question_showAnswer
  let-itemSession="itemSession"
  let-itemQuestion="itemQuestion"
>
  <div class="pb-6">
    <div #header class="d-flex pb-6">
      <span class="icon-check-correct icon-22 ps-6 pe-3"></span>
      <codx-label
        class="fs-18px"
        fiedName="ChooseAnswer"
        default="Chọn câu trả lời chính xác:"
      ></codx-label>
    </div>
    <hr />
    <div class="d-flex pt-6">
      <div #content class="form-group ps-3 w-540px">
        <div [ngClass]="'title-des'">
          {{ itemQuestion.question }}
        </div>
      </div>
      <div class="justify-content-center align-items-center d-flex">
        <div class="h-50px w-95px">
          <codx-input
            type="number"
            onkeypress="event.charCode >= 48 && event.charCode <= 57"
            field="scores"
            class="form-control"
            [crrValue]="itemQuestion.scores"
            placeholder="0"
            (valueChange)="
              valueChangeQuestion($event, itemSession.seqNo, itemQuestion.seqNo)
            "
          >
          </codx-input>
        </div>
        <codx-label fiedName="Scores" default="điểm" class="ps-3"></codx-label>
      </div>
    </div>
  </div>
  <div #contentByImage *ngIf="itemQuestion?.qPicture" class="pb-12">
    <div *ngFor="let item of lstEditIV">
      <div class="w-100" *ngIf="item.objectID == itemQuestion.recID">
        <div
          [ngClass]="
            itemQuestion?.alignCenterImg
              ? 'position-relative w-100 d-flex justify-content-center'
              : itemQuestion?.alignRightImg
              ? 'position-relative w-100 d-flex justify-content-end'
              : 'position-relative w-100 d-flex'
          "
        >
          <img [src]="getSrcImage(item)" />
        </div>
      </div>
    </div>
  </div>
  <div
    *ngIf="
      (itemQuestion.answerType == 'O2' || itemQuestion.answerType == 'C2') &&
      itemQuestion?.active
    "
    class="w-700 pt-6 ps-6"
  ></div>

  <div
    *ngIf="
      (itemQuestion.answerType == 'O2' || itemQuestion.answerType == 'C2') &&
      !itemQuestion?.active
    "
  >
    <table>
      <tr>
        <th scope="col" class="w-20"></th>
        <th
          *ngFor="let itemC of filterDataColumn(itemQuestion.answers)"
          scope="col"
        >
          <span>{{ itemC.answer }}</span>
        </th>
      </tr>
      <tr *ngFor="let itemR of filterDataRow(itemQuestion.answers)">
        <td>
          {{ itemR.answer }}
        </td>
        <td *ngFor="let itemC of filterDataColumn(itemQuestion.answers)">
          <span
            class="icon-radio_button_unchecked icon-radio"
            *ngIf="itemQuestion.answerType == 'O2'"
          ></span>
          <span
            class="icon-check_box_outline_blank"
            *ngIf="itemQuestion.answerType == 'C2'"
          ></span>
        </td>
      </tr>
    </table>
  </div>
  <div
    *ngIf="itemQuestion.answerType != 'O2' || itemQuestion.answerType != 'C2'"
    class="list answer ps-8 pt-3 pb-6"
  >
    <div *ngFor="let itemAnswer of itemQuestion.answers">
      <ng-container
        *ngTemplateOutlet="
          tempAnswers_showAnswer;
          context: {
            seqNoSession: itemSession.seqNo,
            itemQuestion: itemQuestion,
            itemAnswer: itemAnswer
          }
        "
      ></ng-container>
      <div #imageInlineAnswer *ngIf="itemAnswer.hasPicture">
        <div *ngFor="let item of lstEditIV">
          <img
            class="w-100px"
            [src]="getSrcImage(item)"
            alt=""
            *ngIf="item.objectID == itemAnswer.recID"
          />
        </div>
      </div>
    </div>
    <div
      class="d-flex size-input-other"
      *ngIf="
        (itemQuestion?.active && itemQuestion.answerType == 'O') ||
        itemQuestion.answerType == 'C'
      "
    ></div>
  </div>
</ng-template>
<ng-template
  #template_card_image_video
  let-itemSession="itemSession"
  let-itemQuestion="itemQuestion"
>
  <div class="d-flex">
    <div class="form-group question w-100">
      <div class="title-des d-flex">
        <ejs-inplaceeditor
          #inplaceCommentEditor
          mode="Inline"
          emptyText="Tiêu đề hình ảnh"
          submitOnEnter="false"
          type="RTE"
          name="rte"
          data-underline="false"
          [model]="titleEditorModel"
          [validationRules]="commentRule"
          [value]="itemQuestion.question"
        >
        </ejs-inplaceeditor>
        <ng-container #questionMF *ngIf="itemQuestion?.active" class="d-flex">
          <span
            (click)="copyCard(itemSession, itemQuestion, 'P-V')"
            class="icon-content_copy icon-20 me-2 btn btn-icon btn-active-light-primary position-relative"
          ></span>
          <span
            (click)="
              deleteCard(
                itemSession.seqNo,
                itemQuestion.seqNo,
                itemQuestion.recID,
                'Not-S'
              )
            "
            class="icon-delete_outline icon-22 me-2 btn btn-icon btn-active-light-primary position-relative"
          ></span>
          <span
            class="icon-more_vert icon-22 me-2 btn btn-icon btn-active-light-primary position-relative"
          ></span>
        </ng-container>
      </div>
    </div>
  </div>
  <ng-container #editImage>
    <div class="position-relative">
      <div
        class="row mt-2 justify-content-between me-2"
        *ngIf="lstEditIV.length > 0"
      >
        <ng-container *ngFor="let data of lstEditIV">
          <div
            class="col-5 my-2 m-w-100"
            *ngIf="data.objectID == itemQuestion.recID"
          >
            <div class="d-flex align-items-center icon-MF-image-outside">
              <div ngbDropdown class="dropdown" container="body">
                <a
                  href="javascript:void(0)"
                  class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
                  ngbDropdownToggle
                  id="dropdownMenuButton1"
                  aria-expanded="false"
                >
                  <span class="icon-more_vert icon-22"> </span>
                </a>
                <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
                  <li>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <span class="icon-format_align_left"></span>
                      <codx-label
                        fiedName="formatAlignLeft"
                        default="Căn trái"
                      ></codx-label>
                    </a>
                  </li>
                  <li>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <span class="icon-format_align_right"></span>
                      <codx-label
                        fiedName="formatAlignRight"
                        default="Căn phải"
                      ></codx-label>
                    </a>
                  </li>
                  <li>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <span class="icon-format_align_center"></span>
                      <codx-label
                        fiedName="formatAlignCenter"
                        default="Căn giữa"
                      ></codx-label>
                    </a>
                  </li>
                  <li>
                    <a
                      (click)="
                        popupUploadFile(itemQuestion.category, 'change', false)
                      "
                      ngbDropdownItem
                      href="javascript:void(0)"
                    >
                      <span class="icon-image"></span>
                      <codx-label
                        fiedName="changeImage"
                        default="Thay đổi"
                      ></codx-label>
                    </a>
                  </li>
                  <li>
                    <a
                      (click)="
                        deleteFile(
                          itemSession.seqNo,
                          itemQuestion,
                          data.objectID
                        )
                      "
                      ngbDropdownItem
                      href="javascript:void(0)"
                    >
                      <span class="icon-delete"></span>
                      <codx-label
                        fiedName="deleteImage"
                        default="Xóa"
                      ></codx-label>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="w-150">
              <ng-container *ngIf="data.referType == REFER_TYPE.IMAGE">
                <ng-container
                  *ngIf="data.recID || data.objectID; else imageSrc"
                >
                  <codx-img
                    [objectId]="data.objectID"
                    [objectType]="functionList.entityName"
                    [width]="150"
                    cssClass="pic"
                    imageType="square"
                    referType="image"
                  >
                  </codx-img>
                </ng-container>
                <ng-template #imageSrc>
                  <img [src]="data.avatar || data.data" alt="" />
                </ng-template>
              </ng-container>
              <ng-container *ngIf="data.referType == REFER_TYPE.VIDEO">
                <video #video controls class="w-100 rounded h-auto">
                  <source [src]="data?.srcVideo" type="video/mp4" />
                </video>
              </ng-container>
            </div>
          </div>
        </ng-container>
      </div>
      <img
        [src]="getUrlImageOfVideo(itemQuestion.videoID)"
        *ngIf="itemQuestion?.url && itemQuestion?.videoID"
      />
    </div>
  </ng-container>
</ng-template>
<ng-template
  #template_card_title
  let-itemSession="itemSession"
  let-itemQuestion="itemQuestion"
>
  <div class="d-flex">
    <div class="form-group question w-100">
      <div class="title-des d-flex">
        <ejs-inplaceeditor
          #inplaceCommentEditor
          mode="Inline"
          emptyText="Không có tiêu đề"
          submitOnEnter="false"
          type="RTE"
          name="rte"
          data-underline="false"
          [model]="titleEditorModel"
          [validationRules]="commentRule"
        >
        </ejs-inplaceeditor>
        <ng-container #questionMF *ngIf="itemQuestion?.active" class="d-flex">
          <span
            (click)="copyCard(itemSession, itemQuestion, 'T')"
            class="icon-content_copy icon-20 me-2 btn btn-icon btn-active-light-primary position-relative"
          ></span>
          <span
            (click)="
              deleteCard(
                itemSession.seqNo,
                itemQuestion.seqNo,
                itemQuestion.recID,
                'Not-S'
              )
            "
            class="icon-delete_outline icon-22 me-2 btn btn-icon btn-active-light-primary position-relative"
          ></span>
          <span
            class="icon-more_vert icon-22 me-2 btn btn-icon btn-active-light-primary position-relative"
          ></span>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="form-group question">
    <div class="title-des">
      <ejs-inplaceeditor
        #inplaceCommentEditor
        mode="Inline"
        emptyText="Mô tả (không bắt buộc)"
        submitOnEnter="false"
        type="RTE"
        name="rte"
        data-underline="false"
        [model]="descriptionEditorModel"
        [validationRules]="commentRule"
      >
      </ejs-inplaceeditor>
    </div>
  </div>
</ng-template>
<ng-template #template_card_session let-itemSession="itemSession">
  <div class="d-flex">
    <div class="form-group question w-100 position-relative">
      <div class="title-des d-flex">
        <ejs-inplaceeditor
          #inplaceCommentEditor
          mode="Inline"
          submitOnEnter="false"
          type="RTE"
          name="rte"
          data-underline="false"
          [model]="titleEditorModel"
          [validationRules]=""
          [value]="itemSession.question"
          (valueChange)="valueChangeSessionEJS($event, itemSession, 'question')"
        >
        </ejs-inplaceeditor>
        <ng-container #questionMF>
          <!-- <span
            class="icon-more_vert icon-22 me-2 btn btn-icon btn-active-light-primary"
          ></span> -->
          <div
            *ngIf="itemSession.length > 0"
            class="d-flex align-items-center me-2 left-100"
          >
            <div ngbDropdown container="body">
              <a
                href="javascript:void(0)"
                class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
                ngbDropdownToggle
                id="dropdownMenuButton1"
                aria-expanded="false"
              >
                <span class="icon-more_vert icon-22"></span>
              </a>
              <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
                <li>
                  <a
                    (click)="copyCard(itemSession, '', 'S')"
                    ngbDropdownItem
                    href="javascript:void(0)"
                  >
                    <codx-label
                      fiedName="copySession"
                      default="Sao chép phần"
                    ></codx-label>
                  </a>
                </li>
                <li>
                  <a
                    (click)="sortSession()"
                    ngbDropdownItem
                    href="javascript:void(0)"
                  >
                    <codx-label
                      fiedName="moveSession"
                      default="Di chuyển phần"
                    ></codx-label>
                  </a>
                </li>
                <li>
                  <a
                    (click)="deleteCard(itemSession.seqNo, '', '', 'S')"
                    ngbDropdownItem
                    href="javascript:void(0)"
                  >
                    <codx-label
                      fiedName="deleteSession"
                      default="Xóa phần"
                    ></codx-label>
                  </a>
                </li>
                <li *ngIf="itemSession.seqNo >= 1">
                  <a
                    (click)="mergeSession(itemSession)"
                    ngbDropdownItem
                    href="javascript:void(0)"
                  >
                    <codx-label
                      fiedName="mergeSession"
                      default="Hợp nhất với phần trên"
                    ></codx-label>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="form-group question">
    <div class="title-des">
      <ejs-inplaceeditor
        #inplaceCommentEditor
        mode="Inline"
        submitOnEnter="false"
        type="RTE"
        name="rte"
        data-underline="false"
        [model]="descriptionEditorModel"
        [validationRules]=""
        [value]="itemSession.comment ? itemSession.comment : ''"
        (valueChange)="valueChangeSessionEJS($event, itemSession, 'comment')"
      >
      </ejs-inplaceeditor>
    </div>
  </div>
</ng-template>
