<codx-views
  #view
  [funcID]="funcID"
  [views]="views"
  [autoLoad]="false"
  [viewActiveType]="viewType.content"
  (onLoading)="onLoading($event)"
></codx-views>
<ng-template #itemTemplate>
  <div
    class="bg-white p-2 subheader d-flex align-items-center justify-content-between"
  >
    <div class="saving ps-9 d-flex align-items-center">
      <span class="icon-arrow_back pe-6 icon-24" (click)="back()"></span>
      <svg
        class="icon_survey"
        version="1.1"
        id="Layer_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        viewBox="0 0 40 40"
        style="enable-background: new 0 0 40 40"
        xml:space="preserve"
      >
        <rect
          x="-4"
          y="-4"
          class="st0"
          fill="none"
          width="48"
          height="48"
        ></rect>
        <g>
          <polygon
            class="st1"
            fill="#56368A"
            points="24.5,10 30,11 34.5,10 24.5,0 23.2,4.7"
          ></polygon>
          <path
            class="st2"
            fill="#7248B9"
            d="M24.5,10V0H8.2C6.7,0,5.5,1.2,5.5,2.7v34.5c0,1.5,1.2,2.7,2.7,2.7h23.6c1.5,0,2.7-1.2,2.7-2.7V10H24.5z"
          ></path>
          <path
            class="st3"
            fill="#FFFFFF"
            d="M13.2,28.9c-0.8,0-1.4-0.6-1.4-1.4c0-0.8,0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4 C14.5,28.2,13.9,28.9,13.2,28.9z M13.2,23.4c-0.8,0-1.4-0.6-1.4-1.4s0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4S13.9,23.4,13.2,23.4z M13.2,17.9c-0.8,0-1.4-0.6-1.4-1.4c0-0.8,0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4C14.5,17.3,13.9,17.9,13.2,17.9z M28.2,28.6H16.8 v-2.3h11.4V28.6z M28.2,23.2H16.8v-2.3h11.4V23.2z M28.2,17.7H16.8v-2.3h11.4V17.7z"
          ></path>
        </g>
      </svg>
      <codx-input type="text" [crrValue]="title" ngClass="add-sv-title" (valueChange)="onChangeTitle($event)" [ngbTooltip]="title"></codx-input>
      <span class="icon-bookmarks icon-20"></span>
      <ng-container  *ngIf="signal == 'saving' , else saving">
        <codx-label
          fiedName="Saving"
          [default]="'Đang lưu...'"
          class=" ps-6"
        ></codx-label>
      </ng-container>
      <ng-template #saving >
        <ng-container *ngIf="signal == 'done'">
            <codx-label
            fiedName="Done"
            [default]="'Đã lưu tất cả thay đổi'"
            class="ps-6"
          ></codx-label>
        </ng-container>
      </ng-template>
     
    </div>
    <div class="justify-content-end d-flex align-items-center">
      <span
        class="btn btn-icon btn-white w-36px h-30px ms-2"
        [ngbPopover]="customUI"
        triggers="mouseenter:mouseleave"
        placement="bottom"
        [autoClose]="'outside'"
      >
        <i class="icon icon-color_lens icon-20"></i>
      </span>
      <ng-template #customUI>
        <codx-label
          fiedName="CustomUI"
          default="Tùy chỉnh giao diện"
        ></codx-label>
      </ng-template>

      <span
        class="btn btn-icon btn-white w-36px h-30px ms-2"
        [ngbPopover]="show"
        triggers="mouseenter:mouseleave"
        placement="bottom"
        [autoClose]="'outside'"
        (click)="review()"
      >
        <i class="icon icon-remove_red_eye icon-22"></i>
      </span>
      <ng-template #show>
        <codx-label fiedName="Show" default="Xem trước"></codx-label>
      </ng-template>
      <span
        class="btn btn-icon btn-white w-36px h-30px ms-2"
        [ngbPopover]="undo"
        triggers="mouseenter:mouseleave"
        placement="bottom"
        [autoClose]="'outside'"
      >
        <i class="icon icon-i-arrow-90deg-left icon-22"></i>
      </span>
      <ng-template #undo>
        <codx-label fiedName="Undo" default="Hủy"></codx-label>
      </ng-template>
      <span
        class="btn btn-icon btn-white w-36px h-30px ms-2"
        [ngbPopover]="redo"
        triggers="mouseenter:mouseleave"
        placement="bottom"
        [autoClose]="'outside'"
      >
        <i class="icon icon-i-arrow-90deg-right icon-22"></i>
      </span>
      <ng-template #redo>
        <codx-label fiedName="Redo" default="Làm lại"></codx-label>
      </ng-template>
      <button
        type="button"
        class="btn btn-primary btn-submit ms-2"
        (click)="onSubmit()"
      >
        <codx-label fiedName="Submit" default="Gửi"></codx-label>
      </button>
      <span class="btn btn-icon btn-white w-36px h-30px ms-2 me-9">
        <i class="icon icon-more_vert icon-22"></i>
      </span>
    </div>
  </div>
  <ejs-tab class="ejstab-survey" headerPlacement="Top" (selected)="onSelected($event)">
    <e-tabitems>
      <e-tabitem>
        <ng-template #headerText class="">
          <div class="nav-item">
            <a class="nav-link d-flex px-0">
              <span class="fw-bold">
                <codx-label
                  name="Questions"
                  [formModel]="view.formModel"
                  default="Câu hỏi"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content class="pd-t-20">
          <div class="scroll-y ques-scroll">
            <app-questions
              #app_question
              [formModel]="view.formModel"
              [dataService]="view.dataService"
              [recID]="recID"
              [funcID]="funcID"
            ></app-questions>
          </div>
        </ng-template>
      </e-tabitem>
      <e-tabitem>
        <ng-template #headerText class="">
          <div class="nav-item">
            <a class="nav-link d-flex px-0">
              <span class="fw-bold">
                <codx-label
                  name="Answer"
                  [formModel]="view.formModel"
                  default="Câu trả lời"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content class="pd-t-20">
          <app-answers
            [formModel]="view.formModel"
            [recID]="recID"
          ></app-answers>
        </ng-template>
      </e-tabitem>
      <e-tabitem>
        <ng-template #headerText class="">
          <div class="nav-item">
            <a class="nav-link d-flex px-0">
              <span class="fw-bold">
                <codx-label
                  name="Setting"
                  [formModel]="view.formModel"
                  default="Cài đặt"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content class="pd-t-20">
          <app-setting ></app-setting>
        </ng-template>
      </e-tabitem>
    </e-tabitems>
  </ejs-tab>
</ng-template>
