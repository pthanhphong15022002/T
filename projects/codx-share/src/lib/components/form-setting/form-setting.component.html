<codx-form #form [headerText]="headerText" [body]="body" [footer]="footer" [dialog]="dialogRef" [formModel]="formModel"
   >
  <ng-template #body let-dialog>
    <div class="container h-100 p-0" *ngIf="isLoaded">
        <div class="row h-100">
          <div class="col-4 h-100 p-0">
            <div class="container h-100 p-0">
              <div class="row overflow-scroll overflow-x-hidden  border-end " style="height: calc( 100% - 50px)">
                <ejs-treeview #treeELe
                id="formSetting"
                [cssClass]="''"
                [fields]="field" sortOder='Ascending'
                [allowDragAndDrop]="true"
                (nodeSelected)="onSelected($event)"
                (created)="onCreate(treeELe)"
                (nodeDropped)="nodeDropped($event)"
                (nodeDragStop)="nodeDragStop($event)"
                (nodeDragging)="nodeDragging($event)"
                (nodeClicked)="nodeclicked($event)">
                <ng-template #nodeTemplate="" let-data="">
                  <div *ngIf="!data.isButton">
                      <div class="d-flex align-items-center hover-ne">

                          <div class="mx-2 w-100" [ngClass]="data.functionType=='G' ? 'border-top fw-bold d-flex align-items-center': ''">
                            <div style="width:90%" class="d-flex align-items-center justify-content-start">
                              <span class="text-dark fs-5 text-hover-primary">{{data.customName}}</span>
                            </div>
                            <div style="width:10%" class="d-flex align-items-center justify-content-end" *ngIf="data.functionType=='G'" [title]="'Thêm chức năng'" >
                              <button class="btn btn-sm btn-linght ms-5 float-end" (click)="$event.preventDefault();onAddFunc(data.id)"><i class="icon-add_circle_outline text-primary" style="font-size:21px !important"></i></button>
                            </div>

                          </div>
                           <!-- <div  class="ms-3">
                              <span class="treeCount e-badge e-badge-primary"  *ngIf="data.functionType">{{ data.functionType }}</span>
                          </div> -->
                      </div>
                  </div>
                  <div *ngIf="data.isButton">
                      <div class="d-flex align-items-center">

                          <div class="mx-2 w-100 text-primary fs-5 d-flex align-items-center" (click)="onAddFunc(data.parentID)">
                             <i class="icon-add_circle_outline me-3"></i> <span>{{data.customName}}</span>
                          </div>
                           <!-- <div  class="ms-3">
                              <span class="treeCount e-badge e-badge-primary"  *ngIf="data.functionType">{{ data.functionType }}</span>
                          </div> -->
                      </div>
                  </div>
              </ng-template>
              </ejs-treeview>
              </div>
              <div class="row" style="height: 50px">
                <div class="d-flex align-items-center">

                  <div class="mx-2 w-100  fs-5 d-flex align-items-center" (click)="onAddGroup()">
                     <i class="icon-add_circle_outline me-3 text-primary"></i> <span class="text-muted fs-5">Thêm nhóm</span>
                  </div>
                   <!-- <div  class="ms-3">
                      <span class="treeCount e-badge e-badge-primary"  *ngIf="data.functionType">{{ data.functionType }}</span>
                  </div> -->
              </div>
              </div>
            </div>

          </div>
          <div class="col-8">
            <div class="container h-100">
              <div class="row">
                <div class="col d-flex justify-content-start" *ngIf="isEditGroup">
                  <span class="fs-5 fw-bold text-dark"><codx-label name="lblEditGroup" default="Chỉnh sửa Nhóm" [formName]="'sys'" ></codx-label></span>&nbsp; <span class="fs-4 fw-bold text-dark"> : {{selectedItem?.text}}</span>
                </div>
                <div class="col d-flex justify-content-start" *ngIf="isEditFunc">
                  <span class="fs-5 fw-bold text-dark"><codx-label name="lblEditFunc" default="Chỉnh sửa Chức năng" [formName]="'sys'" ></codx-label></span>&nbsp; <span class="fs-4 fw-bold text-dark"> : {{selectedItem?.text}}</span>
                </div>
                <div class="col d-flex justify-content-start" *ngIf="isAddFunc">
                  <span class="fs-5 fw-bold text-dark"><codx-label name="lblAddFunc" default="Thêm mới Chức năng" [formName]="'sys'" ></codx-label></span>&nbsp; <span class="fs-4 fw-bold text-dark"> : {{selectedItem?.text}}</span>
                </div>
                <div class="col d-flex justify-content-start" *ngIf="isAddGroup">
                  <span class="fs-5 fw-bold text-dark"><codx-label name="lblAddGroup" default="Thêm mới Nhóm" [formName]="'sys'" ></codx-label></span>&nbsp; <span class="fs-4 fw-bold text-dark"> : {{selectedItem?.text}}</span>
                </div>

              </div>
              <div class="row">

              </div>
            </div>

          </div>

        </div>

    </div>
  </ng-template>


</codx-form>
<ng-template #footer>
  <div class="">
    <div class="form-group d-flex justify-content-start flex-row">
      <button type="button" class="btn btn-primary" (click)="onAddGroup()">
        <i class="icon-add_circle_outline me-3 text-primary"></i> <span class="text-muted fs-5">Thêm nhóm</span>
      </button>
    </div>
    <div class="form-group d-flex justify-content-end flex-row">
      <button type="button" class="btn btn-primary" (click)="onSaveForm()">
        <codx-label name="lblSave" default="Lưu"></codx-label>
      </button>
    </div>
  </div>
</ng-template>
