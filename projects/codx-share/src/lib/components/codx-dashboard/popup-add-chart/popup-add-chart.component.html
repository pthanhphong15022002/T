<codx-form
  subname=""
  [body]="body"
  [footer]="footer"
  [dialog]="dialog"
  [formModel]="dialog.formModel"
>
  <ng-template popup adde #body>
    <ng-container>
      <div class="w-100" style="margin-left: -5px ;" >
        <ng-container>
          <!-- <codx-label name="lblChartType" default="Chart type" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
          <div style="padding-bottom: 40px" class="mt-3">
            <ejs-dropdownlist
              [dataSource]="chartTypes"
              (change)="onChange($event)"
              [value]="chartSetting.type"

            ></ejs-dropdownlist>
          </div> -->
            <codx-label name="lblTitle" default="Title" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
              <div style="padding-bottom: 10px" class="mt-3">
                  <codx-input
                    class="float-right"
                    type="text"
                    field="position"
                    [crrValue]="title"
                    (valueChange)="title = $event.data"
                  ></codx-input>
              </div>
          <!--Primary X Axis setting-->
          <ng-container *ngIf="axisXmodel">
            <a id="axisX"  [attr.aria-expanded]="collapseAxisX" (click)="collapseAxisX =!collapseAxisX"
            [attr.aria-controls]="'axisX'" class="text-primary font-weight-500">
            <div class="d-flex justify-content-start h-30px">
              <codx-label name="lblXAxis" default="axisX" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
              <i class="text-primary"
                [ngClass]="!collapseAxisX ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
            </div>
            </a>
            <div [id]="'axisX'" [ngbCollapse]="collapseAxisX">
              <div class="border my-3" style="border-radius: 16px;">
                <div *ngFor="let x of axisXmodel | keyvalue" class="form-group m-3">
                <codx-label class="text-capitalize" [default]="formatString(x.key)"></codx-label>
                <ng-container [ngSwitch]="x?.key">
                  <ng-container *ngSwitchCase="'crosshairTooltip'">
                    <div class="w-100 my-3 ps-5 border rounded">
                      <div *ngIf="crosshairXEnable != undefined">
                        <codx-label name="lblEnable"  [default]="formatString('enable')"></codx-label>
                        <div class="w-100 my-3 pe-3">
                          <div class="d-flex justify-content-start">
                            <codx-input
                              class="float-right"
                              type="switch"
                              field="enable"
                              [crrValue]="crosshairXEnable"
                              (valueChange)="axisChildChange($event,'X')"
                            ></codx-input>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="crosshairXFill != undefined">
                        <codx-label name="lblFill"  [default]="formatString('fill')"></codx-label>
                        <div class="w-100 my-3 pe-3">
                          <codx-input
                            class="float-right"
                            type="colorpicker"
                            field="fill"
                            [crrValue]="crosshairXFill"
                            (valueChange)="axisChildChange($event,'X')"
                          ></codx-input>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'lineStyle'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="number"
                        field="lineStyle"
                        [crrValue]="lineStyleWidthX"
                        (valueChange)="axisChange($event,'x')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'majorTickLines'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="number"
                        field="majorTickLines"
                        [crrValue]="majorTickLineWidthX"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'majorGridLines'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="number"
                        field="majorGridLines"
                        [crrValue]="majorGridLineWidthX"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'visible'">
                    <div class="d-flex justify-content-start">
                      <codx-input
                        class="float-right"
                        type="switch"
                        field="visible"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'columnIndex'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="number"
                        field="columnIndex"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'minimum'">
                    <div class="w-100 mt-3">
                      <codx-input
                        [type]="getTypeOfValue(x.value)"
                        field="minimum"
                        format="d"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'maximum'">
                    <div class="w-100 mt-3">
                      <codx-input
                        [type]="getTypeOfValue(x.value)"
                        format="d"
                        field="maximum"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'coefficient'">
                    <div class="w-100 mt-3">
                      <codx-input
                        [type]="'number'"
                        field="coefficient"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'intervalType'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="intervalType"
                        (change)="axisVllChange($event,x.key,'X')"
                        [value]="x.value"
                       ></ejs-dropdownlist>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'labelFormat'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="labelDateFormats"
                        (change)="axisVllChange($event,x.key,'X')"
                        [fields]="{text: 'text', value:'value'}"
                        [value]="x.value"
                       ></ejs-dropdownlist>
                    </div>
                    <!-- <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="text"
                        field="labelFormat"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div> -->
                  </ng-container>
                  <ng-container *ngSwitchCase="'labelPlacement'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="labelPlacements"
                        (change)="axisVllChange($event,x.key,'X')"
                        [value]="x.value"
                       ></ejs-dropdownlist>
                    </div>
                    <!-- <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="text"
                        field="labelFormat"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div> -->
                  </ng-container>
                  <ng-container *ngSwitchCase="'rangePadding'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="rangePaddings"
                        (change)="axisVllChange($event,x.key,'X')"
                        [value]="x.value"
                       ></ejs-dropdownlist>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'interval'">
                    <div class="w-100 mt-3">
                      <codx-input
                        type="number"
                        field="interval"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'valueType'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="valueType"
                        (change)="axisVllChange($event,x.key,'X')"
                        [value]="x.value"
                       ></ejs-dropdownlist>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'edgeLabelPlacement'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="valuePlacement"
                        (change)="axisVllChange($event,x.key,'X')"
                        [value]="x.value"
                       ></ejs-dropdownlist>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'labelIntersectAction'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                        [dataSource]="labelIntersectAction"
                        (change)="axisVllChange($event,x.key,'X')"
                        [value]="x.value"
                        [popupHeight]="'220px'"
                       ></ejs-dropdownlist>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'name'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="text"
                        field="name"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'title'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="text"
                        field="title"
                        [crrValue]="x.value"
                        (valueChange)="axisChange($event,'X')"
                      ></codx-input>
                    </div>
                  </ng-container>

                </ng-container>
              </div>
              </div>
          </div>
          </ng-container>






          <!--Primary Y Axis setting-->
        <ng-container *ngIf="axisYmodel">
          <a id="axisY"  [attr.aria-expanded]="collapseAxisY" (click)="collapseAxisY =!collapseAxisY"
          [attr.aria-controls]="'axisX'" class="text-primary font-weight-500">
          <div class="d-flex justify-content-start h-30px">
            <codx-label name="lblYAxis" default="axisY" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
            <i class="text-primary"
              [ngClass]="!collapseAxisY ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
          </div>
        </a>
        <div [id]="'axisY'" [ngbCollapse]="collapseAxisY">
          <div class="border my-3" style="border-radius: 16px;">
            <div *ngFor="let x of axisYmodel | keyvalue" class="form-group m-3">
              <codx-label class="text-capitalize" [default]="formatString(x.key)"></codx-label>
              <ng-container [ngSwitch]="x?.key">
                <ng-container *ngSwitchCase="'edgeLabelPlacement'">
                  <div class="w-100 mt-3">
                    <ejs-dropdownlist
                      [dataSource]="valuePlacement"
                      (change)="axisVllChange($event,x.key,'Y')"
                      [value]="x.value"
                     ></ejs-dropdownlist>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'rangePadding'">
                  <div class="w-100 mt-3">
                    <ejs-dropdownlist
                      [dataSource]="rangePaddings"
                      (change)="axisVllChange($event,x.key,'Y')"
                      [value]="x.value"
                     ></ejs-dropdownlist>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'crosshairTooltip'">
                  <div class="w-100 my-3 ps-5 border rounded">
                    <div *ngIf="crosshairYEnable != undefined">
                      <codx-label name="lblEnable"  [default]="formatString('enable')"></codx-label>
                      <div class="w-100 my-3 pe-3">
                        <div class="d-flex justify-content-start">
                          <codx-input
                            class="float-right"
                            type="switch"
                            field="enable"
                            [crrValue]="crosshairYEnable"
                            (valueChange)="axisChildChange($event,'Y')"
                          ></codx-input>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="crosshairYFill != undefined">
                      <codx-label name="lblFill"  [default]="formatString('fill')"></codx-label>
                      <div class="w-100 my-3 pe-3">
                        <codx-input
                          class="float-right"
                          type="colorpicker"
                          field="fill"
                          [crrValue]="crosshairYFill"
                          (valueChange)="axisChildChange($event,'Y')"
                        ></codx-input>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'lineStyle'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="number"
                      field="lineStyle"
                      [crrValue]="lineStyleWidthY"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'majorTickLines'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="number"
                      field="majorTickLines"
                      [crrValue]="majorTickLineWidthY"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'majorGridLines'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="number"
                      field="majorGridLines"
                      [crrValue]="majorGridLineWidthY"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'visible'">
                  <div class="d-flex justify-content-start">
                    <codx-input
                      class="float-right"
                      type="switch"
                      field="visible"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'columnIndex'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="number"
                      field="columnIndex"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'minimum'">
                  <div class="w-100 mt-3">
                    <codx-input
                      type="number"
                      field="minimum"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'maximum'">
                  <div class="w-100 mt-3">
                    <codx-input
                      type="number"
                      field="maximum"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'interval'">
                  <div class="w-100 mt-3">
                    <codx-input
                      type="number"
                      field="interval"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'valueType'">
                  <div class="w-100 mt-3">
                    <ejs-dropdownlist
                      [dataSource]="valueType"
                      (change)="axisVllChange($event,x.key,'Y')"
                      [value]="x.value"
                      [popupHeight]="'220px'"
                     ></ejs-dropdownlist>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'name'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="text"
                      field="name"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'title'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="text"
                      field="title"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
                <ng-container *ngSwitchCase="'labelFormat'">
                  <div class="w-100 mt-3">
                    <codx-input
                      class="float-right"
                      type="text"
                      field="labelFormat"
                      [crrValue]="x.value"
                      (valueChange)="axisChange($event,'Y')"
                    ></codx-input>
                  </div>
                </ng-container>
              </ng-container>
            </div>
            </div>
        </div>
        </ng-container>





          <!--Legend setting-->

          <a id="legendSetting"  [attr.aria-expanded]="collapseLegend" (click)="collapseLegend =!collapseLegend"
          [attr.aria-controls]="'axisX'" class="text-primary font-weight-500">
          <div class="d-flex justify-content-start h-30px">
            <codx-label name="lblLegend" default="Legend" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
            <i class="text-primary"
              [ngClass]="!collapseLegend ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
          </div>
          </a>
          <div [id]="'legendSetting'" [ngbCollapse]="collapseLegend">
            <div class="border my-3" style="border-radius: 16px;">
              <div *ngFor="let lg of legendSetting | keyvalue" class="form-group m-3">
                <codx-label [default]="formatString(lg.key)"></codx-label>
                <ng-container [ngSwitch]="lg?.key">
                  <ng-container *ngSwitchCase="'visible'">
                    <div class="d-flex justify-content-start">
                      <codx-input
                        class="float-right"
                        type="switch"
                        field="visible"
                        [crrValue]="lg.value"
                        (valueChange)="legendChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'enableHighlight'">
                    <div class="d-flex justify-content-start">
                      <codx-input
                        class="float-right"
                        type="switch"
                        field="enableHighlight"
                        [crrValue]="lg.value"
                        (valueChange)="legendChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'opacity'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="number"
                        field="opacity"
                        [crrValue]="lg.value"
                        (valueChange)="legendChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>

                  <ng-container *ngSwitchCase="'maximumTitleWidth'">
                    <div class="w-100 mt-3">
                      <codx-input
                        type="number"
                        field="maximumTitleWidth"
                        [crrValue]="lg.value"
                        (valueChange)="legendChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'width'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="text"
                        field="width"
                        [crrValue]="lg.value"
                        (valueChange)="legendChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>

                  <ng-container *ngSwitchCase="'background'">
                    <div class="w-100 mt-3">
                      <codx-input
                        class="float-right"
                        type="colorpicker"
                        field="background"
                        [crrValue]="lg.value"
                        (valueChange)="legendChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'position'">
                    <div class="w-100 mt-3">
                      <ejs-dropdownlist
                      [dataSource]="positions"
                      (change)="legendPositionChange($event)"
                      [value]="lg.value"
                     ></ejs-dropdownlist>

                    </div>
                  </ng-container>
                </ng-container>
              </div>
              </div>
          </div>




          <!--Crosshair setting-->

          <ng-container *ngIf="crosshair">
            <codx-label name="lblCrosshair" default="Crosshair" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
          <div class="border my-3" style="border-radius: 16px;">
          <div *ngFor="let c of crosshair | keyvalue" class="form-group m-3">
            <codx-label class="text-capitalize" [default]="formatString(c.key)"></codx-label>
            <ng-container [ngSwitch]="c?.key">
              <ng-container *ngSwitchCase="'enable'">
                <div class="d-flex justify-content-start">
                  <codx-input
                    class="float-right"
                    type="switch"
                    field="enable"
                    [crrValue]="c.value"
                    (valueChange)="crosshairChange($event)"
                  ></codx-input>
                </div>
              </ng-container>
              <ng-container *ngSwitchCase="'line'">
                <div class="w-100 my-3 ps-5 border rounded">
                  <div *ngIf="crosshairLineWidth != undefined">
                    <codx-label name="lblWidth"  [default]="formatString('width')"></codx-label>
                    <div class="w-100 my-3 pe-3">
                      <codx-input
                        class="float-right"
                        type="number"
                        field="width"
                        [crrValue]="crosshairLineWidth"
                        (valueChange)="crosshairChange($event,true)"
                      ></codx-input>
                    </div>
                  </div>
                  <div *ngIf="crosshairLineColor != undefined">
                    <codx-label name="lblColor"  [default]="formatString('color')"></codx-label>
                    <div class="w-100 my-3 pe-3">
                      <codx-input
                        class="float-right"
                        type="colorpicker"
                        field="color"
                        [crrValue]="crosshairLineColor"
                        (valueChange)="crosshairChange($event,true)"
                      ></codx-input>
                    </div>
                  </div>
                </div>
              </ng-container>
              <ng-container *ngSwitchCase="'fill'" >
                <div class="w-100 mt-3">
                  <codx-input
                    class="float-right"
                    type="colorpicker"
                    field="fill"
                    [crrValue]="c.value"
                    (valueChange)="crosshairChange($event)"
                  ></codx-input>
                </div>
              </ng-container>
              <ng-container *ngSwitchCase="'lineType'">
                <div class="w-100 mt-3">
                  <ejs-dropdownlist
                    [dataSource]="crosshairType"
                    (change)="crosshairTypeChange($event,c.key)"
                    [value]="c.value"
                   ></ejs-dropdownlist>
                </div>
              </ng-container>
            </ng-container>
          </div>
          </div>
          </ng-container>


          <!--Tooltip setting-->

          <ng-container *ngIf="chartSetting.enableTooltip || tooltip">

            <a id="tooltipSetting"  [attr.aria-expanded]="collapseTooltip" (click)="collapseTooltip =!collapseTooltip"
            [attr.aria-controls]="'tooltipSetting'" class="text-primary font-weight-500">
            <div class="d-flex justify-content-start h-30px">
              <codx-label name="lblTooltip" default="Tooltip" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
              <i class="text-primary"
                [ngClass]="!collapseTooltip ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
            </div>
            </a>
            <div [id]="'tooltipSetting'" [ngbCollapse]="collapseTooltip">
              <div class="border my-3" style="border-radius: 16px;">
                <div *ngFor="let t of tooltip | keyvalue" class="form-group m-3">
                  <codx-label class="text-capitalize" [default]="formatString(t.key)"></codx-label>
                  <ng-container [ngSwitch]="t?.key">
                    <ng-container *ngSwitchCase="'enable'">
                      <div class="d-flex justify-content-start">
                        <codx-input
                          class="float-right"
                          type="switch"
                          field="enable"
                          [crrValue]="t.value"
                          (valueChange)="tooltipChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'shared'">
                      <div class="d-flex justify-content-start">
                        <codx-input
                          class="float-right"
                          type="switch"
                          field="shared"
                          [crrValue]="t.value"
                          (valueChange)="tooltipChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>

                    <ng-container *ngSwitchCase="'format'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="text"
                          field="format"
                          [crrValue]="t.value"
                          (valueChange)="tooltipChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'header'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="text"
                          field="header"
                          [crrValue]="t.value"
                          (valueChange)="tooltipChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>

                  </ng-container>
                </div>
                </div>
            </div>
          </ng-container>


          <!--Marker setting-->
          <ng-container *ngIf="marker && (chartSetting.type != 'Pie' && chartSetting.type != 'Funnel' && chartSetting.type !='Pyramid')">
            <a id="markerSetting"  [attr.aria-expanded]="collapseMarker" (click)="collapseMarker =!collapseMarker"
            [attr.aria-controls]="'markerSetting'" class="text-primary font-weight-500">
            <div class="d-flex justify-content-start h-30px">
              <codx-label name="lblMarker" default="Marker" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
              <i class="text-primary"
                [ngClass]="!collapseMarker ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
            </div>
            </a>
            <div [id]="'markerSetting'" [ngbCollapse]="collapseMarker">
              <div class="border my-3" style="border-radius: 16px;">
                <div *ngFor="let mark of marker | keyvalue" class="form-group m-3">
                  <codx-label class="text-capitalize" [default]="formatString(mark.key)"></codx-label>
                  <ng-container [ngSwitch]="mark?.key">
                    <ng-container *ngSwitchCase="'visible'">
                      <div class="d-flex justify-content-start">
                        <codx-input
                          class="float-right"
                          type="switch"
                          field="visible"
                          [crrValue]="mark.value"
                          (valueChange)="markerChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'isFilled'">
                      <div class="d-flex justify-content-start">
                        <codx-input
                          class="float-right"
                          type="switch"
                          field="isFilled"
                          [crrValue]="mark.value"
                          (valueChange)="markerChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'width'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="number"
                          field="width"
                          [crrValue]="mark.value"
                          (valueChange)="markerChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>

                    <ng-container *ngSwitchCase="'height'">
                      <div class="w-100 mt-3">
                        <codx-input
                          type="number"
                          field="height"
                          [crrValue]="mark.value"
                          (valueChange)="markerChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'position'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="text"
                          field="position"
                          [crrValue]="mark.value"
                          (valueChange)="markerChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'shape'">
                      <div class="w-100 mt-3">
                        <ejs-dropdownlist
                          [dataSource]="markerShape"
                          (change)="markerShapeChange($event)"
                          [value]="mark.value"
                         ></ejs-dropdownlist>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'fill'" >
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="colorpicker"
                          field="fill"
                          [crrValue]="mark.value"
                          (valueChange)="markerChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'dataLabel'">
                      <div class="border ms-3 my-3" style="border-radius: 16px;" *ngIf="markerDatalabelValue">
                        <div *ngFor="let d of markerDatalabelValue | keyvalue" class="form-group m-3">
                          <codx-label class="text-capitalize" [default]="formatString(d.key)"></codx-label>
                          <ng-container [ngSwitch]="d?.key">

                            <ng-container *ngSwitchCase="'visible'">
                              <div class="d-flex justify-content-start">
                                <codx-input
                                  class="float-right"
                                  type="switch"
                                  [field]="'visible'"
                                  [crrValue]="d.value"
                                  (valueChange)="dataLabelChange($event,'marker')"
                                ></codx-input>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'fill'" >
                              <div class="w-100 mt-3">
                                <codx-input
                                  class="float-right"
                                  type="colorpicker"
                                  field="fill"
                                  [crrValue]="d.value"
                                  (valueChange)="dataLabelChange($event,'marker')"
                                ></codx-input>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'position'">
                              <div class="w-100 mt-3">
                                <ejs-dropdownlist
                                  [dataSource]="serieLabelPositions"
                                  (change)="dataLabelChange({data: $event.value, field: 'position'},'marker')"
                                  [value]="d.value"
                                 ></ejs-dropdownlist>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'alignment'">
                              <div class="w-100 mt-3">
                                <ejs-dropdownlist
                                  [dataSource]="labelAlignments"
                                  (change)="dataLabelChange({data: $event.value, field: 'alignment'},'marker')"
                                  [value]="d.value"
                                 ></ejs-dropdownlist>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'format'">
                              <div class="w-100 mt-3">
                                <codx-input
                                  class="float-right"
                                  type="text"
                                  field="header"
                                  [crrValue]="d.value"
                                  (valueChange)="dataLabelChange($event,'marker')"
                                ></codx-input>
                              </div>
                            </ng-container>
                          </ng-container>
                        </div>
                        </div>
                    </ng-container>
                  </ng-container>
                </div>
                </div>
            </div>
          </ng-container>





          <!--Border setting-->

          <ng-container *ngIf="border">

            <a id="borderSetting"  [attr.aria-expanded]="collapseBorder" (click)="collapseBorder =!collapseBorder"
            [attr.aria-controls]="'borderSetting'" class="text-primary font-weight-500">
            <div class="d-flex justify-content-start h-30px">
              <codx-label name="lblBorder" default="Border" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
              <i class="text-primary"
                [ngClass]="!collapseBorder ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
            </div>
            </a>
            <div [id]="'borderSetting'" [ngbCollapse]="collapseBorder">
              <div class="border my-3" style="border-radius: 16px;">
                <div *ngFor="let b of border | keyvalue" class="form-group m-3">
                  <codx-label class="text-capitalize" [default]="formatString(b.key)"></codx-label>
                  <ng-container [ngSwitch]="b?.key">
                    <ng-container *ngSwitchCase="'width'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="number"
                          field="width"
                          [crrValue]="b.value"
                          (valueChange)="borderChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'color'" >
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="colorpicker"
                          field="color"
                          [crrValue]="b.value"
                          (valueChange)="borderChange($event)"
                        ></codx-input>
                      </div>
                    </ng-container>

                  </ng-container>
                </div>
                </div>
            </div>

          </ng-container>

          <!--DataLabel Setting-->
          <ng-container *ngIf="dataLabel && (chartSetting.type == 'Pie' ||chartSetting.type == 'Funnel' || chartSetting.type =='Pyramid') ">
            <a id="dataLabelSetting"  [attr.aria-expanded]="collapseDataLabel" (click)="collapseDataLabel =!collapseDataLabel"
            [attr.aria-controls]="'serieSetting'" class="text-primary font-weight-500">
            <div class="d-flex justify-content-start h-30px">
              <codx-label name="lblDataLabelSetting" default="DataLabel Setting" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
              <i class="text-primary"
                [ngClass]="!collapseDataLabel ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
            </div>
            </a>
            <div [id]="'dataLabelSetting'" [ngbCollapse]="collapseDataLabel">
              <div class="border my-3" style="border-radius: 16px;">
                <div *ngFor="let d of dataLabel | keyvalue" class="form-group m-3">
                  <codx-label class="text-capitalize" [default]="formatString(d.key)"></codx-label>
                  <ng-container [ngSwitch]="d?.key">
                    <ng-container *ngSwitchCase="'visible'">
                      <div class="d-flex justify-content-start">
                        <codx-input
                          class="float-right"
                          type="switch"
                          [field]="'visible'"
                          [crrValue]="d.value"
                          (valueChange)="dataLabelChange($event,'dataLabel')"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'enableRotation'">
                      <div class="d-flex justify-content-start">
                        <codx-input
                          class="float-right"
                          type="switch"
                          [field]="'enableRotation'"
                          [crrValue]="d.value"
                          (valueChange)="dataLabelChange($event,'dataLabel')"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'fill'" >
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="colorpicker"
                          field="fill"
                          [crrValue]="d.value"
                          (valueChange)="dataLabelChange($event,'dataLabel')"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'position'">
                      <div class="w-100 mt-3">
                        <ejs-dropdownlist
                          [dataSource]="accLabelPositions"
                          (change)="dataLabelChange({data: $event.value, field: 'position'},'dataLabel')"
                          [value]="d.value"
                         ></ejs-dropdownlist>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'format'">
                      <div class="w-100 mt-3">
                        <ejs-dropdownlist
                          [dataSource]="formatValues"
                          [fields]="{text:'text',value:'value'}"
                          (change)="dataLabelChange({data: $event.value, field: 'format'},'dataLabel')"
                          [value]="d.value"
                         ></ejs-dropdownlist>
                      </div>
                    </ng-container>

                    <ng-container *ngSwitchCase="'template'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="text"
                          field="template"
                          [crrValue]="d.value"
                          (valueChange)="dataLabelChange($event,'dataLabel')"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'angle'">
                      <div class="w-100 mt-3">
                        <codx-input
                          class="float-right"
                          type="number"
                          field="angle"
                          [crrValue]="d.value"
                          (valueChange)="dataLabelChange($event,'dataLabel')"
                        ></codx-input>
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'name'">
                      <div class="w-100 mt-3">
                        <ejs-dropdownlist
                        [dataSource]="arrDataset"
                        (change)="dataLabelChange({data: $event.value, field: 'name'},'dataLabel')"
                        [value]="d.value ? uppercaseFirstLetter(d.value): d.value"
                       ></ejs-dropdownlist>
                      </div>
                    </ng-container>
                  </ng-container>
                </div>
                </div>
            </div>

          </ng-container>

          <!--ChartSerie setting-->
          <a id="serieSetting"  [attr.aria-expanded]="collapseSerie" (click)="collapseSerie =!collapseSerie"
          [attr.aria-controls]="'serieSetting'" class="text-primary font-weight-500">
          <div class="d-flex justify-content-start h-30px">
            <codx-label name="lblSerieSetting" default="Serie Setting" style="font-weight:500;text-transform: uppercase;font-size: 13px;color:#0d6efd"></codx-label>
            <i class="text-primary"
              [ngClass]="!collapseSerie ?'icon-keyboard_arrow_down': 'icon-keyboard_arrow_right' "></i>
          </div>
          </a>
          <div [id]="'serieSetting'" [ngbCollapse]="collapseSerie">
            <div class="border mt-3" style="border-radius: 16px;">
              <div *ngFor="let item of chartFields" class="form-group m-3">
                <codx-label class="text-capitalize" name="lbl{{item.name}}" [default]="formatString(item.name)"></codx-label>
                <ng-container [ngSwitch]="item?.type">
                  <ng-container *ngSwitchCase="'string'">
                    <ng-container [ngSwitch]="item.name">
                      <ng-container *ngSwitchDefault>
                        <codx-input
                        type="text"
                        [field]="item.name"
                        [crrValue]="chartSetting[item.name]"
                        [disabled]="item.name == 'type'? true : false"
                        (valueChange)="valueChange($event)"
                      ></codx-input>
                      </ng-container>
                      <ng-container *ngSwitchCase="'fill'" >
                        <div class="w-100 mt-3">
                          <codx-input
                            class="float-right"
                            type="colorpicker"
                            field="fill"
                            [crrValue]="chartSetting[item.name]"
                            (valueChange)="valueChange($event)"
                          ></codx-input>
                        </div>
                      </ng-container>
                      <ng-container *ngSwitchCase="'groupMode'" >
                        <div class="w-100 mt-3">
                          <ejs-dropdownlist
                          [dataSource]="groupModes"
                          (change)="fieldChange($event,'groupMode')"
                          [value]="chartSetting[item.name] "
                         ></ejs-dropdownlist>
                        </div>
                      </ng-container>
                      <ng-container *ngSwitchCase="'xName'" >
                        <div class="w-100 mt-3">
                          <ejs-dropdownlist
                          [dataSource]="arrDataset"
                          (change)="fieldChange($event,'xName')"
                          [value]="chartSetting[item.name] ? uppercaseFirstLetter(chartSetting[item.name]):chartSetting[item.name] "
                         ></ejs-dropdownlist>
                        </div>
                      </ng-container>
                      <ng-container *ngSwitchCase="'yName'" >
                        <div class="w-100 mt-3">
                          <ejs-dropdownlist
                          [dataSource]="arrDataset"
                          (change)="fieldChange($event,'yName')"
                          [value]="chartSetting[item.name] ? uppercaseFirstLetter(chartSetting[item.name]):chartSetting[item.name] "
                         ></ejs-dropdownlist>
                        </div>
                      </ng-container>
                      <ng-container *ngSwitchCase="'tooltipMappingName'" >
                        <div class="w-100 mt-3">
                          <ejs-dropdownlist
                          [dataSource]="arrDataset"
                          (change)="fieldChange($event,'tooltipMappingName')"
                          [value]="chartSetting[item.name] ? uppercaseFirstLetter(chartSetting[item.name]):chartSetting[item.name] "
                         ></ejs-dropdownlist>
                        </div>
                      </ng-container>
                      <ng-container *ngSwitchCase="'drawType'" >
                        <div class="w-100 mt-3">
                          <ejs-dropdownlist
                            [dataSource]="drawTypes"
                            (change)="valueChange({field: 'drawType', data:$event.value})"
                            [value]="chartSetting[item.name]"
                           ></ejs-dropdownlist>
                        </div>
                      </ng-container>
                    </ng-container>

                  </ng-container>
                  <ng-container *ngSwitchCase="'boolean'">
                    <div class="d-flex justify-content-start">
                      <codx-input
                        class="float-right"
                        type="switch"
                        [field]="item.name"
                        [crrValue]="chartSetting[item.name]"
                        (valueChange)="valueChange($event)"
                      ></codx-input>
                    </div>
                  </ng-container>

                  <ng-container *ngSwitchCase="'number'">
                    <div class="w-100 mt-3">
                      <codx-input
                        type="number"
                        [field]="item.name"
                        [crrValue]="chartSetting[item.name]"
                        (valueChange)="valueChange($event)"
                        placeholder="{{ item.name }}"
                      ></codx-input>
                    </div>
                  </ng-container>

                  <ng-container *ngSwitchCase="'object'">
                    <ng-container *ngIf="item.name == 'dataLabel' && chartSetting[item.name] ">
                      <div class="border ms-3 my-3" style="border-radius: 16px;">
                        <div *ngFor="let d of chartSetting[item] | keyvalue" class="form-group m-3">
                          <codx-label class="text-capitalize" [default]="formatString(d.key)"></codx-label>
                          <ng-container [ngSwitch]="d?.key">

                            <ng-container *ngSwitchCase="'visible'">
                              <div class="d-flex justify-content-start">
                                <codx-input
                                  class="float-right"
                                  type="switch"
                                  [field]="'visible'"
                                  [crrValue]="d.value"
                                  (valueChange)="dataLabelChange($event,'serie')"
                                ></codx-input>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'fill'" >
                              <div class="w-100 mt-3">
                                <codx-input
                                  class="float-right"
                                  type="colorpicker"
                                  field="fill"
                                  [crrValue]="d.value"
                                  (valueChange)="dataLabelChange($event,'serie')"
                                ></codx-input>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'position'">
                              <div class="w-100 mt-3">
                                <ejs-dropdownlist
                                  [dataSource]="serieLabelPositions"
                                  (change)="dataLabelChange({data: $event.value, field: 'position'},'serie')"
                                  [value]="d.value"
                                 ></ejs-dropdownlist>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'alignment'">
                              <div class="w-100 mt-3">
                                <ejs-dropdownlist
                                  [dataSource]="labelAlignments"
                                  (change)="dataLabelChange({data: $event.value, field: 'alignment'},'serie')"
                                  [value]="d.value"
                                 ></ejs-dropdownlist>
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'format'">
                              <div class="w-100 mt-3">
                                <codx-input
                                  class="float-right"
                                  type="text"
                                  field="header"
                                  [crrValue]="d.value"
                                  (valueChange)="dataLabelChange($event,'serie')"
                                ></codx-input>
                              </div>
                            </ng-container>
                          </ng-container>
                        </div>
                        </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </div>
            </div>

          </div>



        </ng-container>
      </div>
    </ng-container>
  </ng-template>
  <ng-template #footer>
    <div class="d-flex float-start h-50px mb-3" *ngIf="series.length >0">
      <button *ngFor="let item of series, let index = index" class="btn btn-sm btn-light-warning m-1" (click)="editChart(item,index)">{{item.type}}</button>
    </div>
    <div class="d-flex justify-content-between w-100">
      <div class="float-start" *ngIf="!isAcc">
        <button class="btn btn-light-primary" (click)="moreChart()">
          <codx-label
            name="lblMoreChart"
            [formModel]="dialog.formModel"
            default="Thêm biểu đồ"
          ></codx-label>
        </button>
      </div>
      <div class="float-end">
        <button class="btn btn-light-primary" (click)="saveForm()">
          <codx-label
            name="lblSave"
            [formModel]="dialog.formModel"
            default="Lưu"
          ></codx-label>
        </button>
      </div>

    </div>
  </ng-template>
</codx-form>
