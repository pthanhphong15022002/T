<div class="cal-notes">
  <div class="more-btn" *ngIf="showHeader">
    <span
      class="icon-edit-one icon-18 icon-gray btn btn-icon btn-active-light-primary position-relative"
      (click)="openFormAddNote()"
    ></span>
    <div
      ngbDropdown
      class="dropdown"
      container="body"
      placement="top"
      style="margin-top: -29px; margin-left: 30px; width: 30px"
    >
      <a
        href="javascript:void(0)"
        class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
        ngbDropdownToggle
        id="dropdownMenuButton1"
        aria-expanded="false"
      >
        <i
          class="icon-more_vert icon-20 icon-gray btn btn-icon btn-active-light-primary position-relative"
        ></i>
      </a>
      <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
        <div class="flex align-items-center">
          <codx-label
            class="w-136px"
            name="lblDeleteNote"
            formName="Notes"
            default="Theo tuần"
          ></codx-label>
          <codx-input
            type="switch"
            field="onTypeCalendarByWeek"
            labelPosition="Before"
            class="test-check"
            [checked]="checkWeek"
            (valueChange)="valueChangeTypeCalendar($event)"
          >
          </codx-input>
        </div>
        <div class="separator my-3"></div>
        <div *ngIf="WP_NotesParam != null">
          <div class="flex">
            <div class="w-5px">
              <li
                [style.background-color]="WP_NotesParam?.ShowColor"
                [style.color]="WP_NotesParam?.ShowColor"
              ></li>
            </div>
            <div class="show-event">
              <codx-label
                name="lblNote"
                formName="WP_Notes"
                default="Ghi chú"
              ></codx-label>
            </div>
            <div class="show-event-check">
              <codx-input
                type="checkbox"
                field="WP_Notes"
                [checked]="
                  checkWP_NotesParam == 'true' || checkWP_NotesParam == '1'
                "
                labelPosition="Before"
                [disabled]="false"
                class="test-check"
                (valueChange)="valueChangeSetting($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <br />
        <div *ngIf="TM_TasksParam != null">
          <div class="flex">
            <div class="w-5px">
              <li
                [style.background-color]="TM_TasksParam?.ShowColor"
                [style.color]="TM_TasksParam?.ShowColor"
              ></li>
            </div>
            <div class="show-event">
              <codx-label
                name="lblTask"
                formName="WP_Task"
                default="Công việc cá nhân"
              ></codx-label>
            </div>
            <div class="show-event-check">
              <codx-input
                type="checkbox"
                field="TM_Tasks"
                [checked]="
                  checkTM_TasksParam == 'true' || checkTM_TasksParam == '1'
                "
                labelPosition="Before"
                [disabled]="false"
                class="test-check"
                (valueChange)="valueChangeSetting($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <br />
        <div *ngIf="CO_MeetingsParam != null">
          <div class="flex">
            <div class="w-5px">
              <li
                [style.background-color]="CO_MeetingsParam?.ShowColor"
                [style.color]="CO_MeetingsParam?.ShowColor"
              ></li>
            </div>
            <div class="show-event">
              <codx-label
                name="lblMeeting"
                formName="CO_Meetings"
                default="Lịch họp cá nhân"
              >
              </codx-label>
            </div>
            <div class="show-event-check">
              <codx-input
                type="checkbox"
                field="CO_Meetings"
                [checked]="
                  checkCO_MeetingsParam == 'true' ||
                  checkCO_MeetingsParam == '1'
                "
                labelPosition="Before"
                [disabled]="false"
                class="test-check"
                (valueChange)="valueChangeSetting($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <br />
        <div *ngIf="EP_BookingRoomsParam != null">
          <div class="flex">
            <div class="w-5px">
              <li
                [style.background-color]="EP_BookingRoomsParam?.ShowColor"
                [style.color]="EP_BookingRoomsParam?.ShowColor"
              ></li>
            </div>
            <div class="show-event">
              <codx-label
                name="lblBookingRoom"
                formName="EP_BookingRooms"
                default="Lịch đặt phòng"
              >
              </codx-label>
            </div>
            <div class="show-event-check">
              <codx-input
                type="checkbox"
                field="EP_BookingRooms"
                [checked]="
                  checkEP_BookingRoomsParam == 'true' ||
                  checkEP_BookingRoomsParam == '1'
                "
                labelPosition="Before"
                [disabled]="false"
                class="test-check"
                (valueChange)="valueChangeSetting($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <br />
        <div *ngIf="EP_BookingCarsParam != null">
          <div class="flex">
            <div class="w-5px">
              <li
                [style.background-color]="EP_BookingCarsParam?.ShowColor"
                [style.color]="EP_BookingCarsParam?.ShowColor"
              ></li>
            </div>
            <div class="show-event">
              <codx-label
                name="lblBookingCar"
                formName="EP_BookingCars"
                default="Lịch đặt xe"
              >
              </codx-label>
            </div>
            <div class="show-event-check">
              <codx-input
                type="checkbox"
                field="EP_BookingCars"
                [checked]="
                  checkEP_BookingCarsParam == 'true' ||
                  checkEP_BookingCarsParam == '1'
                "
                labelPosition="Before"
                [disabled]="false"
                class="test-check"
                (valueChange)="valueChangeSetting($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
      </ul>
    </div>
  </div>
  <div class="calendar-box position-relative">
    <div class="form-calendar">
      <div *ngIf="typeCalendar == 'week'">
        <selectweek
          (onChangeWeek)="setEventWeek()"
          (onChangeValue)="changeDayOfWeek($event)"
          (onChangeNewWeek)="changeNewWeek($event)"
        >
        </selectweek>
      </div>
      <div *ngIf="typeCalendar == 'month'">
        <ejs-calendar
          #calendar
          [firstDayOfWeek]="1"
          (renderDayCell)="onLoad($event)"
          (change)="changeDayOfMonth($event)"
          cssClass="width-calendar"
          class="e-customStyle"
          title="Lịch các nhân"
          (navigated)="changeNewMonth($event)"
        >
        </ejs-calendar>
      </div>
    </div>
  </div>
  <ng-container *ngIf="showListParam">
    <div class="row title-calendar w-100">
      <div class="col-md-10 mt-2">
        <codx-label
          fiedName="Calendar"
          default="Calendar"
          class="pt-3"
        ></codx-label>
      </div>
      <span class="icon-more_vert icon-20 icon-gray col-md-2 pt-1 ps-6"></span>
    </div>
    <div class="flex pt-3" *ngIf="WP_NotesParam != null">
      <div class="w-5px">
        <li
          [style.background-color]="WP_NotesParam?.ShowColor"
          [style.color]="WP_NotesParam?.ShowColor"
        ></li>
      </div>
      <div class="show-list-event">
        <codx-label
          name="lblNote"
          formName="WP_Notes"
          default="Ghi chú"
        ></codx-label>
      </div>
      <div class="show-event-check">
        <codx-input
          type="checkbox"
          field="WP_Notes"
          [checked]="checkWP_NotesParam == 'true' || checkWP_NotesParam == '1'"
          labelPosition="Before"
          [disabled]="false"
          class="test-check"
          (valueChange)="valueChangeSetting($event)"
        >
        </codx-input>
      </div>
    </div>
    <br />
    <div class="flex" *ngIf="TM_TasksParam != null">
      <div class="w-5px">
        <li
          [style.background-color]="TM_TasksParam?.ShowColor"
          [style.color]="TM_TasksParam?.ShowColor"
        ></li>
      </div>
      <div class="show-list-event">
        <codx-label
          name="lblTask"
          formName="WP_Task"
          default="Công việc cá nhân"
        ></codx-label>
      </div>
      <div class="show-event-check">
        <codx-input
          type="checkbox"
          field="TM_Tasks"
          [checked]="checkTM_TasksParam == 'true' || checkTM_TasksParam == '1'"
          labelPosition="Before"
          [disabled]="false"
          class="test-check"
          (valueChange)="valueChangeSetting($event)"
        >
        </codx-input>
      </div>
    </div>
    <br />
    <div class="flex" *ngIf="CO_MeetingsParam != null">
      <div class="w-5px">
        <li
          [style.background-color]="CO_MeetingsParam?.ShowColor"
          [style.color]="CO_MeetingsParam?.ShowColor"
        ></li>
      </div>
      <div class="show-list-event">
        <codx-label
          name="lblMeeting"
          formName="CO_Meetings"
          default="Lịch họp cá nhân"
        >
        </codx-label>
      </div>
      <div class="show-event-check">
        <codx-input
          type="checkbox"
          field="CO_Meetings"
          [checked]="
            checkCO_MeetingsParam == 'true' || checkCO_MeetingsParam == '1'
          "
          labelPosition="Before"
          [disabled]="false"
          class="test-check"
          (valueChange)="valueChangeSetting($event)"
        >
        </codx-input>
      </div>
    </div>
    <br />
    <div class="flex" *ngIf="EP_BookingRoomsParam != null">
      <div class="w-5px">
        <li
          [style.background-color]="EP_BookingRoomsParam?.ShowColor"
          [style.color]="EP_BookingRoomsParam?.ShowColor"
        ></li>
      </div>
      <div class="show-list-event">
        <codx-label
          name="lblBookingRoom"
          formName="EP_BookingRooms"
          default="Đặt phòng"
        >
        </codx-label>
      </div>
      <div class="show-event-check">
        <codx-input
          type="checkbox"
          field="EP_BookingRooms"
          [checked]="
            checkEP_BookingRoomsParam == 'true' ||
            checkEP_BookingRoomsParam == '1'
          "
          labelPosition="Before"
          [disabled]="false"
          class="test-check"
          (valueChange)="valueChangeSetting($event)"
        >
        </codx-input>
      </div>
    </div>
    <br />
    <div class="flex" *ngIf="EP_BookingCarsParam != null">
      <div class="w-5px">
        <li
          [style.background-color]="EP_BookingCarsParam?.ShowColor"
          [style.color]="EP_BookingCarsParam?.ShowColor"
        ></li>
      </div>
      <div class="show-list-event">
        <codx-label
          name="lblBookingCar"
          formName="EP_BookingCars"
          default="Đặt xe"
        >
        </codx-label>
      </div>
      <div class="show-event-check">
        <codx-input
          type="checkbox"
          field="EP_BookingCars"
          [checked]="
            checkEP_BookingCarsParam == 'true' ||
            checkEP_BookingCarsParam == '1'
          "
          labelPosition="Before"
          [disabled]="false"
          class="test-check"
          (valueChange)="valueChangeSetting($event)"
        >
        </codx-input>
      </div>
    </div>
  </ng-container>
  <div class="lstView" *ngIf="showList">
    <codx-listview
      #listview
      service="SYS"
      assemblyName="ERM.Business.SYS"
      className="SettingValuesBusiness"
      method="GetDataByDateAsync"
      [entityName]="'WP_Notes'"
      [predicate]="predicate"
      [dataValue]="dataValue"
      [itemTemplate]="dataPara"
      type="listView"
      [funcId]="functionList?.functionID"
    >
    </codx-listview>
  </div>
  <ng-template #dataPara let-item>
    <div
      class="d-flex flex-column py-1"
      *ngIf="
        (checkWP_NotesParam == true || checkWP_NotesParam == '1') &&
        item.transType == 'WP_Notes' &&
        item.showCalendar == true
      "
    >
      <div
        [ngStyle]="{
          'background-color': WP_NotesParam?.ShowBackground,
          'border-left': '3px ' + WP_NotesParam?.ShowColor + ' solid'
        }"
      >
        <div class="checkbox-list">
          <div *ngIf="item.title != null">
            <div class="action-menu d-flex">
              <div class="d-flex align-items-center">
                <a class="action-item" (click)="openFormUpdateNote(item)">
                  <div class="d-flex align-items-center btn-tooltip icon-18">
                    <span
                      [class]="editMF?.largeIcon"
                      [style.color]="editMF?.color"
                    ></span>
                  </div>
                </a>
                <a class="action-item" (click)="onDeleteNote(item)">
                  <div class="d-flex align-items-center btn-tooltip icon-18">
                    <span
                      [class]="deleteMF?.largeIcon"
                      [style.color]="deleteMF?.color"
                    ></span>
                  </div>
                </a>
                <div ngbDropdown class="dropdown" container="body">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
                    ngbDropdownToggle
                    id="dropdownMenuButton1"
                    aria-expanded="false"
                  >
                    <i class="icon-more_vert icon-20 text-dark-75"></i>
                  </a>
                  <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
                    <li>
                      <a
                        (click)="checkNumberNotePin(item)"
                        ngbDropdownItem
                        href="javascript:void(0)"
                      >
                        <span
                          [class]="'icon-push_pin me-1'"
                          [style.color]="pinMF?.color"
                        ></span>
                        <span class="show-customName">{{
                          pinMF?.customName
                        }}</span>
                      </a>
                    </li>
                    <li>
                      <a
                        (click)="openFormNoteBooks(item)"
                        ngbDropdownItem
                        href="javascript:void(0)"
                      >
                        <span
                          [class]="saveMF?.largeIcon"
                          class="me-1"
                          [style.color]="saveMF?.color"
                        ></span>
                        <span class="show-customName">{{
                          saveMF?.customName
                        }}</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div *ngIf="item.isPin == true || item.isPin == '1'" class="active">
              <span class="icon-push_pin icon-16" type="button"></span>
            </div>
            <div class="d-flex flex-column note-option">
              <span [innerHTML]="item.title"></span>
            </div>
          </div>
          <div *ngIf="item.title == null">
            <div class="action-menu d-flex">
              <div class="d-flex align-items-center">
                <a class="action-item" (click)="openFormUpdateNote(item)">
                  <div class="d-flex align-items-center btn-tooltip icon-18">
                    <span
                      [class]="editMF?.largeIcon"
                      [style.color]="editMF?.color"
                    ></span>
                  </div>
                </a>
                <a class="action-item" (click)="onDeleteNote(item)">
                  <div class="d-flex align-items-center btn-tooltip icon-18">
                    <span
                      [class]="deleteMF?.largeIcon"
                      [style.color]="deleteMF?.color"
                    ></span>
                  </div>
                </a>
                <div ngbDropdown class="dropdown" container="body">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-clean btn-hover-light-primary btn-sm btn-icon"
                    ngbDropdownToggle
                    id="dropdownMenuButton1"
                    aria-expanded="false"
                  >
                    <i class="icon-more_vert icon-20 text-dark-75"></i>
                  </a>
                  <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
                    <li>
                      <a
                        (click)="checkNumberNotePin(item)"
                        ngbDropdownItem
                        href="javascript:void(0)"
                      >
                        <span
                          [class]="'icon-push_pin me-1'"
                          [style.color]="pinMF?.color"
                        ></span>
                        <span class="show-customName">{{
                          pinMF?.customName
                        }}</span>
                      </a>
                    </li>
                    <li>
                      <a
                        (click)="openFormNoteBooks(item)"
                        ngbDropdownItem
                        href="javascript:void(0)"
                      >
                        <span
                          [class]="saveMF?.largeIcon"
                          class="me-1"
                          [style.color]="saveMF?.color"
                        ></span>
                        <span class="show-customName">{{
                          saveMF?.customName
                        }}</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div *ngIf="item.isPin == true || item.isPin == '1'" class="active">
              <span class="icon-push_pin icon-16" type="button"></span>
            </div>
            <div class="d-flex flex-column note-option">
              <div *ngFor="let itemList of item.CheckList; index as i">
                <div *ngIf="itemList.status == null">
                  <div class="my-2 note-list">
                    <ul>
                      <li>{{ itemList.listNote }}</li>
                    </ul>
                  </div>
                </div>
                <div *ngIf="itemList.status != null">
                  <div class="my-2 note-list">
                    <codx-input
                      #checkBoxNote
                      id="checkBoxNote"
                      type="checkbox"
                      label="{{ itemList.listNote }}"
                      [disabled]="false"
                      [checked]="
                        itemList?.status == 'true' || itemList?.status == '1'
                      "
                      labelPosition="After"
                      class="test-check"
                      (valueChange)="valueChangeCB($event, item, i)"
                    ></codx-input>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      *ngIf="
        (checkTM_TasksParam == true || checkTM_TasksParam == '1') &&
        item?.transType == 'TM_MyTasks'
      "
    >
      <div
        [ngStyle]="{
          'background-color': TM_TasksParam?.ShowBackground,
          'border-left': '3px ' + TM_TasksParam?.ShowColor + ' solid'
        }"
      >
        <div class="checkbox-list">
          <div class="d-flex flex-column note-option">
            <span [innerHTML]="item.description"></span>
          </div>
        </div>
      </div>
    </div>
    <div
      *ngIf="
        (checkCO_MeetingsParam == true || checkCO_MeetingsParam == '1') &&
        item?.transType == 'CO_Meetings'
      "
    >
      <div
        [ngStyle]="{
          'background-color': CO_MeetingsParam?.ShowBackground,
          'border-left': '3px ' + CO_MeetingsParam?.ShowColor + ' solid'
        }"
      >
        <div class="checkbox-list">
          <div class="d-flex flex-column note-option">
            <span [innerHTML]="item.title"></span>
          </div>
        </div>
      </div>
    </div>
    <div
      *ngIf="
        (checkEP_BookingRoomsParam == true ||
          checkEP_BookingRoomsParam == '1') &&
        item?.transType == 'EP_BookingRooms'
      "
    >
      <div
        [ngStyle]="{
          'background-color': EP_BookingRoomsParam?.ShowBackground,
          'border-left': '3px ' + EP_BookingRoomsParam?.ShowColor + ' solid'
        }"
      >
        <div class="checkbox-list">
          <div class="d-flex flex-column note-option">
            <span [innerHTML]="item.title"></span>
          </div>
        </div>
      </div>
    </div>
    <div
      *ngIf="
        (checkEP_BookingCarsParam == true || checkEP_BookingCarsParam == '1') &&
        item?.transType == 'EP_BookingCars'
      "
    >
      <div
        [ngStyle]="{
          'background-color': EP_BookingCarsParam?.ShowBackground,
          'border-left': '3px ' + EP_BookingCarsParam?.ShowColor + ' solid'
        }"
      >
        <div class="checkbox-list">
          <div class="d-flex flex-column note-option">
            <span [innerHTML]="item.title"></span>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</div>
