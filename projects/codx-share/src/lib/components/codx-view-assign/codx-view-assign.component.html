<codx-treeview #treeView [itemTemplate]="templateTreeView" [data]="dataTree" [entityName]="'TM_Tasks'" [service]="'TM'"
  [enableCheck]="true" idField="recID" parentIdField="parentID" [autoLoad]="false" [isOutput]="true"
  [isLoadChild]="false">
</codx-treeview>

<!-- temptree -->
<ng-template #templateTreeView let-data>
  <ng-container>
    <div class="tab-tch mt-3">
      <div class="d-flex align-items-start justify-content-between mb-3">
        <div class="d-flex align-items-start">
          <span *ngIf="data?.items.length > 0">
            <div class="icon-18 icon-add_box me-2 align-items-start pt-3"></div>
          </span>
          <div class="d-flex align-items-top w-100 pe-9">
            <div class="me-3">
              <codx-img [width]="35" #image [objectId]='data?.userID'></codx-img>
            </div>
            <div class="d-flex flex-column flex-grow-1">
              <div class="d-flex align-items-center">
                <span class="text-dark fw-bold">{{data?.userName}}</span>
                <span *ngIf="data?.isTimeOut" class="icon-notifications expired"></span>
              </div>
              <div class="text-gray-600 text-italic fs-7">{{data?.positionName}}</div>
              <div class="text-dark">
                {{ data?.taskName }}
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex align-items-center ms-9">
          <div [class]="'d-flex align-items-center me-3'+ ' ' +(data?.items?.length > 0? 'text-success' : 'text-gray-600')">
            <span class="text-hover-primary icon-person_outline icon-16"></span>
            <span class="ms-1"> {{data?.items? data?.items?.length : 0}}</span>
          </div>
          <div [class]="'d-flex align-items-center me-3'+ ' ' +(data?.todo > 0? 'text-success' : 'text-gray-600')">
            <span class="text-hover-primary icon-check-correct icon-16"></span>
            <span class="ms-1">
              {{data?.todo}}</span>
          </div>
          <div [class]="'d-flex align-items-center me-3'+ ' ' +(data?.attachments >0? 'text-success' : 'text-gray-600')">
            <span class="text-hover-primary icon-attach_file icon-16"></span>
            <span>
              {{data?.attachments}}
            </span>
          </div>
          <div class="ms-3">
            <codx-vll
            [name]="vllStatus"
            [field]="'Status'"
            [value]="data?.status"
            [showText]="true"
            [showBgColor]="true"
            class="badge badge-light badge-md fs-7 ms-2"
          >
          </codx-vll>
          </div>
          <div class="d-flex flex-column w-50px ms-3">
            <div class="fs-7 text-gray-600 mb-1">{{ data?.percentage.toFixed(2)}}%</div>
            <div class="progress w-100 h-5px">
              <div class="progress-bar progress-bar-done" role="progressbar" [style.width.%]="data?.percentage"></div>
            </div>
          </div>
        </div>
      </div>


    </div>
  </ng-container>
</ng-template>