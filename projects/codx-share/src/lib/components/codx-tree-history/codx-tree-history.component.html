
<div>
    <div class="tree-body">
        <ng-container *ngFor="let node of lstHistory">
            <ng-container *ngTemplateOutlet="NodeHistory; context: { $implicit: node }"></ng-container>
        </ng-container>
    </div>
    <ng-container *ngIf="addNew">
        <div class="tree-footer">
            <codx-comment-history
                [type]="'create'"
                [funcID]="funcID"
                [actionType]="'C'"
                [objectID]="objectID"
                [objectType]="objectType"
                [reference]="null"
                (evtSend)="sendComment($event)">
            </codx-comment-history>
        </div>
    </ng-container>
</div>
<ng-template #NodeHistory let-item>
    <div class="c1" [attr.dt]="setDicData(item)">
        <codx-comment-history 
            [data]="item"
            [actionType]="item.actionType"
            [type]="'view'"
            (evtDelete)="deleteComment($event)"
            (evtReply)="replyTo($event)"
            [viewIcon]="viewIcon"
            [allowVotes]="viewVote"
            >
        </codx-comment-history>
        <ng-container *ngFor="let node of item.listSubComment">
            <div class="ms-10">
                <ng-container *ngTemplateOutlet="NodeHistory; context: { $implicit: node }"></ng-container>
            </div>
        </ng-container>
        <ng-container *ngIf="item.showReply">
            <codx-comment-history
                [type]="'create'"
                [funcID]="item.funtionID"
                [actionType]="'C'"
                [objectID]="item.objectID"
                [objectType]="item.objectType"
                [reference]="item.recID"
                (evtSend)="sendComment($event,item)">
            </codx-comment-history>
          </ng-container>
    </div>
</ng-template>