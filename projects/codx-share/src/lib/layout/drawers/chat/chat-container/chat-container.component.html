<div class="chat-container">
    <div class="chat-container-boxchat" id="chat-container-boxchat">
        <ng-container *ngFor="let item of lstGroupActive">
            <codx-chat-box #codxChatBox 
                [id]="item.groupID" 
                [groupID]="item.groupID" 
                (close)="closeBoxChat(item)"
                (collapse)="collapseBoxChat(item)">
            </codx-chat-box>
        </ng-container>
    </div>
    <div class="chat-container-boxchat-more">
        <ng-container *ngFor="let item of lstGroupCollapse;index as i">
            <ng-container *ngIf="i < 3">
                <div class="symbol symbol-40px symbol-cir cursor-pointer mt-2">
                    <ng-container *ngIf="i==0 && lstGroupCollapse.length > 3">
                        <div class="more-box-chat">
                            <span>+{{lstGroupCollapse.length - 3}}</span>
                        </div>
                    </ng-container>
                    <div class="" (click)="expanseBoxChat(item)" placement="start" [ngbTooltip]="tooltipMssage">
                        <codx-img 
                            [objectId]="item.groupType == '1'? item.groupID2:item.groupID" 
                            [objectName]="item.groupType == '1'? item.groupName2:item.groupName" 
                            [objectType]="item.groupType == '1'? 'AD_Users':'WP_Groups'"
                            [width]="50">
                        </codx-img>
                        <ng-template #tooltipMssage>
                            <div class="d-flex align-items-center p-2 text-start overflow-hidden w-200px">
                                <codx-img [objectId]="item.messageSendBy" [objectType]="'AD_Users'" [width]="30"></codx-img>
                                <ng-container *ngIf="item.messageType !=='3'">
                                    <div class="me-1">{{item.message}}</div>
                                </ng-container>
                            </div>
                        </ng-template>
                    </div>
                </div>                
            </ng-container>
        </ng-container>
        
    </div>
</div>

<ng-template #boxChatItem let-id>
    <codx-chat-box [groupID]="id"></codx-chat-box>
  </ng-template>