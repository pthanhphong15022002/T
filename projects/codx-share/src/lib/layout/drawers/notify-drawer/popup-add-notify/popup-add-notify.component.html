<codx-form [dialog]="dialog" [subHeader]="subheader" [body]="body" [footer]="footer"></codx-form>
<ng-template #subheader>
    <div class="mt-2">
        <codx-label formModel="" name="lblsubheader" default="Creaeted rule"></codx-label>  
    </div>
</ng-template>
<ng-template #body>
    <div class="p-2">
        <div class="d-flex flex-row-reverse">
            <span>
                <codx-label formModel="" name="lblExpend" default="Mở rộng"></codx-label>
            </span>
            <span class="ms-2">
                <i class="icon-exit_to_app"></i>
            </span>  
        </div>
        <div class="my-2">
            <div>
                <codx-label formModel="" name="lblRulename" default="Rule name"></codx-label>
            </div>
            <div>
                <codx-input 
                type="text" 
                [field]="'Description'"
                [placeholder]="'Like Recieve new thankyou note'" 
                [crrValue]="form.controls['Description'].value"
                (valueChange)="valueChange($event)"
                ></codx-input>
            </div>
        </div>
        <div class="my-2">
            <div class="text-primary fw-bolder">
                <codx-label formModel="" name="lblConditionNotify" default="Điều kiện thông báo"></codx-label>
            </div>
            <div class="p-2">
                <div class="my-2">
                    <codx-input 
                        [crrValue]="form.controls['BaseOn'].value"
                        name="radio" 
                        type="radio" 
                        field="BaseOn"
                        (valueChange)="valueChange($event)"  
                        label="Tất cả dữ liệu" 
                        [labelPosition]="'right'">
                    </codx-input>
                </div>
                <div class="my-2">
                    <codx-input 
                        [crrValue]="form.controls['BaseOn'].value" 
                        name="radio" 
                        type="radio" 
                        field="BaseOn"
                        (valueChange)="valueChange($event)" 
                        label="Dòng hiện hành" 
                        [labelPosition]="'right'">
                    </codx-input>
                </div>
                <div class="d-flex justify-content-between my-2">
                    <codx-input 
                        [crrValue]="form.controls['BaseOn'].value" 
                        name="radio" 
                        type="radio" 
                        field="BaseOn"
                        (valueChange)="valueChange($event)" 
                        label="Những dòng thỏa điều kiện" 
                        [labelPosition]="'right'">
                    </codx-input>
                    <button class="btn btn-light text-primary">
                        <span>
                            <i class="icon-radio_button_checked text-primary"></i>
                        </span>
                        <span>Add Condition</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="my-2">
            <div class="text-primary fw-bolder">
                <codx-label formModel="" name="lblNotifyWhen" default="Thông báo khi"></codx-label>
            </div>
            <div class="p-2">
                <div class="my-2">
                    <codx-input 
                        [crrValue]="form.controls['EventType'].value" 
                        (valueChange)="valueChange($event)" 
                        name="checkedCreat" 
                        type="checkbox"  
                        label="Tạo mới" 
                        [labelPosition]="'right'">
                    </codx-input>
                </div>
                <div class=" my-2">
                    <codx-input 
                        [crrValue]="form.controls['EventType'].value" 
                        (valueChange)="valueChange($event)" 
                        name="checkedDeleteLine" 
                        type="checkbox" label="Dòng bị xóa" 
                        [labelPosition]="'right'">
                    </codx-input>
                </div>
                <div class="d-flex justify-content-between my-2">
                    <codx-input 
                        [crrValue]="form.controls['EventType'].value" 
                        (valueChange)="valueChange($event)" 
                        name="checkedChange" 
                        type="checkbox" 
                        label="Giá trị trên trường thay đổi" 
                        [labelPosition]="'right'">
                    </codx-input>
                    <button class="btn btn-light text-primary">
                        <span>
                            <i class="icon-radio_button_checked text-primary"></i>
                        </span>
                        <span>Chose Fields</span>
                    </button>
                </div>
                <div class="my-2">
                    <codx-input 
                        [crrValue]="form.controls['EventType'].value" 
                        (valueChange)="valueChange($event)" 
                        name="checkedChangeTo" 
                        type="checkbox" 
                        label="Giá trị trên trường thay đổi thành" 
                        [labelPosition]="'right'">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="my-2 row">
            <div class="col-5 me-4">
                <div>
                    <codx-label formModel="" name="lblFieddata" default="Trường dữ liệu"></codx-label>
                </div>
                <div>
                    <codx-input  (valueChange)="valueChange($event)" type="combobox" [placeholder]="'chọn trường'"></codx-input>
                </div>
            </div>
            <div class="col-5">
                <div>
                    <codx-label  formModel="" name="lblValueChange" default="Giá trị thay đổi"></codx-label>
                </div>
                <div>
                    <codx-input  (valueChange)="valueChange($event)" type="text" [placeholder]="'Chọn giá trị'"></codx-input>
                </div>
            </div>
        </div>
        <div class="my-2">
            <div class="d-flex justify-content-between text-primary fw-bolder">
                <div>
                    <codx-label formModel="" name="lblNotifyFor" default="Thông báo cho"></codx-label>
                </div>
                <div>
                    <button class="btn btn-icon btn-xs btn-light-primary" (click)="openFormShare(cbbShare)">
                        <span class="icon-person_add_alt_1 icon-18"></span>
                    </button>
                </div>
                
            </div>
            <div class="p-2 border w-100" *ngIf="sendTo.length > 0">
                <ng-container *ngFor="let item of sendTo">
                    <div class="d-flex align-items-center my-2">
                        <div class="me-2">
                            <codx-img [objectId]="item.objectID" [objectType]="'AD_Users'" [width]="30"></codx-img>
                        </div>
                        <div>
                            <span>{{item.objectName}}</span>
                            <span class="icon-clear text-danger ms-2" (click)="removeUser(item)"></span>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
        <div class="my-2">
            <div class="text-primary fw-bolder">
                <codx-label formModel="" name="lblNotifyTo" default="Thông báo bằng cách"></codx-label>
            </div>
            <div class="p-2">
                <p>
                    <codx-input 
                        [crrValue]="form.controls['IsAlert'].value" 
                        (valueChange)="valueChange($event)"
                        name="checkedAlert" 
                        type="checkbox"  
                        label="Alert"
                        field="IsAlert" 
                        [labelPosition]="'right'">
                    </codx-input>
                </p>
                <p>
                    <codx-input 
                        [crrValue]="form.controls['IsMail'].value" 
                        (valueChange)="valueChange($event)"
                        name="checkedEmail" 
                        type="checkbox"
                        field="IsMail" 
                        label="Email" 
                        [labelPosition]="'right'">
                    </codx-input>
                </p>
                <p>
                    <codx-input 
                        [crrValue]="form.controls['IsSMS'].value" 
                        (valueChange)="valueChange($event)"
                        name="checkedSMS"
                        type="checkbox"
                        field="IsSMS" 
                        label="SMS" 
                        [labelPosition]="'right'">
                    </codx-input>
                </p>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #footer>
    <div class="d-flex justify-content-between">
        <div>
            <button class="btn btn-light text-primary p-2 me-2">
                <span>
                    <i class="icon-email"></i>
                </span>
                <span>Setting mail/alert</span>
            </button>
            <button class="btn btn-light text-primary p-2">
                <span>
                    <i class="icon-sms"></i>  
                </span>
                <span>Setting SMS</span>
            </button>
        </div>
        <div>
            <button (click)="submit()" class="btn btn-primary">
                <codx-label formModel="" name="lblSave" default="Lưu"></codx-label>
            </button>
        </div>
    </div>
</ng-template>

<ng-container #controlTag *ngIf="isShowCbbSendto">
    <codx-combobox-popup 
    [comboboxName]="'Users'" 
    [field]="'tagUser'" 
    [multiple]="true" 
    [width]="width"
    [height]="height" 
    [value]="''" 
    (clickSave)="saveAddUser($event)">
    </codx-combobox-popup>
</ng-container>


<ng-template #cbbShare let-dialoga>
    <codx-share 
    [dialog]="dialoga" 
    [multiple]="false" 
    listName="L1902" 
    (eventApply)="eventApply($event)">
    </codx-share>
</ng-template>