<codx-form [body]="body" (onScroll)="onScroll($event)" [subHeader]="subheader" [headerText]="'Thông báo'"
  [dialog]="dialogRef">
</codx-form>
<ng-template #subheader>
  <div class="codx-notification-filter">
    <div ngbDropdown ngbDropdownToggle #dropdown id="noti-dropdowTonggle-entityName">
      <button class="btn btn-sm btn-light-primary" *ngIf="entityName">
        <span class="w-20px" [class]="entityName.icon">
        </span>
        <span>
          {{entityName.text}}
        </span>
      </button>
      <div ngbDropdownMenu aria-labelledby="noti-dropdowTonggle-entityName" id="noti-dropdownPopup-entityName" class="dropdown-menu">
        <div ngbDropdownMenu>
          <ng-container *ngFor="let item of vllEntityName">
            <button (click)="entityNameChange(item)" ngbDropdownItem>
              <span class="me-1 text-gray-600 w-20px" [class]="item.icon">
              </span>
              <span>
                {{item.text}}
              </span>
            </button>
          </ng-container>
        </div>
      </div>
    </div>
    <!--  -->
    <div ngbDropdown ngbDropdownToggle #dropdown id="noti-dropdowTonggle-isRead">
      <button class="btn btn-sm btn-light-primary" *ngIf="isRead">
        <span class="w-20px" [class]="isRead.icon">
        </span>
        <span>
          {{isRead.text}}
        </span>
      </button>
      <div ngbDropdownMenu aria-labelledby="noti-dropdowTonggle-isRead" id="noti-dropdownPopup-isRead" class="dropdown-menu">
        <div ngbDropdownMenu>
          <ng-container *ngFor="let item of vllIsRead">
            <button (click)="isReadChange(item)" ngbDropdownItem>
              <span class="me-1 text-gray-600 w-20px" [class]="item.icon">
              </span>
              <span>
                {{item.text}}
              </span>
            </button>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #body>
  <div class="p-2">
    <ng-container *ngIf="loaded;else noData">
      <ng-container *ngIf="lstNotify.length > 0">
        <ng-container *ngFor="let item of lstNotify;index as index">
          <div>
            <ng-container *ngIf="index==0">
              <div class="d-flex justify-content-between">
                <span>
                  <codx-label class="fw-bold fs-5" [formModel]="" name="lblNew" default="Mới"></codx-label>
                </span>
                <span (click)="viewAll()">
                  <codx-label class="fst-italic fs-6 text-primary" [formModel]="" name="lblViewAll" default="Xem tất cả"></codx-label>
                </span>
              </div>
            </ng-container>
            <ng-container *ngIf="index==5">
              <div class="mt-3 row">
                <span>
                  <codx-label class="fw-bold fs-5" [formModel]="" name="lblNew" default="Trước đây"></codx-label>
                </span>
              </div>
            </ng-container>
            <div class="d-flex align-items-center p-3 my-2 bg-hover cursor-pointer " (click)="clickNotification(item,index)">
              <div class="me-3">
                <codx-img [width]="35" [objectId]="item.createdBy" [objectName]="item.createdName"
                  [objectType]="'AD_Users'"></codx-img>
              </div>
              <div class="w-100">
                <div [innerHTML]="item.textValue | fTextValue:item.text | async">
                </div>
                <span class="text-gray-500 ms-1">{{item.createdOn | timefrom}}</span>
              </div>
              <div class="w-50px d-flex justify-content-end" *ngIf="!item.read">
                <span class="dots"></span>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
  <ng-template #noData>
    <div class="text-center">
      <img style="max-width:300px" src="assets/themes/sys/default/img/DataEmpty.svg" />
      <p>{{messageNoData}}</p>
    </div>
  </ng-template>
</ng-template>