<div class="d-flex w-100 h-100 fd-personal-achieve">
    <ng-container *ngTemplateOutlet="info"></ng-container>  
    <ng-container *ngTemplateOutlet="content"></ng-container>  
</div>
<ng-template #info>
  <div class="d-flex flex-column w-320px h-100 pt-2 ps-2 pe-4 fd-achieve-info">
    <div class="d-flex flex-column h-100 bg-white justify-content-between">
      <div class="d-flex flex-column">
        <div class="d-flex flex-column justify-content-center align-items-center py-8 mx-8">
          <codx-img [objectId]="user?.userID" [objectType]="'AD_Users'" [width]="80"></codx-img>
          <div class="py-2 d-flex flex-column align-items-center">
            <span class="fw-bold fs-5-sm">{{user?.userName}}</span>
            <span class="">{{infoPersonal?.positionName}}</span>
            <span class="">{{infoPersonal?.departmentName}}</span>
          </div>
        </div>
        <div class="d-flex flex-column">
          <div class="p-4 div-per-usage-his cursor-pointer" (click)="clickActive(item)" [class.active]="item.id == active" *ngFor="let item of listFunc">
            <span>{{item.name}}</span> 
          </div>
        </div>
      </div>
      <div class="d-flex flex-column px-5">
        <div class="d-flex flex-column align-items-start py-6 px-4 pic-2-puh">
          <div class="pic-3-puh"></div>
          <div class="my-5 fw-bold text-gray-500"><span>{{user?.userName | uppercase}}</span></div>
          <div class="d-flex align-items-center justify-content-between w-100">
            <div class="d-flex flex-column text-gray-500 fs-8">
              <codx-label default="FROM"></codx-label>
              <span>{{wallets?.activedOn | fmDT: 'dmy'}}</span>
            </div>
            <div class="d-flex align-items-center text-white">
              <span class="me-2 fs-1 fw-bold">{{wallets?.coins}}</span>
              <span>xu</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #content>
  <div class="w-right pt-2 h-100" *ngIf="columnsGrid">
    <ng-container *ngIf="active == '1'">
      <codx-views
        #view
        idField="recID"
        [views]="views"
        [funcID]="funcID"
        [service]="service"
        [assemblyName]="assemblyName"
        [entityName]="entityName"
        [className]="className"
        [method]="method"
      >
      </codx-views>
    </ng-container>
    <ng-container *ngIf="active == '2'">
      <codx-views
        #view2
        idField="recID"
        [views]="views2"
        [funcID]="funcID"
        [service]="service"
        [assemblyName]="assemblyName"
        [entityName]="'FD_GiftTrans'"
        [className]="'GiftTransBusiness'"
        [method]="'GetListAsync'"
        [predicate]="'(UserID=@0 || ObjectID=@0) && ItemType=@1'"
        [dataValue]="this.user?.userID + ';1'"
      >
      </codx-views>
    </ng-container>
    <ng-container *ngIf="active == '3'">
      <codx-views
        #view2
        idField="recID"
        [views]="views3"
        [funcID]="funcID"
        [service]="service"
        [assemblyName]="assemblyName"
        [entityName]="'FD_GiftTrans'"
        [className]="'GiftTransBusiness'"
        [method]="'GetListAsync'"
        [predicate]="'(UserID=@0 || ObjectID=@0) && (ItemType=@1 || ItemType=@2 || ItemType=@3)'"
        [dataValue]="this.user?.userID + ';2;3;4'"
      >
      </codx-views>
    </ng-container>
  </div>
</ng-template>

<ng-template #rowTransDate let-data>
  <span>{{data.transDate | fmDT : 'dmy'}}</span>
</ng-template>

<ng-template #rowRefType let-data>
  <div class="d-flex flex-column">
    <codx-vll [name]="'FD015'" [value]="data.refType" [showText]="true" class="fw-bold mb-1"></codx-vll>
    <span>{{data.refNo}}</span>
  </div>
</ng-template>

<ng-template #rowTransType let-data>
  <codx-vll [name]="'FD014'" [value]="data.transType" [showText]="true"></codx-vll>
</ng-template>

<ng-template #rowStatusMyGift let-data>
  <codx-vll [name]="'FD022'" [value]="data.status" [showText]="true"></codx-vll>
</ng-template>

<ng-template #rowItemID2 let-data>
  <div class="d-flex align-items-center my-2">
    <img [src]="data.image" class="w-25px h-25px"/>
    <div class="d-flex flex-column ms-2">
      <span>{{data.itemName}}</span>
      <span class="text-primary">{{data.price * exchangerate}} VND</span>
      <span class="text-warning">{{data.price}} xu</span>
    </div>
  </div>
</ng-template>

<ng-template #rowItemID let-data>
  <div class="d-flex align-items-center">
    <img [src]="data.image" class="w-25px h-25px"/>
    <span class="ms-2">{{data.itemName}}</span>
  </div>
</ng-template>

<ng-template #rowCard let-data>
  <div *ngIf="data?.card?.situation" class="p-2 text-start" [innerHtml]="data?.card?.situation"></div>
</ng-template>

<ng-template #rowPolicy let-data>
  <span>{{data?.policy?.policyName}}</span>
</ng-template>

<ng-template #rowCoins let-data>
  <span class="fw-bold" [ngClass]="(data?.kudos >= 0) ?'text-success' : 'text-danger'">{{(data?.kudos >= 0 ? "+" : "") +data?.kudos}}</span>
</ng-template>

<ng-template #rowObjectName let-data>
  <div class="d-flex align-items-center" *ngIf="data?.objectName">
    <codx-img [objectId]="data?.userID" [objectType]="'AD_Users'"></codx-img>
    <span class="ms-2">{{data?.objectName}}</span>
  </div>
</ng-template>

