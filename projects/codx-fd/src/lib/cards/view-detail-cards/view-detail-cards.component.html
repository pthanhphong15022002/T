
<ng-container *ngIf="itemSelected">
    <div class="w-100 d-flex flex-column" id="erm_content">
        <div class="container p-6">
            <div class="d-flex">
                <!-- <ng-container *ngIf="isShowCard"> -->
                    <div class="card">
                        <div class="card-body">
                            <div class="modal-card-img card-img-overlay" *ngIf="itemSelected.background"
                                [style.background]="itemSelected.background | backgroundImage:itemSelected?.backgroundColor">
                            </div>
                            <div class="row h-100 p-4" [style.background]="itemSelected.background | backgroundImage:itemSelected?.backgroundColor">
                                <div class="card-title fw-bolder display-6"
                                    [style.color]="itemSelected?.pattern?.headerColor">
                                    {{itemSelected?.cardType | vll:'L1422':'text'|async}}
                                </div>
                                <div class="d-flex align-items-center">
                                    <codx-img class="symbol symbol-40 symbol-circle"
                                        [objectId]="itemSelected?.sender?.domainUser" objectType="AD_Users"
                                        [width]="35">
                                    </codx-img>
                                    <div class="pic-send mx-3">
                                        <img alt="Pic" src="/assets/themes/fd/default/img/img_SendCard.svg">
                                    </div>
                                    <codx-img class="symbol symbol-40 symbol-circle"
                                        [objectId]="itemSelected?.receiver?.domainUser" objectType="AD_Users"
                                        [width]="35">
                                    </codx-img>
                                </div>
                                <div class="text-dark modal-card-sms mt-6"
                                    [style.color]="itemSelected?.pattern?.textColor"
                                    [innerHTML]="itemSelected?.situation">
                                </div>
                                <div class="d-flex align-items-center group-hasGift mt-6">
                                    <div class="d-flex align-items-center mr-3" *ngIf="itemSelected?.rating">
                                        <img class="w-30px h-30px mr-2" src="../../../../assets/demos/card/rating/{{itemSelected?.rating | vll:ratingVll:'icon'
                                |async}}" />
                                        <span class="label label-xxs label-pill label-inline label-danger">
                                            {{itemSelected?.rating | vll:ratingVll:'text'|async}}
                                        </span>
                                    </div>
    
                                    <div class="d-flex align-items-start">
                                        <img src="../../../../assets/img/feedback/gift 1.png"
                                            *ngIf="itemSelected?.hasGift"
                                            class="symbol-image icon-surface1 h-30px mr-2" />
                                        <img src="../../../../assets/img/feedback/money-1.png"
                                            *ngIf="itemSelected?.hasPoint"
                                            class="symbol-image icon-money-1 h-30px mr-2" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <!-- </ng-container> -->
                <div class="flex-grow-1">
                    <div class="text-primary fw-bolder">
                        <codx-label formName="" name="lblSender" default="Người gửi"></codx-label>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <div class="d-flex align-items-center user-card py-3">
                            <codx-img class="symbol symbol-40 symbol-circle"
                                [objectId]="itemSelected?.sender?.domainUser" objectType="AD_Users"
                                [width]="35">
                            </codx-img>
                            <div class="d-flex flex-column flex-grow-1 ms-2">
                                <div class="text-dark fw-bolder">
                                    {{itemSelected?.sender?.employeeName}}</div>
                                <div class="text-dark">{{itemSelected?.sender.positionName}}
                                </div>
                            </div>
                            <!-- <div *ngIf="tabActive == STATUS_ACTIVE.APPROVER">
                                <ng-container *ngIf="itemSelected?.approveStatus == '0';else Approval">
                                    <div class="d-flex flex-column ml-6"
                                        *ngIf="approver && tabActive == STATUS_ACTIVE.APPROVER && itemSelected?.approveStatus == '0'">
                                        <button class="btn btn-sm mb-2 btn-outline-success"
                                            (click)="changeStatusApprovel('1')">
                                            <span>Đồng thuận</span>
                                        </button>
                                        <button class="btn btn-sm mb-2 btn-outline-success"
                                            (click)="changeStatusApprovel('2')">
                                            <span>Không đồng thuận</span>
                                        </button>
                                    </div>
                                </ng-container>
                                <ng-template #Approval>
                                    <div class="pl-20">
                                        <p>Đã xét duyệt: {{itemSelected?.approveStatus | vll:'L1425':'text'
                                            |async}}</p>
                                    </div>
                                </ng-template>
                            </div> -->
    
                        </div>
                    </div>
                    <ng-container *ngIf="itemSelected?.receiver">
                        <div class="text-primary fw-bolder mt-6"><codx-label formName="" name="lblReciver" default="Người nhận"></codx-label></div>
                        <div class="d-flex justify-content-between">
                            <div class="d-flex align-items-center user-card py-3">
                                <codx-img class="symbol symbol-40 symbol-circle mr-3"
                                    [objectId]="itemSelected?.receiver?.domainUser" objectType="AD_Users"
                                    [width]="35">
                                </codx-img>
                                <div class="d-flex flex-column flex-grow-1 ms-2">
                                    <div class="text-dark fw-bolder">
                                        {{itemSelected?.receiver?.employeeName}}</div>
                                    <div class="text-dark">
                                        {{itemSelected?.receiver?.positionName}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="itemSelected?.industry">
                        <div class="text-primary font-weight-bold mt-6">
                            {{itemSelected?.cardType == "4" ? "Lĩnh vực cải tiến":"Lĩnh vực chia sẻ"}}</div>
                        <div class="mt-3 group-files">
                            <div class="text-dark font-weight-bold">{{itemSelected?.industryName}}
                            </div>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="itemSelected?.behavior  && itemSelected?.behavior.length">
                        <div class="text-primary fw-bolder mt-6"><codx-label formName="" name="lblBehavior" default="Quy tắc ứng xử"></codx-label></div>
                        <div class="mt-3 group-files" *ngFor="let item of itemSelected?.behavior">
                            <div class="text-dark">{{item?.name}}</div>
                        </div>
                    </ng-container>
                    <div class="mt-3">
                        <ng-container *ngIf="itemSelected?.files  && itemSelected?.files.length">
                            <div class="text-primary fw-bolder mt-6 mb-2"><codx-label formName="" name="lblFiles" default="Tệp tin"></codx-label></div>
                            <div class="mt-3 group-files" *ngFor="let item of itemSelected?.files">
                                <ng-container *ngTemplateOutlet="templateFile; context:{item:item}">
                                </ng-container>
                            </div>
                        </ng-container>
                    </div>
                    <!-- <ng-container *ngIf="!isShowCard"> -->
                        <div class="text-primary fw-bolder mt-4"><codx-label formName="" name="lblSituation" default="Nội dung"></codx-label></div>
                        <div class="modal-card-sms mt-3" [style.color]="itemSelected?.pattern?.textColor"
                            [innerHTML]="itemSelected?.situation">
                        </div>
                    <!-- </ng-container> -->
                </div>    
            </div>
            <div class="mt-6 clear">
                <ng-container *ngIf="itemSelected?.sharedWiths  && itemSelected.sharedWiths.length">
                    <div class="text-primary fw-bolder mb-4"><codx-label formName="" name="lblShare" default="Chia sẻ"></codx-label></div>
                    <div class="share-item" *ngFor="let item of itemSelected?.sharedWiths">
                        <ng-container *ngTemplateOutlet="templateShare; context:{$implicit:item}"></ng-container>
                    </div>
                </ng-container>
            </div>
            <div class="mt-6 clear">
                <ng-container *ngIf="itemSelected?.gifts  && itemSelected?.gifts.length">
                    <div class="text-primary fw-bolder"><codx-label formName="" name="lblGift" default="Quà tặng"></codx-label></div>
                    <div class="mt-9 group-gifts" *ngFor="let item of itemSelected?.gifts">
                        <ng-container *ngTemplateOutlet="templateGift  context:{ $implicit: item}"></ng-container>
                    </div>
                </ng-container>
            </div>
            <div class="mt-6 clear" *ngIf="itemSelected?.point">
                <div class="text-primary fw-bolder mb-2">
                    <codx-label formName="" name="lblGiftCoins1" default="Tặng xu"></codx-label>
                </div>
                <div class="d-flex align-items-center">
                    <div class="d-flex align-items-center">
                        <div class="w-20px ml-4">
                            <img alt="Pic" src=".../../../assets/demos/svg/dollar.png">
                        </div>
                        <div class="ms-5 fw-bolder">
                            <codx-label formName="" name="lblGiftCoins2" default="Tặng xu"></codx-label>
                        </div>
                    </div>
                    <div class="ms-3">{{itemSelected.point}}</div>
                </div>
            </div>
        </div>
    </div>
</ng-container>




<ng-template #templateFile let-item>

    <div class="d-flex">
        <div class="mr-3">
            <img class="max-h-40px" [src]="item.extension | avtFile" />
        </div>
        <div class="d-flex flex-column flex-grow-1">
            <div class="text-dark">{{item.fileName}}</div>
            <div class="text-dark-50 font-size-sm">{{item.createdOn | fmDT:'dmy'}}</div>
        </div>
        <!-- <div class="icon-download text-hover-primary icon-20 ml-2" (click)="downloadFile(item)"></div> -->
    </div>
</ng-template>


<ng-template #templateShare let-item>
    <div class="">
        <codx-img objectType="AD_Users" [objectId]="item.objectID"
            class="symbol symbol-circle symbol-30 mr-3" [width]="35">
        </codx-img>
    </div>
</ng-template>



<ng-template #templateGift let-item>
    <div class="row">
        <div class="col-3">
            <codx-img class="max-h-80px w-80px h-80px" [objectId]="item.giftID"
            objectType="FD_Gifts" [width]="200">
        </codx-img>
        </div>
        <div class="col-9 d-flex flex-column">
            <div class="text-dark font-weight-bold">{{item.giftName}}</div>
            <div class="text-dark">
                <span class="font-weight-normal text-dark-50">
                    <codx-label formName=""name="lblPrice" default="Giá:"></codx-label>
                </span>
                <span class="ms-1">{{item.price}}</span>
                <span class="ms-1">
                    <codx-label formName="" name="lblCoin" default="xu"></codx-label>
                </span> 
            </div>
            <div class="text-dark">
                <span class="font-weight-normal text-dark-50 mr-1">
                    <codx-label formName="" name="lblNotes" default="Chú thích:"></codx-label>
                </span>
                <span [innerHTML]="item.memo"></span>
            </div>
            <div class="text-dark">
                <span class="font-weight-normal text-dark-50 mr-1">
                    <codx-label formName="" name="lblCount" default="Số lượng:"></codx-label>
                </span>
                <span>{{item.quantity}}</span>
            </div>
            <div class="d-flex mt-2">
                <div class="px-2 b rounded-pill"
                    [style.color]="item.status|vll:'L1428':'color'|async"
                    [style.background-color]="(item.status|vll:'L1428':'color'|async)+'30'">
                    {{item.status|vll:"L1428":"text"|async}}
                </div>
            </div>
        </div>
    </div>
</ng-template>