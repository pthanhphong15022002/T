
<codx-views #codxViews  
    [entityName]="entityName" 
    [views]="views" 
    [idField]="'recID'"
    [autoLoad]="true"
    [button]="buttonAdd" 
    service="FD"
    assemblyName="ERM.Business.FD" 
    className="CardsBusiness" 
    method="GetListDataByWebAsync"
    [predicate]="predicate" 
    [dataValue]="dataValue" 
    [entityName]="entityName"
    (buttonClick)="clickShowAssideRight()">
</codx-views>

<ng-template #templateItem let-item>
    <div id="listItemOfGifts" (click)="clickItem(item.recID)">
        <div class="list-item d-flex master-item" #row [attr.data-_id]="item.recID">
            <div *ngIf="cardType != CARDTYPE_EMNUM.SuggestionImprovement && cardType != CARDTYPE_EMNUM.Share">
                <codx-img class="symbol symbol-40 symbol-circle mr-3" [objectId]="item.sender"
                    objectType="AD_Users" [width]="60">
                </codx-img>
                
            </div>
            <div *ngIf="cardType == CARDTYPE_EMNUM.SuggestionImprovement">
                <codx-img class="symbol symbol-40 symbol-circle mr-3" *ngIf="tabActive == STATUS_ACTIVE.CARD"
                    [objectId]="item.sender" objectType="AD_Users" [width]="60">
                </codx-img>
                
            </div>
            <div *ngIf="cardType == CARDTYPE_EMNUM.Share && tabActive == STATUS_ACTIVE.CARD">
                <ng-container *ngIf="item.countComments > 1; else elsImg">
                    <img class="symbol symbol-40 symbol-circle mr-3 w-40px h-40px" src="../../../../assets/img/AvatarGroup.png">
                </ng-container>
                <ng-template #elsImg>
                    <codx-img class="symbol symbol-40 symbol-circle mr-3" 
                        [objectId]="item.receiver" 
                        objectType="AD_Users">
                    </codx-img>
                </ng-template>
            </div>
            <div class="d-flex flex-column flex-grow-1 ms-4">
                <div class="d-flex justify-content-between">
                    <ng-container *ngIf="cardType !== CARDTYPE_EMNUM.Share">
                        <div class="text-dark fw-bolder">
                            {{item.senderName}}
                        </div>
                    </ng-container>
                    <ng-container *ngIf="cardType == CARDTYPE_EMNUM.Share">
                        <div class="text-dark fw-bolder" *ngIf="tabActive == STATUS_ACTIVE.CARD">
                            {{ item.tagType | displayname:item.receiverName:item.countComments }}
                        </div>
                        
                    </ng-container>

                </div>
                <div class="d-flex justify-content-between">
                    <div class="text-dark font-weight-italic">{{item.postionName}}</div>
                </div>
                <div class="fed-des text-dark" [innerHTML]="item?.situation"></div>
                <div class="d-flex align-items-center">
                    <div *ngIf="cardType != CARD_TYPE.SHARE"
                        class="px-2 b rounded-pill"
                        [style.border-color]="(item[TypeValuelistStatus]|vll:NameValuelistStatus:'color'|async)+'30'"
                        [style.background-color]="(item[TypeValuelistStatus]|vll:NameValuelistStatus:'color'|async)+'30'"
                        [style.color]="item[TypeValuelistStatus]|vll:NameValuelistStatus:'color'|async">
                        {{item[TypeValuelistStatus]|vll:NameValuelistStatus:"text"|async}}
                    </div>
                    <div class="text-muted ms-4">
                        {{item.createdOn | fmDT:'dmy'}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #templateGift let-item>
    <div class="row">
        <div class="col-3">
            <codx-img class="max-h-80px w-80px h-80px" [objectId]="item.giftID"
            objectType="FD_Gifts" [width]="200">
        </codx-img>
        </div>
        <div class="col-9 d-flex flex-column">
            <div class="text-dark font-weight-bold">{{item.giftName}}</div>
            <div class="text-dark">
                <span class="font-weight-normal text-dark-50">
                    <codx-label formName=""name="lblPrice" default="Giá:"></codx-label>
                </span>
                <span class="ms-1">{{item.price}}</span>
                <span class="ms-1">
                    <codx-label formName="" name="lblCoin" default="xu"></codx-label>
                </span> 
            </div>
            <div class="text-dark">
                <span class="font-weight-normal text-dark-50 mr-1">
                    <codx-label formName="" name="lblNotes" default="Chú thích:"></codx-label>
                </span>
                <span [innerHTML]="item.memo"></span>
            </div>
            <div class="text-dark">
                <span class="font-weight-normal text-dark-50 mr-1">
                    <codx-label formName="" name="lblCount" default="Số lượng:"></codx-label>
                </span>
                <span>{{item.quantity}}</span>
            </div>
            <div class="d-flex mt-2">
                <div class="px-2 b rounded-pill"
                    [style.color]="item.status|vll:'L1428':'color'|async"
                    [style.background-color]="(item.status|vll:'L1428':'color'|async)+'30'">
                    {{item.status|vll:"L1428":"text"|async}}
                </div>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #templateFile let-item>
    <div class="d-flex">
        <div class="mr-3">
            <img class="max-h-40px" src="../../../../assets/demos/dms/" />
        </div>
        <div class="d-flex flex-column flex-grow-1">
            <div class="text-dark">{{item.fileName}}</div>
            <div class="text-dark-50 font-size-sm">{{item.createdOn | fmDT:'dmy'}}</div>
        </div>
        <div class="icon-download text-hover-primary icon-20 ml-2"></div>
    </div>
</ng-template>
<ng-template #templateShare let-item="item">
    <div class="d-flex align-items-center">
        <codx-img objectType="AD_Users" [objectId]="item.objectID"
            class="symbol symbol-circle symbol-30 mr-3" [width]="40">
        </codx-img>
        <div class="text-dark font-weight-bold">{{item.objectName}}</div>
    </div>
</ng-template>
<ng-template #emptySelected>
    <div class="empty-data"></div>
</ng-template>
<ng-template #panelLeftRef>
    <div class="page-home page-master">
        <div class="d-flex flex-row">
            <div id="erm_tree" class="min-w-350px w-350px">
                <div class="tab-horizone">
                    <ul class="nav nav-tabs nav-tabs-line row">
                        <li class="nav-item col">
                            <a class="nav-link " *ngIf="tabApproval" [class.active]="tabActive == STATUS_ACTIVE.CARD"
                                data-toggle="tab" href="#gift_1" (click)="changeOptionStatus(STATUS_ACTIVE.CARD)">
                                <span class="nav-text">{{functionID == functionName.Share ?
                                    'Nhận chia sẻ':"Phiếu"}}</span>
                            </a>
                        </li>
                        <li class="nav-item col" *ngIf="tabApproval">
                            <a class="nav-link" [class.active]="tabActive == STATUS_ACTIVE.APPROVER" data-toggle="tab"
                                href="#gift_3" (click)="changeOptionStatus(STATUS_ACTIVE.APPROVER)">
                                <span class="nav-text">
                                    <codx-label formName="" name="lblApprove" default="Xét duyệt"></codx-label>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="gift_1" role="tabpanel">
                        </div>
                        <div class="tab-pane fade" id="gift_2" role="tabpanel">
                        </div>
                        <div class="tab-pane fade" id="gift_3" role="tabpanel">
                        </div>
    
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="offcanvas-overlay"></div>
</ng-template>

<ng-template #itemTemplate let-data>
    <div (click)="selectedItem(data)">
        <codx-temp-full 
            [dataItem]="data"
            [typeMF]="'hover'" 
            [formModel]="codxViews.formModel"
            imgCss="me-2"
            cardCss="card-template border-bottom px-2 py-3" 
            [title]="data.senderName"
            [date]="data.createdOn"
            [bookmark]="false">
        </codx-temp-full>
    </div>
</ng-template>


<ng-template #panelRightRef>
    <ng-container *ngIf="itemSelected">
        <lib-view-detail-cards [itemSelected]="itemSelected" [cardType]="itemSelected.cardType"></lib-view-detail-cards>
    </ng-container>
</ng-template>


<ng-template #cardDisplay>
</ng-template>