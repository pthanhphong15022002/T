<codx-views #codxViews
[views]="views" 
[autoLoad]="false" 
[idField]="'recID'">
</codx-views>

<ng-template #panelContent>
    <div class="page-home bg-body p-6 rounded-4">
        <div class="d-flex">
            <div class="home-center w-100">
                <app-list-post [module]="'FD'" [isShowCreate]="false" [codxViews]="codxViews"></app-list-post>
            </div>
            <div class="home-right w-350px min-w-350px ms-6 border-left">
                <div class="card-box border-bottom mb-6">
                    <div class="box-header d-flex justify-content-between align-items-center mb-4">
                        <h4 class="box-title">
                            <codx-label [formModel]="codxViews.formModel" name="lblFeedbackMessage"
                                default="Thông điệp phản hồi">
                            </codx-label>
                        </h4>
                    </div>
                    <div class="box-body">
                        <div class="thongdiep-group ps-6">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <div class="text-dark fw-bolder">
                                    <codx-label [formModel]="codxViews.formModel" name="lblCommendation"
                                        default="Tuyên dương"></codx-label>
                                </div>
                                <div class="d-flex w-100px justify-content-end">
                                    <div class="d-flex align-items-center me-6">
                                        <span class="text-dark me-2">{{ reciver['1'] ?? 0}}</span>
                                        <span class="icon-doc_in icon-18 text-primary"></span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <span class="text-dark me-2">{{sender['1'] ?? 0}}</span>
                                        <span class="icon-doc_out icon-16 text-warning"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <div class="text-dark fw-bolder">
                                    <codx-label [formModel]="codxViews.formModel" name="lblThankYouNot"
                                        default="Lời cảm ơn"></codx-label>
                                </div>
                                <div class="d-flex w-100px justify-content-end">
                                    <div class="d-flex align-items-center me-6">
                                        <span class="text-dark me-2">{{ reciver['2'] ?? 0}}</span>
                                        <span class="icon-doc_in icon-18 text-primary"></span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <span class="text-dark me-2">{{sender['2'] ?? 0}}</span>
                                        <span class="icon-doc_out icon-16 text-warning"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <div class="text-dark fw-bolder">
                                    <codx-label [formModel]="codxViews.formModel" name="" default="Góp ý thay đổi">
                                    </codx-label>
                                </div>
                                <div class="d-flex w-100px justify-content-end">
                                    <div class="d-flex align-items-center me-6">
                                        <span class="text-dark me-2">{{ reciver['3'] ?? 0}}</span>
                                        <span class="icon-doc_in icon-18 text-primary"></span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <span class="text-dark me-2">{{sender['3'] ?? 0}}</span>
                                        <span class="icon-doc_out icon-16 text-warning"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <div class="text-dark fw-bolder">
                                    <codx-label [formModel]="codxViews.formModel" name="lblImprovement"
                                        default="Đề xuất cải tiến">
                                    </codx-label>
                                </div>
                                <div class="d-flex w-100px justify-content-end">
                                    <div class="d-flex align-items-center me-6">
                                        <span class="text-dark me-2">{{ reciver['4'] ?? 0}}</span>
                                        <span class="icon-doc_in icon-18 text-primary"></span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <span class="text-dark me-2">{{sender['4'] ?? 0}}</span>
                                        <span class="icon-doc_out icon-16 text-warning"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-box mt-6">
                    <div class="box-header d-flex align-items-center justify-content-between mb-5">
                        <h4 class="box-title mb-0">
                            <codx-label name="lblEmpWalletHistory" default="Giao dịch phát sinh gần nhất"
                                [formModel]="codxViews.formModel">
                            </codx-label>
                        </h4>
                    </div>
                    <div class="box-body">
                        <div class="history-box">
                            <codx-listview
                                [itemTemplate]="tmpHistoryCoins" #listviewCoins 
                                service="FD"
                                assemblyName="ERM.Business.FD" 
                                className="KudosTransBusiness"
                                method="HistoryWalletAsync" 
                                [predicate]="predicateCoins" 
                                [dataValue]="dataValueCoins"
                                entityName="FD_KudosTrans">
                            </codx-listview>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #tmpHistoryCoins let-item>
    <div class="d-flex align-items-start wallet-item me-2">
        <div class="me-3 max-h-40">
            <ng-container *ngIf="item.transType == '1' || item.transType == '4' ; else fieldTransType">
                <img class="w-40px" src="/assets/demos/svg/{{ item.refType | vll:'L1422' : 'icon' | async }}">
            </ng-container>
            <ng-template #fieldTransType>
                <img class="w-40px" src="/assets/demos/svg/{{ item.transType | vll:'L1427' : 'icon' | async }}">
            </ng-template>
        </div>
        <div class="d-flex flex-column flex-grow-1">
            <div class="text-dark fw-bolder">
                <!-- <ng-container [ngSwitch]="item.transType">
                    <ng-container *ngSwitchCase="'1'">
                        <span>{{item.ReciverName}}</span>
                    </ng-container>
                    <ng-container *ngSwitchCase="'1'">
                        <span>{{item.ReciverName}}</span>
                    </ng-container>
                </ng-container> -->
                <span>{{item.title}}</span>
            </div>
            <div class="text-dark-75 font-size-sm" *ngIf="item.refType">
                {{item.refType| vll:'L1422':'text'|async}}
            </div>
            <div class="text-muted font-size-sm">{{item?.createdOn | fmDT:'dmy'}}</div>
        </div>
        <div class="d-flex align-items-center text-center">
            <ng-container *ngIf="item.transType =='4';else elsTmp">
                <span [ngClass]="item.coCoins > 0 ? 'text-success':'text-danger'">
                    {{item.coCoins> 0?"+":""}}{{item.coCoins}}
                </span>
                <span [ngClass]="item.coCoins > 0 ? 'text-success ms-1':'text-danger ms-1'">
                    <codx-label [formModel]="codxViews.formModel" name="lblCoins" default="xu"></codx-label>
                </span>
            </ng-container>
            <ng-template #elsTmp>
                <span [ngClass]="item.coins > 0 ? 'text-success':'text-danger'">
                    {{item?.coins > 0?"+":""}}{{item?.coins}}
                </span>
                <span [ngClass]="item.coins > 0 ? 'text-success ms-1':'text-danger ms-1'">
                    <codx-label [formModel]="codxViews.formModel" name="lblCoins" default="xu"></codx-label>
                </span>
            </ng-template>
        </div>
    </div>
</ng-template>

