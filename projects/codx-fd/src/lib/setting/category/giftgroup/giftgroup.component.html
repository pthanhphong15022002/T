<codx-views [views]="views" #viewbase [funcID]="funcID" [entityName]="'FD_Gifts'"
    (buttonClick)="openFormCreate($event, true)" [button]="button" idField="giftID"></codx-views>

<ng-template #panelLeft>
    <div class="list-table">
        <codx-gridview #gridView [columnsGrid]="columnsGrid" [itemTemplate]="itemTemplate" service="FD"
            assemblyName="ERM.Business.FD" className="GiftsBusiness" method="LoadDataGiftGroupAsync"
            [predicate]="'Category=@0'" [dataValue]="'0'" type="tableview" entityName="FD_Gifts" [pageSize]="15"
            [height]="'570'" [headerStyle]="headerStyle" [columnStyle]="columnStyle"></codx-gridview>
    </div>
</ng-template>

<ng-template #panelRightRef>
    <!-- offcanvas cập nhật thông tin -->
    <div id="canvas_nhomqua" class="offcanvas offcanvas-md offcanvas-right">
        <div class="offcanvas-header" kt-hidden-height="46">
            <div class="d-flex align-items-center justify-content-between header">
                <h2 class="m-0">
                    <codx-label *ngIf="isAddMode" name="lblTitleAddIndustries" formName="FD_Gifts" default="Thêm mới">
                    </codx-label>
                    <codx-label *ngIf="!isAddMode" name="lblTitleEditIndustries" formName="FD_Gifts"
                        default="Chỉnh sửa">
                    </codx-label>
                </h2>
                <a class="btn btn-xs btn-icon btn-light btn-hover-primary">
                    <span (click)="clickClosePopup()" class="icon-close icon-18"></span>
                </a>
            </div>
        </div>
        <div class="offcanvas-content content">
            <!-- <form [formGroup]="addEditForm">
                <div class="offcanvas-wrapper">
                    <div class="d-flex">
                        <div class="flex-grow-1">
                            <div class="form-group">
                                <codx-label name="lblGiftID" formName="FD_Gifts" default="Mã quà tặng">
                                </codx-label>
                                <codx-input type="text" class="form-control" [attr.disabled]="!isAddMode ? '' : null"
                                    formControlName="giftID" placeholder="ITEM20210206001"></codx-input>
                            </div>
                            <div class="form-group">
                                <codx-label name="lblGiftName" formName="FD_Gifts" default="Tên nhóm quà">
                                </codx-label>
                                <codx-input type="text" class="form-control" placeholder="Điện thoại iPhone 12 64GB"
                                    formControlName="giftName"
                                    [ngClass]="{
                                    'is-invalid': addEditForm.controls['giftName'].invalid && addEditForm.controls['giftName']?.touched}">
                                    </codx-input>
                            </div>
                            <div class="form-group mt-3">
                                <codx-label name="lblMemoGiftGroup" formName="FD_Gifts" default="Mô tả">
                                </codx-label>
                                <codx-input type="textarea" class="form-control test-textarea" rows="3" formControlName="memo"></codx-input>
                            </div>
                            <div class="form-group mt-3">
                                <codx-input type="checkbox" name="checkbox" class="" ngDefaultControl field="stop"
                                    (valueChange)="valueChange($event, null)"
                                    [checked]="addEditForm.controls['stop'].value" label="">
                                </codx-input>
                                <label class="ml-2">
                                    <codx-label name="lblStop" formName="FD_Gifts" default="Ngưng sử dụng">
                                    </codx-label>
                                </label>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer pt-4 footer">
                    <button type="submit" class="btn btn-primary" (click)="OnSaveForm()">Lưu</button>
                </div>
            </form> -->
            <div class="offcanvas-wrapper">
                <div class="d-flex">
                    <div class="flex-grow-1">
                        <div class="form-group">
                            <div class="font-w500 font-1rem">
                                <codx-label name="lblGiftID" formName="FD_Gifts" default="Mã quà tặng">
                                </codx-label>
                                <span class="required"></span>
                            </div>
                            <codx-input type="text" class="form-control" [disabled]="isAddMode ? false : true"
                                formControlName="giftID" placeholder="ITEM20210206001"
                                (valueChange)="valueChange($event)" field="giftID"
                                [crrValue]="addEditForm.controls['giftID'].value">
                            </codx-input>
                        </div>
                        <div class="form-group">
                            <codx-label name="lblGiftName" formName="FD_Gifts" default="Tên nhóm quà"
                                class="font-w500 font-1rem">
                            </codx-label>
                            <span class="required"></span>
                            <codx-input type="text" class="form-control" placeholder="Điện thoại iPhone 12 64GB"
                                formControlName="giftName" [crrValue]="addEditForm.controls['giftName'].value"
                                (valueChange)="valueChange($event)" field="giftName"
                                [ngClass]="{
                                'is-invalid': addEditForm.controls['giftName'].invalid && addEditForm.controls['giftName']?.touched}">
                            </codx-input>
                        </div>
                        <div class="form-group mt-3">
                            <codx-label name="lblMemoGiftGroup" formName="FD_Gifts" default="Mô tả"
                                class="font-w500 font-1rem">
                            </codx-label>
                            <span class="required"></span>
                            <codx-input type="textarea" class="form-control test-textarea" rows="3"
                                formControlName="memo" [crrValue]="addEditForm.controls['memo'].value"
                                (valueChange)="valueChange($event)" field="memo">
                            </codx-input>
                        </div>
                        <div class="form-group mt-3">
                            <codx-input type="checkbox" name="checkbox" class="test-check" ngDefaultControl field="stop"
                                (valueChange)="valueChange($event)" [checked]="addEditForm.controls['stop'].value"
                                label="">
                            </codx-input>
                            <label class="ml-2 font-w500 font-1rem">
                                <codx-label name="lblStop" formName="FD_Gifts" default="Ngưng sử dụng">
                                </codx-label>
                            </label>

                        </div>
                    </div>
                </div>
            </div>
            <div class="card-footer pt-4 footer">
                <button type="submit" class="btn btn-primary" (click)="onSaveForm()">Lưu</button>
            </div>
        </div>
    </div>
    <div class="offcanvas-overlay"></div>
</ng-template>

<ng-template #itemCreateBy let-dataItem>
    <div (mouseenter)="PopoverEmpEnter(empPopover, dataItem)">
        <div class="d-flex align-items-center" #itemCreateBy #empPopover="ngbPopover" [ngbPopover]="moreFunction"
            placement="top" container="body">
            <div class="h-30 w-30">
                <codx-img class="symbol symbol-30px symbol-circle me-4" [objectType]="'AD_Users'"
                    [objectId]="dataItem?.createdBy" [width]="30">
                </codx-img>
            </div>
            <div *ngIf="userName == ''" class="text-dark">{{dataItem.createName}}</div>
            <div *ngIf="userName != ''" class="text-dark">{{userName}}</div>
        </div>
    </div>
</ng-template>

<ng-template #memo let-item>
    <span [innerHTML]="item.memo"></span>
</ng-template>

<ng-template #moreFunction>
    <div class="flex">
        <a class="action-item d-flex align-items-center">
            <span class="icon-edit icon-18 ml-2 mr-2 active" (click)="openFormCreate(dataItem, false)"></span>
        </a>
        <a class="action-item d-flex align-items-center" (click)="deleteGift(dataItem)">
            <span class="icon-close icon-18 text-danger mx-2"></span>
        </a>
    </div>
</ng-template>
<ng-template #itemTemplate>
    <div>
        <td>
            <div class="dropdown">
                <button class="btn btn-icon btn-xs" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <span class="icon-more_vert icon-20"></span>
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item">
                        <div class="d-flex align-items-center">
                            <span class="icon-create icon-18"></span>
                            <span class="ml-3">
                                <codx-label name="lblUpdateGiftGroup" formName="FD_Gifts" default="Chỉnh sửa">
                                </codx-label>
                            </span>
                        </div>
                    </a>
                    <a class="dropdown-item">
                        <div class="d-flex align-items-center">
                            <span class="icon-delete icon-18"></span>
                            <span class="ml-3">
                                <codx-label name="lblUpdateGiftGroup" formName="FD_Gifts" default="Xóa">
                                </codx-label>
                            </span>
                        </div>
                    </a>
                </div>
            </div>
        </td>
        <td>
            <codx-label name="lblCodeGiftGroup" formName="FD_Gifts" default="R2021001">
            </codx-label>
        </td>
        <td>
            <div class="w-150px">
                <codx-label name="lblTech" formName="FD_Gifts" default="Điện tử">
                </codx-label>
            </div>
        </td>
        <td>
            <div class="text-dark-50">
                <codx-label name="lblMemoOtherGiftGroup" formName="FD_Gifts" default="Chủ động lắng nghe phản hồi cụ thể và
                giải quyết kịp
                thời
                nhu cầu của khách
                hàng, các đối tác, nhà cung cấp và các bên liên quan để đạt được mục đích và
                mong đợi giữa các bên">
                </codx-label>
            </div>
        </td>
        <td>
            <div class="d-flex align-items-center user-200px">
                <div class="symbol symbol-24 symbol-circle mr-3">
                    <img alt="Pic" src="../../../assets/demos/user/user7.jpg">
                </div>
                <div class="text-dark">
                    <codx-label name="lblName" formName="FD_Gifts" default="Lê Thị Bảo Ngọc">
                    </codx-label>
                </div>
            </div>
        </td>
        <td>
            <div class="erm-date">
                <codx-label name="lblDate" formName="FD_Gifts" default="27/7/2021">
                </codx-label>
            </div>
        </td>
    </div>
</ng-template>

<ng-template #createdOn let-item>
    <span>{{item.createdOn | date:'dd/MM/yyy'}}</span>
</ng-template>