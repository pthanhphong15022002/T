<div class="d-flex flex-row flex-column-fluid page page-detail">
    <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
        <div id="erm_content" class="d-flex flex-column-fluid setting2">
            <div class="container">
                <div class="d-flex">
                    <div class="aside-detail flex-row-auto w-300px">
                        <div class="aside-menu me-6">
                            <ul class="menu-nav">
                                <li class="menu-item" (click)="redirectPage('notificationFeedback', 1)">
                                    <a class="menu-link d-flex align-items-center">
                                        <i class="icon-near_me icon-20 me-2"></i>
                                        <codx-label name="lblFeedbackMessage" [formName]="functionList?.formName"
                                            [gridViewName]="functionList?.gridViewName" default='Thông điệp phản hồi'>
                                        </codx-label>
                                    </a>
                                </li>
                                <li class="menu-item" (click)="redirectPage('itemCategory', 2)">
                                    <a class="menu-link d-flex align-items-center">
                                        <i class="icon-format_list_bulleted icon-20 me-2"></i>
                                        <codx-label name="lblCategory" [formName]="functionList?.formName"
                                            [gridViewName]="functionList?.gridViewName" default='Danh mục'>
                                        </codx-label>
                                    </a>
                                </li>
                                <li class="menu-item menu-item-active">
                                    <a class="menu-link d-flex align-items-center">
                                        <i class="icon-account_balance_wallet icon-20 me-2"></i>
                                        <codx-label name="lblWallet" [formName]="functionList?.formName"
                                            [gridViewName]="functionList?.gridViewName" default='Ví nhân viên'>
                                        </codx-label>
                                    </a>
                                </li>
                                <li class="menu-item" (click)="redirectPage('itemRankDedication', 3)">
                                    <a class="menu-link d-flex align-items-center">
                                        <i class="icon-credit_card icon-20 me-2"></i>
                                        <codx-label name="lblDedicateRank" [formName]="functionList?.formName"
                                            [gridViewName]="functionList?.gridViewName" default='Hạng cống hiến'>
                                        </codx-label>
                                    </a>
                                </li>
                                <li class="menu-item" (click)="redirectPage('itemStatistical', 4)">
                                    <a class="menu-link d-flex align-items-center">
                                        <i class="icon-bar_chart icon-20 me-2"></i>
                                        <codx-label name="lblStatistical" [formName]="functionList?.formName"
                                            [gridViewName]="functionList?.gridViewName" default='Thống kê'>
                                        </codx-label>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-grow-1 h-100">
                        <div class="list-group">
                            <div class="list-content">
                                <div class="d-flex justify-content-between mb-6">
                                    <span class="icon-arrow_back icon-22 me-5 text-hover-primary"
                                        (click)="backLocation()"></span>
                                    <div class="d-flex flex-column flex-grow-1">
                                        <div class="fs-3 fw-bold text-dark mb-1">
                                            {{policy?.policyName}}</div>
                                        <div class="text-gray-500">{{policy?.memo}}</div>
                                        <div class="text-primary font-italic text-italic">
                                            <codx-label fiedName="" [formName]="functionList?.formName"
                                                [gridViewName]="functionList?.gridViewName" default="(*) Lưu ý: Chức danh nhân viên bỏ trống sẽ áp
                                                dụng cho tất cả các chức danh không được thiết lập">
                                            </codx-label>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-ranking mt-6 ps-14">
                                    <table class="table list-ranking">
                                        <thead>
                                            <tr>
                                                <th scope="col">
                                                    <codx-label fiedName="" [formName]="functionList?.formName"
                                                        [gridViewName]="functionList?.gridViewName"
                                                        default="Chức danh">
                                                    </codx-label>
                                                </th>
                                                <th scope="col">
                                                    <codx-label fiedName="" [formName]="functionList?.formName"
                                                        [gridViewName]="functionList?.gridViewName"
                                                        default="Số dư quỹ cho">
                                                    </codx-label>
                                                </th>
                                                <th scope="col">
                                                    <div class="d-flex justify-content-center"> <button
                                                            class="btn btn-outline-primary"
                                                            (click)="open(content, null, true)">+</button></div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of lstPolicyLine">
                                                <td>{{item.itemSelectName}}</td>
                                                <td class="w-150px fs-6 fw-bold">
                                                    <div class="d-flex" #ele>
                                                        <span class="me-1 oparator"
                                                            [style.color]="item.value < 0 ? 'red' : 'green'">
                                                            {{item.value
                                                            < 0 ? "-" : "+" }}</span>{{item.value < 0 ? item.value * -1
                                                                    : item.value}} </div>
                                                </td>
                                                <td class="w-100px">
                                                    <div ngbDropdown class="dropdown" container="body">
                                                        <a href="javascript:void(0)"
                                                            class="btn btn-clean btn-light-primary btn-sm btn-icon"
                                                            ngbDropdownToggle id="dropdownMenuButton1"
                                                            aria-expanded="false">
                                                            <i class="icon-more_vert icon-20 text-gray-700"></i>
                                                        </a>
                                                        <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
                                                            <li>
                                                                <a (click)="open(content, item, false)" ngbDropdownItem
                                                                    href="javascript:void(0)">
                                                                    <span [class]="'icon-create icon-18'"></span>
                                                                    <span class="ms-3">
                                                                        <codx-label name="lblUpdate" [formModel]=""
                                                                            default='Chỉnh sửa'>
                                                                        </codx-label>
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a (click)="deletePolicyLine(item.recID)"
                                                                    ngbDropdownItem href="javascript:void(0)">
                                                                    <span class="icon-delete icon-18"></span>
                                                                    <span class="ms-3">
                                                                        <codx-label fiedName="Delete"
                                                                            [formName]="functionList?.formName"
                                                                            [gridViewName]="functionList?.gridViewName"
                                                                            default="Xóa">
                                                                        </codx-label>
                                                                    </span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--modal Cap nhat so luong  -->
                <ng-template #content let-modal>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="modal-basic-title">
                                <codx-label fiedName="DetailPolicy" [formName]="functionList?.formName"
                                    [gridViewName]="functionList?.gridViewName" default="Chi tiết chính sách">
                                </codx-label>
                            </h4>
                            <button type="button" class="btn btn-icon btn-sm btn-white" aria-label="Close"
                                (click)="modal.dismiss('Cross click')">
                                <span class="icon-close icon-18"></span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group row">
                                <label class="col-3 col-form-label">
                                    <codx-label fiedName="Delete" [formName]="functionList?.formName"
                                        [gridViewName]="functionList?.gridViewName" default="Chức danh">
                                    </codx-label>
                                </label>
                                <div class="col-9">
                                    <codx-input service="TM" type="combobox" name="combobox" placeholder=""
                                        refValue="Positions" loadFull="true" field="itemSelect"
                                        (valueChange)="valueChange($event)" [crrValue]="objectUpdate?.itemSelect">
                                    </codx-input>
                                </div>
                            </div>
                            <div class="form-group row mt-3">
                                <label class="col-3 col-form-label">
                                    <codx-label fiedName="" [formName]="functionList?.formName" field="value"
                                        [gridViewName]="functionList?.gridViewName" default="Số dư quỹ cho">
                                    </codx-label>
                                </label>
                                <div class="col-9">
                                    <codx-input type="text" class="form-control" placeholder=""
                                        [crrValue]="objectUpdate.value" (valueChange)="valueChange($event)">
                                    </codx-input>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" (click)="savePolicyLines()">
                                <codx-label fiedName="Save" [formName]="functionList?.formName"
                                    [gridViewName]="functionList?.gridViewName" default="Lưu">
                                </codx-label>
                            </button>
                        </div>
                    </div>
                </ng-template>
            </div>
        </div>
    </div>
</div>