<div *ngIf="isForm" class="d-flex justify-content-end">
  <div class="btn-primary btn" (click)="closePopUp()">X</div>
</div>
<div
  class="group w-100 h-100 bg-body rounded-2 p-9 scroll-y"
  *ngIf="groupSettings && groupSettings[cate.value]"
>
  <div class="d-flex" *ngIf="curLineType > firstLineType">
    <div class="back btn btn-primary" (click)="changeLineType(null, false)">
      Back
    </div>
    <div class="fs-4 ms-3 fw-bold text-dark category-title">
      {{ curGroup?.tilte }}
    </div>
  </div>

  <div class="title" *ngFor="let row of groupSettings[cate.value]">
    <ng-container
      class="d-flex w-100 bg-hover justify-content-between"
      *ngIf="
        row.lineType == curLineType &&
        row.refLineID == this.refQueue[this.refQueue.length - 1]
      "
    >
      <div class="category-title d-flex mt-5 list-item bg-hover">
        <div class="setting-btnright align-items-center">
          <span class="w-30px d-flex justify-content-center">
            <span [class]="'icon-18 ' + row.icon"></span
          ></span>
        </div>
        <div
          *ngIf="
            row.controlType == 'GroupControl' &&
              (curLineType == 1 ||
                row.recID == this.refQueue[this.refQueue.length - 1]);
            else rowDetail
          "
          class="fs-4 fw-bold text-dark category-title"
        >
          {{ row.tilte }}
        </div>
        <ng-template #rowDetail>
          <div class="d-flex justify-content-between mb-2 list-item w-100 ms-5">
            <div class="d-flex flex-column">
              <div class="title fw-bold text-dark">
                {{ row.tilte }}
              </div>
              <div class="text-gray-500 pt-1">
                {{ row.description }}
              </div>
            </div>
          </div>
        </ng-template>

        <ng-container
          *ngIf="(row.fieldName && row?.controlType) || row.displayMode"
          class="d-flex align-items-center ms-4 min-w-300px justify-content-end category-control"
        >
          <div
            *ngIf="row.fieldName && row?.controlType"
            class="d-flex align-items-center"
          >
            <codx-input
              [field]="row.fieldName"
              [refType]="row?.referedType"
              [type]="row.controlType"
              [refValue]="row?.referdValue"
              [style]="
                row.controlType &&
                (row.controlType.toLowerCase() == 'textbox' ||
                  row.controlType.toLowerCase() == 'combobox')
                  ? 'width: 200px'
                  : ''
              "
              [crrValue]="
                setingValues[row.transType ?? '']
                  ? setingValues[row.transType ?? ''][row.fieldName]
                  : ''
              "
              (valueChange)="
                changeFieldValue(
                  formName,
                  row.transType ?? '',
                  row.category,
                  $event
                )
              "
            ></codx-input>
          </div>
          <div [ngSwitch]="row.displayMode" class="d-flex align-items-center">
            <div
              *ngSwitchCase="'1'"
              class="setting-btnright"
              (click)="changeLineType(row, true)"
            >
              <span class="w-30px d-flex justify-content-center"
                ><span class="icon-keyboard_arrow_right icon-22"></span
              ></span>
            </div>
            <div *ngSwitchCase="'2'">
              <a href="javascript:void(0)" (click)="openPopup($event, row)"
                ><span class="w-30px d-flex justify-content-center"
                  ><span
                    class="icon-18"
                    [ngClass]="
                      row.category == '5' ? 'icon-email' : 'icon-edit-one'
                    "
                  ></span></span
              ></a>
            </div>
          </div>
        </ng-container>
      </div>
    </ng-container>
    <ng-container
      *ngIf="
        row.reference == 'FDPatterns' &&
        row.lineType == curLineType &&
        row.refLineID == this.refQueue[this.refQueue.length - 1]
      "
    >
      <app-pattern [type]="row.transType"></app-pattern>
    </ng-container>
  </div>
</div>
