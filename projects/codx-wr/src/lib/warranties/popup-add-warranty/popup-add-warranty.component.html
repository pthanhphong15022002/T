<codx-form
  #form
  headerText="{{ title }}"
  [body]="body"
  [footer]="footer"
  [dialog]="dialog"
  [formModel]="dialog.formModel"
  [data]="data"
>
  <ng-template #body>
    <ng-container *ngIf="form?.formGroup">
      <div class="form-group">
        <div class="text-primary mb-1">
          <codx-label
            class="fw-bold fs-6"
            fiedName="ServiceTag"
            [formModel]="form.formModel"
          >
          </codx-label>
        </div>
        <div class="d-flex justify-content-between">
          <div class="col-10">
            <codx-input
              field="serviceTag"
              [formModel]="form.formModel"
              [crrValue]="data?.serviceTag"
              (valueChange)="valueChange($event)"
            ></codx-input>
          </div>
          <div class="col-2 ms-1">
            <button
              style="width: 100% !important; height: 32px !important"
              type="button"
              class="btn btn-primary"
              (click)="clickAddServiceTag()"
            >
              <codx-label
                name="lblAdd"
                [formModel]="form.formModel"
                default="Thêm"
              ></codx-label>
            </button>
          </div>
        </div>
        <div class="d-flex w-100 mt-1">
          <div class="me-3 d-flex align-items-center">
            <codx-img
              [objectId]="data?.serviceTag"
              [objectName]="'ADMIN'"
              [referType]="'avt'"
              [objectType]="'WR_Products'"
              [width]="35"
            >
            </codx-img>
          </div>
          <div class="d-flex flex-column">
            <div class="d-flex mb-2">
              <div
                class="fw-bold fs-6 text-dark me-3"
                [innerHTML]="
                  data?.productLine
                    | formatvalue : form.formModel : 'ProductLine'
                    | async
                "
              ></div>
              <div
                class="fw-bold fs-6 text-dark"
                [innerHTML]="
                  data?.productModel
                    | formatvalue : form.formModel : 'ProductModel'
                    | async
                "
              ></div>
            </div>
            <div
              class="d-flex align-items-center mb-2"
              class="fw-bold me-1"
              [innerHTML]="
                data?.productDesc
                  | formatvalue : form.formModel : 'ProductDesc'
                  | async
              "
            ></div>
            <div class="d-flex align-items-center">
              <span
                [ngbTooltip]="popupExpi"
                class="icon-date_range icon-16 me-1 text-gray-900 fs-7"
                ><ng-template #popupExpi>
                  <codx-label
                    fiedName="WarrantyExpired"
                    [formModel]="form.formModel"
                  ></codx-label>
                </ng-template>
              </span>
              <codx-label
                class="text-gray-600 me-1 label-colon"
                fiedName="WarrantyExpired"
                [formModel]="form.formModel"
              ></codx-label>
              <span
                class="fw-bold me-1"
                [innerHTML]="
                  data?.warrantyExpired
                    | formatvalue : form.formModel : 'warrantyExpired'
                    | async
                "
              >
              </span>
              <span class="me-1">-</span>
              <span
                class="text-primary"
                [innerHTML]="
                  data?.oow | formatvalue : form.formModel : 'OOW' | async
                "
              ></span>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <ng-container>
          <div
            class="d-flex align-items-center justify-content-between mt-3 mb-4"
          >
            <div class="d-flex align-items-center">
              <div class="text-primary">
                <codx-label
                  class="fw-bold fs-6"
                  name="lblInformationCustomer"
                  [formModel]="form.formModel"
                  default="Thông tin khách hàng"
                >
                </codx-label>
              </div>
            </div>
            <div class="d-flex justify-content-end align-content-center">
              <button
                type="button"
                class="btn btn-sm btn-icon btn-light-primary"
                (click)="clickAddCustomer()"
              >
                <span class="icon-person_add_alt_1 icon-16"></span>
              </button>
            </div>
          </div>
          <div class="d-flex w-100">
            <div class="me-3 d-flex align-items-center">
              <codx-img
                [objectId]="'ADMIN'"
                [objectName]="'ADMIN'"
                [referType]="'avt'"
                [objectType]="'CM_Customers'"
                [width]="35"
              >
              </codx-img>
            </div>
            <div class="d-flex flex-column">
              <div class="d-flex mb-2">
                <div class="fw-bold fs-6 text-dark me-3">
                  Lê phạm hoài thương
                </div>
                <div class="">custgroup</div>
              </div>
              <div class="d-flex flex-wrap me-4 mb-2">
                <div class="me-3 d-flex align-items-center">
                  <span
                    class="icon-14 text-primary me-2 text-hover-primary icon-phone_iphone text-gray-700"
                  ></span>
                  <span class="text-gray-600 text-primary text-hover-primary">
                    mobile
                  </span>
                </div>
                <div class="d-flex align-items-center">
                  <span
                    class="icon-email text-primary me-2 text-hover-primary icon-14 text-gray-700"
                  ></span>
                  <span class="text-gray-900 text-primary"> email </span>
                </div>
              </div>
              <div class="d-flex align-items-center">
                <span
                  [ngbTooltip]="popupAddress"
                  class="icon-location_on icon-16 me-2 text-gray-600 fs-7"
                  ><ng-template #popupAddress>
                    <codx-label
                      fiedName="Address"
                      [formModel]="form.formModel"
                    ></codx-label>
                  </ng-template>
                </span>
                <span class="text-gray-600">địa chỉ</span>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="form-group">
        <codx-label [formModel]="form.formModel" fiedName="Problem">
        </codx-label>
        <codx-input
          [formModel]="form.formModel"
          [Group]="form.formGroup"
          field="problem"
        ></codx-input>
      </div>
      <div class="form-group">
        <codx-label [formModel]="form.formModel" fiedName="Comment">
        </codx-label>
        <codx-input
          [formModel]="form.formModel"
          [Group]="form.formGroup"
          field="comment"
        ></codx-input>
      </div>
    </ng-container>
  </ng-template>
  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-primary" (click)="onSave()">
        <codx-label
          name="lblSave"
          [formModel]="dialog.formModel"
          default="Lưu"
        ></codx-label>
      </button>
    </div>
  </ng-template>
</codx-form>
