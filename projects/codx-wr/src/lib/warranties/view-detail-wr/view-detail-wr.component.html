<ng-container *ngIf="dataSelected?.recID; else noData">
  <codx-detail-tmp
    [header]="header"
    [formModel]="formModel"
    [body]="body"
    [dataItem]="dataSelected"
    [footer]="tabs"
    (changeDataMF)="changeDataMF($event, dataSelected)"
    (clickMF)="clickMF($event, dataSelected)"
  >
    <ng-template #header let-data>
      <div class="d-flex align-items-center justify-content-between">
        <div class="mb-2">
          <div>
            <div *ngIf="1; then thenData; else noData"></div>
            <ng-template #thenData> </ng-template>
            <ng-template #noData>
              <div class="d-flex align-items-center">
                <span
                  class="icon-corporate_fare icon-16 me-2"
                  [ngbTooltip]="popupCustGroupID"
                  ><ng-template #popupCustGroupID>
                    <codx-label
                      [setRequire]="false"
                      fiedName="CustGroupID"
                      [formModel]="formModel"
                    ></codx-label> </ng-template
                ></span>
                <span
                  class="text-dark fs-6 fw-bold"
                  [innerHTML]="
                    dataSelected?.custGroupID
                      | formatvalue : formModel : 'CustGroupID'
                      | async
                  "
                ></span>
              </div>
            </ng-template>
          </div>
        </div>
        <div
          class="d-flex justify-content-end mb-2"
          *ngIf="funcID == 'CM0101' || funcID == 'CM0105'"
        >
          <codx-mfunc
            [hideMF]="false"
            [dataItem]="dataSelected"
            [formModel]="formModel"
            (changeDataMF)="changeDataMF($event, dataSelected)"
            (clickMF)="clickMF($event, dataSelected)"
            [isBookMark]="true"
            type="view"
          ></codx-mfunc>
        </div>
      </div>
      <div class="container_detail">
        <div class="d-flex w-100 cm-scroll-top mb-2">
          <div class="me-3">
            <codx-img
              [objectId]="dataSelected.recID"
              [objectName]="dataSelected.customerName"
              [referType]="'avt'"
              [imgOn]="dataSelected?.modifiedOn"
              [objectType]="entityName"
              [width]="35"
            >
            </codx-img>
          </div>
          <div class="d-flex flex-column w-100">
            <div class="d-flex justify-content-between">
              <div class="d-flex flex-column">
                <div class="fw-bold fs-6 text-dark line-clamp line-clamp-1">
                  {{ dataSelected.customerName }}
                </div>
                <div class="d-flex flex-wrap me-4">
                  <div
                    class="d-flex align-items-center"
                    *ngIf="
                      dataSelected.phone != null &&
                      dataSelected.phone.trim() != ''
                    "
                  >
                    <span
                      class="text-gray-900"
                      [innerHTML]="
                        dataSelected?.phone
                          | formatvalue : formModel : 'Phone'
                          | async
                      "
                    ></span>
                  </div>
                  <div
                    class="d-flex align-items-center"
                    *ngIf="
                      dataSelected.email != null &&
                      dataSelected.email.trim() != ''
                    "
                  >
                    <span
                      class="text-gray-900"
                      [innerHTML]="
                        dataSelected?.email
                          | formatvalue : formModel : 'Email'
                          | async
                      "
                    ></span>
                  </div>
                </div>
                <div
                  class="d-flex align-items-top"
                  *ngIf="
                    dataSelected.address != null &&
                    dataSelected.address.trim() != ''
                  "
                >
                  <span
                    [ngbTooltip]="popupAddress"
                    class="icon-location_on icon-16 me-2 text-gray-600 fs-7"
                    ><ng-template #popupAddress>
                      <codx-label
                        fiedName="Address"
                        [formModel]="formModel"
                      ></codx-label>
                    </ng-template>
                  </span>
                  <span class="text-gray-600">{{ dataSelected.address }}</span>
                </div>
              </div>
              <div class="d-flex flex-column align-items-start">
                <div
                  class="d-flex justify-content-end w-100 align-items-end codx-badge mb-2"
                  *ngIf="funcID == 'CM0101' || funcID == 'CM0105'"
                >
                  <codx-vll
                    [name]="gridViewSetup?.Status?.referedValue"
                    [field]="'Status'"
                    [value]="
                      dataSelected?.status == '5' ||
                      dataSelected?.status == '7' ||
                      dataSelected?.status == '9'
                        ? '4'
                        : dataSelected?.status
                    "
                    [showText]="true"
                    [showBgColor]="true"
                    class="badge badge-light badge-sm"
                  >
                  </codx-vll>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div [ngClass]="'d-flex flex-wrap align-items-start'">
          <div class="w-100" *ngIf="dataSelected?.category == '2'">
            <codx-label
              style="white-space: nowrap"
              class="fw-bold text-primary"
              fiedName="Occupation"
              [formModel]="formModel"
            ></codx-label>
            <div class="mt-1">
              <span
                class="text-gray-700"
                [innerHTML]="
                  dataSelected?.occupation
                    | formatvalue : formModel : 'Occupation'
                    | async
                "
              ></span>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between align-items-start">
          <div class="w-100 mt-1">
            <codx-label
              style="white-space: nowrap"
              class="fw-bold text-primary"
              fiedName="SegmentID"
              [formModel]="formModel"
            ></codx-label>
            <div class="mt-1">
              <div
                class="text-dark fw-bold codx-textcontent"
                [innerHTML]="
                  dataSelected?.segmentID
                    | formatvalue : formModel : 'SegmentID'
                    | async
                "
              ></div>
            </div>
          </div>
          <div class="justify-content-end w-100 mt-1">
            <codx-label
              style="white-space: nowrap"
              class="fw-bold text-primary"
              fiedName="Owner"
              [formModel]="formModel"
            ></codx-label>
            <div class="mt-1">
              <codx-imgs
                class="h-25px"
                [isToolTip]="true"
                [width]="25"
                [objectId]="dataSelected?.owner"
                [objectType]="'AD_Users'"
                [numberImages]="1"
              >
              </codx-imgs>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
    <ng-template #body let-data>
      <div class="cm-scroll">
        <div class="btn btn-white btn-icon tab-action">
          <span class="icon-unfold_more icon-20"></span>
        </div>
        <div class="instance-select">
          <ejs-tab
            id="tab_adaptive"
            #adaptiveTab
            heightAdjustMode="None"
            height="250px"
          >
            <e-tabitems>
              <e-tabitem>
                <ng-template #headerText>
                  <div class="d-flex align-items-top me-2">
                    <span
                      class="icon-info text-hover-primary icon-16 me-2"
                    ></span>
                    <codx-label
                      class="fw-bold text-hover-primary text-dark"
                      default="Thông tin chung"
                      [formModel]="formModel"
                      name="lblInformation"
                    ></codx-label>
                  </div>
                </ng-template>
                <ng-template #content>
                  <div class="mt-5">
                    <codx-information
                      [funcID]="funcID"
                      [dataSelected]="dataSelected"
                      [formModel]="formModel"
                      [gridViewSetup]="gridViewSetup"
                      [entityName]="entityName"
                    >
                    </codx-information>
                  </div>
                </ng-template>
              </e-tabitem>
              <e-tabitem>
                <ng-template #headerText>
                  <div class="d-flex align-items-top me-2">
                    <span
                      class="icon-i-link text-hover-primary icon-16 me-2"
                    ></span>
                    <codx-label
                      class="fw-bold text-hover-primary text-dark"
                      default="Lịch sử hoạt động"
                      [formModel]="formModel"
                      name="lblHistory"
                    ></codx-label>
                  </div>
                </ng-template>
                <ng-template #content>
                  <div class="mt-5">
                    <!-- <cm-view-history-customer
                        [customerID]="dataSelected.recID"
                        [isRole]="
                          !isAdmin ? user.userID == dataSelected.owner : true
                        "
                      ></cm-view-history-customer> -->
                  </div>
                </ng-template>
              </e-tabitem>
            </e-tabitems>
          </ejs-tab>
        </div>
      </div>
      <!-- <ng-template #tabIns let-name>
          <div id="viewModeDetail" class="view-step-box">
            <ng-container *ngIf="name == 'Deal'">
              <codx-list-deals
                [customerID]="dataSelected.recID"
              ></codx-list-deals>
            </ng-container>
            <ng-container *ngIf="name == 'DealCompetitors'">
              <codx-view-dealcompetitors
                [competitorID]="dataSelected.recID"
              ></codx-view-dealcompetitors>
            </ng-container>
            <ng-container *ngIf="name == 'Product'">
              <ng-container [ngTemplateOutlet]="product"> </ng-container>
            </ng-container>
            <ng-container *ngIf="name == 'Quotations'">
              <codx-quotations-tab-view
                [funcID]="'CM0202'"
                [showButton]="false"
                [customerID]="dataSelected.recID"
                [predicates]="'CustomerID==@0'"
                [dataValues]="dataSelected.recID"
                [disableCusID]="true"
              ></codx-quotations-tab-view>
            </ng-container>
            <ng-container *ngIf="name == 'Contract'">
              <ng-container
                [ngTemplateOutlet]="contract"
                [ngTemplateOutletContext]="{ $implicit: dataSelected }"
              >
              </ng-container>
            </ng-container>
            <ng-container *ngIf="name == 'task'">
              <ng-container
                [ngTemplateOutlet]="taskTemplate"
                [ngTemplateOutletContext]="{ $implicit: dataSelected }"
              >
              </ng-container>
            </ng-container>
          </div>
        </ng-template> -->
    </ng-template>
    <ng-template #tabs let-data>
      <codx-tabs
        [entityName]="entityName"
        [formModel]="formModel"
        [TabControl]="tabControl"
        [objectID]="dataSelected.recID"
        [funcID]="funcID"
        [dataTree]="treeTask"
        [funcIDQuotations]="'CM0202'"
        [customerID]="dataSelected.recID"
      ></codx-tabs>
    </ng-template>
  </codx-detail-tmp>
</ng-container>
<ng-template #noData>
  <div class="empty-data">
    <div class="container h-100">
      <div class="list-empty card card-flush h-100">
        <div class="d-flex flex-column flex-center justify-content-center">
          <img
            src="../assets/themes/sys/default/img/DataEmpty.svg"
            class="w-200px"
          />
          <div class="fs-5 text-dark fw-bold mt-2 text-center">
            {{ "SYS011" | mssg | async }}
            {{ dataSelected?.recID }}
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
