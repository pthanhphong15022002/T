<codx-views #view funcID="MWP002" entityName="HR_Employees" [views]="views">
</codx-views>

<ng-template #panelLeftRef let-dataEmployee>
  <lib-info-left></lib-info-left>
</ng-template>

<ng-template #panelRightRef>

  <div class="user-content flex-row-fluid ps-9" scrollSpy (sectionChange)="onSectionChange($event)">

    <!-- thong tin chung -->
    <ng-container>

      <div class="user-profile overview d-block mb-3" id="InfoPersonal">
        <!-- <ngx-skeleton-loader *ngIf="!employeeInfo" count="5" animation="progress"></ngx-skeleton-loader> -->
        <div *ngIf="employeeInfo">
          <div class="d-flex justify-content-between">
            <div class="text-dark fw-bold text-uppercase mb-1" style="cursor: pointer;">
              <codx-label fiedName="employeeID" formName="Employees" gridViewName="grvEmployees"
                default="Mã nhân viên: # ">
              </codx-label>
              <span class="text-dark">{{employeeInfo?.employeeID}}</span>
            </div>
            <a *ngIf="editMode" class="btn btn-xs btn-icon btn-light btn-hover-primary">
              <span (click)="editInfo(employeeInfo)" class="icon-edit icon-18"></span>
            </a>
          </div>

          <div class="d-flex align-items-center">
            <div class="fs-4 fw-bold text-dark">{{employeeInfo?.employeeName}}</div>
            <div class="user-status text-primary ms-5">
              <span class="icon-check text-primary icon-18 me-1"></span>
              <span>{{employeeInfo?.status}}</span>
            </div>
          </div>
          <div class="d-flex align-items-center mt-2">
            <span class="fw-bold text-dark">{{employeeInfo?.positionName}}</span>
            <span class="text-gray-500 mx-3" *ngIf="employeeInfo?.organizationName">|</span>
            <span class="text-dark">{{employeeInfo?.organizationName}}</span>

            <span class="text-gray-500 mx-3" *ngIf="employeeInfo?.divisionName">|</span>
            <span class="text-dark">{{employeeInfo?.divisionName}}</span>
          </div>
          <div class="text-dark fw-bold text-uppercase mt-9 mb-3">{{ 'Thông tin nhân viên' | lang:
            'ProfileOverview':'txtInfoEmployee' | async}}</div>
          <div class="row mb-2">
            <div class="col">
              <div class="d-flex">
                <!-- <span class="text-dark fw-bold me-1">{{ 'Ngày vào làm' | lang:
                        'ProfileOverview':'txtJoinedOn' | async}}:</span>
                      <span class="text-dark">{{employeeInfo?.joinedOn| date:'dd/MM/yyyy'}}</span> -->

                <codx-label class="text-gray-600 me-2" fiedName="joinedOn" formName="Employees"
                  gridViewName="grvEmployees" default="Ngày vào làm: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.joinedOn}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="payGroupName" formName="Employees"
                  gridViewName="grvEmployees" default="Nhóm tính lương: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.payGroupName}}</span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="hiredOn" formName="Employees"
                  gridViewName="grvEmployees" default="Ngày ký hợp đồng chính thức:">
                </codx-label>
                <span class="text-dark">{{employeeInfo.hiredOn}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="senioritydate" formName="Employees"
                  gridViewName="grvEmployees" default="Thâm niên: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.senioritydate}}</span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="recruitedOn" formName="Employees"
                  gridViewName="grvEmployees" default="Ngày tuyển dụng: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.recruitedOn}}</span>
              </div>
            </div>
          </div>

          <div class="text-dark fw-bold text-uppercase mt-9 mb-3">{{ 'Liên hệ' | lang:
            'ProfileOverview':'txtContact' | async}}</div>
          <div class="d-flex align-items-center">
            <span class="text-gray-600 me-2">+</span>
            <codx-label class="text-gray-600 me-2" fiedName="phone" formName="Employees" gridViewName="grvEmployees">
            </codx-label>
            <span class="text-dark">{{employeeInfo.phone}}</span>
            <span class="text-gray-500 mx-3">|</span>
            <codx-label class="text-gray-600 me-2" fiedName="email" formName="Employees" gridViewName="grvEmployees">
            </codx-label>
            <span class="text-dark">{{employeeInfo.email}}</span>
            <span class="text-gray-500 mx-3">|</span>
            <codx-label fiedName="street" formName="Employees" gridViewName="grvEmployees">
            </codx-label>
            <span class="text-dark">{{employeeInfo.street}}</span>
          </div>
          <div class="text-dark fw-bold text-uppercase mt-6 mb-1">{{ 'Thông tin cá nhân' | lang:
            'ProfileOverview':'txtInfoPersonal' | async}}</div>
          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="gender" formName="Employees"
                  gridViewName="grvEmployees" default="Giới tính: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.gender}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="birthday" formName="Employees"
                  gridViewName="grvEmployees" default="Sinh ngày: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.birthday}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <span class="text-gray-600 me-2">{{ 'Tại' | lang:
                  'ProfileOverview':'txtBirthPlace' | async}}:</span>
                <span class="text-dark">{{employeeInfo?.birthPlaceName !="---"? employeeInfo?.birthPlaceName :
                  null}}</span>

                <!-- <codx-label fiedName="birthPlaceName" formName="Employees" gridViewName="grvEmployees" default="Tại: ">
                  </codx-label>
                  <span class="text-dark">{{employeeInfo.birthPlaceName}}</span> -->
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="idCardNo" formName="Employees"
                  gridViewName="grvEmployees" default="CMND/CCCD: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.idCardNo}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="issuedOn" formName="Employees"
                  gridViewName="grvEmployees" default="Cấp ngày: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.issuedOn}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="issuedBy" formName="Employees"
                  gridViewName="grvEmployees" default="Tại: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.issuedBy}}</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="religionName" formName="Employees"
                  gridViewName="grvEmployees" default="Tôn giáo: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.religionName}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="ethnicGroupName" formName="Employees"
                  gridViewName="grvEmployees" default="Dân tộc: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.ethnicGroupName}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="nationalityName" formName="Employees"
                  gridViewName="grvEmployees" default="Quốc tịch: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.nationalityName}}</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-4">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="education" formName="Employees"
                  gridViewName="grvEmployees" default="Trình độ văn hóa: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.education}}</span>
              </div>
            </div>
            <div class="col-8">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="certificateName" formName="Employees"
                  gridViewName="grvEmployees" default="Trình độ chuyên môn: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.certificateName}}</span>
              </div>
            </div>

          </div>
          <div class="text-dark fw-bold text-uppercase mt-6 mb-1">Pháp lý</div>
          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="pITNumber" formName="Employees"
                  gridViewName="grvEmployees" default="Thuế TNCN số: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.pITNumber}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="pITIssuedOn" formName="Employees"
                  gridViewName="grvEmployees" default="Cấp ngày: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.pITIssuedOn}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <span class="text-gray-600 me-2">Tại:</span>
                <span class="text-dark">Cục thuế HCM</span>

              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="sIRegisterNo" formName="Employees"
                  gridViewName="grvEmployees" default="BHXH số: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.sIRegisterNo}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">
                <codx-label class="text-gray-600 me-2" fiedName="sIRegisterOn" formName="Employees"
                  gridViewName="grvEmployees" default="Cấp ngày: ">
                </codx-label>
                <span class="text-dark">{{employeeInfo.sIRegisterOn}}</span>
              </div>
            </div>
            <div class="col">
              <div class="d-flex">

              </div>
            </div>
          </div>

        </div>
      </div>
    </ng-container>

    <!-- kinh nghiem -->
    <div id="Experences" class="d-block mt-6">

      <div class="user-profile overview">
        <codx-label class="fw-bold fs-4 text-primary mb-6" name="lblExperencies" formName="Employees"
          default="Kinh nghiệm ">
        </codx-label>
        <!-- <ngx-skeleton-loader *ngIf="!ExperencesCurrent" count="5" animation="progress"></ngx-skeleton-loader> -->
        <div *ngIf="ExperencesCurrent">
          <div class="user-process process-h">
            <ng-container *ngFor="let experences of ExperencesWorked">
              <div class="process-item d-flex mb-4">
                <div class="yeartoyear mt-3">{{experences.fromDate}} - {{experences.toDate}}</div>
                <div class="mx-3 mt-4 process-line">
                  <span class="icon-arrow_drop_down_circle icon-16 text-muted"></span>
                </div>
                <div class="d-flex flex-column py-3 px-4 process-r">
                  <div class="d-flex flex-column">
                    <div class="d-flex justify-content-between cardExp">
                      <div class="p"><a class="text-dark fs-6 ">{{experences.companyName}}</a></div>
                      <div class="">
                        <a class="btn btn-xs btn-icon btn-light btn-hover-primary margin-left" *ngIf="editMode"
                          (click)="editExperences(experences)">
                          <span class="icon-edit icon-18"></span>
                        </a>
                        <!-- <a class="btn btn-xs btn-icon btn-light btn-hover-danger" *ngIf="editMode"
                            (click)="deleteExperences(experences)">
                            <span class="icon-close icon-18"></span>
                          </a> -->
                      </div>
                    </div>

                  </div>
                  <div class="text-primary">{{experences.roleName}}</div>
                </div>
              </div>

            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <!-- kỹ năng -->
    <div id="Skill" class="d-block">
      <div class="user-profile overview">
        <div class="d-flex justify-content-between mb-3">
          <codx-label class="fw-bold fs-4 text-primary" name="lblSkill" formName="Employees" default="Kỹ năng ">
          </codx-label>
          <a *ngIf="editMode" class="btn btn-xs btn-icon btn-light btn-hover-primary" (click)="editSkill()">
            <span class="icon-edit icon-18"></span>
          </a>
        </div>
        <!-- <ngx-skeleton-loader *ngIf="!skillEmployee" count="5" animation="progress"></ngx-skeleton-loader> -->
        <div *ngIf="skillEmployee">
          <div class="row">
            <div class="col-6 pe-9">
              <div class="card-process">
                <ng-container *ngFor="let data of skillEmployee">
                  <div class="d-flex flex-column">
                    <div class="fw-bold text-dark mb-1">{{data.category}}</div>
                    <div *ngIf="!editSkillMode" class=" bg-success-o-60">
                      <ejs-slider id='minrange' [type]="minType" value="setMyStyles(data)"></ejs-slider>
                      <!-- <div class="progress-bar bg-primary" role="progressbar" [ngStyle]="setMyStyles(data)"
                              aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div> -->
                    </div>
                    <div *ngIf="editSkillMode">
                      <div class="d-flex align-items-center">
                        <!-- <div class="full">
                                <kendo-slider [min]="0" [max]="10" [smallStep]="1" [(ngModel)]="data.valueX"
                                  (valueChange)="sliderChange($event,data)">
                                </kendo-slider>
                              </div> -->
                        <div class="wrap">
                          <ejs-slider id='minrange' [(ngModel)]="data.valueX" (valueChange)="sliderChange($event,data)">
                          </ejs-slider>
                        </div>
                        <div class="ms-3">
                          <!-- <a class="btn btn-xs btn-icon btn-light btn-hover-danger" *ngIf="editSkillMode"
                              (click)="deleteSkill(data)">
                              <span class="icon-close icon-18"></span>
                            </a> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
            <div class="col-6" *ngIf="skillChartEmployee && skillChartEmployee.length>0">

              <ejs-chart id='chartcontainer' [title]="" [primaryXAxis]='primaryXAxis' [primaryYAxis]='primaryYAxis'>
                <e-series-collection>
                  <e-series *ngIf="skillEmployee" [dataSource]='skillEmployee' name="Employee" type='Radar'
                    xName='competenceName' yName='valueX'></e-series>
                  <!-- <e-series *ngIf="skillRequest" [dataSource]='skillRequest' type='Radar' xName='competenceName' yName='valueX'></e-series> -->
                </e-series-collection>
              </ejs-chart>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- đào tạo -->
    <div id="Training" class="d-block mb-3">


      <div class="user-profile overview">
        <codx-label class="fw-bold fs-4 text-primary mb-6" name="lblTraining" formName="Employees" default="Đào tạo ">
        </codx-label>
        <!-- <ngx-skeleton-loader *ngIf="!trainingInterObl && !trainingInterUnObl && !trainingPersonal" count="5"
                animation="progress"></ngx-skeleton-loader> -->
        <div *ngIf="trainingInterObl || trainingInterUnObl || trainingPersonal">

          <div *ngIf="trainingPersonal && trainingPersonal.length>0" class="text-dark fw-bold text-uppercase mt-8 mb-4">
            Bên ngoài</div>
          <div class="user-process process-v swiper-wrapper">

          </div>

        </div>
      </div>
    </div>

    <!-- quan hệ gia đình -->
    <div id="RelationShip" class="d-block mb-3">

      <div class="user-profile overview">
        <div class="page-header mt-0 mb-6">
          <codx-label name="lblRelationShip" formName="Employees" default="Quan hệ gia đình ">
          </codx-label>
        </div>

        <div *ngIf="employeeRelationship">
          <div class="row">
            <ng-container *ngFor="let relationship of employeeRelationship">
              <div class="col-xl-4 col-lg-4 col-md-4 mb-4">
                <div class="d-flex flex-grow-1 user-item">
                  <codx-img class="symbol symbol-40px symbol-circle me-4" [objectId]="relationship.recID"
                    objectType="HR_EmployeeRelations">
                  </codx-img>
                  <div class="d-flex flex-column full">
                    <div class="d-flex flex-column justify-content-between">
                      <div class="text-dark">{{relationship.relationName}}</div>
                      <span class="text-muted">{{relationship.relationType}} | <span>Năm sinh:</span>
                        {{relationship.birthday|date: "yyyy"}}</span>
                    </div>
                    <div class="d-flex mt-3">
                      <a class="btn btn-xs btn-icon btn-light btn-hover-primary me-2" *ngIf="editMode"
                        (click)="editRelation(relationship)">
                        <span class="icon-edit icon-18"></span>
                      </a>
                      <!-- <a class="btn btn-xs btn-icon btn-light btn-hover-danger" *ngIf="editMode"
                          (click)="deleteRelation(relationship)">
                          <span class="icon-close icon-18"></span>
                        </a> -->
                    </div>

                  </div>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="editMode">
              <div class="col-xl-4 col-lg-4 col-md-4 mb-4">
                <div class="d-flex">
                  <div class="d-flex align-items-center user-item add-process" (click)="editRelation(null)">
                    <span class="icon-add icon-18"></span>
                    <a class="text-primary">Thêm mới</a>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <!-- sở thích -->
    <div id="Hobbie" class="d-block mt-6">

      <div class="user-profile overview">
        <codx-label class="fw-bold fs-4 text-primary mb-6" name="lblHobbie" formName="Employees" default="Sở thích ">
        </codx-label>
        <!-- <ngx-skeleton-loader *ngIf="!employeeHobbie" count="5" animation="progress"></ngx-skeleton-loader> -->
        <div *ngIf="employeeHobbie">
          <div class="row">
            <div class="list-hoppy d-left">
              <div *ngFor="let item of employeeHobbie" class="d-flex align-items-center user-item tagitem"
                [style.background]="item.color">
                <div [style.color]="getContrastYIQ(item)">
                  {{item.hobbyName}}
                </div>
                <!-- <a class="text-white text-hover-danger mt-1 ms-2" *ngIf="editMode" (click)="deleteHobby(item)">
                    <span class="icon-close icon-16"></span>
                  </a> -->
              </div>

              <div *ngIf="editMode" class="user-item d-flex align-items-center tagitem add-process"
                (click)="editHobby(null)">
                <a class="text-primary">Thêm mới</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
