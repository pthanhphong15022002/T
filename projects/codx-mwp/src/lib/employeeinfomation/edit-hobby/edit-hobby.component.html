<codx-form headerText="{{title}}" subHeaderText="" [body]="body" [footer]="footer" [dialog]="dialog">
    <ng-template #body>
        <div class="row">
            <div class="col">
                <div class="form-group min-h-200px">
                    <!-- <label>Sở thích</label> -->
                    <codx-label name="lblHobbie" default="Sở thích">
                    </codx-label>
                    <div class="list-hoppy">
                        <div *ngFor="let item of chooseHobbyItems" class="user-item tagitem"
                            [style.background]="item.color">
                            <div [style.color]="getContrastYIQ(item)">{{item.hobbyName}}</div>
                        </div>

                        <div cclass="d-flex align-items-center user-item tagitem" container="body" [autoClose]="false"
                        triggers="manual" #p="ngbPopover" (click)="open(p)" placement="bottom"
                        [ngbPopover]="popContent" [popoverTitle]="popTitle">
                            <span class="icon-add icon-16"></span>
                            <a class="text-primary">
                                <codx-label name="lblHobbie" default="Sở thích">
                                </codx-label>
                            </a>
                            <!-- <codx-tag [entityName]="dialog.formModel.entityName" [value]="?.tags || ''"
                                (valueChange)="valueChangeHobbies($event)"></codx-tag> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template #footer>
        <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-primary" (click)="saveHobby()">
                <codx-label name="Save" default="Chọn">
                </codx-label>
            </button>
        </div>
    </ng-template>
</codx-form>

<ng-template #popContent>
    <div *ngIf="!editItem">
        <div class="d-flex align-items-center justify-content-between"
            *ngFor="let item of hobbies">
            <div class="user-item tagitem tagitemlist" (click)="chooseHobby(item)"
            [style.color]="getContrastYIQ(item)"
            [style.background]="item.color">
                {{item.hobbyName}}
            </div>
            <a class="btn btn-xs btn-icon btn-hover-primary min-w-30px" id="kt_demo_panel_close">
                <span (click)="editHobby(item)" class="icon-edit icon-16"></span>
            </a>
        </div>
        <div class="d-flex flex-grow-1">
            <div class="text-dark user-item tagitem tagitemlist" style="width: 100%;" (click)="addHobby()">
                <codx-label name="lblHobbie" default="Thêm sở thích">
                </codx-label>
            </div>
            <div class="min-w-30px"></div>
        </div>
    </div>
    <div *ngIf="editItem">
        <div class="flex-grow-1">
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <codx-label fiedName="Hobbies" default="Sở thích">
                        </codx-label>
                        <codx-input class="form-control" 
                        [style.color]="getContrastYIQ(this.editItem)"
                        [style.background]="editItem.color"
                        [(ngModel)]="editItem.hobbyName">
                        </codx-input>
                    </div>
                    <div class="form-group mb-3">
                        <color-sketch [color]="editItem.color" (onChange)="handleChange($event)"></color-sketch>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="d-flex align-items-center justify-content-end">
                        <a class="btn btn-sm btn-danger" *ngIf="editItem.hobbyID"
                            (click)="deleteHobby(editItem)">
                            <codx-label name="Delete" default="Xóa"></codx-label></a>
                        <a class="btn btn-sm btn-primary ml-2" (click)="saveHobby()">
                            <codx-label name="Save" default="Lưu"></codx-label>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</ng-template>

<ng-template #popTitle>
    <div class="d-flex align-items-center justify-content-between">
        <a *ngIf="editItem" class="btn btn-xs btn-icon btn-light btn-hover-primary" id="kt_demo_panel_close">
            <span (click)="editItem=null" class="icon-arrow_back icon-18"></span>
        </a>
        <div class="text-dark font-size-h5 ml-2 d-flex flex-grow-1">
            <codx-label fiedName="Hobbies" default="Sở thích">
            </codx-label>
        </div>

        <a class="btn btn-xs btn-icon text-hover-primary" id="kt_demo_panel_close">
            <span (click)="close()" class="icon-close icon-18"></span>
        </a>
    </div>
    <div class="mt-2" *ngIf="!editItem">
        <input type="text" class="form-control" [(ngModel)]='searchField' placeholder="Tìm kiễm" />
    </div>
</ng-template>