<!-- End popup them nhom cong viec -- nvthuan -->
<codx-form
  [headerText]="'Thêm Nhóm Công Việc'"
  [body]="addGroupJobBody"
  [footer]="addGroupJobFooter"
  [dialog]="dialog"
  [formModel]="grvTaskGroupsForm"
></codx-form>

<ng-template #addGroupJobBody>
  <div class="mt-5">
    <div class="form-group">
      <div>
        <codx-label
          fiedName="taskGroupName"
          [formModel]="grvTaskGroupsForm"
          default="Tên nhóm công việc"
        ></codx-label>
      </div>
      <codx-input
        field="taskGroupName"
        [formModel]="grvTaskGroupsForm"
        [Group]=""
        [crrValue]="taskGroup?.taskGroupName"
        type="text"
        [height]="'100'"
        (valueChange)="changeValueInput($event, taskGroup)"
      >
      </codx-input>
    </div>

    <div class="form-group d-flex justify-content-between">
      <div class="w-100 me-2">
        <div>
          <codx-label
            fiedName="durationDay"
            [formModel]="grvTaskGroupsForm"
            default="Thời gian dự kiến"
          ></codx-label>
        </div>
        <div class="position-relative">
          <codx-input
            field="durationDay"
            [crrValue]="taskGroup?.durationDay"
            (valueChange)="changeValueInput($event, taskGroup)"
            [height]="'100'"
            [type]="'number'"
            [min]="0"
            [showSpinButton]="false"
          ></codx-input>
          <div
            class="position-absolute text-gray-400"
            style="top: 7px; right: 7px"
          >
            <codx-label
              fiedName="StepName"
              [formModel]="grvTaskGroupsForm"
              default="Ngày"
            ></codx-label>
          </div>
        </div>
      </div>
      <div class="w-100 ms-2">
        <div class="d-flex justify-content-end">
          <codx-label
            fiedName="durationHour"
            default="Thời gian còn lại "
          ></codx-label>
          <span class="text-danger ms-3" *ngIf="!taskGroup?.createdOn"
            >{{ taskGroup?.durationDay }} ngày
            {{ taskGroup?.durationHour }} giờ</span
          >
          <span
            class="text-danger ms-3"
            id="countdown"
            *ngIf="taskGroup?.createdOn"
          >
          </span>
        </div>
        <div class="position-relative">
          <codx-input
            field="durationHour"
            [crrValue]="taskGroup?.durationHour"
            (valueChange)="changeValueInput($event, taskGroup)"
            [showSpinButton]="false"
            [height]="'100'"
            type="number"
            [min]="0"
          ></codx-input>
          <div
            class="position-absolute text-gray-400"
            style="top: 7px; right: 7px"
          >
            <codx-label
              fiedName="StepName"
              [formModel]="grvTaskGroupsForm"
              default="Giờ"
            ></codx-label>
          </div>
        </div>
      </div>
    </div>

    <codx-user
      [dataSource]="taskGroup?.roles"
      (valueList)="changeUser($event)"
    ></codx-user>

    <div class="form-group">
      <div>
        <codx-label
          fiedName="memo"
          [formModel]="grvTaskGroupsForm"
          default="Ghi chú"
        ></codx-label>
      </div>
      <codx-input
        field="memo"
        [formModel]="grvTaskGroupsForm"
        type="textarea"
        headerposition="none"
        format="ed"
        height="100"
        [crrValue]="taskGroup?.memo"
        (valueChange)="changeValueInput($event, taskGroup)"
      >
      </codx-input>
    </div>
  </div>
</ng-template>

<ng-template #addGroupJobFooter>
  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-outline-primary me-5">
      <codx-label
        name="Save"
        formName="Tasks"
        default="Hủy"
        (click)="close()"
      ></codx-label>
    </button>
    <button type="button" class="btn btn-primary">
      <codx-label
        name="Save"
        formName="Tasks"
        default="Đồng ý"
        (click)="handleSave()"
      ></codx-label>
    </button>
  </div>
</ng-template>
