<ng-container *ngIf="dataSelect?.recID">
  <codx-detail-tmp
    [header]="header"
    [formModel]="formModel"
    [body]="body"
    [dataItem]="dataSelect"
    [hideMF]="false"
    (changeDataMF)="changeDataMF($event, dataSelect)"
    (clickMF)="clickMF($event, dataSelect)"
  >
    <ng-template #header>
      <div class="container_detail mt-3">
        <div class="d-flex flex-grow-1 mb-4">
          <div class="d-flex flex-column flex-grow-1">
            <div class="d-flex justify-content-between">
              <div class="d-flex flex-column">
                <h2 class="h2-title" style="margin-bottom: 0px !important">
                  {{ dataSelect?.title }}
                </h2>
                <div class="mb-5">
                  <codx-tag
                    [entityName]="formModel.entityName"
                    [disabled]="true"
                    [isEdit]="false"
                    [value]="dataSelect.tags"
                  >
                  </codx-tag>
                </div>
                <div class="mb-6">
                  <div>
                    <span class="">Tổ chức/Khách hàng: </span>
                    <span class="me-2 text-body">Tập đoàn PHÚC TÚ</span>
                  </div>
                  <div class="d-flex flex-grow-1 mb-4">
                    <span>Liên hệ: </span>
                    <ng-container>
                      <div class="mb-3 ms-1">
                        <codx-img
                          [objectId]="'ADMIN'"
                          objectType="AD_Users"
                          [width]="50"
                        >
                        </codx-img>
                      </div>
                      <div class="d-flex flex-column">
                        <span class="ms-3 text-body"
                          >Trần Đoàn Tuyết Khanh</span
                        >
                        <div class="row">
                          <span class="col-3 ms-3 text-body">012344556</span>
                          <span
                            class="col-3 ms-3 text-body"
                            style="margin-right: 50px"
                            >lacviet@lacviet.com</span
                          >
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="d-flex flex-column align-items-start">
                <div class="progress">
                  <div
                    class="progress-done"
                    role="progressbar"
                    [style.width]="progress + '%'"
                    aria-valuenow="50"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  >
                    {{ progress }}
                  </div>
                </div>
                <div class="d-flex flex-grow-1 mb-4">
                  <div class="d-flex flex-column">
                    <div class="font">
                      <span>
                        {{ stepName }}
                      </span>
                    </div>
                    <div class="text-gray-500 me-4 mb-1">
                      {{ dataSelect.createdOn }}
                    </div>
                  </div>
                  <div class="me-3">
                    <codx-img
                      [objectId]="'ADMIN'"
                      objectType="AD_Users"
                      [width]="50"
                    >
                    </codx-img>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-end">
              <codx-input
                type="valuelist"
                refValue="DP034"
                [crrValue]="'S'"
                (valueChange)="cbxChange($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
    <ng-template #body>
      <ng-container *ngIf="idCbx == 'G'">
        <codx-gantt-chart
          [dataSource]="ganttDs"
          [taskFields]="taskFields"
          [taskbarHeight]="60"
          [rowHeight]="60"
          [readOnly]="true"
          [templateTaskbar]="ganttItems"
          [toolbar]="[]"
        ></codx-gantt-chart>

        <ng-template #ganttItems let-data>
          <div
            class="badge badge-light badge-square badge-md fs-7 p-2"
            [ngStyle]="{ 'background-color': getColor(data.recID) }"
          >
            <div class="fw-bold text-dark">{{ data.name }}</div>
          </div>
        </ng-template>
      </ng-container>

      <ng-container *ngIf="idCbx == 'S'">
        <div *ngIf="listSteps != null && listSteps.length > 0">
          <div class="d-flex arrow-steps flex-container">
            <div
              *ngFor="let item of listSteps; index as i"
              id="step-click"
              style="flex-grow: 1"
              [ngClass]="
                i == currentStep
                  ? 'step current'
                  : i < currentStep
                  ? 'step old'
                  : 'step'
              "
              (click)="click(i, item)"
            >
              <span> {{ item.stepName }}</span>
            </div>
          </div>
          <div class="d-flex flex-container">
            <div
              *ngFor="let item of listSteps; index as i"
              class="process-wrap"
            >
              <div
                [ngClass]="
                  i == currentStep
                    ? 'progress-current'
                    : i < currentStep
                    ? 'progress-bar'
                    : ''
                "
                style="flex-grow: 1"
                role="progressbar"
                [style.width]="item.progress + '%'"
                aria-valuenow="50"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
        </div>
        <ng-container *ngIf="tmpTeps">
          <codx-stages-detail         
          [dataStep]="tmpTeps"
          [formModel]="formModel"
          [currentStep]="currentNameStep"
          [stepID]="dataSelect.stepID"
          [isDelete]="dataSelect.delete"
          [isEdit]="dataSelect.edit"
          [isUpdate]="dataSelect.write"
          [isCreate]="dataSelect.create"
        ></codx-stages-detail>
        </ng-container>
      
      </ng-container>
      <ng-container *ngIf="idCbx == 'F'">
        <ng-container *ngFor="let item of listSteps">
          <codx-field-detail [dataStep]="item" [isUpdate]="dataSelect.write"></codx-field-detail>
        </ng-container>
      </ng-container>
    </ng-template>
  </codx-detail-tmp>
</ng-container>
