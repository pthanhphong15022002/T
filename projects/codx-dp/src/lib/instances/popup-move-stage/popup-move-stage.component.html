<codx-form #form [headerText]="headerText" [subHeader]="subHeader" [body]="body" [formModel]="formModel"
  [footer]="footer" [dialog]="dialog" [data]="instancesStepOld"></codx-form>

<ng-template #subHeader>
  <span>{{ stepName }}</span>
</ng-template>
<ng-template #body>
  <div class="title-step pb-18"></div>
  <div class="content-step">
    <ng-container [ngTemplateOutlet]="test"></ng-container>
    <div class="form-group">
      <div>
        <codx-label fiedName="owner" [formModel]="form.formModel" default="Phân bổ lại cho">
        </codx-label>
      </div>
      <div *ngIf="stepCurrent != null">
        <codx-popup-participants [lstParticipants]="lstParticipants" [dialog]="dialog" [isType]="'I'"
          (eventUser)="eventUser($event)" [owner]="owner"></codx-popup-participants>
      </div>
    </div>
    <div class="form-group">
      <div>
        <codx-label fiedName="ActualEnd" [formModel]="form.formModel" [Group]="form.formGroup"
          default="Ngày hoàn thành thực tế">
        </codx-label>
      </div>

      <codx-input [formModel]="form.formModel" field="actualEnd" [Group]="form.formGroup"
        (valueChange)="valueChange($event)">
      </codx-input>
    </div>

    <div class="form-group">
      <div>
        <codx-label fiedName="Memo" [formModel]="form.formModel" [Group]="form.formGroup" default="Ghi chú">
        </codx-label>
      </div>
      <codx-input [formModel]="form.formModel" [Group]="form.formGroup" field="memo"
        (valueChange)="valueChange($event)">
      </codx-input>
    </div>

    <div class="form-group">
      <div>
        <codx-label fiedName="taskGroups" [formModel]="form.formModel" [Group]="form.formGroup"
          default="Công việc chưa hoàn tất">
        </codx-label>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #footer>
  <div class="d-flex justify-content-end">
    <div class="" id="buttonSave">
      <button type="button" class="btn btn-primary ms-1" [disabled]="isLockStep" (click)="onSave()">
        <codx-label name="Save" [formModel]="form.formModel" [Group]="form.formGroup" default="Chuyển tiếp">
        </codx-label>
      </button>
    </div>
  </div>
</ng-template>

<ng-template #test>
  <div class="form-group">
    <codx-label fiedName="stepID" formName="Instances" gridViewName="grvInstances" default="Giai đoạn chuyển đến">
    </codx-label>
    <ejs-combobox [dataSource]="listStepsCbx" [fields]="fieldCbxStep" [value]="stepIdClick"
      (valueChange)="cbxChange($event)"></ejs-combobox>
  </div>
</ng-template>

<ng-template #popupParticipants let-dialog>
  <codx-popup-participants [lstParticipants]="lstParticipants" [dialog]="dialog" [isType]="'I'"
    (eventUser)="eventUser($event)"></codx-popup-participants>
</ng-template>
