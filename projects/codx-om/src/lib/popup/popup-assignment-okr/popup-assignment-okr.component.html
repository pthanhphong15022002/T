<codx-form #form [body]="body" [footer]="footer" [dialog]="dialogRef" 
  [showHeader]="true" [headerText]="title" [subHeaderText]="okrName"  >
  
  <ng-template #body>
    <div class="justify-content-between align-items-center h-100">
      <!--Header-->
      <div class="d-flex flex-column justify-content-center align-items-center ">
        <!-- <codx-label [default]="title" name="lblAssignment" class="fs-2 fw-bold"></codx-label>
        <span class="fs-5  text-center w-75">{{okrName}}</span> -->
        <!-- <div class="d-flex justify-content-center my-1">
          <div class="d-flex align-items-center mx-2">
            <codx-input type="radio" name="category" field="R" [checked]="radioKRCheck" 
            [label]="'Phân công thành kết quả'"
              [crrValue]="radioKRCheck" (valueChange)="valueTypeChange($event)">
            </codx-input>            
          </div>
          <div class="d-flex align-items-center  mx-2">
            <codx-input type="radio" name="category" field="O" [checked]="radioOBCheck"
              [crrValue]="radioOBCheck" (valueChange)="valueTypeChange($event)"
              [label]="'Phân công thành mục tiêu'">
            </codx-input>
          </div>
        </div> -->
        <!--Body-->
        <div class="d-block w-75">
          <ejs-tab id="om-tab" class="h-100" #assignTab>
            <e-tabitems>
              <e-tabitem>
                <ng-template #headerText>
                  <div class="d-flex align-items-center position-sticky h-100">
                    <span class="fa-solid icon-i-diagram-3-fill me-2"></span>
                    <codx-label default="Sơ đồ tổ chức" fiedName="lbltaget" class="fw-bold"></codx-label>
                  </div>
                </ng-template>
                <ng-template #content>
                  <div class="mt-5">
                    <codx-input
                      type="combobox"
                      [refValue]="'OrganizationUnits'"
                      placeholder="Tìm kiếm"
                      (valueChange)="cbxOrgChange($event)"
                    ></codx-input>
                  </div>
                  <div class="d-flex justify-content-between align-items-top mt-5" *ngIf="assignmentOKR?.objectID!=null">
                    <div class="d-flex flex-row w-100">
                      <span class="d-flex flex-stack justify-content-center badge-avatar badge-circle badge-light rounded-circle w-40px h-40px me-4"> 
                        <span class="icon-i-building text-primary"></span>
                      </span>
                      <div class="d-flex flex-column">
                        <span class="fs-6 fw-bold text-dark">{{assignmentOKR?.orgUnitName}}</span>
                        <span class="text-gray-700">{{assignmentOKR?.employeeName}}</span>
                        <span class="text-gray-500 fs-7">{{assignmentOKR?.positionName}}</span>
                      </div>                     
                    </div>  
                    <button type="button" class="btn btn-sm btn-icon btn-light-danger" role="button" (click)="deleteOrg()">
                      <i class="icon-close"></i>
                    </button>
                    
                  </div>
                </ng-template>
              </e-tabitem>
              <e-tabitem>
                <ng-template #headerText>
                  <div class="d-flex align-items-center">
                    <span class="fa-solid icon-groups me-2"></span>
                    <codx-label default="Cấp trực tiếp" fiedName="lbltreetaget" class="fw-bold"></codx-label>
                  </div>
                </ng-template>
                <ng-template #content>
                  <div class="mt-5">
                    <codx-input
                      type="combobox"
                      [refValue]="'Positions'"
                      placeholder="Tìm kiếm"
                      (valueChange)="cbxPosChange($event)"
                    ></codx-input>
                  </div>
                  <div class="d-flex justify-content-between align-items-center mt-5" *ngIf="assignmentOKR?.objectID!=null">
                    <div class="d-flex flex-row w-100">
                      <span class="d-flex flex-stack justify-content-center badge-avatar badge-circle badge-light rounded-circle w-40px h-40px me-4"> 
                        <span class="icon-i-person-plus-fill text-primary"></span>
                      </span>
                      <div class="d-flex flex-column" >
                        <span class="fs-6 text-dark fw-bold">{{assignmentOKR?.positionName}}</span>
                        <span class="text-gray-700">{{assignmentOKR?.employeeName}}</span>
                        <span class="fs-7 text-gray-500">{{assignmentOKR?.orgUnitName}}</span>
                      </div>                     
                    </div>  
                    <button type="button" class="btn btn-sm btn-icon btn-light-danger" role="button" (click)="deleteOrg()">
                      <i class="icon-close"></i>
                    </button>
                    
                  </div>
                </ng-template>
              </e-tabitem>
              <e-tabitem>
                <ng-template #headerText >
                  <div class="d-flex align-items-center" >
                    <span class="fa-solid icon-account_circle me-2"></span>
                    <codx-label default="Nhân viên" fiedName="lblmeeting" class="fw-bold"></codx-label>
                  </div>
                </ng-template>
                <ng-template #content>
                  <div class="mt-5">
                    <codx-input
                      type="combobox"
                      [refValue]="'Employees'"
                      placeholder="Tìm kiếm"
                      (valueChange)="cbxEmpChange($event)"
                    ></codx-input>
                  </div>
                  <div class="d-flex justify-content-between align-items-center mt-5" *ngIf="assignmentOKR?.objectID!=null">
                    <div class="d-flex flex-row w-100">
                      <span class="me-4">
                        <codx-img [objectId]="assignmentOKR?.userID" [objectType]="'AD_Users'"></codx-img>
                      </span>
                      <div class="d-flex flex-column" >
                        <span class="fs-6 text-dark fw-bold">{{assignmentOKR?.employeeName}}</span>
                        <span class="text-gray-700">{{assignmentOKR?.positionName}}</span>
                        <span class="fs-7 text-gray-500">{{assignmentOKR?.orgUnitName}}</span>
                      </div>                     
                    </div>  
                    <button type="button" class="btn btn-sm btn-icon btn-light-danger" role="button" (click)="deleteOrg()">
                      <i class="icon-close"></i>
                    </button>
                  </div>
                </ng-template>
              </e-tabitem>
            </e-tabitems>
          </ejs-tab>
        </div>
      </div>

    </div>


  </ng-template>
<!-- <div class="d-flex col-8 flex-row" *ngIf="funcID==deptFuncID">
                      <span class="d-flex justify-content-center align-items-center badge-avatar badge-circle badge-light rounded-circle"> <span class="icon-i-building text-primary"></span></span>
                      <div class="d-flex flex-column">
                        <span class="ms-4 fw-bold">{{assignmentOKR?.positionName}}</span>
                        <span class="ms-4 text-gray-600">{{assignmentOKR?.employeeName}}</span>
                        <span class="ms-4 text-gray-600">{{assignmentOKR?.orgUnitName}}</span>
                      </div>                     
                    </div>  
                    <div class="d-flex col-8 flex-row" *ngIf="funcID==orgFuncID">
                      <span class="d-flex justify-content-center align-items-center badge-avatar badge-circle badge-light rounded-circle"> <span class="icon-i-building text-primary"></span></span>
                      <div class="d-flex flex-column">
                        <span class="ms-4 fw-bold">{{assignmentOKR?.deptFuncID}}</span>
                        <span class="ms-4 text-gray-600">{{assignmentOKR?.orgUnitName}}</span>
                        <span class="ms-4 text-gray-600">{{assignmentOKR?.orgUnitName}}</span>
                      </div>                     
                    </div>   -->
  <ng-template #footer>
    <!--Footer-->
      <div class="d-flex justify-content-center">
        <div class="my-3 d-flex align-items-center"> 
          <button type="button" (click)="cancel()"
            class="btn btn-outline-primary">
            <codx-label name="lblCancel" default="Hủy"></codx-label>
          </button>
          <button type="button" (click)="onSaveForm()"
            class="btn btn-primary ms-2">
            <codx-label name="lblSave" default="Lưu" ></codx-label>
          </button>
        </div>
    </div>
    
  </ng-template>
</codx-form>