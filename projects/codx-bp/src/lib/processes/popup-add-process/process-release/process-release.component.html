<codx-views
  #view
  [funcID]="funcID"
  [views]="views"
  [button]="button"
  (buttonClick)="click($event)"
  [service]="service"
  [entityName]="entityName"
  [idField]="idField"
  [funcID]="funcID"
  [assemblyName]="assemblyName"
  [className]="className"
  [method]="method"
  [dataObj]="dataObj"
>
</codx-views>

<!--VIEW KANBAN-->
<ng-template #viewColumKaban let-data>
  <div
    class="d-flex align-items-center justify-content-between cursor-pointer w-100 has-actions-menu h-100"
    [id]="data?.keyField"
    [ngStyle]="{ 'background-color': data?.colorText }"
  >
    <div class="line-colums d-flex align-items-center">
      <span
        [ngClass]="data?.icon"
        [ngStyle]="{ color: data?.color }"
        class="me-1"
      >
      </span>
      <span
        class="fs-6"
        [ngStyle]="{ color: data?.color }"
        [ngbTooltip]="data.headerText"
        container="body"
        placement="bottom"
      >
        {{ data?.headerText }}
      </span>
    </div>
  </div>
</ng-template>

<ng-template #cardKanban let-data let-setting="setting">
  <div class="d-flex flex-column p-4" (dblclick)="openFormDetail(data)">
    <span class="fw-bold">{{ data.title }}</span>
    <div class="d-flex align-items-center justify-content-between mt-2">
      <div class="d-flex align-items-center">
        <codx-vll
          [name]="'BP014'"
          [value]="data?.status"
          [showText]="true"
          [showIcon]="true"
          class="badge badge-light badge-md"
        >
        </codx-vll>
        <span class="mx-2">Ngày tạo : </span>
        <span>{{ data.createdOn | date : "dd/MM/yyyy" }}</span>
      </div>
      <codx-img
        [objectId]="data?.createdBy"
        objectType="AD_Users"
        [width]="30"
        [imageType]="'circle'"
      >
      </codx-img>
    </div>
  </div>
</ng-template>
<!--END VIEW KANBAN-->

<!--VIEW LIST-->
<ng-template #headerTemplateList let-data>
  <div class="d-flex w-100 ps-2 pe-4 m-2" style="background: #e3ecf1">
    <div class="w-30 text-dark fw-bold p-3 fw-500">
      <codx-label
        fiedName="list_Title"
        [setRequire]="false"
        [formModel]="view.formModel"
        [default]="'Yêu cầu'"
      ></codx-label>
    </div>
    <div class="w-10 text-dark fw-bold p-3 fw-500">
      <codx-label
        fiedName="list_CurrentStage"
        [setRequire]="false"
        [formModel]="view.formModel"
        [default]="'Giai đoạn'"
      ></codx-label>
    </div>
    <div class="w-15 text-dark fw-bold p-3 fw-500">
      <codx-label
        fiedName="list_Status"
        [setRequire]="false"
        [formModel]="view.formModel"
        [default]="'Trình trạng'"
      ></codx-label>
    </div>
    <div class="w-5 text-dark fw-bold p-3 fw-500">
      <codx-label
        fiedName="list_Demurrage"
        [setRequire]="false"
        [formModel]="view.formModel"
        [default]="'Trễ hạn?'"
      ></codx-label>
    </div>
    <div class="w-25 text-dark fw-bold p-3 fw-500">
      <codx-label
        fiedName="list_ExecutionTime"
        [setRequire]="false"
        [formModel]="view.formModel"
        [default]="'Thời gian thực hiện'"
      ></codx-label>
    </div>
    <div class="w-15 text-dark fw-bold p-3 fw-500">
      <codx-label
        fiedName="list_CreatedBy"
        [setRequire]="false"
        [formModel]="view.formModel"
        [default]="'Người tạo'"
      ></codx-label>
    </div>
  </div>
</ng-template>

<ng-template #templateList let-data>
  <div class="d-flex align-items-center border-bottom">
    <div class="w-30 p-3 ps-5 d-flex flex-column">
      <div
        class="fw-bold"
        [innerHTML]="
          data?.title | formatvalue : view.formModel : 'Title' | async
        "
      ></div>
      <div class="text-gray-700 d-flex">
        <codx-label
          class="label-colon"
          fiedName="CreatedOn"
          [setRequire]="false"
          [formModel]="view.formModel"
          [default]="'Ngày tạo'"
        ></codx-label>
        <div
          class="ps-5"
          [innerHTML]="
            data?.createdOn | formatvalue : view.formModel : 'CreatedOn' | async
          "
        ></div>
      </div>
    </div>
    <div class="w-10 p-3"></div>
    <div class="w-15 p-3"></div>
    <div class="w-5 p-3 d-flex flex-wrap"></div>
    <div class="w-25 p-3 d-flex flex-column">
      <div class="d-flex">
        <codx-label
          class="label-colon text-gray-800"
          fiedName="PlanTime"
          [setRequire]="false"
          [formModel]="view.formModel"
          [default]="'Kết hạch'"
        ></codx-label>
        <div class="text-gray-600 d-flex">
          <div
            [innerHTML]="
              data?.startDate
                | formatvalue : view.formModel : 'StartDate'
                | async
            "
          ></div>
          <div class="ms-1 me-1">-</div>
          <div
            [innerHTML]="
              data?.endDate | formatvalue : view.formModel : 'EndDate' | async
            "
          ></div>
        </div>
      </div>
      <div class="d-flex">
        <codx-label
          class="label-colon text-gray-800"
          fiedName="ActualTime"
          [setRequire]="false"
          [formModel]="view.formModel"
          [default]="'Thực tế'"
        ></codx-label>
        <div class="text-gray-600 d-flex">
          <div
            [innerHTML]="
              data?.actualStart
                | formatvalue : view.formModel : 'ActualStart'
                | async
            "
          ></div>
          <div class="ms-1 me-1">-</div>
          <div
            [innerHTML]="
              data?.actualEnd
                | formatvalue : view.formModel : 'ActualEnd'
                | async
            "
          ></div>
        </div>
      </div>
    </div>
    <div class="w-15 p-3">
      <div class="d-flex justify-content-start align-items-center">
        <div class="me-3">
          <codx-img
            [objectId]="data.createdBy"
            [objectType]="'AD_Users'"
            [width]="35"
          >
          </codx-img>
        </div>
        <div class="d-flex flex-column w-100">
          <div class="d-flex flex-column">
            <div
              class="fw-bold fs-6 text-dark line-clamp line-clamp-1"
              [innerHTML]="
                data?.createdBy
                  | formatvalue : view.formModel : 'CreatedBy'
                  | async
              "
            ></div>
            <!-- <div class="text-gray-500">{{ data.positionName }}</div> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!--END VIEW LIST-->
