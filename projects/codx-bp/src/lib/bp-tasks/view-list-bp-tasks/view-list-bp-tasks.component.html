<div
  class="d-flex align-items-center border-bottom ps-2 pe-4"
  *ngIf="dataSelected"
  (dblclick)="dbClick(dataSelected)"
>
  <div class="w-20px p-2 d-flex align-items-center">
    <div
      *ngIf="
        dataSelected.endDate &&
        (dataSelected?.actualEnd | checkDuedateValue : dataSelected?.endDate)
      "
      class="icon-notifications icon-18 text-danger d-flex align-items-center"
      [ngbTooltip]="tempDueDate"
    ></div>
    <ng-template #tempDueDate>
      <codx-label
        [formModel]="formModel"
        default="Quá hạn"
        name="lbltempDueDateIns"
      ></codx-label>
    </ng-template>
  </div>
  <div class="w-150px p-2 d-flex align-items-center">
    <codx-vll
      [name]="'BP001'"
      [value]="dataSelected?.activityType"
      [showText]="true"
      [showIcon]="true"
    >
    </codx-vll>
  </div>
  <div class="w-250px p-2 d-flex align-items-center">
    <div class="fw-bold">
      {{ dataSelected?.taskName }}
    </div>
  </div>
  <div class="w-350px p-2 d-flex align-items-center">
    {{ dataSelected?.memo }}
  </div>
  <div class="w-350px p-2 d-flex align-items-center flex-column">
    <div class="d-flex mb-1">
      <codx-label
        class="label-colon text-dark fw-bold"
        fiedName="list_PlanTime"
        [setRequire]="false"
        [formModel]="formModel"
        [default]="'Kế hoạch'"
      ></codx-label>
      <div class="text-gray-600 d-flex">
        <div *ngIf="dataSelected.startDate">
          <span>{{ dataSelected.startDate | date : "dd/MM/yyyy" }}</span>
        </div>
        <div *ngIf="!dataSelected.startDate">
          <span class="place-holder">dd/mm/yyyy</span>
        </div>
        <span class="ms-1 me-1">-</span>
        <div *ngIf="dataSelected.endDate">
          <span>{{ dataSelected.endDate | date : "dd/MM/yyyy" }}</span>
        </div>
        <div *ngIf="!dataSelected.endDate">
          <span class="place-holder">dd/mm/yyyy</span>
        </div>
        <span class="ms-1 me-1">|</span>
        <span class="me-1">{{ dataSelected.duration }}</span>
        <codx-label
          class=""
          fiedName="lbl_Duration"
          [setRequire]="false"
          [formModel]="formModel"
          [default]="'giờ'"
        ></codx-label>
      </div>
    </div>
    <div class="d-flex">
      <codx-label
        class="label-colon text-dark fw-bold"
        fiedName="ActualTime"
        [setRequire]="false"
        [formModel]="formModel"
        [default]="'Thực tế'"
      ></codx-label>
      <div class="text-gray-600 d-flex">
        <div *ngIf="dataSelected.actualStart">
          <span>{{ dataSelected.actualStart | date : "dd/MM/yyyy" }}</span>
        </div>
        <div *ngIf="!dataSelected.actualStart">
          <span class="place-holder">dd/mm/yyyy</span>
        </div>
        <span class="ms-1 me-1">-</span>
        <div *ngIf="dataSelected.actualEnd">
          <span>{{ dataSelected.actualEnd | date : "dd/MM/yyyy" }}</span>
        </div>
        <div *ngIf="!dataSelected.actualEnd">
          <span class="place-holder">dd/mm/yyyy</span>
        </div>
        <span class="mx-2">|</span>
        <span class="text-dark fw-bold me-1">{{ dataSelected.interval }}</span>
        <codx-label
          class="text-dark"
          fiedName="lbl_Interval"
          [setRequire]="false"
          [formModel]="formModel"
          [default]="'giờ'"
        ></codx-label>
      </div>
    </div>
  </div>
  <div class="w-100px p-2 d-flex align-items-center">
    <codx-vll
      [name]="'BP014'"
      [value]="dataSelected?.status"
      [showText]="true"
      [showIcon]="true"
      class="badge badge-light badge-md"
    >
    </codx-vll>
  </div>
  <div class="w-250px p-2 d-flex align-items-center flex-column">
    <div
      class="d-flex justify-content-start align-items-center"
      *ngIf="dataSelected.createdBy"
    >
      <div class="me-3">
        <codx-img
          [objectId]="dataSelected.createdBy"
          [objectType]="'AD_Users'"
          [width]="35"
        >
        </codx-img>
      </div>
      <div class="d-flex flex-column w-100">
        <div class="d-flex flex-column">
          <div class="fw-bold fs-6 text-dark line-clamp line-clamp-1">
            {{ info?.userName }}
          </div>
          <div class="text-gray-500">{{ info?.positionName }}</div>
        </div>
      </div>
    </div>
  </div>
  <div class="w-200px p-2 d-flex align-items-center">
    {{ process?.processName }}
  </div>
  <div class="w-200px p-2 d-flex align-items-center">
    {{ instance?.title }}
  </div>
  <div class="w-100px p-2 d-flex justify-content-center">
    <div class="attachment-file d-flex align-items-center" (click)="countData > 0 ? openPopup() : ''">
      <span class="icon-i-paperclip"></span>
      <span class="count-file">{{ countData }}</span>
    </div>
  </div>
</div>

<ng-template #tmpListItem let-dialog>
  <codx-form
    [body]="body"
    [dialog]="dialog"
    headerText="Danh sách file đính kèm"
  >
  </codx-form>
  <ng-template #body>
    <codx-thumbnail
      class="popup-attachment"
      [files]="lstFile"
      [formModel]="formModel"
      [hideDelete]="true"
      [hideMoreF]="true"
    ></codx-thumbnail>
  </ng-template>
</ng-template>
