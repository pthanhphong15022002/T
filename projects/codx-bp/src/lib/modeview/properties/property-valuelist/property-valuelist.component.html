<div class="d-flex flex-column w-100 h-100 px-4 py-6">
  <lib-property-default-title
    [data]="data"
    [isBack]="isBack"
    (dataChange)="changeValue($event)"
    (back)="backDefault()"
  ></lib-property-default-title>
  <div class="mt-4">
    <codx-label
      formName="DynamicForms"
      [gridViewName]="'grvDynamicForms' + data.controlType"
      [fiedName]="'title'"
      default="Tên ô nhập liệu"
      class="fw-bold"
    ></codx-label>
    <codx-input
      type="text"
      [crrValue]="data.title"
      field="title"
      (valueChange)="changeValue($event)"
      [disabled]="data?.refField"
    ></codx-input>
    <span class="fst-italic fw-light">ID: {{ data?.fieldName }}</span>
  </div>
  <div class="mt-4">
    <codx-label
      formName="DynamicForms"
      [gridViewName]="'grvDynamicForms' + data.controlType"
      [fiedName]="'defaultValue'"
      default="Giá trị mặc định khi thêm mới biểu mẫu"
      class="fw-bold"
    ></codx-label>
    <codx-input
      type="text"
      [crrValue]="data.defaultValue"
      field="defaultValue"
      (valueChange)="changeValue($event)"
      placeholder="Nhập giá trị mặc định"
      [disabled]="data?.refField"
    ></codx-input>
  </div>
  <div class="mt-4">
    <codx-label
      formName="DynamicForms"
      [gridViewName]="'grvDynamicForms' + data.controlType"
      [fiedName]="'description'"
      default="Hiển thị chuỗi gợi ý khi chưa có dữ liệu"
      class="fw-bold"
    ></codx-label>
    <codx-input
      type="text"
      [crrValue]="data.description"
      field="description"
      placeholder="Nhập giá trị hiển thị"
      (valueChange)="changeValue($event)"
      [disabled]="data?.refField"
    ></codx-input>
  </div>

  <div class="border-top mt-8">
    <div class="d-flex align-items-center mt-4">
      <codx-label
        formName="DynamicForms"
        [fiedName]="'listNames'"
        default="Danh sách giá trị"
        class="fw-bold w-100"
      ></codx-label>

      <button
        type="button"
        class="btn btn-light w-100"
        (click)="!data?.refField ? openSettingVLL() : undefined"
      >
        <i class="icon-i-plus"></i>
        <codx-label
          formName="DynamicForms"
          fiedName="lblSettingValuelist"
          default="Thiết lập"
        ></codx-label>
      </button>
    </div>
    <div
      class="d-flex align-items-center mt-2"
      *ngFor="let item of lstVll; let i = index"
    >
      <codx-input
        field="iconSet"
        type="vllicon"
        [refValue]="'L1470'"
        [crrValue]="item.iconSet"
        (valueChange)="valueChangeVll($event, i)"
        [disabled]="data?.refField"
      >
      </codx-input>
      <input
        type="text"
        class="form-control mx-2"
        [value]="item.customValues"
        [ngStyle]="{
          color: item?.textColorSet,
          'background-color': item?.colorSet
        }"
        placeholder="Nhập tên"
        [disabled]="data?.refField"
        (change)="valueChangeText($event, i)"
      />
      <codx-input
        field="textColorSet"
        class="ms-4"
        type="colorpicker"
        [showSelect]="false"
        [showButtons]="false"
        [showInputColor]="true"
        [showText]="false"
        [modeSwitcher]="false"
        [crrValue]="item.textColorSet || '#000000'"
        (valueChange)="valueChangeVll($event, i)"
        [disabled]="data?.refField"
      >
      </codx-input>
      <codx-input
        field="colorSet"
        class="ms-4"
        type="colorpicker"
        [showSelect]="false"
        [showButtons]="false"
        [showInputColor]="true"
        placeholder="A"
        [showText]="false"
        [modeSwitcher]="false"
        [crrValue]="item.colorSet || '#FFFFFF'"
        (valueChange)="valueChangeVll($event, i)"
        [disabled]="data?.refField"
      >
      </codx-input>

      <div
        class="mx-2 cursor-pointer"
        (click)="item.customValues ? deleteValues(i) : undefined"
      >
        <i class="icon-close" [class.text-gray-300]="!item.customValues"></i>
      </div>
    </div>
  </div>
  <lib-property-cbb-dependence
    [data]="data"
    [dataTable]="dataTable"
    (dataChange)="valueChangeData($event)"
    (dataChangeTableEmit)="valueChangeTableEmit($event)"
  ></lib-property-cbb-dependence>
  <div class="border-top mt-8">
    <div class="d-flex align-items-center mt-4">
      <codx-input
        type="radio"
        name="radiomwvll"
        [crrValue]="'2'"
        field="refType"
        label="DropDown"
        [checked]="dropdown"
        (valueChange)="changeValue($event)"
        [disabled]="data?.refField"
      ></codx-input>
      <codx-input
        type="radio"
        name="radiomwvll"
        [crrValue]="'2C'"
        field="refType"
        label="Checkbox"
        [checked]="checkbox"
        (valueChange)="changeValue($event)"
        [disabled]="data?.refField"
        ngClass="ms-4"
      ></codx-input>
    </div>
    <div class="d-flex align-items-center mt-4">
      <codx-input
        type="switch"
        field="multiSelect"
        class="mt-2"
        (valueChange)="valueChangeVllInput($event)"
        [disabled]="data?.refField"
      ></codx-input>
      <codx-label
        formName="DynamicForms"
        [gridViewName]="'grvDynamicForms' + data.controlType"
        [fiedName]="'IsRequired'"
        default="Chọn nhiều giá trị"
        class="fw-bold ms-2"
      ></codx-label>
    </div>
    <div class="d-flex align-items-center mt-1">
      <codx-input
        type="switch"
        [crrValue]="data.isRequired"
        field="isRequired"
        label="Bắt buộc"
        (valueChange)="changeValue($event)"
        [disabled]="data?.refField"
        class="mt-2"
      ></codx-input>
      <codx-label
        formName="DynamicForms"
        [gridViewName]="'grvDynamicForms' + data.controlType"
        [fiedName]="'IsRequired'"
        default="Bắt buộc"
        class="fw-bold ms-2"
      ></codx-label>
    </div>
    <div class="d-flex align-items-center mt-2">
      <codx-input type="switch" [crrValue]="data?.validateControl == 'AP'" [disabled]="data?.refField" field="validateControl" label="Bắt buộc"  (valueChange)="changeValueApprovalValidate($event)" class="mt-2"></codx-input>
      <codx-label formName="DynamicForms" [gridViewName]="'grvDynamicForms' + data.controlType" [fiedName]="'IsValidateControl'" default="Xét duyệt" class="fw-bold ms-2"></codx-label>
  </div>
    <div class="d-flex align-items-center justify-content-between mt-1">
      <div class="d-flex align-items-center">
          <codx-input type="switch" [disabled]="data?.refField" [crrValue]="data?.visibleControl?.visibleControl" field="visibleControl" label="Điều kiện hiện thị"  (valueChange)="changeValueVisibleControl($event)" class="mt-2"></codx-input>
          <codx-label formName="DynamicForms" [gridViewName]="'grvDynamicForms' + data.controlType" [fiedName]="'VisibleControl'" default="Điều kiện hiện thị" class="fw-bold ms-2"></codx-label>
      </div>
      <i class="icon-edit-one cursor-pointer" [class.text-primary]="data?.visibleControl?.visibleControl" (click)="data?.visibleControl?.visibleControl? openVisibleControlForm(): undefined"></i>
  </div>
  </div>
</div>
