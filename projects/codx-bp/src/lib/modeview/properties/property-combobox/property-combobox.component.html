<div class="d-flex flex-column w-100 h-100 px-4 py-6 overflow-auto">
  <lib-property-default-title
    [data]="data"
    [isBack]="isBack"
    (dataChange)="changeValue($event)"
    (back)="backDefault()"
  ></lib-property-default-title>
  <div class="mt-4">
    <codx-label
      formName="DynamicForms"
      [gridViewName]="'grvDynamicForms' + data.controlType"
      [fiedName]="'title'"
      default="Tên ô nhập liệu"
      class="fw-bold"
    ></codx-label>
    <codx-input
      type="text"
      [crrValue]="data.title"
      field="title"
      (valueChange)="changeValue($event)"
      [disabled]="data?.refField"
    ></codx-input>
    <span class="fst-italic fw-light">ID: {{ data?.fieldName }}</span>
  </div>
  <div class="mt-4">
    <codx-label formName="DynamicForms" [gridViewName]="'grvDynamicForms' + data.controlType" [fiedName]="'memo'" default="Diễn giải" class="fw-bold"></codx-label>
    <codx-input type="text" [disabled]="data?.refField" [crrValue]="data.memo" field="memo" (valueChange)="changeValue($event)"></codx-input>
</div>
  <div class="mt-4">
    <codx-label
      formName="DynamicForms"
      [gridViewName]="'grvDynamicForms' + data.controlType"
      [fiedName]="'description'"
      default="Hiển thị chuỗi gợi ý khi chưa có dữ liệu"
      class="fw-bold"
    ></codx-label>
    <codx-input
      type="text"
      [crrValue]="data.description"
      field="description"
      placeholder="Nhập giá trị hiển thị"
      (valueChange)="changeValue($event)"
      [disabled]="data?.refField"
    ></codx-input>
  </div>
  <div class="border-top mt-8">
    <div class="d-flex align-items-center justify-content-between mt-4">
      <codx-label
        formName="DynamicForms"
        [fiedName]="'listNames'"
        default="Danh sách giá trị"
        class="fw-bold"
      ></codx-label>
   
    </div>
    <div
      class="d-flex flex-column m-2"
      *ngIf="!data?.refValue; else tmpData"
    >
      <button
        type="button"
        class="btn btn-light w-100"
        (click)="!data?.refField ? openSettingCbx() :undefined"
      >
        <!-- <i class="icon-i-plus"></i> -->
        <codx-label
          formName="DynamicForms"
          fiedName="lblAddEditCbb"
          default="Thiết lập/Chỉnh sửa danh sách"
        ></codx-label>
      </button>
      <button
        type="button"
        class="btn btn-light w-100 mt-2"
        (click)="!data?.refField ? openSettingCbx('1') : undefined"
      >
        <!-- <i class="icon-i-plus"></i> -->
        <codx-label
          formName="DynamicForms"
          fiedName="lblCustomType1"
          default="Chọn từ danh sách có sẵn"
        ></codx-label>
      </button>
      <button
        type="button"
        class="btn btn-light w-100 mt-2"
        (click)="!data?.refField ? openSettingCbx('2') : undefined"
      >
        <!-- <i class="icon-i-plus"></i> -->
        <codx-label
          formName="DynamicForms"
          fiedName="lblCustomType2"
          default="Thêm mới từ dữ liệu động"
        ></codx-label>
      </button>
    </div>
    <ng-template #tmpData>
      <div class="d-flex align-items-center justify-content-between border p-4 mt-4">
        <div class="d-flex align-items-center">
          <i class="icon-i-shuffle"></i>
          <span class="ms-4">{{nameCbb}}</span>
        </div>
        <i
          class="icon-edit_square cursor-pointer"
          (click)="!data?.refField ? openSettingCbx():undefined"
          *ngIf="data?.refValue"
      ></i>
      </div>
    </ng-template>
  </div>
  <lib-property-cbb-dependence
    [data]="data"
    [dataTable]="dataTable"
    [listCbx]="listCbx"
    (dataChange)="valueChangeData($event)"
    (dataChangeTableEmit)="valueChangeTableEmit($event)"
  ></lib-property-cbb-dependence>
  <div class="border-top mt-8">
    <div class="d-flex align-items-center mt-4">
      <codx-input
        type="radio"
        name="radiomwuser"
        [crrValue]="'3'"
        field="refType"
        label="DropDown"
        [checked]="dropdown"
        (valueChange)="changeValue($event)"
        [disabled]="data?.refField"
      ></codx-input>
      <codx-input
        type="radio"
        name="radiomwuser"
        [crrValue]="'3P'"
        field="refType"
        label="Popup"
        [checked]="popup"
        (valueChange)="changeValue($event)"
        ngClass="ms-4"
        [disabled]="data?.refField"
      ></codx-input>
    </div>
    <div class="d-flex align-items-center mt-4">
      <codx-input
        type="switch"
        field="isRequired"
        label="Bắt buộc"
        class="mt-2"
        [disabled]="data?.refField"
      ></codx-input>
      <codx-label
        formName="DynamicForms"
        [gridViewName]="'grvDynamicForms' + data.controlType"
        [fiedName]="'IsRequired'"
        default="Chọn nhiều giá trị"
        class="fw-bold ms-2"
      ></codx-label>
    </div>
    <div class="d-flex align-items-center mt-1">
      <codx-input
        type="switch"
        [crrValue]="data.isRequired"
        field="isRequired"
        label="Bắt buộc"
        (valueChange)="changeValue($event)"
        class="mt-2"
        [disabled]="data?.refField"
      ></codx-input>
      <codx-label
        formName="DynamicForms"
        [gridViewName]="'grvDynamicForms' + data.controlType"
        [fiedName]="'IsRequired'"
        default="Bắt buộc"
        class="fw-bold ms-2"
      ></codx-label>
    </div>
    <div class="d-flex align-items-center justify-content-between mt-1">
      <div class="d-flex align-items-center">
          <codx-input type="switch" [disabled]="data?.refField" [crrValue]="data?.visibleControl?.visibleControl" field="visibleControl" label="Điều kiện hiện thị"  (valueChange)="changeValueVisibleControl($event)" class="mt-2"></codx-input>
          <codx-label formName="DynamicForms" [gridViewName]="'grvDynamicForms' + data.controlType" [fiedName]="'VisibleControl'" default="Điều kiện hiện thị" class="fw-bold ms-2"></codx-label>
      </div>
      <i class="icon-edit-one cursor-pointer" [class.text-primary]="data?.visibleControl?.visibleControl" (click)="data?.visibleControl?.visibleControl? openVisibleControlForm(): undefined"></i>
  </div>
  </div>
</div>
