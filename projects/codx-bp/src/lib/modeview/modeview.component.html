<div class="d-flex flex-column w-100 h-100">
  <ng-container *ngTemplateOutlet="header"></ng-container>
  <ng-container *ngTemplateOutlet="body"></ng-container>
</div>

<ng-template #header>
  <div class="d-flex align-items-center justify-content-between border-bottom bg-white py-2 px-6">
    <codx-label default="Form nhập liệu" formName="fnBPModeView" fiedName="BPModeViewTitle" class="fs-4 fw-bold"></codx-label>
    <div class="d-flex align-items-center">
      <div id="group_period" class="btn-group mt-2 bp-header-button-group" role="group" aria-label="Basic radio toggle button group">
        <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked (change)="changeView(1)">
        <label class="btn btn-outline-secondary" for="btnradio1">
          <i class="icon-edit_square icon-20"></i>
          <codx-label default="Chỉnh sửa" class="mt-1"></codx-label>
        </label>

        <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" (change)="changeView(2)">
        <label class="btn btn-outline-secondary" for="btnradio2">
          <i class="icon-i-eye icon-20"></i>
          <codx-label default="Xem" class="mt-1"></codx-label>
        </label>
      </div>
      <div class="ms-5 mt-1 cursor-pointer" (click)="close()">
        <i class="icon-close icon-20 text-dark"></i>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #body>
  <div class="d-flex align-items-center w-100 h-100 bp-mw-accordion-a overflow-auto " *ngIf="vllBP002">
    <div
      cdkDropList
      #menuList="cdkDropList"
      [cdkDropListData]="vllBP002?.datas"
      cdkDropListSortingDisabled
      [cdkDropListConnectedTo]="[tableList]"
      (cdkDropListDropped)="drop($event)"

      class="d-flex flex-column w-350px h-100 bg-white overflow-auto px-2 pb-4"
    >
      <ejs-accordion>
        <e-accordionitems>
          <e-accordionitem expanded='true'>
            <ng-template #header>
              <div class="fw-bold">Cơ bản</div>
            </ng-template>
            <ng-template #content>
              <div class="d-flex flex-column">
                <ng-container *ngFor="let item of vllBP002?.datas">
                  <div class="w-100 py-3 px-4 mb-3 bg-item-lightest rd-3px cursor-move mw-300px d-flex align-items-center" cdkDrag  [cdkDragDisabled]="viewType == 2" [cdkDragData]="item" *ngIf="item.groupType == 0">
                    <i [ngClass]="item.icon" class="icon-22"></i>
                    <span class="fw-bold ms-4 mt-1">{{item.text}}</span>
                  </div>
                </ng-container>
              </div>
            </ng-template>
          </e-accordionitem>
          <e-accordionitem expanded='true'>
            <ng-template #header>
              <div class="fw-bold">Nâng cao</div>
            </ng-template>
            <ng-template #content>
              <div class="d-flex flex-column">
                <ng-container *ngFor="let item of vllBP002?.datas">
                  <div class="w-100 py-3 px-4 mt-3 bg-item-lightest rd-3px cursor-move mw-300px d-flex align-items-center" cdkDrag [cdkDragDisabled]="viewType == 2" [cdkDragData]="item" *ngIf="item.groupType == 1">
                    <i [ngClass]="item.icon" class="icon-22"></i>
                    <span class="fw-bold ms-4 mt-1">{{item.text}}</span>
                  </div>
                </ng-container>
              </div>
            </ng-template>
          </e-accordionitem>
        </e-accordionitems>
      </ejs-accordion>
    </div>

    <div class="d-flex justify-content-center w-100 h-100 bg-F5F8FA">
      <div
        class="d-flex flex-column w-700px h-100 bg-white pb-4 overflow-auto"
      >
        <ng-container *ngTemplateOutlet="form ; context: { $implicit: table[0].children[0] }"></ng-container>
        <div
          class="h-100 mt-2 px-4 example-box1"
          cdkDropList
          #tableList="cdkDropList"
          [cdkDropListData]="table"
          (cdkDropListDropped)="drop($event)"
        >
          <div cdkDropListGroup>
            <div class="example-box"  *ngFor="let item of table ; let i = index" cdkDrag [cdkDragDisabled]="true">
              <div
                class="d-flex align-items-center justify-content-between"
                #childList="cdkDropList" *ngIf="item.children && item.children.length>0 && i>0"
                [cdkDropListData]="item.children"
                cdkDropList
                cdkDropListOrientation="horizontal"
                (cdkDropListDropped)="drop2($event)"
                [cdkDropListEnterPredicate]="evenPredicate(item.name)"
              >
                <div class="d-flex align-items-center p-2 w-100 cursor-pointer"
                  *ngFor="let subItem of item.children;let j = index "
                  cdkDrag
                  [cdkDragDisabled]="subItem.controlType == 'Title' || viewType == 2"
                  [cdkDragData]="item.name"
                  [ngClass]="(dataSelected.columnOrder == subItem.columnOrder &&  dataSelected.columnNo == subItem.columnNo) ? 'active':''"
                  (click)="viewType == 1 ? selectedItem(subItem): undefined"
                >
                 <ng-container [ngSwitch]="subItem.value">
                    <ng-container *ngSwitchCase="'Text'">
                      <ng-container *ngTemplateOutlet="text ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'SubTitle'">
                      <ng-container *ngTemplateOutlet="text ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'ValueList'">
                      <ng-container *ngTemplateOutlet="valueList ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'ComboBox'">
                      <ng-container *ngTemplateOutlet="combobox ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'DateTime'">
                      <ng-container *ngTemplateOutlet="datetime ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Attachment'">
                      <ng-container *ngTemplateOutlet="attachment ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Number'">
                      <ng-container *ngTemplateOutlet="text ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'YesNo'">
                      <ng-container *ngTemplateOutlet="yesno ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'User'">
                      <ng-container *ngTemplateOutlet="valueList ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Share'">
                      <ng-container *ngTemplateOutlet="share ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Rank'">
                      <ng-container *ngTemplateOutlet="rank ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Table'">
                      <ng-container *ngTemplateOutlet="tables ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Progress'">
                      <ng-container *ngTemplateOutlet="progress ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Email'">
                      <ng-container *ngTemplateOutlet="email ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Address'">
                      <ng-container *ngTemplateOutlet="address ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Expression'">
                      <ng-container *ngTemplateOutlet="expression ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Phone'">
                      <ng-container *ngTemplateOutlet="phone ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Title'">
                      <ng-container *ngTemplateOutlet="form ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="'UserInfo'">
                      <ng-container *ngTemplateOutlet="userInfo ; context: { $implicit: subItem }"></ng-container>
                    </ng-container>
                    <ng-container *ngSwitchDefault>...</ng-container>
                  </ng-container>

                  <!-- Văn bản || Số -->
                  <ng-template #text let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="w-100 border mt-2 px-4 py-2 rd-3px" *ngIf="viewType == 1">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                      </div>

                      <ng-container *ngIf="viewType == 2">
                        <ng-container  *ngTemplateOutlet="defaultInput ; context: { $implicit: data }"></ng-container>
                      </ng-container>
                    </div>
                  </ng-template>

                  <!-- Danh sách || User-->
                  <ng-template #valueList let-data>
                    <div class="d-flex flex-column w-100">
                       <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-2 rd-3px" *ngIf="viewType == 1">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                        <i [ngClass]="data.refType == '3P' ? 'icon-person_add_alt_1 text-primary' :'icon-keyboard_arrow_down text-dark' "></i>
                      </div>

                      <ng-container *ngIf="viewType == 2">
                        <ng-container  *ngTemplateOutlet="defaultInput ; context: { $implicit: data }"></ng-container>
                      </ng-container>
                    </div>
                  </ng-template>

                  <!-- Combobox -->
                  <ng-template #combobox let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-2 rd-3px" *ngIf="viewType == 1">
                        <span class="text-muted text-truncate mw-55px">{{data.description}}</span>
                        <i class="icon-keyboard_arrow_down text-dark"></i>
                      </div>

                      <ng-container *ngIf="viewType == 2">
                        <ng-container  *ngTemplateOutlet="defaultInput ; context: { $implicit: data }"></ng-container>
                      </ng-container>
                    </div>
                  </ng-template>

                  <!-- DateTime -->
                  <ng-template #datetime let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-2 rd-3px" *ngIf="viewType == 1">
                        <span class="text-muted text-truncate mw-55px">{{data?.defaultValue && data?.defaultValue != 'Now' ? (data.defaultValue | date: 'dd/MM/yyyy HH:mm:ss') : (data?.defaultValue ? data?.defaultValue : data.description)}}</span>
                        <div class="d-flex align-items-center">
                          <i class="icon-i-calendar text-dark"></i>
                          <i class="icon-i-clock ms-3 text-dark"></i>
                        </div>
                      </div>

                      <ng-container *ngIf="viewType == 2">
                        <ng-container  *ngTemplateOutlet="defaultInput ; context: { $implicit: data }"></ng-container>
                      </ng-container>
                    </div>
                  </ng-template>


                  <!-- attachment -->
                  <ng-template #attachment let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                      </div>
                      <ng-container *ngIf="!data.documentControl || data.documentControl.length == 0">
                        <div class="d-flex align-items-center justify-content-between w-100 border-dotted mt-2 px-4 py-8 rd-5px bd-w-2px bg-item-lightest bc-item-lighter">
                          <div class="d-flex flex-column">
                            <span class="fw-bold">Chọn 1 file từ máy của bạn</span>
                            <span class="text-muted">Kéo thả tài liệu vào đây</span>
                          </div>
                          <div class="d-flex align-items-center justify-content-between rounded bg-primary py-3 px-5">
                            <span class="text-white">Chọn tập tin</span>
                            <img src="../../assets/themes/sys/default/img/BrowseLocal.svg" class="text-white ms-6"/>
                            <img src="../../assets/themes/sys/default/img/BrowseCoDX.svg" class="img-attachment-codx ms-3"/>
                          </div>
                        </div>
                      </ng-container>
                      <ng-container *ngIf="data.documentControl && data.documentControl.length > 0">
                        <div class="d-flex flex-column my-3" *ngFor="let item of data.documentControl">
                          <span>{{item.title}} <span class="text-danger ms-1" *ngIf="item?.isRequired">(*)</span></span>
                          <span class="text-gray-500">{{item.memo}}</span>
                          <div class="d-flex align-items-center justify-content-between mt-2" *ngFor="let item2 of item?.files">
                            <div class="d-flex align-items-center" >
                              <i class="icon-gesture me-2" [class.text-primary]="item2.eSign"></i>
                              <span [innerHTML]="genHTML(item2.fileID)"></span>
                            </div>
                            <div class="d-flex align-items-center">
                              <i class="icon-edit-one icon-20 me-2"></i>
                              <i class="icon-attach_file icon-20"></i>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </ng-template>

                  <!-- yesno -->
                  <ng-template #yesno let-data>
                    <div class="d-flex align-items-center justify-content-between w-100 ps-0">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <ng-container *ngIf="viewType == 1">
                        <ng-container *ngIf="data.controlType == 'Switch'">
                          <div class="form-switch">
                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" disabled>
                          </div>
                        </ng-container>
                        <ng-container *ngIf="data.controlType == 'CheckBox'">
                          <div class="d-flex align-items-center">
                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" checked>
                              <label class="form-check-label" for="flexRadioDefault1">
                                Yes
                              </label>
                            </div>
                            <div class="form-check ms-4">
                              <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                              <label class="form-check-label" for="flexRadioDefault1">
                                No
                              </label>
                            </div>
                          </div>
                        </ng-container>
                      </ng-container>

                      <ng-container *ngIf="viewType == 2">
                        <ng-container  *ngTemplateOutlet="defaultInput ; context: { $implicit: data }"></ng-container>
                      </ng-container>
                    </div>
                  </ng-template>

                  <!-- Share -->
                  <ng-template #share let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-3 rd-3px">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                        <i class="icon-person_add_alt_1 text-primary"></i>
                      </div>
                    </div>
                  </ng-template>

                  <!-- Rank -->
                  <ng-template #rank let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.text}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 mt-2 px-4 py-3 rd-3px">
                        <ng-container *ngFor="let item of [].constructor(data.rank.maxValue); let i = index">
                          <ng-container *ngIf="data.rank.type == '1'">
                            <div class="bp-box-number fw-bold" [style.color]="data.rank.color" [style.borderColor]="data.rank.color" >
                              {{(i + 1)}}
                            </div>
                          </ng-container>
                          <ng-container *ngIf="data.rank.type == '2'">
                            <i [ngClass]="data.rank.icon" [style.color]="data.rank.color"></i>
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </ng-template>

                  <!-- Table -->
                  <ng-template #tables let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <table class="table table-bordered mt-2">
                        <thead>
                          <tr>
                            <th scope="col" *ngIf="data?.tableFormat?.hasIndexNo">#</th>
                            <th scope="col" *ngFor="let col of data?.dataFormat">{{col.title}}</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row" *ngIf="data?.tableFormat?.hasIndexNo"></th>
                            <td *ngFor="let col of data?.dataFormat"></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </ng-template>

                  <!-- Progress -->
                  <ng-template #progress let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex justify-content-between mt-2 px-1">
                        <div>
                          0%
                        </div>
                        <div>
                          100%
                        </div>
                      </div>
                      <div class="progress mt-2">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>
                  </ng-template>

                  <!-- Email -->
                  <ng-template #email let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-3 rd-3px">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                        <i class="icon-email text-dark"></i>
                      </div>
                    </div>
                  </ng-template>

                  <!-- Address -->
                  <ng-template #address let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-3 rd-3px">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                        <i class="icon-location_on text-dark"></i>
                      </div>
                    </div>
                  </ng-template>

                  <!-- Expression -->
                  <ng-template #expression let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-3 rd-3px">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                        <i class="icon-calculate text-dark"></i>
                      </div>
                    </div>
                  </ng-template>

                  <!-- Phone -->
                  <ng-template #phone let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-3 rd-3px">
                        <span class="text-muted text-truncate mw-55px">{{data.defaultValue || data.description}}</span>
                        <i class="icon-settings_phone text-dark"></i>
                      </div>
                    </div>
                  </ng-template>

                  <!-- UserInfo -->
                  <ng-template #userInfo let-data>
                    <div class="d-flex flex-column w-100">
                      <div class="d-flex align-items-center">
                        <i class="icon-drag_indicator me-2 cursor-move" cdkDragHandle *ngIf="viewType == 1"></i>
                        <span class="fw-bold">{{data.title}}</span>
                        <span class="text-danger ms-2" *ngIf="data.isRequired">(*)</span>
                      </div>
                      <div class="d-flex flex-column">
                        <div class="d-flex align-items-center justify-content-between">
                          <div class="d-flex flex-column w-100 p-2">
                            <div class="d-flex align-items-center">
                              <codx-label default="Họ và tên" class="text-gray-500"></codx-label>
                            </div>
                            <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-5 rd-3px">
                            </div>
                          </div>
                          <div class="d-flex flex-column w-100 p-2">
                            <div class="d-flex align-items-center">
                              <codx-label default="Số CMT/CCCD/Hộ chiếu" class="text-gray-500"></codx-label>
                            </div>
                            <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-5 rd-3px">
                            </div>
                          </div>
                        </div>
                        <div class="d-flex align-items-start justify-content-between">
                          <div class="d-flex flex-column w-100 p-2">
                            <div class="d-flex align-items-center">
                              <codx-label default="Email" class="text-gray-500"></codx-label>
                            </div>
                            <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-5 rd-3px">
                            </div>
                            <span class="text-primary fs-7 pt-2">** Nhận mail kích hoạt dịch vụ</span>
                          </div>
                          <div class="d-flex flex-column w-100 p-2">
                            <div class="d-flex align-items-center">
                              <codx-label default="Số điện thoại" class="text-gray-500"></codx-label>
                            </div>
                            <div class="d-flex align-items-center justify-content-between w-100 border mt-2 px-4 py-5 rd-3px">
                            </div>
                          </div>
                        </div>
                        <div class="d-flex flex-column">
                          <div class="d-flex align-items-center justify-content-between p-2">
                            <codx-label default="Ảnh chụp hai mặt của giấy tờ" class="text-gray-500 w-100"></codx-label>
                            <div class="d-flex align-items-center justify-content-between w-100">
                              <codx-input 
                                type="radio"
                                name="ipCCCD"
                                crrValue="CMT"
                                label="CMT"
                                [disabled]="true"
                                [checked]="true"
                              >
                              </codx-input>
                              <codx-input 
                                type="radio"
                                name="ipCCCD"
                                crrValue="CCCD"
                                label="CCCD"
                                [disabled]="true"
                              >
                              </codx-input>
                              <codx-input 
                                type="radio"
                                name="ipCCCD"
                                crrValue="HC"
                                label="Hộ chiếu"
                                [disabled]="true"
                              >
                              </codx-input>
                            </div>
                          </div>
                          <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex flex-column align-items-center w-100 p-2">
                              <div class="image-add-file border bg-F5F8FA rd-3px w-100">
                              </div>
                              <codx-label default="Mặt trước" class="pt-2"></codx-label>
                            </div>
                            <div class="d-flex flex-column align-items-center w-100 p-2">
                              <div class="image-add-file border bg-F5F8FA rd-3px w-100">
                              </div>
                              <codx-label default="Mặt sau" class="pt-2"></codx-label>
                            </div>
                          </div>
                        </div>
                        <div class="d-flex flex-column w-50 p-2">
                          <codx-label default="Ảnh chân dung" class="text-gray-500 w-100"></codx-label>
                          <div class="d-flex flex-column align-items-center w-100">
                            <div class="image-add-file border bg-F5F8FA rd-3px w-100">
                            </div>
                            <codx-label default="Ảnh chân dung" class="pt-2"></codx-label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="w-500px h-100 bg-white overflow-auto">
      <ng-container [ngSwitch]="dataSelected?.value">
        <ng-container *ngSwitchCase="'Title'">
          <lib-property-form [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-form>
        </ng-container>
        <ng-container *ngSwitchCase="'Share'">
          <lib-property-share [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-share>
        </ng-container>
        <ng-container *ngSwitchCase="'SubTitle'">
          <lib-property-text [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-text>
        </ng-container>
        <ng-container *ngSwitchCase="'Text'">
          <lib-property-text [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)" (dataChangeTableEmit)="dataChangeTableEmit($event)"></lib-property-text>
        </ng-container>
        <ng-container *ngSwitchCase="'ValueList'">
          <lib-property-valuelist [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-valuelist>
        </ng-container>
        <ng-container *ngSwitchCase="'DateTime'">
          <lib-property-datetime [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-datetime>
        </ng-container>
        <ng-container *ngSwitchCase="'Number'">
          <lib-property-number [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-number>
        </ng-container>
        <ng-container *ngSwitchCase="'YesNo'">
          <lib-property-yesno [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-yesno>
        </ng-container>
        <ng-container *ngSwitchCase="'User'">
          <lib-property-user [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-user>
        </ng-container>
        <ng-container *ngSwitchCase="'Rank'">
          <lib-property-rank [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-rank>
        </ng-container>
        <ng-container *ngSwitchCase="'Progress'">
          <lib-property-progress [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-progress>
        </ng-container>
        <ng-container *ngSwitchCase="'Phone'">
          <lib-property-phone [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-phone>
        </ng-container>
        <ng-container *ngSwitchCase="'Email'">
          <lib-property-phone [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-phone>
        </ng-container>
        <ng-container *ngSwitchCase="'Address'">
          <lib-property-phone [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-phone>
        </ng-container>
        <ng-container *ngSwitchCase="'Expression'">
          <lib-property-expression [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-expression>
        </ng-container>
        <ng-container *ngSwitchCase="'Attachment'">
          <lib-property-attachment [data]="dataSelected" [formModel]="formModel" (dataChange)="dataChange($event)"></lib-property-attachment>
        </ng-container>
        <ng-container *ngSwitchCase="'ComboBox'">
          <lib-property-combobox [data]="dataSelected" [dataTable]="table" (dataChange)="dataChange($event)"></lib-property-combobox>
        </ng-container>
        <ng-container *ngSwitchCase="'Table'">
          <lib-property-table [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-table>
        </ng-container>
        <ng-container *ngSwitchCase="'UserInfo'">
          <lib-property-userinfo [data]="dataSelected" (dataChange)="dataChange($event)"></lib-property-userinfo>
        </ng-container>
      </ng-container>
    </div>
  </div>
</ng-template>

<!-- Biểu mẫu -->
<ng-template #form let-data>
  <div
    class="d-flex flex-column w-100 p-6 mw-form cursor-pointer"
    (click)="selectedItem(data)"
    [ngClass]="(dataSelected.columnOrder == data.columnOrder &&  dataSelected.columnNo == data.columnNo) ? 'active':''"
  >
    <span class="fw-bold fs-5">{{data.title}}</span>
    <span class="text-muted mt-2">{{data.description }}</span>
  </div>
</ng-template>

<ng-template #defaultInput let-data>
  <codx-input
    [type]="(data?.controlType | addProcessDefaultPrice : data?.controlType : data?.dataType : data?.dataFormat: data?.refType)"
    [refValue]="data.refValue"
    [refType]="data.refType" 
    [field]="getField(data?.fieldName)"
    [crrValue]="data?.defaultValue"
    [placeholder]="data?.description"
  >
  </codx-input>
</ng-template>