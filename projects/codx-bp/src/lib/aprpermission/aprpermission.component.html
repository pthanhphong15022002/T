<codx-views #view service="BP" assemblyName="ERM.Business.BP" entityName="BP_Processes" className="ProcessesBusiness"
  method="GetListPersionsByOwnerAsync" [views]="views" [button]="showButtonAdd ? button : null"
  (buttonClick)="click($event)" [dataObj]="dataObj" [moreFuncs]="moreFuncs" [autoLoad]="true" idField="recID">
</codx-views>

<ng-template #itemViewList let-data>
  <tr class="has-action-menu">
    <td class="rowphoto">
      <div class="padding">
        <div class="d-flex flex-column w-100">
          <div class="fw-bold lh-base mb-2">{{ data.processName }}</div>
          <div class="d-flex flex-wrap justify-content-between">
            <div class="d-flex align-items-center">
              <div class="d-flex me-3">
                <span class="icon-server text-dark icon-14 me-1"></span>
                <span class="">{{ data.phases }}</span>
              </div>
              <div class="d-flex me-3">
                <span class="icon-format_list_numbered text-danger icon-16 me-1"></span>
                <span class="">{{ data.activities }}</span>
              </div>
              <div class="d-flex me-3">
                <span class="icon-attach_file text-primary icon-16 me-1"></span>
                <span class=" ">{{ data.attachments }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding justify-content-start">
        <codx-temp-full cardCss="card-template" [imageId]="data.objectID" imageObjType="AD_Users" [titleTmp]="titleTmp"
          [desc]="convertHtmlAgency(data.positionName)" [desc2]="data.groupID" [dataItem]="data">
        </codx-temp-full>
      </div>
    </td>
    <td class="rowphoto">
      <div #createdOn class="padding">
        {{
        data.createdOn | formatvalue
        : view.formModel
        : "createdOn"
        : createdOn
        : "Processes"
        : "grvProcesses"
        | async
        }}
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <div class="dropdown ms-2" [ngbPopover]="popDetail" placement="left" #empPopover="ngbPopover" [openDelay]="500"
          (mouseenter)="toggleContent(empPopover, data)" (mouseleave)="toggleContent(empPopover, null)">
          <button class="btn" type="button" id="dropdownShowDescription" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            <div class="d-flex">
              <span class="icon-assignment icon-16 text-gray-600 me-1"></span>
            </div>
          </button>
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <div [innerHTML]="data.memo"></div>
      </div>
    </td>
    <td class="rowphoto">
      <button class="btn btn-primary" (click)="permission(data)">
        <codx-label default="Xét duyệt"></codx-label>
      </button>
      <codx-mfunc [formModel]="view.formModel" (clickMF)="clickMF($event, data)" [isBookMark]="true" [dataItem]="data"
        [type]="'hover'">
      </codx-mfunc>
    </td>
  </tr>
</ng-template>

<ng-template #titleTmp let-data>
  <div class="text-dark fw-bolder line-clamp line-clamp-1 me-2">
    {{ data.objectName }}
  </div>
</ng-template>

<ng-template #popDetail>
  <ng-container *ngFor="let item of lstPermissions; index as i">
    <div class="d-flex justify-content-between align-items-center checkbox-item mb-4">
      {{item}}
    </div>
  </ng-container>
</ng-template>


<ng-template #itemProcessName let-data>
  <div class="padding">
    <codx-label fiedName="ProcessName" formName="AprPermissions" gridViewName="grvAprPermissions"
      default="Tên qui trình">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemOwner let-data>
  <div class="padding">
    <codx-label fiedName="Petitioner" formName="AprPermissions" gridViewName="grvAprPermissions"
      default="Người yêu cầu">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemCreatedOn let-data>
  <div class="padding">
    <codx-label fiedName="RequestDate" formName="AprPermissions" gridViewName="grvAprPermissions"
      default="Ngày yêu cầu">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemPermissions let-data>
  <div class="padding">
    <codx-label fiedName="Permission" formName="AprPermissions" gridViewName="grvAprPermissions" default="Quyền">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemDescription let-data>
  <div class="padding">
    <codx-label fiedName="Description" formName="AprPermissions" gridViewName="grvAprPermissions" default="Ghi chú">
    </codx-label>
  </div>
</ng-template>