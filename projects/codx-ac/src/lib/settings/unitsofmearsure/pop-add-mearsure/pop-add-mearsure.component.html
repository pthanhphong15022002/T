<codx-layout-add
  #form
  [title]="title"
  [tabInfo]="tabInfo"
  [footer]="footer"
  [formModel]="dialog.formModel"
  [dialog]="dialog"
  (setTitle)="setTitle()"
  [tabContent]="[tabDescription, tabConversioninformation]"
  [data]="unitsofmearsure"
>
</codx-layout-add>
<ng-template #tabDescription>
  <ng-container *ngIf="form?.formGroup">
    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <codx-label [formModel]="form.formModel" fiedName="UMID"></codx-label>
          <codx-input
            [disabled]="formType == 'edit' ? true : false"
            [Group]="form.formGroup"
            [crrValue]="unitsofmearsure.umid"
            [formModel]="form.formModel"
            field="umid"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="form-group">
      <codx-label [formModel]="form.formModel" fiedName="UMName"></codx-label>
      <codx-input
        [Group]="form.formGroup"
        [crrValue]="unitsofmearsure.umName"
        field="umName"
        [formModel]="form.formModel"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
    </div>
    <div class="row">
      <div class="col-4">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="RoundOff"
          ></codx-label>
          <codx-input
            [crrValue]="unitsofmearsure.roundOff"
            [formModel]="form.formModel"
            field="roundOff"
            (valueChange)="valueChange($event)"
            [min]="0"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-8">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="RoundType"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="unitsofmearsure.roundType"
            field="roundType"
            [formModel]="form.formModel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="d-flex">
      <span class="me-2">
        <codx-input
          [checked]="unitsofmearsure.stop"
          field="stop"
          [formModel]="form.formModel"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </span>
      <codx-label [formModel]="form.formModel" fiedName="Stop"></codx-label>
    </div>
  </ng-container>
</ng-template>
<ng-template #tabConversioninformation>
  <div class="d-flex align-items-center justify-content-between mb-3">
    <codx-label
      class="text-primary fw-bold fs-6"
      [formModel]="form.formModel"
      default="Thông tin quy đổi"
    ></codx-label>
    <span
      type="button"
      class="btn btn-icon btn-primary"
      (click)="openPopupConversion()"
    >
      <i class="icon-addchart"></i>
    </span>
  </div>
  <div
    class="d-flex align-items-center justify-content-between mb-4"
    *ngFor="let item of objectUmconversion"
  >
    <div class="w-100">
      <div class="d-flex flex-column">
        <div class="fw-bold text-dark fs-5">
          <span>{{ item.itemID }}</span>
        </div>
        <div class="text-gray-500">
          1 {{ item.fromUMID }} = {{ item.conversion }} {{ item.toUMID }}
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top ms-5">
      <span
        type="button"
        class="btn btn-icon btn-sm btn-light-primary"
        (click)="editobjectConversion(item)"
      >
        <i class="icon-edit icon-16"></i>
      </span>
      <span
        type="button"
        class="btn btn-icon btn-sm btn-light-danger ms-1"
        (click)="deleteobjectConversion(item)"
      >
        <i class="icon-delete icon-16"></i>
      </span>
    </div>
  </div>
</ng-template>
<ng-template #footer>
  <div class="d-flex justify-content-end mt-1 me-3">
    <div *ngIf="formType != 'edit'" class="ms-2">
      <button type="button" class="btn btn-light-primary" (click)="onSaveAdd()">
        <codx-label
          class="fs-6 fw-normal"
          fiedName="lblSave"
          [formName]="formModel?.formName"
          [gridViewName]="formModel?.gridViewName"
          default="Lưu & thêm"
        ></codx-label>
      </button>
    </div>
    <div class="ms-2">
      <button
        type="button"
        class="btn btn-primary"
        style="min-width: 60px"
        (click)="onSave()"
      >
        <codx-label
          class="fs-6 fw-normal"
          fiedName="lblSave"
          [formName]="formModel?.formName"
          [gridViewName]="formModel?.gridViewName"
          default="Lưu"
        ></codx-label>
      </button>
    </div>
  </div>
</ng-template>
