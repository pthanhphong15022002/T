<codx-form #form [headerText]="headerText" [subHeader]="subHeader" [body]="body" [formModel]="dialog.formModel"
    [dialog]="dialog" [footer]="footer" [data]="itemposting" subToolbarCss="text-end">
</codx-form>
<ng-template #subHeader>
    <div class="text-primary fw-bold fs-5">
        {{subheaderText}}
    </div>
</ng-template>
<ng-template #body>
    <ng-container *ngIf="form?.formGroup">
        <div class="mt-2 mb-1 text-primary fw-bold fs-5">
            <codx-label [formModel]="form.formModel" default="Căn cứ"></codx-label>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="ItemLevel"></codx-label>
                    <codx-input [Group]="form.formGroup" [crrValue]="itemposting.itemLevel" [formModel]="form.formModel"
                        (valueChange)="valueChangeItemLevel($event)" field="itemLevel">
                    </codx-input>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="ItemValue"></codx-label>
                    <!-- <codx-input *ngIf="itemposting.itemLevel == ''" type="valuelist" field="itemValue">
                    </codx-input> -->
                    <codx-input *ngIf="itemposting.itemLevel == null" type="text" [disabled]="true">
                    </codx-input>
                    <codx-input *ngIf="itemposting.itemLevel == '1'" type="combobox" refValue="Items"
                        (valueChange)="valueChange($event)" [crrValue]="form.data.itemValue" field="itemValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.itemLevel == '2'" type="combobox" refValue="ItemGroups"
                        (valueChange)="valueChange($event)" [crrValue]="form.data.objectValue" field="itemValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.itemLevel == '3'" type="combobox" refValue="ProductLines"
                        (valueChange)="valueChange($event)" [crrValue]="form.data.objectValue" field="itemValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.itemLevel == '4'" type="text" [disabled]="true">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-4">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="ObjectType"></codx-label>
                    <codx-input [Group]="form.formGroup" [crrValue]="itemposting.objectType" [formModel]="form.formModel"
                        (valueChange)="valueChangeCust($event)" field="objectType">
                    </codx-input>
                </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="ObjectLevel"></codx-label>
                    <codx-input *ngIf="itemposting.objectType == null" type="valuelist" field="objectLevel">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '1' || itemposting.objectType == '2'" type="valuelist"
                        refValue="AC054" [crrValue]="itemposting.objectLevel" (valueChange)="valueChangeCust($event)"
                        field="objectLevel">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '6' || itemposting.objectType == '3'" type="valuelist"
                        refValue="AC055" [crrValue]="itemposting.objectLevel" (valueChange)="valueChangeCust($event)"
                        field="objectLevel">
                    </codx-input>
                </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="ObjectValue"></codx-label>
                    <codx-input *ngIf="itemposting.objectType == null || itemposting.objectLevel == null" type="text" [disabled]="true" >
                    </codx-input>
                    <!-- <codx-input *ngIf="itemposting.objectType == null && itemposting.objectLevel == '3'" type="valuelist"
                        field="onAddNew" >
                    </codx-input> -->
                    <codx-input *ngIf="itemposting.objectType == '1' && itemposting.objectLevel == '1'"
                        (valueChange)="valueChange($event)" type="combobox" refValue="Customers"
                        [crrValue]="itemposting.objectValue" field="objectValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '1' && itemposting.objectLevel == '2'"
                        (valueChange)="valueChange($event)" type="combobox" refValue="CustomerGroups"
                        [crrValue]="itemposting.objectValue" field="objectValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '2' && itemposting.objectLevel == '1'"
                        (valueChange)="valueChange($event)" type="combobox" refValue="VendorsAC"
                        [crrValue]="itemposting.objectValue" field="objectValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '2' && itemposting.objectLevel == '2'"
                        (valueChange)="valueChange($event)" type="combobox" refValue="VendorGroups"
                        [crrValue]="itemposting.objectValue" field="objectValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '3' && itemposting.objectLevel == '1'"
                        (valueChange)="valueChange($event)" type="combobox" refValue="EmployeesAC"
                        [crrValue]="itemposting.objectValue" field="objectValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectType == '6' && itemposting.objectLevel == '1'"
                        (valueChange)="valueChange($event)" type="combobox" refValue="Warehouses"
                        [crrValue]="itemposting.objectValue" field="objectValue">
                    </codx-input>
                    <codx-input *ngIf="itemposting.objectLevel == '3' && (itemposting.objectType == '1' || itemposting.objectType == '2' || itemposting.objectType == '3' 
                || itemposting.objectType == '6')" type="text" [disabled]="true">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="OrderPoolID"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel"
                        [crrValue]="itemposting.orderPoolID" (valueChange)="valueChange($event)" field="orderPoolID">
                    </codx-input>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="WarehouseID"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel"
                        [crrValue]="itemposting.warehouseID" (valueChange)="valueChange($event)" field="warehouseID">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="BUID"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="itemposting.buid"
                        field="buid" (valueChange)="valueChange($event)">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="mt-2 mb-1 text-primary fw-bold fs-5">
            <codx-label [formModel]="form.formModel" default="Tài khoản"></codx-label>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="AccountID"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="itemposting.accountID"
                        (valueChange)="valueChange($event)" field="accountID">
                    </codx-input>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="DIM3"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="itemposting.diM3" field="diM3"
                        (valueChange)="valueChange($event)">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="DIM1"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="itemposting.diM1" field="diM1"
                        (valueChange)="valueChange($event)">
                    </codx-input>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <codx-label [formModel]="form.formModel" fiedName="DIM2"></codx-label>
                    <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="itemposting.diM2" field="diM2"
                        (valueChange)="valueChange($event)">
                    </codx-input>
                </div>
            </div>
        </div>
        <div class="form-group">
            <codx-label [formModel]="form.formModel" fiedName="Note"></codx-label>
            <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="itemposting.note" field="note"
                (valueChange)="valueChange($event)">
            </codx-input>
        </div>
    </ng-container>
</ng-template>
<ng-template #footer>
    <div class="d-flex justify-content-end mt-1 me-3">
        <div *ngIf="formType != 'edit'" class="ms-2">
            <button type="button" class="btn btn-light-primary" (click)="onSaveAdd()">
                <codx-label class="fs-6 fw-normal" fiedName="lblSave" [formName]="formModel?.formName"
                    [gridViewName]="formModel?.gridViewName" default="Lưu & thêm"></codx-label>
            </button>
        </div>
        <div class="ms-2">
            <button type="button" class="btn btn-primary" style="min-width: 60px;" (click)="onSave()">
                <codx-label class="fs-6 fw-normal" fiedName="lblSave" [formName]="formModel?.formName"
                    [gridViewName]="formModel?.gridViewName" default="Lưu"></codx-label>
            </button>
        </div>
    </div>
</ng-template>