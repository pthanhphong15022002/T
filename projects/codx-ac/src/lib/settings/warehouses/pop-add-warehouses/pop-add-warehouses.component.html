<codx-layout-add
  #form
  [title]="title"
  [tabInfo]="tabInfo"
  [footer]="footer"
  [formModel]="dialog.formModel"
  [dialog]="dialog"
  (setTitle)="setTitle()"
  [tabContent]="[tabDescription, tabestablish, tabPlan, tabContact]"
  [data]="warehouses"
>
</codx-layout-add>
<ng-template #tabDescription>
  <ng-container *ngIf="form?.formGroup">
    <div class="row">
      <div class="col-4">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="WarehouseID"
          ></codx-label>
          <codx-input
            [disabled]="formType == 'edit' ? true : false"
            [Group]="form.formGroup"
            [crrValue]="warehouses.warehouseID"
            [formModel]="form.formModel"
            field="warehouseID"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-8 ps-0">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="WarehouseName"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.warehouseName"
            [formModel]="form.formModel"
            field="warehouseName"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="Category"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.category"
            [formModel]="form.formModel"
            field="category"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="ParentID"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.parentID"
            field="parentID"
            [formModel]="form.formModel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="mt-2 mb-2 fw-bold text-primary fs-6">
      <codx-label
        [formModel]="form.formModel"
        default="Kích thước kho"
      ></codx-label>
    </div>
    <div class="row">
      <div class="col-3">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="Length"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.length"
            [formModel]="form.formModel"
            field="length"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-3 ps-0">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="Width"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.width"
            [formModel]="form.formModel"
            field="width"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-3">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="Hight"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.hight"
            [formModel]="form.formModel"
            field="hight"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-3 ps-0">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="Volume"
            default="Thể tích"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.volume"
            [formModel]="form.formModel"
            field="volume"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="mt-2 mb-2 fw-bold text-primary fs-6">
      <codx-label
        [formModel]="form.formModel"
        default="Địa chỉ kho"
      ></codx-label>
    </div>
    <div class="form-group">
      <codx-label [formModel]="form.formModel" fiedName="Address"></codx-label>
      <codx-input
        [Group]="form.formGroup"
        [crrValue]="warehouses.address"
        [formModel]="form.formModel"
        field="address"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="CountryID"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.countryID"
            [formModel]="form.formModel"
            field="countryID"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="ProvinceID"
          ></codx-label>
          <codx-input
            #provinceID
            [Group]="form.formGroup"
            [crrValue]="warehouses.provinceID"
            field="provinceID"
            [formModel]="form.formModel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="DistrictID"
          ></codx-label>
          <codx-input
            #districtID
            [Group]="form.formGroup"
            [crrValue]="warehouses.districtID"
            [formModel]="form.formModel"
            field="districtID"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="PostalCode"
          ></codx-label>
          <codx-input
            #postalCode
            [Group]="form.formGroup"
            [crrValue]="warehouses.postalCode"
            field="postalCode"
            [formModel]="form.formModel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="form-group">
      <codx-label [formModel]="form.formModel" fiedName="Note"></codx-label>
      <codx-input
        [Group]="form.formGroup"
        [crrValue]="warehouses.note"
        [formModel]="form.formModel"
        field="note"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
    </div>
    <div class="form-group d-flex">
      <span class="me-2">
        <codx-input
          [checked]="warehouses.stop"
          field="stop"
          [formModel]="form.formModel"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </span>
      <codx-label [formModel]="form.formModel" fiedName="Stop"></codx-label>
    </div>
  </ng-container>
</ng-template>
<ng-template #tabestablish>
  <ng-container *ngIf="form?.formGroup">
    <div class="text-primary fw-bold fs-6 mb-3">
      <codx-label
        [formModel]="form.formModel"
        default="Thiết lập vị trí kho"
      ></codx-label>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="d-flex align-items-top mb-2">
          <div class="me-2">
            <codx-input
              [checked]="warehouses.includeAisle"
              type="switch"
              field="includeAisle"
              (valueChange)="valueChange($event)"
            >
            </codx-input>
          </div>
          <codx-label
            [formModel]="form.formModel"
            fiedName="IncludeAisle"
          ></codx-label>
        </div>
      </div>
      <div class="d-flex align-items-top mb-2">
        <div class="me-2">
          <codx-input
            [checked]="warehouses.includeSheft"
            type="switch"
            field="includeSheft"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
        <codx-label fiedName="IncludeSheft"></codx-label>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="SheftFormat"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="form.data.sheftFormat"
            [formModel]="form.formModel"
            field="sheftFormat"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top mb-3">
      <div class="me-2">
        <codx-input
          [checked]="warehouses.includeRack"
          type="switch"
          field="includeRack"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>
      <codx-label
        [formModel]="form.formModel"
        fiedName="IncludeRack"
      ></codx-label>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="RackFormat"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.rackFormat"
            [formModel]="form.formModel"
            field="rackFormat"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top mb-3">
      <div class="me-2">
        <codx-input
          [checked]="warehouses.includeBin"
          type="switch"
          field="includeBin"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>
      <codx-label
        [formModel]="form.formModel"
        fiedName="IncludeBin"
      ></codx-label>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="BINFormat"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.binFormat"
            [formModel]="form.formModel"
            field="binFormat"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
  </ng-container>
</ng-template>
<ng-template #tabPlan>
  <ng-container *ngIf="form?.formGroup">
    <div class="row">
      <div class="col-4">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="WarehouseLevel"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.warehouseLevel"
            [formModel]="form.formModel"
            field="warehouseLevel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-8">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="MainWarehouseID"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.mainWarehouseID"
            type="combobox"
            refValue="Warehouses"
            field="mainWarehouseID"
            [formModel]="form.formModel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top mb-3">
      <div class="me-2">
        <codx-input
          [checked]="warehouses.fulfillment"
          type="switch"
          field="fulfillment"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>
      <codx-label
        [formModel]="form.formModel"
        fiedName="Fulfillment"
      ></codx-label>
    </div>
    <div class="row">
      <div class="col-4">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="TransferTime"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.transferTime"
            field="transferTime"
            [formModel]="form.formModel"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="col-8">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="TransitWarehouseID"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.transitWarehouseID"
            [formModel]="form.formModel"
            field="transitWarehouseID"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <codx-label
            [formModel]="form.formModel"
            fiedName="CalendarID"
          ></codx-label>
          <codx-input
            [Group]="form.formGroup"
            [crrValue]="warehouses.calendarID"
            [formModel]="form.formModel"
            field="calendarID"
            (valueChange)="valueChange($event)"
          >
          </codx-input>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top">
      <div class="me-2">
        <codx-input
          [checked]="warehouses.workdays"
          type="switch"
          field="workdays"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>
      <codx-label [formModel]="form.formModel" fiedName="Workdays"></codx-label>
    </div>
  </ng-container>
</ng-template>
<ng-template #tabContact>
  <div class="d-flex align-items-center justify-content-between mb-2">
    <codx-label
      class="text-primary fw-bold fs-5"
      [formModel]="form.formModel"
      default="Danh sách người liên hệ"
    ></codx-label>
    <button
      type="button"
      class="btn btn-icon btn-primary"
      (click)="openPopupContact()"
    >
      <i class="icon-group_add"></i>
    </button>
  </div>
  <div
    class="d-flex align-items-top justify-content-between py-2 border-bottom"
    *ngFor="let item of objectContact"
  >
    <div class="d-flex align-items-top w-100">
      <div class="me-3">
        <codx-img
          [objectId]="item?.recID"
          [objectName]="item?.contactName"
          [objectType]="formModel?.entityName"
          [width]="35"
        >
        </codx-img>
      </div>
      <div class="d-flex flex-column w-100 space_personal">
        <div class="fw-bold text-dark fs-6">
          <span>{{ item.contactName }}</span>
        </div>
        <div class="mb-1">
          {{ item.jobTitle }}
        </div>
        <div class="d-flex align-items-center mb-1">
          <div class="d-flex align-items-center me-3">
            <span class="icon-email icon-16 me-1 text-gray-500"></span>
            <span class="text-gray-500 fs-7">{{ item.email }}</span>
          </div>
          <div class="d-flex align-items-center">
            <span class="icon-phone_android icon-16 me-1 text-gray-500"></span>
            <span class="text-gray-500 fs-7">{{ item.phone }}</span>
          </div>
        </div>
        <div class="text-gray-700 fs-7" *ngFor="let value of valuelist">
          <span *ngIf="item.contactType == value.value">{{ value.text }}</span>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top ms-5">
      <span
        type="button"
        class="btn btn-icon btn-sm btn-light-primary"
        (click)="editobject(item)"
      >
        <i class="icon-edit icon-16"></i>
      </span>
      <span
        type="button"
        class="btn btn-icon btn-sm btn-light-danger ms-1"
        (click)="deleteobject(item)"
      >
        <i class="icon-delete icon-16"></i>
      </span>
    </div>
  </div>
</ng-template>
<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-primary" (click)="onSave()">
      <codx-label [formModel]="form.formModel" default="Lưu"></codx-label>
    </button>
  </div>
</ng-template>
