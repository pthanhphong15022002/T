<codx-form #form [headerText]="headerText" [body]="body" [formModel]="dialog.formModel" [dialog]="dialog"
  [footer]="footer" [data]="address" subToolbarCss="text-end">
</codx-form>
<ng-template #body>

  <ng-container *ngIf="form?.formGroup">
    <div class="form-group">
      <codx-label [formModel]="form.formModel" fiedName="AdressType"></codx-label>
      <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="address.adressType"
        field="adressType" (valueChange)="valueChange($event)">
      </codx-input>
    </div>
    <div class="form-group">
      <codx-label [formModel]="form.formModel" fiedName="AdressName"></codx-label>
      <codx-input [Group]="form.formGroup" [crrValue]="address.adressName" [formModel]="form.formModel"
        field="adressName" (valueChange)="valueChange($event)">
      </codx-input>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <codx-label [formModel]="form.formModel" fiedName="CountryID"></codx-label>
          <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="address.countryID"
            type="combobox" refValue="Countries" field="countryID" (valueChange)="valueChange($event)">
          </codx-input>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <codx-label [formModel]="form.formModel" fiedName="ProvinceID"></codx-label>
          <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="address.provinceID"
            type="combobox" refValue="Provinces" field="provinceID" (valueChange)="valueChange($event)">
          </codx-input>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <codx-label [formModel]="form.formModel" fiedName="DistrictID"></codx-label>
          <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="address.districtID"
            field="districtID" (valueChange)="valueChange($event)">
          </codx-input>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <codx-label [formModel]="form.formModel" fiedName="PostalCode"></codx-label>
          <codx-input [Group]="form.formGroup" [formModel]="form.formModel" [crrValue]="address.postalCode"
            field="postalCode" (valueChange)="valueChange($event)">
          </codx-input>
        </div>
      </div>
    </div>
    <div class="form-group">
      <codx-label [formModel]="form.formModel" fiedName="Note"></codx-label>
      <codx-input [Group]="form.formGroup" format="ed2" [crrValue]="address.note"
        [formModel]="form.formModel" field="note" (valueChange)="valueChange($event)">
      </codx-input>
    </div>
    <div class="d-flex align-items-center justify-content-between mb-3">
      <codx-label class="mb-3 text-primary fw-bold fs-6" [formModel]="form.formModel"
        default="Người liên hệ"></codx-label>
      <button type="button" class="btn btn-icon btn-primary" (click)="openPopupContact()">
        <i class="icon-person_add"></i>
      </button>
    </div>
    <div *ngFor="let item of objectContactAddress">
      <div class="mb-3 d-flex align-items-top justify-content-between" *ngIf="item.reference == address.recID">
        <div class="d-flex align-items-top">
          <div class="me-3">
            <codx-img [objectId]="item?.recID" [objectName]="item?.contactName" [objectType]="formModel?.entityName"
              [width]="35">
            </codx-img>
          </div>
          <div class="d-flex flex-column space_personal">
            <div class="fw-bold text-dark">
              <span>{{item.contactName}}</span>
            </div>
            <div class="text-gray-700 fs-7">
              {{item.jobTitle}}
            </div>
            <div class="d-flex align-items-center">
              <div class="d-flex align-items-center me-3">
                <span class="icon-email icon-16 me-1 text-gray-500"></span>
                <span class="text-gray-500 fs-7">{{item.email}}</span>
              </div>
              <div class="d-flex align-items-center">
                <span class="icon-phone_android icon-16 me-1 text-gray-500"></span>
                <span class="text-gray-500 fs-7">{{item.phone}}</span>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex align-items-center">
          <span type="button" class="btn btn-icon btn-sm btn-light-primary" (click)="editobject(item,'datacontact')">
            <i class="icon-edit icon-16"></i>
          </span>
          <span type="button" class="btn btn-icon btn-sm btn-light-danger ms-1"
            (click)="deleteobject(item,'datacontact')">
            <i class="icon-delete icon-16"></i>
          </span>
        </div>
      </div>
    </div>
  </ng-container>
</ng-template>
<ng-template #footer>
  <div class="d-flex align-items-center justify-content-between">
    <div *ngIf="form?.formGroup" class="d-flex align-items-center">
      <span class="me-2 mt-1">
        <codx-input [Group]="form.formGroup" [checked]="address.isDefault" type="switch" field="isDefault" (valueChange)="valueChange($event)">
        </codx-input>
      </span>
      <codx-label [formModel]="form.formModel" fiedName="IsDefault"></codx-label>
    </div>
    <div class="d-flex justify-content-end">
      <div *ngIf="type != 'editaddress'" class="ms-2">
        <button type="button" class="btn btn-light-primary" (click)="onSaveAdd()">
          <codx-label class="fs-6 fw-normal" fiedName="lblSave" [formName]="formModel?.formName"
            [gridViewName]="formModel?.gridViewName" default="Lưu & thêm"></codx-label>
        </button>
      </div>
      <div class="ms-2">
        <button type="button" class="btn btn-primary" style="min-width: 60px;" (click)="onSave()">
          <codx-label class="fs-6 fw-normal" fiedName="lblSave" [formName]="formModel?.formName"
            [gridViewName]="formModel?.gridViewName" default="Lưu"></codx-label>
        </button>
      </div>
    </div>
  </div>
</ng-template>