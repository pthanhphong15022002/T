<codx-detail-tmp
  [header]="header"
  [body]="body"
  [hideMF]="false"
  [formModel]="formModel"
  [dataItem]="dataItem"
  [footer]="footer"
  (clickMF)="clickMF($event, dataItem)"
>
</codx-detail-tmp>
<ng-template #header>
  <div class="d-flex justify-content-between w-100">
    <div>
      <img
        class="position-fixed"
        src="../assets/themes/ac/default/img/advancedPayment_BG.jpg"
      />
      <div class="d-flex align-items-center" style="padding: 0px 70px">
        <div style="margin-right: 20px">
          <img src="../assets/themes/ac/default/img/IconDx.jpg" />
        </div>
        <div class="d-flex flex-column justify-content-between">
          <div class="fs-5 fw-bold" [innerHTML]="company?.legalName"></div>
          <div
            class="text-gray-600"
            style="font-size: 10px"
            [innerHTML]="company?.street"
          ></div>
          <div
            class="text-gray-600"
            style="font-size: 10px"
            [innerHTML]="company?.taxCode"
          ></div>
        </div>
      </div>
    </div>
    <div class="d-flex flex-column">
      <div class="d-flex justify-content-end align-items-center">
        <codx-label
          class="me-2 header-font-size"
          fiedName="VoucherNo"
          [formModel]="formModel"
          [setRequire]="false"
          [cssClass]="'fs-4'"
        >
        </codx-label>
        <span
          *ngIf="dataItem?.voucherNo"
          class="text-gray-600"
          style="font-size: 12px !important"
        >
          {{ dataItem?.voucherNo }}
        </span>
        <span
          *ngIf="!dataItem?.voucherNo"
          class="text-gray-600"
          style="font-size: 12px !important"
        >
          {{ "AC0028" | mssg | async }}
        </span>
      </div>
      <div class="d-flex justify-content-end align-items-center">
        <codx-label
          class="me-2 header-font-size"
          fiedName="VoucherDate"
          [formModel]="formModel"
          [setRequire]="false"
          [cssClass]="'fs-4'"
        >
        </codx-label>
        <span class="text-gray-600" style="font-size: 12px !important">
          {{ dataItem?.voucherDate | date : "dd/MM/yyyy" }}
        </span>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #body>
  <div class="d-flex h-100 w-100 bgEDEDED pt-5" style="padding: 0px 70px">
    <div
      class="bg-white rounded-2 d-flex justify-content-between flex-column h-100 w-100"
    >
      <!-- Thông tin chung -->
      <div>
        <div class="row text-center mt-2 text-primary fw-bold">
          <codx-label
            style="font-size: 35px"
            [default]="headerText"
          ></codx-label>
        </div>
        <div class="row" style="padding-bottom: 5px">
          <div>
            <codx-label
              class="fw-bold"
              fiedName="ObjectID"
              [formModel]="formModel"
            >
            </codx-label>
            <div>
              <span
                #objectID
                [innerHTML]="
                  dataItem?.objectID
                    | formatvalue : formModel : 'objectID' : objectID
                    | async
                "
                class="om-input w-100 dropdow-select"
                style="font-size: 13px"
              ></span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-7">
            <div class="row align-items-start">
              <div>
                <codx-label
                  class="fw-bold"
                  fiedName="ReasonID"
                  [formModel]="formModel"
                >
                </codx-label>
                <codx-inplace
                  type="text"
                  field="reasonID"
                  [value]="dataItem.reasonID"
                  [class]="'om-input w-auto'"
                  [cssClass]="'om-input w-100 fs-4'"
                  [disabled]="true"
                >
                </codx-inplace>
              </div>
            </div>
          </div>
          <div class="col-5">
            <div class="row align-items-start">
              <div>
                <codx-label
                  class="fw-bold"
                  fiedName="PmtMethodID"
                  [formModel]="formModel"
                >
                </codx-label>
                <div>
                  <span
                    #pmtMethodID
                    [innerHTML]="
                      dataItem?.pmtMethodID
                        | formatvalue : formModel : 'pmtMethodID' : pmtMethodID
                        | async
                    "
                    class="om-input w-100 dropdow-select"
                    style="font-size: 13px"
                  ></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="dataItem.memo != null || dataItem.memo != ''">
          <div>
            <codx-label class="fw-bold" fiedName="Memo" [formModel]="formModel">
            </codx-label>
            <div>
              <span
                class="om-input w-100 dropdow-select"
                style="font-size: 13px"
                >{{ dataItem.memo }}</span
              >
            </div>
          </div>
        </div>
        <div class="mt-2 text-primary fw-bold fs-5">
          <codx-label default="Chi tiết"></codx-label>
        </div>
      </div>
      <!-- Header của Chi tiết -->
      <div class="mt-1">
        <div class="d-flex justify-content-start flex-column">
          <div class="d-flex justify-content-start flex-column">
            <div class="d-flex align-items-center cursor-pointer w-100">
              <div class="w-50 d-flex align-items-center ps-4">
                <div class="d-flex align-items-center w-100">
                  <div
                    class="ps-3 w-100 min-h-table d-flex justify-content-start align-items-center"
                  >
                    <codx-label
                      class="fw-bold"
                      fiedName="Note"
                      [formModel]="fmPaymentOrderLines"
                    >
                    </codx-label>
                  </div>
                </div>
              </div>
              <div class="w-50 d-flex justify-content-start pe-4">
                <div
                  class="w-100 min-h-table d-flex justify-content-end align-items-center pe-5"
                >
                  <codx-label
                    class="fw-bold"
                    fiedName="DR"
                    [formModel]="fmPaymentOrderLines"
                  >
                  </codx-label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Nội dung của chi tiết -->
      <div
        class="flex-grow-1 flex-column d-flex justify-content-start overflow-auto responsive-table"
      >
        <div
          class="flex-column d-flex justify-content-start px-6"
          *ngIf="!loading"
        >
          <div
            class="d-flex justify-content-start flex-column"
            *ngFor="let item of paymentOrderLines; let i = index"
          >
            <div class="d-flex justify-content-start flex-column">
              <div
                class="d-flex align-items-center flex-row cursor-pointer w-100"
              >
                <span
                  class="icon-brightness_1 fs-10px d-flex align-items-center text-warning mr-2"
                  style="font-size: 10px !important"
                ></span>
                <div
                  class="w-50 d-flex justify-content-start align-items-center"
                >
                  <div
                    class="w-100 min-h-table d-flex justify-content-center align-items-center h-100"
                  >
                    <codx-inplace
                      type="text"
                      field="note"
                      [class]="'om-input w-100'"
                      [cssClass]="'om-input w-100 fs-4'"
                      [value]="item?.note"
                      [disabled]="true"
                    ></codx-inplace>
                  </div>
                </div>

                <div class="w-50 d-flex justify-content-start h-100">
                  <div
                    class="w-100 min-h-table d-flex justify-content-center align-items-center h-100"
                  >
                    <codx-inplace
                      type="text"
                      field="dr"
                      [class]="'om-input w-100 amount'"
                      [cssClass]="'om-input w-100 fs-4'"
                      [value]="item?.dr"
                      [disabled]="true"
                    ></codx-inplace>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          *ngIf="loading"
          style="background-color: white"
          class="ac-empty h-100"
        >
          <div
            style="padding-top: 0px !important"
            class="list-empty card card-flush h-100"
          >
            <div class="d-flex flex-column flex-center justify-content-center">
              <ejs-progressbar
                #pgbDetail
                id="load-detail-container"
                type="Circular"
                [maximum]="100"
                [minimum]="0"
                [value]="75"
                width="50"
                height="50"
                [animation]="animation"
                [isIndeterminate]="true"
                [trackThickness]="1"
                [a]
                [progressThickness]="3"
              >
                <e-progressbar-annotations>
                  <e-progressbar-annotation content=" ">
                  </e-progressbar-annotation>
                </e-progressbar-annotations>
              </ejs-progressbar>
            </div>
          </div>
        </div>
        <!-- <div *ngIf="!loading">
        <div *ngIf="paymentOrderLines.length == 0" class="container w-90 h-90">
          <div class="list-empty card card-flush h-100 mt-20">
            <div class="d-flex flex-column flex-center justify-content-center">
              <img
                src="../assets/themes/sys/default/img/DataEmpty.svg"
                class="w-200px"
              />
              <div class="fs-5 text-dark fw-bold mt-2 text-center">
                {{ "SYS011" | mssg | async }}
              </div>
            </div>
          </div>
        </div>
      </div> -->
      </div>
      <!-- Các field tổng tiền -->
      <div class="align-items-center">
        <div class="row">
          <div class="col-3">
            <codx-label
              class="fw-bold"
              fiedName="TotalAmt"
              [formModel]="formModel"
            >
            </codx-label>
            <codx-inplace
              type="number"
              field="totalAmt"
              [class]="'om-input w-100'"
              [cssClass]="'om-input w-100'"
              [value]="dataItem.totalAmt"
              [disabled]="true"
            ></codx-inplace>
          </div>
          <div class="col-3">
            <codx-label
              class="fw-bold"
              fiedName="TotalAmt"
              [formModel]="fmAdvancedPayment"
            >
            </codx-label>
            <codx-inplace
              type="number"
              field="totalAmt"
              [class]="'om-input w-100'"
              [cssClass]="'om-input w-100'"
              [value]="advancedPayment?.totalAmt"
              [disabled]="true"
            ></codx-inplace>
          </div>
          <div class="col-3">
            <codx-label
              class="fw-bold"
              fiedName="TotalDR"
              [formModel]="formModel"
            >
            </codx-label>
            <codx-inplace
              type="number"
              field="totalDR"
              [class]="'om-input w-100'"
              [cssClass]="'om-input w-100'"
              [value]="dataItem.totalDR"
              [disabled]="true"
            ></codx-inplace>
          </div>
          <div class="col-3">
            <codx-label
              class="fw-bold"
              fiedName="TotalCR"
              [formModel]="formModel"
            >
            </codx-label>
            <codx-inplace
              type="number"
              field="totalCR"
              [class]="'om-input w-100'"
              [cssClass]="'om-input w-100'"
              [value]="dataItem.totalCR"
              [disabled]="true"
            ></codx-inplace>
          </div>
        </div>
      </div>
      <!-- Trường kế hoạch công tác -->
      <div class="row" *ngIf="dataItem.refNo">
        <div class="d-flex align-items-center">
          <div class="col-2">
            <codx-label
              class="fw-bold"
              fiedName="RefNo"
              [formModel]="formModel"
            >
            </codx-label>
          </div>
          <div class="col-3">
            <codx-inplace
              type="text"
              field="note"
              [class]="'om-input'"
              [cssClass]="'om-input w-100'"
              [value]="dataItem.refNo"
              [emptyText]="grvSetupPaymentOrderLines?.RefNo.headerText"
              [disabled]="true"
            ></codx-inplace>
          </div>
          <div class="col-2 d-flex align-items-center">
            <i class="icon-link text-primary icon-30 cursor-pointer"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #footer>
  <ng-container *ngIf="dataItem">
    <codx-tabs
      [entityName]="formModel.entityName"
      [formModel]="formModel"
      [objectID]="dataItem.recID"
      [funcID]="formModel.funcID"
    ></codx-tabs>
  </ng-container>
</ng-template>
