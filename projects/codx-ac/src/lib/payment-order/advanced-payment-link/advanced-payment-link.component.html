<codx-form
  #form
  [formModel]="dialog.formModel"
  [dialog]="dialog"
  [openMore]="false"
  [body]="body"
  [footer]="footer"
  [customToolbar]="subToolbar"
>
</codx-form>
<ng-template #subToolbar>
  <div class="w-100">
    <div
      class="d-flex align-items-center justify-content-between pt-3 ac-popupfull"
    >
      <div class="d-flex align-items-center me-2">
        <div class="btn btn-icon btn-sm btn-primary btn-circle me-2">
          <i class="icon-i-check2-square icon-16"></i>
        </div>
        <div
          class="line-clamp line-clamp-1 me-3 fs-4 fw-bold text-uppercase mt-1"
        >
          Chọn đề nghị tạm ứng
        </div>
      </div>
      <div class="d-flex align-items-center me-3">
        <div class="ms-2">
          <div
            class="btn btn-icon btn-light-danger btn-circle bg"
            (click)="close()"
          >
            <i class="icon-close icon-18"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #body>
  <ejs-tab enablePersistence="true">
    <e-tabitems>
      <e-tabitem>
        <ng-template #headerText>
          <div class="d-flex align-items-top me-2 mt-2">
            <i class="icon-filter_list icon-18 me-2"></i>
            <codx-label
              class="fw-bold"
              style="font-size: 14px !important"
              fiedName="lblGeneral"
              [formModel]="form.formModel"
              default="Điều kiện lọc"
            ></codx-label>
          </div>
        </ng-template>
        <ng-template #content>
          <ng-container *ngTemplateOutlet="tabBasic"></ng-container>
        </ng-template>
      </e-tabitem>
    </e-tabitems>
  </ejs-tab>
  <div style="height: calc(90vh - 280px) !important">
    <ejs-tab enablePersistence="true">
      <e-tabitems>
        <e-tabitem>
          <ng-template #headerText>
            <div class="d-flex align-items-top me-2 mt-2">
              <i class="icon-i-list-check icon-18 me-2"></i>
              <codx-label
                class="fw-bold"
                style="font-size: 14px !important"
                fiedName="lblDetail"
                [formModel]="form.formModel"
                default="Chi tiết"
              ></codx-label>
            </div>
          </ng-template>
          <ng-template #content>
            <ng-container *ngTemplateOutlet="tabDetail"></ng-container>
          </ng-template>
        </e-tabitem>
      </e-tabitems>
    </ejs-tab>
  </div>
</ng-template>
<ng-template #tabBasic>
  <div class="p-3 bg-gray-100 tab-basic ac-form-master">
    <div class="row">
      <div class="col-12 ac-left">
        <div class="row">
          <div class="col-8">
            <div class="form-group">
              <codx-label [formModel]="form.formModel" fiedName="VoucherNo">
              </codx-label>
              <codx-input
                field="voucherNo"
                type="text"
                (valueChange)="valueChange($event)"
              ></codx-input>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <codx-label fiedName="lblDate" default="Ngày đề nghị từ">
              </codx-label>
              <codx-input
                field="dateSuggestion"
                type="datetime"
                placeholder=" "
                format="d"
                (valueChange)="valueChange($event)"
              ></codx-input>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <codx-label
                [formModel]="form.formModel"
                default="Ngày đề nghị đến"
              >
              </codx-label>
              <codx-input
                field="voucherDate"
                [formModel]="form.formModel"
                [disabled]="true"
                [crrValue]="paymentOrder?.voucherDate"
              ></codx-input>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="d-flex justify-content-end">
        <button
          type="button"
          class="btn btn-md btn-light-primary rounded-15"
          style="border: 1px solid var(--primary-dark) !important"
          (click)="submit()"
        >
          <div class="d-flex align-items-center">
            <i class="icon-i-funnel icon-16 me-1"></i>
            <codx-label
              class="fs-6 fw-normal"
              fiedName="lblSave"
              default="Lấy dữ liệu"
            ></codx-label>
          </div>
        </button>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #tabDetail>
  <div
    class="h-100px tabcash-content position-relative hidden-checkbox-mutilple"
  >
    <codx-gridview-v2
      #grid
      [formName]="dialog.formModel.formName"
      [checkboxSelect]="true"
      [showEmptyRecord]="false"
      (onSelected)="onSelected($event)"
      [gridViewName]="dialog.formModel.gridViewName"
      [rowHeight]="35"
      [entityName]="dialog.formModel.entityName"
      [dataSource]="dataAdvanced"
      hideMoreFunc="true"
      service="AC"  
      [autoLoad]="false"
      [autoFitColumns]="false"
      [editSettings]="noEditSetting"
    ></codx-gridview-v2>
  </div>
</ng-template>
<ng-template #footer>
  <div class="ms-2 me-2">
    <button
      type="button"
      class="btn btn-md btn-light-primary rounded-15"
      style="border: 1px solid var(--primary-dark) !important"
      (click)="accept()"
    >
      <div class="d-flex align-items-center">
        <i class="icon-i-check2 icon-16 me-1"></i>
        <codx-label class="fw-normal" default="Chọn"></codx-label>
      </div>
    </button>
  </div>
</ng-template>
