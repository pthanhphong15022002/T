<!-- Start: template listdetail -->
<ng-container *ngIf="itemSelected">
  <codx-detail-tmp [header]="TmpHeaderDetail" [body]="TmpBodyDetail" [hideMF]="false" [formModel]="formModel"
  [dataItem]="itemSelected" (changeDataMF)="changeMFDetail($event, itemSelected)" [footer]="TmpFooterDetail"
  (clickMF)="clickMoreFunction($event, itemSelected)">
</codx-detail-tmp>
</ng-container>
<!-- End: template listdetail -->

<!-- Start: template listdetail Header-->
<ng-template #TmpHeaderDetail>
  <ng-container *ngIf="itemSelected">
    <div style="position: relative;z-index: 1000;width: 50%;" class="d-flex align-items-center ac-cashID mt-n8 mb-2">
      <!-- <ejs-tooltip id='tooltip' target="#tipsub" position='BottomRight'>
          <div id="tipsub" style="background-color: var(--primary-dark)"
              class="w-25px symbol h-25px fs-6 d-flex justify-content-center align-items-center rounded-circle me-3">
              <i style="font-size: 13px !important;" class="text-white"
                  [class]="itemSelected?.subType | vll : 'AC100' : 'text' | async"></i>
          </div>
          <ng-template #content>
              <span>{{itemSelected?.subType | vll : 'AC063' : 'text' | async}}</span>
          </ng-template>
      </ejs-tooltip> -->
      <span *ngIf="itemSelected?.voucherNo" class="fw-bold line-clamp line-clamp-1 mt-1 fs-5-sm text-uppercase me-5">
          {{ itemSelected?.voucherNo }}
      </span>
      <span *ngIf="(itemSelected?.voucherNo == '' || itemSelected?.voucherNo == null) && gridViewSetup" class="place-holder fw-bold line-clamp line-clamp-1 mt-1 fs-5-sm text-uppercase me-5">
        {{ gridViewSetup['VoucherNo'].headerText }}
    </span>
      <div class="d-flex align-items-center me-3">
          <img style="width: 18px;height: 18px;" class="me-2" src="../assets/themes/ac/default/img/calendar.svg">
          <codx-label class="fw-bold label-colon mt-1" default="Ngày chứng từ" [formModel]="formModel">
          </codx-label>
          <span #voucherDate [innerHTML]="
            itemSelected?.voucherDate
                  | formatvalue : formModel : 'voucherDate' : voucherDate
                  | async
              " class="text-gray-600 mt-1"></span>
      </div>
      <div class="d-flex">
      </div>
  </div>
  <div class="d-flex justify-content-between flex-grow-1 mb-2">
    <div style="height: 27px !important;" class="d-flex align-items-center">
      <span *ngIf="itemSelected?.objectName" class="fw-bold line-clamp line-clamp-1 fs-5 text-uppercase me-5 mt-1" >{{itemSelected?.objectName}}</span>
      <span *ngIf="(itemSelected?.objectName == '' || itemSelected?.objectName == null) && gridViewSetup" class="place-holder line-clamp line-clamp-1 fs-5 text-uppercase me-5 mt-1" >{{gridViewSetup['ObjectID'].headerText}}</span>
    </div>
    <div class="d-flex align-self-center">
        <span class="badge badge-pill badge-primary me-3">
            <!-- <span class="fw-bold" [innerHTML]="(itemSelected?.totalDR
            | tranformValueNumber : formModel
            | async)+ ' ' +itemSelected?.currencyID"></span> -->
            <span class="fw-bold" [innerHTML]="(itemSelected?.totalAmt | tranformValueNumber : (itemSelected?.currencyID !=  baseCurr ? 'S' : 'B') | async)+' '+itemSelected?.currencyID"></span>
            <!-- <span *ngIf="itemSelected?.totalDR == 0" class="fw-bold">{{'0 '+
                itemSelected?.currencyID}}</span> -->
        </span>
    </div>
</div>
  </ng-container>
</ng-template>
<!-- End: template listdetail Header-->

<!-- Start: template listdetail Body-->
<ng-template #TmpBodyDetail>
  <ng-container *ngIf="itemSelected">
    <div class="d-flex justify-content-between flex-grow-1">
      <div class="float-left">
        <div class="d-flex align-items-center me-6">
          <!-- Số hóa đơn  -->
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="InvoiceNo" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.invoiceNo" class="text-gray-600">{{itemSelected?.invoiceNo}}</span>
          <span *ngIf="(itemSelected?.invoiceNo == '' || itemSelected?.invoiceNo == null) && gridViewSetup" class="place-holder text-gray-600">{{gridViewSetup['InvoiceNo'].headerText}}</span>
          <!-- Số hóa đơn   -->
        </div>
        <div class="d-flex align-items-center me-6">
          <!-- Ngày hóa đơn  -->
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="InvoiceDate" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.invoiceDate" #invoiceDate [innerHTML]="
                      itemSelected?.invoiceDate
                            | formatvalue : formModel : 'invoiceDate' : invoiceDate
                            | async
                        " class="text-gray-600"></span>
          <span *ngIf="(itemSelected?.invoiceDate == '' || itemSelected?.invoiceDate == null) && gridViewSetup"
            class="place-holder text-gray-600">{{gridViewSetup['InvoiceDate'].headerText}}</span>
          <!-- Ngày hóa đơn  -->
        </div>
      </div>    
      <div class="d-flex align-self-center">
        <codx-vll [formModel]="formModel" [field]="'Status'" [value]="itemSelected?.status" [showText]="true"
          [showBgColor]="true" class="badge badge-light badge-sm">
        </codx-vll>
      </div>
    </div>
    
    <div class="d-flex align-items-top mb-1">
      <div class="float-left">
        <div class="d-flex align-items-center me-6">
          <!-- Hạn thanh toán  -->
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="InvoiceDueDate" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.invoiceDueDate" #invoiceDueDate [innerHTML]="
                      itemSelected?.invoiceDueDate
                            | formatvalue : formModel : 'invoiceDueDate' : invoiceDueDate
                            | async
                        " class="text-gray-600"></span>
          <span *ngIf="(itemSelected?.invoiceDueDate == '' || itemSelected?.invoiceDueDate == null) && gridViewSetup"
            class="place-holder text-gray-600">{{gridViewSetup['InvoiceDueDate'].headerText}}</span>
          <!-- Hạn thanh toán  -->
        </div>
        <div class="d-flex align-items-center me-6">
          <!-- Hình thức thanh toán  -->
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="PmtMethodID" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.pmtMethodID" class="text-gray-600">{{itemSelected?.pmtMethodID}}</span>
          <span *ngIf="(itemSelected?.pmtMethodID == '' || itemSelected?.pmtMethodID == null) && gridViewSetup"
            class="place-holder text-gray-600">{{gridViewSetup['PmtMethodID'].headerText}}</span>
          <!-- Hình thức thanh toán  -->
        </div>
      </div>
      
    </div>
    <div class="d-flex align-items-top mb-1">
      <!-- Nhân viên mua hàng  -->
      <codx-label class="fw-bold label-colon text-nowrap" fiedName="Buyer" [formModel]="formModel">
      </codx-label>
      <span *ngIf="itemSelected?.buyerName" class="text-gray-600">{{itemSelected?.buyerName}}</span>
      <span *ngIf="(itemSelected?.buyerName == '' || itemSelected?.buyerName == null) && gridViewSetup" class="place-holder text-gray-600">{{gridViewSetup['Buyer'].headerText}}</span>
      <!-- Nhân viên mua hàng  -->
    </div>
    <div class="d-flex align-items-top mb-1">
      <!-- Diễn giải -->
      <codx-label class="fw-bold label-colon text-nowrap" fiedName="Memo" [formModel]="formModel">
      </codx-label>
      <span *ngIf="itemSelected?.memo" class="text-gray-600">{{itemSelected?.memo}}</span>
      <span *ngIf="(itemSelected?.memo == '' || itemSelected?.memo == null) && gridViewSetup" class="place-holder text-gray-600">{{gridViewSetup['Memo'].headerText}}</span>
      <!-- Diễn giải  -->
    </div>
    <div class="card-add mt-5">
      <ejs-tab #elementTabDetail (created)="createTab($event, elementTabDetail)">
        <e-tabitems>
          <!--Start tab Thông tin hóa đơn -->
          <e-tabitem>
            <ng-template #headerText>
              <div class="d-flex align-items-top me-2 mt-2">
                <i class="icon-format_list_bulleted icon-16 me-2"></i>
                <codx-label class="fw-bold fs-6" fiedName="lblDetail2" [formModel]="formModel"
                  default="Thông tin hóa đơn"></codx-label>
              </div>
            </ng-template>
            <ng-template #content>
              <ng-container *ngTemplateOutlet="tabPurchaseInvoices"></ng-container>
            </ng-template>
          </e-tabitem>
          <!--End tab Thông tin hóa đơn -->

          <!--Start tab hạch toán -->
          <e-tabitem>
            <ng-template #headerText>
              <div class="d-flex align-items-top me-2 mt-2">
                <i class="icon-i-file-earmark-spreadsheet icon-16 me-2"></i>
                <codx-label class="fw-bold fs-6" fiedName="lblDetail1" [formModel]="formModel"
                  default="Hạch toán"></codx-label>
              </div>
            </ng-template>
            <ng-template #content>
              <ng-container *ngTemplateOutlet="tabAcctTrans"></ng-container>
            </ng-template>
          </e-tabitem>
          <!--End tab hạch toán -->

          <!--Start tab Hóa đơn GTGT -->
          <e-tabitem>
            <ng-template #headerText>
              <div class="d-flex align-items-top me-2 mt-2">
                <i class="icon-i-file-earmark-arrow-up icon-16 me-2"></i>
                <codx-label class="fw-bold fs-6" fiedName="lblDetail3" [formModel]="formModel"
                  default="Hóa đơn GTGT"></codx-label>
              </div>
            </ng-template>
            <ng-template #content>
              <ng-container *ngTemplateOutlet="tabVatInvoices"></ng-container>
            </ng-template>
          </e-tabitem>
          <!-- Tab Hóa đơn GTGT -->
        </e-tabitems>
      </ejs-tab>
    </div>
  </ng-container>
</ng-template>
<!-- End: template listdetail Body-->

<!-- Start: template listdetail Footer-->
<ng-template #TmpFooterDetail let-data>
  <ng-container *ngIf="itemSelected">
    <codx-tabs [entityName]="formModel.entityName" [formModel]="formModel" [objectID]="itemSelected?.recID"
        [funcID]="formModel.funcID" [TabControl]="tabInfo"></codx-tabs>
</ng-container>
</ng-template>
<!-- End: template listdetail Footer-->

<!-- Start: template Tab AcctTrans-->
<ng-template #tabAcctTrans>
  <ng-container *ngIf="itemSelected?.listAcctrants">
      <div class="table-responsive table-ac">
        <table style="table-layout: fixed;" class="table mb-0">
          <thead class="border-gray-200 table-thead-ac">
            <tr class="border-bottom">
              <th class="w-40 border-bottom">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblAccountName" default="Tài khoản">
                  </codx-label>
                </div>
              </th>
              <th *ngIf="baseCurr && itemSelected?.currencyID == baseCurr" class="w-15 border-bottom">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblAccountID" default="Nợ">
                  </codx-label>
                </div>
              </th>
              <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15 border-bottom">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblAccountID" default="Nợ, HT">
                  </codx-label>
                </div>
              </th>
              <th *ngIf="baseCurr && itemSelected?.currencyID == baseCurr" class="w-15 border-bottom">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblOffSetAccID" default="Có">
                  </codx-label>
                </div>
              </th>
              <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15 border-bottom">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblOffSetAccID" default="Có, HT">
                  </codx-label>
                </div>
              </th>
              <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15 border-bottom">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblDR2" default="Số tiền, NT">
                  </codx-label>
                </div>
              </th>
              <th class="w-30 border-bottom">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblNote" default="Ghi chú">
                  </codx-label>
                </div>
              </th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let item of itemSelected?.listAcctrants;trackBy: trackByFn">
              <tr [style]="item | tranformClassBorder : itemSelected?.listAcctrants">
                <td class="text-center">
                  <div class="d-flex justify-content-start ps-3">
                    <div class="w-100px min-w-100px">
                      <div class="d-flex align-items-center justify-content-start">
                        <ng-container *ngIf="(item.accountID != null && item.accountID != '')">
                          <div class="d-flex align-items-center justify-content-start">
                            <span *ngIf="!item.crediting" class="fs-6 fw-bold">N&nbsp;&nbsp;{{item.accountID}}</span>
                            <span *ngIf="item.crediting" class="fw-bold fs-6 ms-5">C&nbsp;&nbsp;{{item.accountID}}</span>
                          </div>
                        </ng-container>
                      </div>
                    </div>
                    <div class="align-items-center w-100">
                      <div *ngIf="(item.accountID != null && item.accountID != '')"
                        class="d-flex align-items-center justify-content-start">
                        <ng-container>
                          <span style="text-align: left !important;" #accountID class="fw-bold line-clamp line-clamp-1">{{item.accountName}}</span>
                        </ng-container>
                      </div>
                      <div *ngIf="(item.objectName!= null && item.objectName != '')"
                        class="d-flex align-items-center justify-content-start">
                        <ng-container>
                          <codx-label *ngIf="itemSelected?.subType == '1' || itemSelected?.subType == '2'"
                            style="white-space: nowrap" class="fs-7 fw-bold" default="Nhà cung cấp">
                          </codx-label>
                          <codx-label *ngIf="itemSelected?.subType == '3' || itemSelected?.subType == '4'"
                            style="white-space: nowrap" class="fs-7 fw-bold" default="Nhân viên">
                          </codx-label>
                          <codx-label *ngIf="itemSelected?.subType == '9'" style="white-space: nowrap"
                            class="fs-7 fw-bold" default="Đối tượng">
                          </codx-label>
                          :&nbsp;
                          <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                            {{item.objectName}}
                          </span>
                        </ng-container>
                      </div>
                      <div *ngIf="(item.diM3 != null && item.diM3 != '')"
                        class="d-flex align-items-center justify-content-start">
                        <ng-container>
                          <codx-label style="white-space: nowrap" class="fs-7 fw-bold label-colon" fiedName="lblDIM3"
                            default="Mục phí">
                          </codx-label>
                          :&nbsp;
                          <span class="fs-7 text-gray-700">{{item.diM3}}</span>
                          &nbsp;-&nbsp;
                          <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                            :&nbsp;{{item.costItemName}}
                          </span>
                        </ng-container>
                      </div>
                      <div *ngIf="(item.diM2 != null && item.diM2 != '')"
                        class="d-flex align-items-center justify-content-start">
                        <ng-container>
                          <codx-label style="white-space: nowrap" class="fw-bold fs-7" fiedName="lblDIM2" default="TTCP">
                          </codx-label>
                          :&nbsp;
                          <span class="fs-7 text-gray-700">{{item.diM2}}</span>
                          &nbsp;-&nbsp;
                          <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                            {{item.costCenterName}}
                          </span>
                        </ng-container>
                      </div>
                      <div *ngIf="(item.diM1 != null && item.diM1 != '')"
                        class="d-flex align-items-center justify-content-start">
                        <ng-container>
                          <codx-label style="white-space: nowrap" class="fs-7 fw-bold" fiedName="lblDIM1"
                            default="Phòng ban">
                          </codx-label>
                          :&nbsp;
                          <span class="fs-7 text-gray-700">{{item.diM1}}</span>
                          &nbsp;-&nbsp;
                          <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                            {{item.departmentName}}
                          </span>
                        </ng-container>
                      </div>
                      <!-- <div *ngIf="(item.projectID != null && item.projectID != '')"
                        class="d-flex align-items-center justify-content-start">
                        <ng-container>
                          <codx-label style="white-space: nowrap" class="fs-7 fw-bold" fiedName="lblProjectID"
                            default="Dự án">
                          </codx-label>
                          :&nbsp;
                          <span style="white-space: nowrap" class="fs-7 text-gray-700">{{item.projectID}}</span>
                          &nbsp;-&nbsp;
                          <span #projectID class="fs-7 text-gray-700 line-clamp line-clamp-1" [innerHTML]="
                            item.projectID
                              | formatvalue
                                : fmCashPaymentsLines
                                : 'projectID'
                                : projectID
                              | async
                          "></span>
                        </ng-container>
                      </div> -->
                    </div>
                  </div>
                </td>
                <td class="text-center">
                  <div *ngIf="!item.crediting" class="d-flex align-items-center justify-content-end ps-3">
                    <!-- <ng-container *ngIf="baseCurr && itemSelected?.currencyID == baseCurr">
                      <span class="fw-bold line-clamp line-clamp-1"[innerHTML]="item?.transAmt
                        | tranformValueNumber : 'B' | async"></span>
                    </ng-container>
                    <ng-container *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
                      <span class="fw-bold line-clamp line-clamp-1" [innerHTML]="item?.transAmt2
                      | tranformValueNumber : 'B' | async"></span>
                    </ng-container> -->
                    <span class="fw-bold line-clamp line-clamp-1"[innerHTML]="item?.transAmt2
                        | tranformValueNumber : 'B' | async"></span>
                  </div>
                </td>
                <td class="text-center">
                  <div *ngIf="item.crediting" class="d-flex align-items-center justify-content-end ps-3">
                    <!-- <ng-container *ngIf="baseCurr && itemSelected?.currencyID == baseCurr">
                      <span class="fw-bold line-clamp line-clamp-1" [innerHTML]="item?.transAmt
                      | tranformValueNumber : 'B' | async"></span>
                    </ng-container>
                    <ng-container *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
                      <span class="fw-bold line-clamp line-clamp-1" [innerHTML]="item?.transAmt2
                      | tranformValueNumber : 'B' | async"></span>
                    </ng-container> -->
                    <span class="fw-bold line-clamp line-clamp-1" [innerHTML]="item?.transAmt2
                      | tranformValueNumber : 'B' | async"></span>
                  </div>
                </td>
                <td *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="text-center">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span class="fw-bold line-clamp line-clamp-1" [innerHTML]="item?.transAmt
                    | tranformValueNumber : 'S' | async"></span>
                  </div>
                </td>
                <td>
                  <ejs-tooltip position="BottomLeft" id='tooltip' target="#tipmemo">
                    <div id="tipmemo" *ngIf="item.memo != null && item.memo != ''" class="d-flex flex-wrap">
                      <div class="d-flex align-items-center mb-1 ps-3">
                        <span class="line-clamp line-clamp-1 text-gray-600 fs-7">{{ item.memo }}</span>
                      </div>
                    </div>
                    <ng-template #content>
                      <span>{{ item.memo }}</span>
                    </ng-template>
                  </ejs-tooltip>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
        <div *ngIf="itemSelected?.listAcctrants && itemSelected?.listAcctrants.length == 0" class="ac-empty">
          <div style="padding-top: 0px !important;" class="list-empty card card-flush h-100">
            <div class="d-flex flex-column flex-center justify-content-center">
              <img src="../assets/themes/sys/default/img/DataEmpty.svg" class="w-200px" />
              <div class="fs-6 text-dark mt-2 text-center">
                {{ "SYS011" | mssg | async }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <table style="table-layout: fixed;" class="table mb-0">
        <tfoot class="table-footer-ac">
          <td class="w-40">
            <div class="d-flex align-items-center justify-content-start ps-3 h-30px">
              <codx-label  *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" fiedName="lblTotal" default="Tổng cộng">
              </codx-label>
            </div>
          </td>
          <td class="w-15">
            <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
              <span *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="totalAcctDR
                      | tranformValueNumber : 'B' | async"></span>
            </div>
          </td>
          <td class="w-15">
            <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
              <span *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="totalAcctCR
                      | tranformValueNumber : 'B' | async"></span>
            </div>
          </td>
          <td *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15">
            <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
              <span *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="totalTransAmt
                      | tranformValueNumber : 'S' | async"></span>
            </div>
          </td>
          <td class="w-15"></td>
          <td class="w-15"></td>
        </tfoot>
      </table>
    </ng-container>
</ng-template>
<!-- End: template Tab AcctTrans-->

<!-- Start: template Tab PurchaseInvoices-->
<ng-template #tabPurchaseInvoices>
  <ng-container *ngIf="itemSelected?.listPurchaseInvoicesLine">
    <div class="table-responsive table-ac">
      <table style="table-layout: fixed;" class="table mb-0">
        <thead class="border-gray-200 table-thead-ac">
          <tr class="border-bottom">
            <th class="w-40 border-bottom">
              <div class="d-flex align-items-center justify-content-start ps-3">
                <codx-label class="fw-bold" fiedName="lblItem" default="Mặt hàng">
                </codx-label>
              </div>
            </th>
            <th class="w-15 border-bottom">
              <div class="d-flex align-items-center justify-content-end ps-3">
                <codx-label class="fw-bold" fiedName="lblQuantity" default="Số lượng">
                </codx-label>
              </div>
            </th>
            <th class="w-15 border-bottom">
              <div class="d-flex align-items-center justify-content-end ps-3">
                <codx-label class="fw-bold" fiedName="lblUnitPrice" default="Đơn giá">
                </codx-label>
              </div>
            </th>
            <th class="w-15 border-bottom">
              <div class="d-flex align-items-center justify-content-end ps-3">
                <codx-label class="fw-bold" fiedName="lblPrice" default="Thành tiền">
                </codx-label>
              </div>
            </th>
            <th class="w-15 border-bottom">
              <div class="d-flex align-items-center justify-content-end ps-3">
                <codx-label class="fw-bold" fiedName="lblVAT" default="Thuế GTGT">
                </codx-label>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let item of itemSelected?.listPurchaseInvoicesLine;trackBy: trackByFn">
            <tr style="border-bottom: 1px solid var(--bs-border-color) !important;">
              <td class="text-center">
                <div class="d-flex justify-content-start ps-3">
                  <div class="align-items-center w-100">
                    <div *ngIf="(item.itemName != null && item.itemName != '')" class="d-flex align-items-center justify-content-start">
                      <ng-container>
                        <span style="text-align: left !important;"
                          class="fw-bold line-clamp line-clamp-1">{{item.itemName}}</span>
                      </ng-container>
                    </div>
                    <div *ngIf="(item.idiM0 != null && item.idiM0 != '') ||
                                        (item.idiM1 != null && item.idiM1 != '') || 
                                        (item.idiM2 != null && item.idiM2 != '') ||
                                        (item.idiM3 != null && item.idiM3 != '')" class="d-flex justify-content-start">
                      <ng-container>
                        <codx-label style="white-space: nowrap" class="fs-7 fw-bold" default="Quy cách">
                        </codx-label>
                        :&nbsp;
                        <span *ngIf="(item.idiM0 != null && item.idiM0 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{item.idiM0}}
                        </span>
                        <span *ngIf="(item.idiM1 != null && item.idiM1 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM1}}
                        </span>
                        <span *ngIf="(item.idiM2 != null && item.idiM2 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM2}}
                        </span>
                        <span *ngIf="(item.idiM3 != null && item.idiM3 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM3}}
                        </span>
                      </ng-container>
                    </div>
                    <div *ngIf="(item.idiM4 != null && item.idiM4 != '') ||
                                        (item.idiM5 != null && item.idiM5 != '') || 
                                        (item.idiM6 != null && item.idiM6 != '') ||
                                        (item.idiM7 != null && item.idiM7 != '') ||
                                        (item.idiM8 != null && item.idiM8 != '') ||
                                        (item.idiM9 != null && item.idiM9 != '')" class="d-flex justify-content-start mb-1">
                      <ng-container>
                        <codx-label style="white-space: nowrap"
                          class="fs-7 fw-bold" default="Kho">
                        </codx-label>                                         
                        :&nbsp;
                        <span *ngIf="(item.idiM4 != null && item.idiM4 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{item.idiM4}}
                        </span>
                        <span *ngIf="(item.idiM5 != null && item.idiM5 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM5}}
                        </span>
                        <span *ngIf="(item.idiM6 != null && item.idiM6 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM6}}
                        </span>
                        <span *ngIf="(item.idiM7 != null && item.idiM7 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM6}}
                        </span>
                        <span *ngIf="(item.idiM8 != null && item.idiM8 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM8}}
                        </span>
                        <span *ngIf="(item.idiM9 != null && item.idiM9 != '')" class="fs-7 text-gray-700 line-clamp line-clamp-1">
                          {{','+item.idiM9}}
                        </span>
                      </ng-container>
                    </div>
                    <div *ngIf="item?.lineType != '1'" class="d-flex justify-content-start">
                      <span class="badge ac-badge-light-primary">
                        {{item?.lineType | vll : 'AC089' : 'text' | async}}
                      </span>
                    </div>
                  </div>
                </div>
              </td>
              <td class="text-center">
                <div class="d-flex justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1"[innerHTML]="item?.quantity
                        | tranformValueNumber : 'B' | async"></span>
                </div>
                <div *ngIf="item?.umid" class="d-flex justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1">{{item.umid}}</span>
                </div>
              </td>
              <td class="text-center">
                <div class="d-flex justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1"[innerHTML]="item?.purcPrice
                        | tranformValueNumber : 'B' | async"></span>
                </div>
              </td>
              <td class="text-center">
                <div class="d-flex justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1"[innerHTML]="item?.netAmt
                        | tranformValueNumber : 'B' | async"></span>
                </div>
              </td>
              <td class="text-center">
                <div class="d-flex justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1"[innerHTML]="item?.vatAmt
                        | tranformValueNumber : 'B' | async"></span>
                </div>
                <div *ngIf="item?.taxRate" class="d-flex justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1">{{item.taxRate * 100 + "%"}}</span>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <div *ngIf="itemSelected?.listPurchaseInvoicesLine && itemSelected?.listPurchaseInvoicesLine.length == 0" class="ac-empty">
        <div style="padding-top: 0px !important;" class="list-empty card card-flush h-100">
          <div class="d-flex flex-column flex-center justify-content-center">
            <img src="../assets/themes/sys/default/img/DataEmpty.svg" class="w-200px" />
            <div class="fs-6 text-dark mt-2 text-center">
              {{ "SYS011" | mssg | async }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <table style="table-layout: fixed;" class="table mb-0">
      <tfoot class="table-footer-ac">
        <td class="w-40">
          <div class="d-flex align-items-center justify-content-start ps-3 h-30px">
            <codx-label  *ngIf="itemSelected?.listPurchaseInvoicesLine.length > 0" class="fw-bold line-clamp line-clamp-1" fiedName="lblTotal" default="Tổng cộng">
            </codx-label>
          </div>
        </td>
        <td class="w-15">
          <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
            <span *ngIf="itemSelected?.listPurchaseInvoicesLine.length > 0" class="fw-bold line-clamp line-clamp-1" [innerHTML]="totalQuantity
                    | tranformValueNumber : 'B' | async"></span>
          </div>
        </td>
        <td class="w-15"></td>
        <td class="w-15">
          <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
            <span *ngIf="itemSelected?.listPurchaseInvoicesLine.length > 0" class="fw-bold line-clamp line-clamp-1" [innerHTML]="totalNetAmt
                    | tranformValueNumber : 'B' | async"></span>
          </div>
        </td>
        <td class="w-15">
          <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
            <span *ngIf="itemSelected?.listPurchaseInvoicesLine.length > 0" class="fw-bold line-clamp line-clamp-1"[innerHTML]="totalVatAtmPur
                    | tranformValueNumber : 'B' | async"></span>
          </div>
        </td>
      </tfoot>
    </table>
  </ng-container>
</ng-template>
<!-- End: template Tab PurchaseInvoices-->

<!-- Start: template Tab VatInvoices-->
<ng-template #tabVatInvoices>
  <ng-container *ngIf="itemSelected?.listVATInvoices">
      <div class="table-responsive table-ac">
        <table style="table-layout: fixed;" class="table mb-0">
          <thead class="border-gray-200 table-thead-ac">
            <tr class="border-bottom">
              <th class="border-bottom w-20">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblInvoiceNo" [formModel]="formModel" default="Mẫu số">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-20">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblInvoiceDate" [formModel]="formModel" default="Ký hiệu">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-20">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblDueDate" [formModel]="formModel" default="Số hóa đơn">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-20">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblBalanceAmt" default="Ngày hóa đơn">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-30">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblSettledAmt" default="Đối tượng">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-20">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblNote" default="Số tiền">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-40">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblNote" default="Thuế suất">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-20">
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <codx-label class="fw-bold" fiedName="lblNote" default="Tiền thuế">
                  </codx-label>
                </div>
              </th>
              <th class="border-bottom w-40">
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <codx-label class="fw-bold" fiedName="lblNote" default="Ghi chú">
                  </codx-label>
                </div>
              </th>
            </tr>
          </thead>
          <tbody class="border-bottom">
            <tr *ngFor="let item of itemSelected?.listVATInvoices;trackBy: trackByFn">
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.invoiceForm != null && item.invoiceForm != '')">
                    <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceForm}}</span>
                  </ng-container>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.invoiceSeri != null && item.invoiceSeri != '')">
                    <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceSeri}}</span>
                  </ng-container>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.invoiceNo != null && item.invoiceNo != '')">
                    <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceNo}}</span>
                  </ng-container>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.invoiceDate != null && item.invoiceDate != '')">
                    <span #invoiceDate [innerHTML]="
                        item?.invoiceDate
                  | formatvalue : fmVatInvoices : 'invoiceDate' : invoiceDate | async
              " class="text-gray-600"></span>
                  </ng-container>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.objectID != null && item.objectID != '')">
                    <span #objectID [innerHTML]="
                        item?.objectID | formatvalue : fmVatInvoices : 'objectID' : objectID | async"
                      class="text-gray-600"></span>
                  </ng-container>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1" [innerHTML]="item?.vatBase
                      | tranformValueNumber : 'B' | async"></span>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.vatid != null && item.vatid != '')">
                    <span #vatid [innerHTML]="
                        item?.vatid | formatvalue : fmVatInvoices : 'vatid' : vatid | async"
                      class="text-gray-600"></span>
                  </ng-container>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-end ps-3">
                  <span class="fw-bold line-clamp line-clamp-1" #vatAmt [innerHTML]="item?.vatAmt
                      | tranformValueNumber : 'B' | async"></span>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-start ps-3">
                  <ng-container *ngIf="(item.note != null && item.note != '')">
                    <span class="fw-bold line-clamp line-clamp-1">{{item.note}}</span>
                  </ng-container>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="itemSelected?.listVATInvoices.length == 0" class="ac-empty">
          <div style="padding-top: 0px !important;" class="list-empty card card-flush h-100">
            <div class="d-flex flex-column flex-center justify-content-center">
              <img src="../assets/themes/sys/default/img/DataEmpty.svg" class="w-200px" />
              <div class="fs-6 text-dark mt-2 text-center">
                {{ "SYS011" | mssg | async }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <table style="table-layout: fixed;" class="table mb-0">
        <tfoot class="table-footer-ac">
          <td class="w-20">
            <div class="d-flex align-items-center justify-content-start ps-3 h-30px">
              <codx-label  *ngIf="itemSelected?.listVATInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" fiedName="lblTotal" default="Tổng cộng">
              </codx-label>
            </div>
          </td>
          <td class="w-20"></td>
          <td class="w-20"></td>
          <td class="w-20"></td>
          <td class="w-30"></td>
          <td class="w-20">
            <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
              <span *ngIf="itemSelected?.listVATInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #vatBase [innerHTML]="totalVatBase
                      | tranformValueNumber : 'B' | async"></span>
            </div>
          </td>
          <td class="w-40"></td>
          <td class="w-20">
            <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
              <span *ngIf="itemSelected?.listVATInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #vatAmt [innerHTML]="totalVatAtm
                      | tranformValueNumber : 'B' | async"></span>
            </div>
          </td>
          <td class="w-40"></td>
        </tfoot>
      </table>
    </ng-container>
</ng-template>
<!-- End: template Tab VatInvoices-->