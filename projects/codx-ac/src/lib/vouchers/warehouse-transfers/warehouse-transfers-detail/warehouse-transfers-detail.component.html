<!-- Start: template listdetail -->
<ng-container *ngIf="itemSelected">
  <codx-detail-tmp [header]="TmpHeaderDetail" [body]="TmpBodyDetail" [hideMF]="codxService.asideMode == '2'"
    [formModel]="formModel" [dataItem]="itemSelected" [footer]="TmpFooterDetail">
  </codx-detail-tmp>
</ng-container>
<!-- End: template listdetail -->

<!-- Start: template listdetail Header-->
<ng-template #TmpHeaderDetail>
  <ng-container *ngIf="itemSelected">
    <div style="position: relative;z-index: 1000;width: 50%;" class="d-flex align-items-center ac-cashID mb-2">
      <!-- <ejs-tooltip id='tooltip' target="#tipsub" position='BottomRight'>
                <div id="tipsub" style="background-color: var(--primary-dark)"
                    class="w-25px symbol h-25px fs-6 d-flex justify-content-center align-items-center rounded-circle me-3">
                    <i style="font-size: 13px !important;" class="text-white"
                        [class]="itemSelected?.subType | vll : 'AC100' : 'text' | async"></i>
                </div>
                <ng-template #content>
                    <span>{{itemSelected?.subType | vll : 'AC063' : 'text' | async}}</span>
                </ng-template>
            </ejs-tooltip> -->
      <span *ngIf="itemSelected?.voucherNo" class="fw-bold line-clamp line-clamp-1 mt-1 fs-5-sm text-uppercase me-5">
        {{ itemSelected?.voucherNo }}
      </span>
      <span *ngIf="(itemSelected?.voucherNo == '' || itemSelected?.voucherNo == null) && gridViewSetup"
        class="place-holder fw-bold line-clamp line-clamp-1 mt-1 fs-5-sm text-uppercase me-5">
        {{ gridViewSetup['VoucherNo'].headerText }}
      </span>
      <div class="d-flex align-items-center me-3">
        <img style="width: 18px;height: 18px;" class="me-2" src="../assets/themes/ac/default/img/calendar.svg">
        <codx-label class="fw-bold label-colon mt-1" default="Ngày chứng từ" [formModel]="formModel">
        </codx-label>
        <span #voucherDate [innerHTML]="
                  itemSelected?.voucherDate
                        | formatvalue : formModel : 'voucherDate' : voucherDate
                        | async
                    " class="text-gray-600 mt-1"></span>
      </div>
    </div>
    <div class="d-flex justify-content-between flex-grow-1 mb-2">
      <div class="d-flex align-items-center">
        <span *ngIf="itemSelected?.fromWHIDName"
          class="fw-bold line-clamp line-clamp-1 fs-5 text-uppercase mt-1">{{itemSelected?.fromWHIDName}}</span>
        <span *ngIf="(itemSelected?.fromWHIDName == '' || itemSelected?.fromWHIDName == null) && gridViewSetup"
          class="place-holder line-clamp line-clamp-1 fs-5 text-uppercase me-5 mt-1">{{gridViewSetup['FromWHID'].headerText}}</span>
        &nbsp;-&nbsp;
        <span *ngIf="itemSelected?.toWHIDName"
          class="fw-bold line-clamp line-clamp-1 fs-5 text-uppercase mt-1">{{itemSelected?.toWHIDName}}</span>
        <span *ngIf="(itemSelected?.toWHIDName == '' || itemSelected?.toWHIDName == null) && gridViewSetup"
          class="place-holder line-clamp line-clamp-1 fs-5 text-uppercase me-5 mt-1">{{gridViewSetup['ToWHID'].headerText}}</span>
      </div>
      <!-- <div class="d-flex align-self-center">
              <span class="badge badge-pill badge-primary me-3">
                <span class="fw-bold" [innerHTML]="(itemSelected?.totalAmt | tranformValueNumber : 'B' | async)"></span>
              </span>
            </div> -->
    </div>
  </ng-container>
</ng-template>
<!-- End: template listdetail Header-->

<!-- Start: template listdetail Body-->
<ng-template #TmpBodyDetail>
  <ng-container *ngIf="itemSelected">
    <div class="d-flex justify-content-between flex-grow-1">
      <div class="float-left">
        <div class="d-flex align-items-center">
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="ReasonID" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.reasonName" class="text-gray-600">{{itemSelected?.reasonName}}</span>
          <span *ngIf="(itemSelected?.reasonName == '' || itemSelected?.reasonName == null) && gridViewSetup"
            class="place-holder text-gray-600">{{gridViewSetup['ReasonID'].headerText}}</span>
        </div>
      </div>
      <div class="d-flex align-self-center">
        <codx-vll [formModel]="formModel" [field]="'Status'" [value]="itemSelected?.status" [showText]="true"
          [showBgColor]="true" class="badge badge-light badge-sm">
        </codx-vll>
      </div>
    </div>
    <div class="d-flex align-items-center me-6">
      <codx-label class="fw-bold label-colon text-nowrap" fiedName="Requester" [formModel]="formModel">
      </codx-label>
      <span *ngIf="itemSelected?.requesterName" class="text-gray-600">{{itemSelected?.requesterName}}</span>
      <span *ngIf="(itemSelected?.requesterName == '' || itemSelected?.requesterName == null) && gridViewSetup"
        class="place-holder text-gray-600">{{gridViewSetup['Requester'].headerText}}</span>
    </div>
    <div class="d-flex align-items-top mb-1">
      <codx-label class="fw-bold label-colon text-nowrap" fiedName="RequestedDate" [formModel]="formModel">
      </codx-label>
      <span #requestedDate [innerHTML]="
                        itemSelected?.requestedDate
                              | formatvalue : formModel : 'requestedDate' : requestedDate
                              | async
                          " class="text-gray-600"></span>
    </div>
    <div class="d-flex justify-content-between flex-grow-1">
      <div class="d-flex align-items-top mb-1">
        <codx-label class="fw-bold label-colon text-nowrap" fiedName="Memo" [formModel]="formModel">
        </codx-label>
        <span *ngIf="itemSelected?.memo" class="text-gray-600">{{itemSelected?.memo}}</span>
        <span *ngIf="(itemSelected?.memo == '' || itemSelected?.memo == null) && gridViewSetup"
          class="place-holder text-gray-600">{{gridViewSetup['Memo'].headerText}}</span>
      </div>
    </div>
    <div class="card-add card-transfer mt-1">
      <ejs-tab>
        <e-tabitems>
          <!--Start tab Thông tin kho xuất -->
          <e-tabitem>
            <ng-template #headerText>
              <div class="d-flex align-items-top me-2 mt-2">
                <i class="icon-i-file-text icon-16 me-2"></i>
                <codx-label class="fw-bold fs-6" fiedName="lblDetail2" [formModel]="formModel"
                  default="Thông tin kho xuất"></codx-label>
              </div>
            </ng-template>
            <ng-template #content>
              <ng-container *ngTemplateOutlet="tabTranfer"></ng-container>
            </ng-template>
          </e-tabitem>
          <!--End tab Thông tin kho xuất -->

          <!--Start tab Thông tin kho nhập -->
          <e-tabitem>
            <ng-template #headerText>
              <div class="d-flex align-items-top me-2 mt-2">
                <i class="icon-i-file-text icon-16 me-2"></i>
                <codx-label class="fw-bold fs-6" fiedName="lblDetail2" [formModel]="formModel"
                  default="Thông tin kho nhập"></codx-label>
              </div>
            </ng-template>
            <ng-template #content>
              <ng-container *ngTemplateOutlet="tabTranfer2"></ng-container>
            </ng-template>
          </e-tabitem>
          <!--End tab Thông tin kho nhập -->

          <!--Start tab hạch toán -->
          <!-- <e-tabitem>
                  <ng-template #headerText>
                    <div class="d-flex align-items-top me-2 mt-2">
                      <i class="icon-i-file-earmark-spreadsheet icon-16 me-2"></i>
                      <codx-label class="fw-bold fs-6" fiedName="lblDetail1" [formModel]="formModel"
                        default="Hạch toán"></codx-label>
                    </div>
                  </ng-template>
                  <ng-template #content>
                    <ng-container *ngTemplateOutlet="tabAcctTrans"></ng-container>
                  </ng-template>
                </e-tabitem> -->
          <!--End tab hạch toán -->
        </e-tabitems>
      </ejs-tab>
    </div>
  </ng-container>
</ng-template>
<!-- End: template listdetail Body-->

<!-- Start: template listdetail Footer-->
<ng-template #TmpFooterDetail let-data>
  <ng-container *ngIf="itemSelected">
    <codx-tabs [entityName]="formModel.entityName" [formModel]="formModel" [objectID]="itemSelected?.recID"
      [funcID]="formModel.funcID" [TabControl]="tabInfo"></codx-tabs>
  </ng-container>
</ng-template>
<!-- End: template listdetail Footer-->

<ng-template #tabTranfer let-data>
  <ng-container *ngIf="itemSelected">
    <transfers-table [type]="'issue'" [itemSelected]="itemSelected" [baseCurr]="baseCurr"></transfers-table>
  </ng-container>
</ng-template>

<ng-template #tabTranfer2 let-data>
  <ng-container *ngIf="itemSelected">
    <transfers-table [type]="'receipt'" [itemSelected]="itemSelected" [baseCurr]="baseCurr"></transfers-table>
  </ng-container>
</ng-template>

<ng-template #tabAcctTrans let-data>
  <ng-container *ngIf="itemSelected">
    <acctrants-table [itemSelected]="itemSelected" [baseCurr]="baseCurr">
    </acctrants-table>
  </ng-container>
</ng-template>