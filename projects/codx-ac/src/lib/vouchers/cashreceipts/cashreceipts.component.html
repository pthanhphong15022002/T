<codx-views class="ac-views" [ariaKeyShortcuts]="" #view idField="recID" [views]="views" [button]="button" [entityName]="view.entityName"
  (buttonClick)="btnAddClick($event)" [predicates]="runmode == '1' ? '' : 'JournalNo=@0'" [dataValues]="runmode == '1' ? '' : journalNo"
  (selectedChange)="onSelectedItem($event)" [isSubView]="true">
</codx-views>
<!-- templateGrid -->
<ng-template #templateGrid let-data>
  <codx-mfunc [dataItem]="data" (changeDataMF)="changeMFDetail($event,data,'viewgrid')" [formModel]="view.formModel"
    (clickMF)="clickMoreFunction($event, data)" isBookMark="false" type="view"></codx-mfunc>
</ng-template>
<!-- templateGrid -->

<!-- template listdetail -->
<ng-template #templateDetailLeft let-data>
  <codx-temp-full [titleTmp]="titleTmp" cardCss="card-template border-bottom p-3" [formModel]="view.formModel"
    [modeImgs]="true" [titleLine]="2" [dataItem]="data" [hideMF]="false" [typeMF]="'hover'" [moreFuncCss]="'me-15'"
    (changeDataMF)="changeMFDetail($event, data)" (clickMF)="clickMoreFunction($event, data)">
  </codx-temp-full>
</ng-template>
<ng-template #templateDetailRight>
  <ng-container *ngIf="itemSelected">
    <cashreciept-detail [formModel]="view.formModel" [dataService]="this.view.dataService" [dataItem]="itemSelected"
      [recID]="itemSelected?.recID" [baseCurr]="baseCurr" [journal]="journal" [headerText]="headerText" [gridViewSetup]="view?.gridViewSetup"
      [legalName]="legalName" [hideFields]="hideFields" [dataDefault]="dataDefault"></cashreciept-detail>
  </ng-container>
</ng-template>
<ng-template #titleTmp let-data>
  <ejs-tooltip position="RightCenter" id='tooltip' target="#tipsub">
    <!-- <div id="tipsub" [style]="'background-color:' + (data?.subType | vll : 'AC100' : 'color' | async)" -->
    <div id="tipsub" style="background-color: var(--primary-dark)"
      class="w-30px symbol h-30px fs-6 d-flex justify-content-center align-items-center rounded-circle me-3">
      <i style="font-size: 16px !important;" class="text-white"
        [class]="data?.subType | vll : 'AC100' : 'text' | async"></i>
    </div>
    <ng-template #content>
      <span *ngIf="(this.view.funcID == 'ACT0401') || (this.view.funcID == 'ACT0428')">{{data?.subType | vll : 'AC065'
        : 'text' | async}}</span>
    </ng-template>
  </ejs-tooltip>
  <div class="d-flex flex-column text-content flex-grow-1">
    <div class="d-flex justify-content-between">
      <div class="d-flex align-items-center">
        <span *ngIf="data?.voucherNo" class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase">{{
          data?.voucherNo
          }}</span>
        <span *ngIf="(data?.voucherNo == '' || data?.voucherNo == null) && view?.gridViewSetup" class="place-holder fw-bold line-clamp line-clamp-1 fs-6 text-uppercase">
              {{ view?.gridViewSetup['VoucherNo'].headerText }}
          </span>
      </div>
      <div>
        <span *ngIf="data?.totalDR != 0" class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase" #totalDR
          [innerHTML]="(data?.totalDR
                | formatvalue : view.formModel : 'totalDR' : totalDR
                | async)+ ' ' +data?.currencyID"></span>
        <span *ngIf="data?.totalDR == 0" class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase">{{'0 ' +
          data?.currencyID}}</span>
      </div>
    </div>
    <div class="d-flex justify-content-between">
      <div class="d-flex align-items-center">
        <ejs-tooltip *ngIf="data?.memo" id='tooltip' target="#tipmemo">
          <span id="tipmemo" class="text-gray-600 line-clamp line-clamp-1 me-3">{{data?.memo}}</span>
          <ng-template #content>
            <span id="tipmemo">{{data?.memo}}</span>
          </ng-template>
        </ejs-tooltip>
        <span *ngIf="(data?.memo == '' || data?.memo == null) && view?.gridViewSetup" class="place-holder text-gray-600 line-clamp line-clamp-1 me-3">{{view?.gridViewSetup['Memo'].headerText}}</span>
      </div>
    </div>
    <div style="height: 18px !important;" class="d-flex justify-content-between">
      <div class="d-flex align-items-center">
        <span *ngIf="data?.objectID" class="text-gray-600 line-clamp line-clamp-1" [innerHTML]="
          data?.objectID | tranformSubobject : view.formModel
        "></span>
        <span *ngIf="(data?.objectID == '' || data?.objectID == null) && view?.gridViewSetup" class="place-holder text-gray-600 line-clamp line-clamp-1">{{view?.gridViewSetup['ObjectID'].headerText}}</span>
      </div>
    </div>
    <div style="height: 35px !important;" class="d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-end codx-badge">
        <codx-vll [formModel]="view.formModel" [field]="'Status'" [value]="data?.status" [showText]="true"
          [showBgColor]="true" class="badge badge-light badge-sm border-0 me-2">
        </codx-vll>
        <div class="d-flex align-items-center">
          <img style="width: 18px;height: 18px;margin-top: -1px;" src="../assets/themes/ac/default/img/calendar.svg"
            class=" me-2" />
          <span #voucherDate [innerHTML]="
    data?.voucherDate
          | formatvalue : view.formModel : 'voucherDate' : voucherDate
          | async
      " class="text-gray-600"></span>
        </div>
      </div>
      <div class="d-flex mt-1">
        <codx-imgs [isToolTip]="true" [objectId]="data?.createdBy" [objectName]="data?.createdBy"
          [objectType]="'AD_Users'" [width]="25" [numberImages]="1">
        </codx-imgs>
      </div>
    </div>
  </div>
</ng-template>
<!-- template listdetail -->

<!-- template list -->
<ng-template #listTemplate let-data>
  <codx-temp-full [titleTmp]="listtitleTmp" cardCss="card-template border-bottom p-3" [formModel]="view.formModel"
    [modeImgs]="true" [titleLine]="2" [dataItem]="data" [hideMF]="false" [typeMF]="'hover'"
    (changeDataMF)="changeMFDetail($event, data)" (clickMF)="clickMoreFunction($event, data)">
  </codx-temp-full>
</ng-template>
<ng-template #listtitleTmp let-data>
  <ejs-tooltip position="BottomRight" id='tooltip' target="#tipsub">
    <!-- <div id="tipsub" [style]="'background-color:' + (data?.subType | vll : 'AC100' : 'color' | async)" -->
    <div id="tipsub" style="background-color: var(--primary-dark)"
      class="w-30px symbol h-30px fs-6 d-flex justify-content-center align-items-center rounded-circle me-3">
      <!-- <i style="font-size: 16px !important;" class="text-white"
        [class]="data?.subType | vll : 'AC100' : 'text' | async"></i> -->
      <i style="font-size: 16px !important;" class="text-white"
        [class]="journal.journalType | vll : 'AC064' : 'icon' | async"></i>
    </div>
    <ng-template #content>
      <span *ngIf="(this.view.funcID == 'ACT0410') || (this.view.funcID == 'ACT0429')">{{data?.subType | vll : 'AC063' :
        'text' | async}}</span>
      <span *ngIf="(this.view.funcID == 'ACT0401') || (this.view.funcID == 'ACT0428')">{{data?.subType | vll : 'AC065' :
        'text' | async}}</span>
    </ng-template>
  </ejs-tooltip>
  <div class="d-flex flex-column text-content flex-grow-1">
    <div class="d-flex justify-content-between">
      <div class="col-4">
        <div class="d-flex align-items-center">
          <span class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase me-3">{{
            data?.voucherNo
            }}</span>
          <img style="width: 18px;height: 18px;" src="../assets/themes/ac/default/img/calendar.svg" class=" me-2" />
          <span class="text-gray-600 line-clamp line-clamp-1 mt-1" #voucherDate [innerHTML]="
        data?.voucherDate
                  | formatvalue : view.formModel : 'voucherDate' : voucherDate
                  | async
              "></span>
        </div>
        <div class="d-flex align-items-center">
          <ejs-tooltip position="BottomCenter" id='tooltip' target="#tipmemo">
            <span id="tipmemo" class="line-clamp line-clamp-2" #memo [innerHTML]="
            data?.memo
              | formatvalue : view.formModel : 'memo' : memo
              | async
          "></span>
            <ng-template #content>
              <span>{{data?.memo}}</span>
            </ng-template>
          </ejs-tooltip>
        </div>
        <div class="d-flex align-items-center">
          <span class="text-gray-600 line-clamp line-clamp-1" #objectID [innerHTML]="
          data?.objectID | tranformSubobject : view.formModel
                "></span>
        </div>
      </div>
      <div class="col-3">
        <div class="d-flex align-items-center">
          <span class="fw-bold text-nowrap me-2">{{'1'| vll : 'AC091' : 'text' | async}}: </span>
          <span class="text-gray-600">{{data?.cashBookID}}</span>
          &nbsp;-&nbsp;
          <span #cashBookID class="text-gray-600"
            [innerHTML]="data?.cashBookID | formatvalue : view.formModel : 'cashBookID' : cashBookID | async"></span>
        </div>
        <div class="d-flex align-items-center">
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="ReasonID" [formModel]="view.formModel">
          </codx-label>
          <span #reasonID class="text-gray-600" [innerHTML]="
          data?.reasonID
                | formatvalue
                  : view.formModel
                  : 'reasonID'
                  : reasonID
                | async
            "></span>
        </div>
        <div class="d-flex align-items-center">
          <span *ngIf="(this.view.funcID == 'ACT0410') || (this.view.funcID == 'ACT0429')" class="fw-bold me-2">Người
            nhận tiền: </span>
          <span *ngIf="(this.view.funcID == 'ACT0401') || (this.view.funcID == 'ACT0428')" class="fw-bold me-2">Người
            gửi tiền: </span>
          <span *ngIf="this.view.funcID == 'ACT0410'" #payee [innerHTML]="
          data?.payee
                | formatvalue : view.formModel : 'payee' : payee
                | async
            " class="text-gray-600"></span>
          <span *ngIf="this.view.funcID == 'ACT0401'" #payor [innerHTML]="
          data?.payor
                | formatvalue : view.formModel : 'payor' : payor
                | async
            " class="text-gray-600"></span>
        </div>
      </div>
      <div class="col-3">
        <div class="d-flex align-items-center">
          <!-- <span *ngIf="!journal.multiCurrency && data?.totalDR != 0"
            class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase" #totalDR [innerHTML]="data?.totalDR
                | formatvalue : view.formModel : 'totalDR' : totalDR
                | async
            "></span> -->
          <span *ngIf="data?.totalDR != 0" class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase" #totalDR
            [innerHTML]="(data?.totalDR
                | formatvalue : view.formModel : 'totalDR' : totalDR
                | async)+ ' ' +data?.currencyID"></span>
          <!-- <span *ngIf="!journal.multiCurrency && data?.totalDR == 0"
            class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase">0</span> -->
          <span *ngIf="data?.totalDR == 0" class="fw-bold line-clamp line-clamp-1 fs-6 text-uppercase">{{'0 ' +
            data?.currencyID}}</span>
        </div>
        <div class="d-flex align-items-center mb-1">
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="refDocs" [formModel]="view.formModel">
          </codx-label>
          <span #refDocs class="text-gray-600" [innerHTML]="
              itemSelected?.refDocs
                | formatvalue : view.formModel : 'refDocs' : refDocs
                | async
            "></span>
        </div>
        <div class="d-flex align-items-center">
          <codx-vll [name]="'AC040'" [formModel]="view.formModel" [field]="'Status'" [value]="data?.status"
            [showText]="true" [showBgColor]="true" class="badge badge-light badge-sm border-0">
          </codx-vll>
        </div>

      </div>
      <div class="col-1">
        <div class="d-flex align-items-center">
          <codx-imgs [isToolTip]="true" [objectId]="data?.createdBy" [objectName]="data?.createdBy"
            [objectType]="'AD_Users'" [width]="30" [numberImages]="1">
          </codx-imgs>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!-- template list -->