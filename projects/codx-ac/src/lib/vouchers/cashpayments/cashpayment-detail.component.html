<codx-detail-tmp [header]="TmpHeaderDetail" [body]="TmpBodyDetail" [hideMF]="false" [formModel]="formModel"
    [dataItem]="itemSelected" (changeDataMF)="changeMFDetail($event, itemSelected)" [footer]="TmpFooterDetail"
    (clickMF)="clickMoreFunction($event, itemSelected)">
</codx-detail-tmp>
<ng-template #TmpHeaderDetail>
    <ng-container *ngIf="itemSelected">
        <div style="position: relative;z-index: 1000;width: 50%;" class="d-flex align-items-center ac-cashID mt-n8 mb-2">
            <ejs-tooltip id='tooltip' target="#tipsub" position='BottomRight'>
                <div id="tipsub" style="background-color: var(--primary-dark)"
                    class="w-25px symbol h-25px fs-6 d-flex justify-content-center align-items-center rounded-circle me-3">
                    <i style="font-size: 16px !important;" class="text-white"
                        [class]="itemSelected?.journalType | vll : 'AC064' : 'icon' | async"></i>
                </div>
                <ng-template #content>
                    <span>{{itemSelected?.subType | vll : 'AC063' : 'text' | async}}</span>
                </ng-template>
            </ejs-tooltip>
            <span *ngIf="itemSelected?.voucherNo" class="fw-bold line-clamp line-clamp-1 mt-1 fs-5-sm text-uppercase me-5">
                {{ itemSelected?.voucherNo }}
            </span>
            <span *ngIf="(itemSelected?.voucherNo == '' || itemSelected?.voucherNo == null) && gridViewSetup" class="place-holder fw-bold line-clamp line-clamp-1 mt-1 fs-5-sm text-uppercase me-5">
              {{ gridViewSetup['VoucherNo'].headerText }}
          </span>
            <div class="d-flex align-items-center me-3">
                <img style="width: 18px;height: 18px;" class="me-2" src="../assets/themes/ac/default/img/calendar.svg">
                <codx-label class="fw-bold label-colon mt-1" default="Ngày chứng từ" [formModel]="formModel">
                </codx-label>
                <span #voucherDate [innerHTML]="
                  itemSelected?.voucherDate
                        | formatvalue : formModel : 'voucherDate' : voucherDate
                        | async
                    " class="text-gray-600 mt-1"></span>
            </div>
            <div class="d-flex">
            </div>
        </div>
        <div class="d-flex justify-content-between flex-grow-1 mb-2">
            <div style="height: 27px !important;" class="d-flex align-items-center">
              <span *ngIf="itemSelected?.objectName" class="fw-bold line-clamp line-clamp-1 fs-5 text-uppercase me-5 mt-1" >{{itemSelected?.objectName}}</span>
              <span *ngIf="(itemSelected?.objectName == '' || itemSelected?.objectName == null) && gridViewSetup" class="place-holder line-clamp line-clamp-1 fs-5 text-uppercase me-5 mt-1" >{{gridViewSetup['ObjectID'].headerText}}</span>
            </div>
            <div class="d-flex align-self-center">
                <span class="badge badge-pill badge-primary me-3">
                    <span *ngIf="itemSelected?.totalDR != 0" class="fw-bold" #totalDR [innerHTML]="(itemSelected?.totalDR
                    | formatvalue : formModel : 'totalDR' : totalDR
                    | async)+ ' ' +itemSelected?.currencyID"></span>
                    <span *ngIf="itemSelected?.totalDR == 0" class="fw-bold">{{'0 '+
                        itemSelected?.currencyID}}</span>
                </span>
            </div>
        </div>
    </ng-container>
</ng-template>
<ng-template #TmpBodyDetail>
    <ng-container *ngIf="itemSelected">
        <div class="d-flex justify-content-between flex-grow-1 mb-1">
          <div class="d-flex align-items-center">
            <!-- Người nhận tiền (phiếu chi)   -->
            <codx-label *ngIf="(formModel.funcID == 'ACT0410')" class="fw-bold label-colon text-nowrap" fiedName="Payee" [formModel]="formModel">
            </codx-label>
            <span *ngIf="formModel.funcID == 'ACT0410' && itemSelected?.payName" class="text-gray-600">{{itemSelected?.payName}}</span>
            <span *ngIf="formModel.funcID == 'ACT0410' && (itemSelected?.payName == '' || itemSelected?.payName == null) && gridViewSetup" class="place-holder text-gray-600">{{gridViewSetup['Payee'].headerText}}</span>
            <!-- Người nhận tiền (phiếu chi)   -->
    
            <!-- Tài khoản chi (ủy nhiệm chi chi)   -->
            <codx-label *ngIf="(formModel.funcID == 'ACT0429')" class="fw-bold label-colon text-nowrap" fiedName="lblBankAccountPay"
                [formModel]="formModel" default="Tài khoản chi">
            </codx-label>
            <span *ngIf="(formModel.funcID == 'ACT0429' && itemSelected?.bankPayname)" class="text-gray-600">{{itemSelected?.bankPayname}}</span>
            <span *ngIf="(formModel.funcID == 'ACT0429' && (itemSelected?.bankPayname == '' || itemSelected?.bankPayname == null) && gridViewSetup)" class="place-holder text-gray-600">{{gridViewSetup['CashBookID'].headerText}}</span>
            <!-- Người nhận tiền (phiếu chi)   -->
          </div>
          <div class="d-flex align-self-center">
            <codx-vll [formModel]="formModel" [field]="'Status'" [value]="itemSelected?.status" [showText]="true"
              [showBgColor]="true" class="badge badge-light badge-sm">
            </codx-vll>
          </div>
        </div>
        <div class="d-flex align-items-top mb-1">
           <!-- Sổ quỹ-->
          <codx-label *ngIf="formModel.funcID == 'ACT0410'" class="fw-bold label-colon text-nowrap" fiedName="lblCashBook"
            [formModel]="formModel" default="Sổ quỹ">
          </codx-label>
          <span *ngIf="(formModel.funcID == 'ACT0410' && itemSelected?.cashBookName)" class="text-gray-600">{{itemSelected?.cashBookName}}</span>
          <span *ngIf="(formModel.funcID == 'ACT0410' && (itemSelected?.cashBookName == '' || itemSelected?.cashBookName == null) && gridViewSetup)" class="place-holder text-gray-600">{{gridViewSetup['CashBookID'].headerText}}</span>
          <!-- Sổ quỹ -->
    
          <!-- Tài khoản nhận (ủy nhiệm chi) -->
          <codx-label *ngIf="(formModel.funcID == 'ACT0429')" class="fw-bold label-colon text-nowrap" fiedName="lblCashBook"
            [formModel]="formModel" default="Tài khoản nhận">
          </codx-label>
          <span *ngIf="(formModel.funcID == 'ACT0429' && itemSelected?.bankReceiveName)" class="text-gray-600">{{itemSelected?.bankReceiveName}}</span>
          <span *ngIf="(formModel.funcID == 'ACT0429' && (itemSelected?.bankReceiveName == '' || itemSelected?.bankReceiveName == null) && gridViewSetup)" class="text-gray-600">{{gridViewSetup['BankAcctID'].headerText}}</span>
          <!-- Tài khoản nhận (ủy nhiệm chi)-->
        </div>
        <div class="d-flex align-items-top mb-1">
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="ReasonID" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.reasonName" class="text-gray-600">{{itemSelected?.reasonName}}</span>
          <span *ngIf="(itemSelected?.reasonName == '' || itemSelected?.reasonName == null) && gridViewSetup" class="place-holder text-gray-600">{{gridViewSetup['ReasonID'].headerText}}</span>
        </div>
        <div class="d-flex align-items-top mb-1">
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="Memo" [formModel]="formModel">
          </codx-label>
          <ejs-tooltip *ngIf="itemSelected?.memo" id='tooltip' target="#tipmemo">
            <span id="tipmemo" class="text-gray-600 line-clamp line-clamp-1 me-3">{{itemSelected?.memo}}</span>
            <ng-template #content>
              <span id="tipmemo">{{itemSelected?.memo}}</span>
            </ng-template>
          </ejs-tooltip>
          <span *ngIf="(itemSelected?.memo == '' || itemSelected?.memo == null) && gridViewSetup" class="place-holder text-gray-600 line-clamp line-clamp-1 me-3">{{gridViewSetup['Memo'].headerText}}</span>
        </div>
        <div class="d-flex align-items-top mb-1">
          <codx-label class="fw-bold label-colon text-nowrap" fiedName="refDocs" [formModel]="formModel">
          </codx-label>
          <span *ngIf="itemSelected?.refDocs" class="text-gray-600">{{itemSelected?.refDocs}}</span>
          <span *ngIf="(itemSelected?.refDocs == '' || itemSelected?.refDocs == null) && gridViewSetup" class="place-holder text-gray-600">{{gridViewSetup['RefDocs'].headerText}}</span>
        </div>
        <div class="card-add mt-1" #cardbodyRef>
            <ejs-tab #elementTabDetail (created)="createTab($event, elementTabDetail)">
              <e-tabitems>
                <!--Start tab hạch toán -->
                <e-tabitem>
                  <ng-template #headerText>
                    <div class="d-flex align-items-top me-2 mt-2">
                      <i class="icon-i-file-earmark-spreadsheet icon-16 me-2"></i>
                      <codx-label class="fw-bold fs-6" fiedName="lblDetail1" [formModel]="formModel"
                        default="Hạch toán"></codx-label>
                    </div>
                  </ng-template>
                  <ng-template #content>
                    <ng-container *ngTemplateOutlet="tabAcctTrans"></ng-container>
                  </ng-template>
                </e-tabitem>
                <!--End tab hạch toán -->
      
                <!--Start tab Thông tin hóa đơn -->
                <e-tabitem>
                  <ng-template #headerText>
                    <div class="d-flex align-items-top me-2 mt-2">
                      <i class="icon-format_list_bulleted icon-16 me-2"></i>
                      <codx-label class="fw-bold fs-6" fiedName="lblDetail2" [formModel]="formModel"
                        default="Thông tin hóa đơn"></codx-label>
                    </div>
                  </ng-template>
                  <ng-template #content>
                    <ng-container *ngTemplateOutlet="tabSettledInvoices"></ng-container>
                  </ng-template>
                </e-tabitem>
                <!--End tab Thông tin hóa đơn -->
      
                <!--Start tab Hóa đơn GTGT -->
                <e-tabitem>
                  <ng-template #headerText>
                    <div class="d-flex align-items-top me-2 mt-2">
                      <i class="icon-i-graph-up icon-16 me-2"></i>
                      <codx-label class="fw-bold fs-6" fiedName="lblDetail3" [formModel]="formModel"
                        default="Hóa đơn GTGT"></codx-label>
                    </div>
                  </ng-template>
                  <ng-template #content>
                    <ng-container *ngTemplateOutlet="tabVatInvoices"></ng-container>
                  </ng-template>
                </e-tabitem>
                <!-- Tab Hóa đơn GTGT -->
              </e-tabitems>
            </ejs-tab>
          </div>
      </ng-container>
</ng-template>
<ng-template #TmpFooterDetail let-data>
    <ng-container *ngIf="itemSelected">
        <codx-tabs [entityName]="formModel.entityName" [formModel]="formModel" [objectID]="itemSelected?.recID"
            [funcID]="formModel.funcID" [TabControl]="tabInfo"></codx-tabs>
    </ng-container>
</ng-template>
<ng-template #tabAcctTrans>
    <ng-container *ngIf="itemSelected?.listAcctrants">
        <div class="table-responsive table-ac">
          <table style="table-layout: fixed;" class="table mb-0">
            <thead class="border-gray-200 table-thead-ac">
              <tr class="border-bottom">
                <th class="w-40 border-bottom">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblAccountName" default="Tài khoản">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID == baseCurr" class="w-15 border-bottom">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblAccountID" default="Nợ">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15 border-bottom">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblAccountID" default="Nợ, HT">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID == baseCurr" class="w-15 border-bottom">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblOffSetAccID" default="Có">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15 border-bottom">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblOffSetAccID" default="Có, HT">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15 border-bottom">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblDR2" default="Số tiền, NT">
                    </codx-label>
                  </div>
                </th>
                <th class="w-30 border-bottom">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblNote" default="Ghi chú">
                    </codx-label>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let item of itemSelected?.listAcctrants;trackBy: trackByFn">
                <tr [style]="item | tranformClassBorder : itemSelected?.listAcctrants">
                  <td class="text-center">
                    <div class="d-flex justify-content-start ps-3">
                      <div class="w-100px min-w-100px">
                        <div class="d-flex align-items-center justify-content-start">
                          <ng-container *ngIf="(item.accountID != null && item.accountID != '')">
                            <div class="d-flex align-items-center justify-content-start">
                              <span *ngIf="!item.crediting" class="fs-6 fw-bold">N&nbsp;&nbsp;{{item.accountID}}</span>
                              <span *ngIf="item.crediting" class="fw-bold fs-6 ms-5">C&nbsp;&nbsp;{{item.accountID}}</span>
                            </div>
                          </ng-container>
                        </div>
                      </div>
                      <div class="align-items-center w-100">
                        <div *ngIf="(item.accountID != null && item.accountID != '')"
                          class="d-flex align-items-center justify-content-start">
                          <ng-container>
                            <span style="text-align: left !important;" #accountID class="fw-bold line-clamp line-clamp-1">{{item.accountName}}</span>
                          </ng-container>
                        </div>
                        <div *ngIf="(item.objectName!= null && item.objectName != '')"
                          class="d-flex align-items-center justify-content-start">
                          <ng-container>
                            <codx-label *ngIf="itemSelected?.subType == '1' || itemSelected?.subType == '2'"
                              style="white-space: nowrap" class="fs-7 fw-bold" default="Nhà cung cấp">
                            </codx-label>
                            <codx-label *ngIf="itemSelected?.subType == '3' || itemSelected?.subType == '4'"
                              style="white-space: nowrap" class="fs-7 fw-bold" default="Nhân viên">
                            </codx-label>
                            <codx-label *ngIf="itemSelected?.subType == '9'" style="white-space: nowrap"
                              class="fs-7 fw-bold" default="Đối tượng">
                            </codx-label>
                            :&nbsp;
                            <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                              {{item.objectName}}
                            </span>
                          </ng-container>
                        </div>
                        <div *ngIf="(item.diM3 != null && item.diM3 != '')"
                          class="d-flex align-items-center justify-content-start">
                          <ng-container>
                            <codx-label style="white-space: nowrap" class="fs-7 fw-bold label-colon" fiedName="lblDIM3"
                              default="Mục phí">
                            </codx-label>
                            :&nbsp;
                            <span class="fs-7 text-gray-700">{{item.diM3}}</span>
                            &nbsp;-&nbsp;
                            <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                              :&nbsp;{{item.costItemName}}
                            </span>
                          </ng-container>
                        </div>
                        <div *ngIf="(item.diM2 != null && item.diM2 != '')"
                          class="d-flex align-items-center justify-content-start">
                          <ng-container>
                            <codx-label style="white-space: nowrap" class="fw-bold fs-7" fiedName="lblDIM2" default="TTCP">
                            </codx-label>
                            :&nbsp;
                            <span class="fs-7 text-gray-700">{{item.diM2}}</span>
                            &nbsp;-&nbsp;
                            <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                              {{item.costCenterName}}
                            </span>
                          </ng-container>
                        </div>
                        <div *ngIf="(item.diM1 != null && item.diM1 != '')"
                          class="d-flex align-items-center justify-content-start">
                          <ng-container>
                            <codx-label style="white-space: nowrap" class="fs-7 fw-bold" fiedName="lblDIM1"
                              default="Phòng ban">
                            </codx-label>
                            :&nbsp;
                            <span class="fs-7 text-gray-700">{{item.diM1}}</span>
                            &nbsp;-&nbsp;
                            <span class="fs-7 text-gray-700 line-clamp line-clamp-1">
                              {{item.departmentName}}
                            </span>
                          </ng-container>
                        </div>
                        <div *ngIf="(item.projectID != null && item.projectID != '')"
                          class="d-flex align-items-center justify-content-start">
                          <ng-container>
                            <codx-label style="white-space: nowrap" class="fs-7 fw-bold" fiedName="lblProjectID"
                              default="Dự án">
                            </codx-label>
                            :&nbsp;
                            <span style="white-space: nowrap" class="fs-7 text-gray-700">{{item.projectID}}</span>
                            &nbsp;-&nbsp;
                            <span #projectID class="fs-7 text-gray-700 line-clamp line-clamp-1" [innerHTML]="
                              item.projectID
                                | formatvalue
                                  : fmCashPaymentsLines
                                  : 'projectID'
                                  : projectID
                                | async
                            "></span>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                  </td>
                  <td class="text-center">
                    <div *ngIf="!item.crediting" class="d-flex align-items-center justify-content-end ps-3">
                      <ng-container *ngIf="baseCurr && itemSelected?.currencyID == baseCurr">
                        <span class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="item?.transAmt
                          | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                      </ng-container>
                      <ng-container *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
                        <span class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="item?.transAmt2
                          | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                      </ng-container>
                    </div>
                  </td>
                  <td class="text-center">
                    <div *ngIf="item.crediting" class="d-flex align-items-center justify-content-end ps-3">
                      <ng-container *ngIf="baseCurr && itemSelected?.currencyID == baseCurr">
                        <span class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="item?.transAmt
                          | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                      </ng-container>
                      <ng-container *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
                        <span class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="item?.transAmt2
                          | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                      </ng-container>
                    </div>
                  </td>
                  <td *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="text-center">
                    <div class="d-flex align-items-center justify-content-end ps-3">
                      <span class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="item?.transAmt
                          | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                    </div>
                  </td>
                  <td>
                    <ejs-tooltip position="BottomLeft" id='tooltip' target="#tipmemo">
                      <div id="tipmemo" *ngIf="item.memo != null && item.memo != ''" class="d-flex flex-wrap">
                        <div class="d-flex align-items-center mb-1 ps-3">
                          <span class="line-clamp line-clamp-1 text-gray-600 fs-7">{{ item.memo }}</span>
                        </div>
                      </div>
                      <ng-template #content>
                        <span>{{ item.memo }}</span>
                      </ng-template>
                    </ejs-tooltip>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
          <div *ngIf="itemSelected?.listAcctrants && itemSelected?.listAcctrants.length == 0" class="ac-empty">
            <div style="padding-top: 0px !important;" class="list-empty card card-flush h-100">
              <div class="d-flex flex-column flex-center justify-content-center">
                <img src="../assets/themes/sys/default/img/DataEmpty.svg" class="w-150px" />
                <div class="fs-6 text-dark mt-2 text-center">
                  {{ "SYS011" | mssg | async }}
                </div>
              </div>
            </div>
          </div>
        </div>
        <table style="table-layout: fixed;" class="table mb-0">
          <tfoot class="table-footer-ac">
            <td class="w-40"></td>
            <td class="w-15">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="totalAcctDR
                        | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                <span *ngIf="itemSelected?.listAcctrants.length == 0" class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-15">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="totalAcctCR
                        | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                <span *ngIf="itemSelected?.listAcctrants.length == 0" class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="w-15">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listAcctrants.length > 0" class="fw-bold line-clamp line-clamp-1" #transAmt [innerHTML]="totalTransAmt
                        | formatvalue : fmAcctTrans : 'transAmt' : transAmt | async"></span>
                <span *ngIf="itemSelected?.listAcctrants.length == 0" class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-15"></td>
            <td class="w-15"></td>
          </tfoot>
        </table>
      </ng-container>
</ng-template>
<ng-template #tabSettledInvoices>
    <ng-container *ngIf="itemSelected?.listSettledInvoices">
        <div class="table-responsive table-ac">
          <table style="table-layout: fixed;" class="table mb-0">
            <thead class="border-gray-200 table-thead-ac">
              <tr class="border-bottom">
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblInvoiceNo" default="Số hóa đơn">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-30">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblInvoiceDate" default="Ngày hóa đơn">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-30">
                  <div class="d-flex ps-3 align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblDueDate" default="Hạn thanh toán">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblBalanceAmt" default="Số dư">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblBalanceAmt2" default="Số dư, HT">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-30">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblSettledAmt" default="Thanh toán">
                    </codx-label>
                  </div>
                </th>
                <th *ngIf="baseCurr && itemSelected?.currencyID != baseCurr" class="border-bottom w-30">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblSettledAmt2" default="Thanh toán, HT">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-30">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblNote" default="Ghi chú">
                    </codx-label>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody class="border-bottom">
              <tr *ngFor="let item of itemSelected?.listSettledInvoices;trackBy: trackByFn">
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.invoiceNo != null && item.invoiceNo != '')">
                      <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceNo}}</span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.invoiceDate != null && item.invoiceDate != '')">
                      <span #invoiceDate [innerHTML]="
                        item?.invoiceDate
                  | formatvalue : fmSettledInvoices : 'invoiceDate' : invoiceDate
                  | async
              " class="text-gray-600"></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.dueDate != null && item.dueDate != '')">
                      <span #dueDate [innerHTML]="
                        item?.dueDate | formatvalue : fmSettledInvoices : 'dueDate' : dueDate | async"
                        class="text-gray-600"></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span *ngIf="(item?.balAmt > 0)" class="fw-bold line-clamp line-clamp-1" #balAmt [innerHTML]="item?.balAmt
                          | formatvalue : fmSettledInvoices : 'balAmt' : balAmt | async"></span>
                    <span *ngIf="(item?.balAmt == 0)" class="fw-bold line-clamp line-clamp-1">0</span>
                  </div>
                </td>
                <td *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span *ngIf="(item?.balAmt2 > 0)" class="fw-bold line-clamp line-clamp-1" #balAmt2 [innerHTML]="item?.balAmt2
                          | formatvalue : fmSettledInvoices : 'balAmt2' : balAmt2 | async"></span>
                    <span *ngIf="(item?.balAmt2 == 0)" class="fw-bold line-clamp line-clamp-1">0</span>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span *ngIf="(item?.settledAmt > 0)" class="fw-bold line-clamp line-clamp-1" #settledAmt [innerHTML]="item?.settledAmt
                          | formatvalue : fmSettledInvoices : 'settledAmt' : settledAmt | async"></span>
                    <span *ngIf="(item?.settledAmt == 0)" class="fw-bold line-clamp line-clamp-1">0</span>
                  </div>
                </td>
                <td *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span *ngIf="(item?.settledAmt2 > 0)" class="fw-bold line-clamp line-clamp-1" #settledAmt2 [innerHTML]="item?.settledAmt2
                          | formatvalue : fmSettledInvoices : 'settledAmt2' : settledAmt2 | async"></span>
                    <span *ngIf="(item?.settledAmt2 == 0)" class="fw-bold line-clamp line-clamp-1">0</span>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.note != null && item.note != '')">
                      <span [ngbTooltip]="popnote" class="fw-bold line-clamp line-clamp-1">{{item.note}}</span>
                      <ng-template #popnote>
                        <span class="fw-bold">{{item.note}}</span>
                      </ng-template>
                    </ng-container>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="itemSelected?.listSettledInvoices.length == 0" class="ac-empty">
            <div style="padding-top: 0px !important;" class="list-empty card card-flush h-100">
              <div class="d-flex flex-column flex-center justify-content-center">
                <img src="../assets/themes/sys/default/img/DataEmpty.svg" class="w-150px" />
                <div class="fs-6 text-dark mt-2 text-center">
                  {{ "SYS011" | mssg | async }}
                </div>
              </div>
            </div>
          </div>
        </div>
        <table style="table-layout: fixed;" class="table mb-0">
          <tfoot class="table-footer-ac">
            <td class="w-20"></td>
            <td class="w-30"></td>
            <td class="w-30"></td>
            <td class="w-20">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listSettledInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #balAmt [innerHTML]="totalbalAmt
                      | formatvalue : fmSettledInvoices : 'balAmt' : balAmt | async"></span>
                <span *ngIf="itemSelected?.listSettledInvoices.length == 0 || totalbalAmt == 0"
                  class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-20" *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listSettledInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #balAmt2 [innerHTML]="totalbalAmt2
                      | formatvalue : fmSettledInvoices : 'balAmt2' : balAmt2 | async"></span>
                <span *ngIf="itemSelected?.listSettledInvoices.length == 0 || totalbalAmt2 == 0"
                  class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-30">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listSettledInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #settledAmt [innerHTML]="totalsettledAmt
                      | formatvalue : fmSettledInvoices : 'settledAmt' : settledAmt | async"></span>
                <span *ngIf="itemSelected?.listSettledInvoices.length == 0 || totalsettledAmt == 0"
                  class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-30" *ngIf="baseCurr && itemSelected?.currencyID != baseCurr">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listSettledInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #settledAmt2 [innerHTML]="totalsettledAmt2
                      | formatvalue : fmSettledInvoices : 'settledAmt2' : settledAmt2 | async"></span>
                <span *ngIf="itemSelected?.listSettledInvoices.length == 0 || totalsettledAmt2 == 0"
                  class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-30"></td>
          </tfoot>
        </table>
      </ng-container>
</ng-template>
<ng-template #tabVatInvoices>
    <ng-container *ngIf="itemSelected?.listVATInvoices">
        <div class="table-responsive table-ac">
          <table style="table-layout: fixed;" class="table mb-0">
            <thead class="border-gray-200 table-thead-ac">
              <tr class="border-bottom">
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblInvoiceNo" [formModel]="view.formModel" default="Mẫu số">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblInvoiceDate" [formModel]="view.formModel" default="Ký hiệu">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblDueDate" [formModel]="view.formModel" default="Số hóa đơn">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblBalanceAmt" default="Ngày hóa đơn">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-30">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblSettledAmt" default="Đối tượng">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblNote" default="Số tiền">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-40">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblNote" default="Thuế suất">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-20">
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <codx-label class="fw-bold" fiedName="lblNote" default="Tiền thuế">
                    </codx-label>
                  </div>
                </th>
                <th class="border-bottom w-40">
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <codx-label class="fw-bold" fiedName="lblNote" default="Ghi chú">
                    </codx-label>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody class="border-bottom">
              <tr *ngFor="let item of itemSelected?.listVATInvoices;trackBy: trackByFn">
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.invoiceForm != null && item.invoiceForm != '')">
                      <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceForm}}</span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.invoiceSeri != null && item.invoiceSeri != '')">
                      <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceSeri}}</span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.invoiceNo != null && item.invoiceNo != '')">
                      <span class="fw-bold line-clamp line-clamp-1">{{item.invoiceNo}}</span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.invoiceDate != null && item.invoiceDate != '')">
                      <span #invoiceDate [innerHTML]="
                          item?.invoiceDate
                    | formatvalue : fmVatInvoices : 'invoiceDate' : invoiceDate | async
                " class="text-gray-600"></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.objectID != null && item.objectID != '')">
                      <span #objectID [innerHTML]="
                          item?.objectID | formatvalue : fmVatInvoices : 'objectID' : objectID | async"
                        class="text-gray-600"></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span *ngIf="(item?.vatBase > 0)" class="fw-bold line-clamp line-clamp-1" #vatBase [innerHTML]="item?.vatBase
                        | formatvalue : fmVatInvoices : 'vatBase' : vatBase | async"></span>
                    <span *ngIf="(item?.vatBase == 0)" class="fw-bold line-clamp line-clamp-1">0</span>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.vatid != null && item.vatid != '')">
                      <span #vatid [innerHTML]="
                          item?.vatid | formatvalue : fmVatInvoices : 'vatid' : vatid | async"
                        class="text-gray-600"></span>
                    </ng-container>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-end ps-3">
                    <span *ngIf="(item?.vatAmt > 0)" class="fw-bold line-clamp line-clamp-1" #vatAmt [innerHTML]="item?.vatAmt
                        | formatvalue : fmVatInvoices : 'vatAmt' : vatAmt | async"></span>
                    <span *ngIf="(item?.vatAmt == 0)" class="fw-bold line-clamp line-clamp-1">0</span>
                  </div>
                </td>
                <td>
                  <div class="d-flex align-items-center justify-content-start ps-3">
                    <ng-container *ngIf="(item.note != null && item.note != '')">
                      <span class="fw-bold line-clamp line-clamp-1">{{item.note}}</span>
                    </ng-container>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="itemSelected?.listVATInvoices.length == 0" class="ac-empty">
            <div style="padding-top: 0px !important;" class="list-empty card card-flush h-100">
              <div class="d-flex flex-column flex-center justify-content-center">
                <img src="../assets/themes/sys/default/img/DataEmpty.svg" class="w-150px" />
                <div class="fs-6 text-dark mt-2 text-center">
                  {{ "SYS011" | mssg | async }}
                </div>
              </div>
            </div>
          </div>
        </div>
        <table style="table-layout: fixed;" class="table mb-0">
          <tfoot class="table-footer-ac">
            <td class="w-20"></td>
            <td class="w-20"></td>
            <td class="w-20"></td>
            <td class="w-20"></td>
            <td class="w-30"></td>
            <td class="w-20">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listVATInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #vatBase [innerHTML]="totalVatBase
                        | formatvalue : fmVatInvoices : 'vatBase' : vatBase | async"></span>
                <span *ngIf="itemSelected?.listVATInvoices.length == 0" class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-40"></td>
            <td class="w-20">
              <div class="d-flex align-items-center justify-content-end ps-3 h-30px">
                <span *ngIf="itemSelected?.listVATInvoices.length > 0" class="fw-bold line-clamp line-clamp-1" #vatAmt [innerHTML]="totalVatAtm
                        | formatvalue : fmVatInvoices : 'vatAmt' : vatAmt | async"></span>
                <span *ngIf="itemSelected?.listVATInvoices.length == 0" class="fw-bold line-clamp line-clamp-1">0</span>
              </div>
            </td>
            <td class="w-40"></td>
          </tfoot>
        </table>
      </ng-container>
</ng-template>