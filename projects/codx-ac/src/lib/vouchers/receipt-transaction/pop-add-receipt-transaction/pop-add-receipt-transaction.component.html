<codx-form
  #form
  [subHeader]="subHeader"
  [body]="body"
  [footer]="footer"
  [formModel]="dialog.formModel"
  [dialog]="dialog"
  [data]="vouchers"
  [customToolbar]="subToolbar"
  [openMore]="false"
  class="ac-dialog ac-animation-slideRight"
>
</codx-form>
<!-- Start: Sub header -->
<ng-template #subHeader>
  <ng-container *ngIf="form?.formGroup"> </ng-container>
</ng-template>
<!-- End: Sub header -->

<!-- Start: Body -->
<ng-template #body>
  <div class="card-add">
    <ejs-tab>
      <e-tabitems>
        <!-- Tab thông tin chứng từ -->
        <e-tabitem>
          <ng-template #headerText>
            <div class="d-flex align-items-top me-2 mt-3">
              <i class="icon-info icon-20 me-2"></i>
              <span
                [innerHTML]="'0' | vll : 'AC071' : 'text' | async"
                class="fw-bold fs-5-sm text-uppercase"
              >
              </span>
            </div>
          </ng-template>
          <ng-template #content>
            <ng-container *ngTemplateOutlet="tabBasic"></ng-container>
          </ng-template>
        </e-tabitem>
      </e-tabitems>
    </ejs-tab>
    <ejs-tab #tab>
      <e-tabitems #tabObj *ngIf="modeGrid">
        <!-- Tab chi tiết -->
        <e-tabitem>
          <ng-template #headerText>
            <div class="d-flex align-items-top me-2 mt-3">
              <i class="icon-format_list_numbered icon-20 me-2"></i>
              <span
                [innerHTML]="'1' | vll : 'AC070' : 'text' | async"
                class="fw-bold fs-5-sm text-uppercase"
              >
              </span>
            </div>
          </ng-template>
          <ng-template #content>
            <ng-container *ngTemplateOutlet="tabLine"></ng-container>
          </ng-template>
        </e-tabitem>
      </e-tabitems>
    </ejs-tab>
  </div>
  <div class="row">
    <div class="col-7">
      <div
        *ngIf="form.formGroup"
        id="ac-column-def"
        class="d-flex align-items-center cursor-pointer w-fit ac-refdoc"
      >
        <i class="icon-i-pencil-square w-20px h-20px me-2"></i>
        <codx-input
          style="width: 100%"
          class="fw-bold border-0"
          [Group]="form.formGroup"
          field="memo"
          [formModel]="form.formModel"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>
    </div>
    <!-- <div class="col-5">
      <div class="d-flex align-items-center justify-content-end">
        <div *ngIf="formType != 'edit'" class="ms-2">
          <button
            type="button"
            class="btn btn-md btn-light-primary"
            (click)="onSaveAdd()"
          >
            <div class="d-flex align-items-center">
              <i class="icon-add_to_photos icon-16"></i>
              <codx-label
                class="fw-normal"
                fiedName="lblSave"
                default="Lưu & thêm"
              ></codx-label>
            </div>
          </button>
        </div>
        <div class="ms-2 me-2">
          <button
            type="button"
            class="btn btn-md btn-primary"
            style="min-width: 60px"
            (click)="onSave()"
          >
            <div class="d-flex align-items-center">
              <i class="icon-save_alt icon-16"></i>
              <codx-label
                class="fw-normal"
                fiedName="lblSave"
                default="Lưu"
              ></codx-label>
            </div>
          </button>
        </div>
        <div *ngIf="vouchers?.status == '0'" class="ms-2">
          <button
            type="button"
            class="btn btn-md btn-danger"
            (click)="onDiscard()"
          >
            <div class="d-flex align-items-center">
              <i class="icon-settings_backup_restore icon-18"></i>
              <codx-label
                class="fs-6 fw-normal"
                fiedName="lblDiscard"
                default="Hủy bỏ"
              ></codx-label>
            </div>
          </button>
        </div>
      </div>
    </div> -->
  </div>
</ng-template>
<!-- End: Body -->

<!-- Start: Tab Basic -->
<ng-template #tabBasic>
  <ng-container *ngIf="form?.formGroup">
    <div class="row mt-5">
      <div class="col-7 ac-left">
        <div class="mw-750px">
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <codx-label fiedName="ObjectID" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  field="objectID"
                  [formModel]="form.formModel"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </div>
            <div class="col-3">
              <div class="form-group">
                <codx-label fiedName="Requester" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  field="requester"
                  [formModel]="form.formModel"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </div>
            <div class="col-3">
              <div class="form-group">
                <codx-label fiedName="RequestDate" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  field="requestDate"
                  [formModel]="form.formModel"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <codx-label fiedName="WarehouseID" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  field="warehouseID"
                  [formModel]="form.formModel"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </div>
            <div class="col-3">
              <div class="form-group">
                <codx-label fiedName="ReasonID" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  field="reasonID"
                  [formModel]="form.formModel"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-4">
              <div class="form-group">
                <codx-label fiedName="RefNo" [formModel]="form.formModel">
                </codx-label
                >:&nbsp;
                <span *ngIf="vouchers.refNo">
                  {{ vouchers.refNo }}
                </span>
              </div>
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-4">
              <div class="form-group">
                <div class="form-group">
                  <codx-label
                    fiedName="WarehouseID"
                    [formModel]="form.formModel"
                  >
                  </codx-label>
                  <codx-input
                    [Group]="form.formGroup"
                    field="warehouseID"
                    [formModel]="form.formModel"
                    (valueChange)="valueChange($event)"
                  >
                  </codx-input>
                </div>
              </div>
            </div>
            <div class="col-8">
              <div class="form-group">
                <div class="form-group">
                  <codx-label field="WarehouseName" default="Tên kho">
                  </codx-label>
                  <codx-input
                    type="text"
                    field="warehouseName"
                    [disabled]="true"
                    [crrValue]="vouchers.warehouseName"
                  ></codx-input>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-4">
              <div class="form-group">
                <div class="form-group">
                  <codx-label fiedName="ReasonID" [formModel]="form.formModel">
                  </codx-label>
                  <codx-input
                    [Group]="form.formGroup"
                    field="reasonID"
                    [formModel]="form.formModel"
                    (valueChange)="valueChange($event)"
                  >
                  </codx-input>
                </div>
              </div>
            </div>
            <div class="col-8">
              <div class="form-group">
                <div class="form-group">
                  <codx-label fiedName="ObjectID" [formModel]="form.formModel">
                  </codx-label>
                  <codx-input
                    [Group]="form.formGroup"
                    field="objectID"
                    [formModel]="form.formModel"
                    (valueChange)="valueChange($event)"
                  >
                  </codx-input>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div #noteRef class="form-group">
              <codx-label fiedName="Memo" [formModel]="form.formModel">
              </codx-label>
              <codx-input
                [Group]="form.formGroup"
                field="memo"
                [formModel]="form.formModel"
                (valueChange)="valueChange($event)"
              >
              </codx-input>
            </div>
          </div> -->
        </div>
      </div>
      <div class="col-2 ac-bettween"></div>
      <div class="col-3 ac-right d-flex justify-content-end">
        <div class="d-flex flex-column mw-300px">
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <codx-label fiedName="VoucherDate" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  [formModel]="form.formModel"
                  field="voucherDate"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <codx-label fiedName="VoucherNo" [formModel]="form.formModel">
                </codx-label>
                <codx-input
                  [Group]="form.formGroup"
                  field="voucherNo"
                  [formModel]="form.formModel"
                  (valueChange)="valueChange($event)"
                  [disabled]="journal?.assignRule != '0'"
                >
                </codx-input>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</ng-template>
<!-- End: Tab Basic -->

<!-- Start:VouchersLine -->
<ng-template #tabLine>
  <ng-container *ngIf="modeGrid == '1'">
    <div class="tabline-content position-relative">
      <codx-gridview-v2
        class="tabLine"
        #gridVouchersLine
        [formName]="fmVouchersLines.formName"
        [gridViewName]="fmVouchersLines.gridViewName"
        [entityName]="fmVouchersLines.entityName"
        [templateMore]="morefunction"
        [editSettings]="editSettings"
        predicates="TransID=@0"
        [allowFiltering]="true"
        [allowSorting]="true"
        [dataValues]="form.data.recID"
        [dataSource]="vouchersLines"
        service="IV"
        [autoLoad]="false"
        [autoFitColumns]="false"
        [autoAddRow]="false"
        [showEmptyRecord]="false"
        [showRowNumber]="true"
        [editOnClick]="true"
        (eventAction)="autoAddRow($event)"
        (gridInit)="gridInit($event)"
        (onAddNew)="onAddNew($event)"
        (onEdit)="onEdit($event)"
        (cellChanged)="lineChanged($event)"
      ></codx-gridview-v2>

      <div #btnRef class="btn-addline">
        <button
          id="btnadd"
          type="button"
          class="btn btn-sm btn-light-primary"
          (keydown.enter)="addRow(); $event.preventDefault()"
          (click)="addRow()"
        >
          <i class="icon-playlist_add icon-16"></i>
          <codx-label
            fiedName="lblSaveAndClear"
            default="Thêm dòng"
          ></codx-label>
        </button>
      </div>
    </div>
    <div
      class="row"
      *ngIf="vouchersLines.length == 0"
      style="height: 40px"
    ></div>
  </ng-container>
  <ng-container *ngIf="form?.formGroup && modeGrid == 2 && gridViewSetupLine">
    <div class="table-responsive table-content mt-3">
      <table
        style="table-layout: fixed"
        class="table table-hover table-row-bordered mb-2"
      >
        <thead>
          <tr>
            <th class="w-50px text-center">
              <codx-label
                class="fw-bold"
                fiedName="RowNo"
                [formModel]="fmVouchersLines"
              >
              </codx-label>
            </th>
            <th style="width: 40%">
              <div class="d-flex">
                <i class="icon-i-box icon-16 me-2 icon-add text-gray-700"></i>
                <codx-label
                  [setRequire]="false"
                  class="fw-bold"
                  fiedName="ItemID"
                  [formModel]="fmVouchersLines"
                >
                </codx-label>
              </div>
            </th>
            <th>
              <div class="d-flex">
                <i class="icon-list-check icon-16 me-2"></i>
                <span class="fw-bold">Thông tin mua hàng</span>
              </div>
            </th>
            <th>
              <div class="d-flex">
                <i class="icon-i-graph-up icon-16 me-2"></i>
                <span class="fw-bold">Thông tin phân tích</span>
              </div>
            </th>
            <th style="width: 10px"></th>
          </tr>
        </thead>
        <tbody class="border-bottom" *ngFor="let item of vouchersLines">
          <tr>
            <td class="text-center fw-bold">
              {{ item.rowNo }}
            </td>
            <td>
              <div class="d-flex flex-wrap">
                <div class="d-flex align-items-center me-5 mb-1">
                  <span
                    [ngbTooltip]="item.itemName"
                    class="fw-bold line-clamp line-clamp-2"
                    >{{ item.itemName }}</span
                  >
                </div>
              </div>
              <div style="white-space: nowrap" class="d-flex flex-wrap">
                <ng-container *ngIf="item.idiM0 != null && item.idiM0 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM0"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM0
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM1 != null && item.idiM1 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM1"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM1
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM2 != null && item.idiM2 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM2"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM2
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM3 != null && item.idiM3 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM3"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM3
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM4 != null && item.idiM4 != ''">
                  <codx-label
                    [setRequire]="false"
                    class="text-gray-700 label-colon"
                    fiedName="IDIM4"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  &nbsp;
                  <span
                    #idiM4
                    class="fs-6 fw-bold"
                    [innerHTML]="
                      item.idiM4
                        | formatvalue : fmVouchersLines : 'idiM4' : idiM4
                        | async
                    "
                  ></span>
                </ng-container>
              </div>
              <div style="white-space: nowrap" class="d-flex flex-wrap">
                <ng-container *ngIf="item.idiM5 != null && item.idiM5 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM5"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM5
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM6 != null && item.idiM6 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM6"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM6
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM7 != null && item.idiM7 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM7"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM7
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM8 != null && item.idiM8 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM8"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold"
                    >&nbsp;{{
                      item.idiM8
                    }}&nbsp;&nbsp;&nbsp;&#9679;&nbsp;&nbsp;&nbsp;</span
                  >
                </ng-container>

                <ng-container *ngIf="item.idiM9 != null && item.idiM9 != ''">
                  <codx-label
                    class="text-gray-700 label-colon"
                    fiedName="IDIM9"
                    [formModel]="fmVouchersLines"
                  >
                  </codx-label>
                  <span class="fs-6 fw-bold">&nbsp;{{ item.idiM9 }}</span>
                </ng-container>
              </div>
            </td>
            <td>
              <div
                *ngIf="item.costAmt != null && item.costAmt != ''"
                style="white-space: nowrap"
                class="d-flex align-items-center justify-content-start mt-1"
              >
                <span class="text-gray-700 fs-6">Tiền hàng:</span>
                <span
                  [ngbTooltip]="popContent"
                  class="fs-6 fw-bold line-clamp line-clamp-1"
                  >&nbsp;{{ item.quantity }}{{ item.umid }} x
                  {{ item.costPrice.toLocaleString("it-IT") }} =
                  {{ item.costAmt.toLocaleString("it-IT") }}</span
                >
                <ng-template #popContent>
                  <span
                    #popContent
                    [ngbTooltip]="popContent"
                    class="fs-6 fw-bold"
                    >&nbsp;{{ item.quantity }}{{ item.umid }} x
                    {{ item.costPrice.toLocaleString("it-IT") }} =
                    {{ item.costAmt.toLocaleString("it-IT") }}</span
                  >
                </ng-template>
              </div>
            </td>
            <td>
              <div class="d-flex flex-wrap">
                <ng-container *ngIf="item.diM2 != null && item.diM2 != ''">
                  <div class="d-flex align-items-top">
                    <codx-label
                      class="text-gray-700 label-colon"
                      fiedName="DIM2"
                      [formModel]="fmVouchersLines"
                    >
                    </codx-label>
                    <span
                      #diM2
                      class="fs-6 fw-bold"
                      [innerHTML]="
                        item.diM2
                          | formatvalue : fmVouchersLines : 'diM2' : diM2
                          | async
                      "
                    ></span>
                  </div>
                </ng-container>
                <ng-container *ngIf="item.diM3 != null && item.diM3 != ''">
                  <div class="text-gray-400 mx-1">|</div>
                  <div class="d-flex align-items-top">
                    <codx-label
                      class="text-gray-700 label-colon"
                      fiedName="DIM3"
                      [formModel]="fmVouchersLines"
                    >
                    </codx-label>
                    <span
                      #diM3
                      class="fs-6 fw-bold"
                      [innerHTML]="
                        item.diM3
                          | formatvalue : fmVouchersLines : 'diM3' : diM3
                          | async
                      "
                    ></span>
                  </div>
                </ng-container>
              </div>
              <div class="d-flex flex-wrap mt-1">
                <ng-container *ngIf="item.diM1 != null && item.diM1 != ''">
                  <div class="d-flex align-items-top">
                    <codx-label
                      class="text-gray-700 label-colon"
                      fiedName="DIM1"
                      [formModel]="fmVouchersLines"
                    >
                    </codx-label>
                    <span
                      #diM1
                      class="fs-6 fw-bold"
                      [innerHTML]="
                        item.diM1
                          | formatvalue : fmVouchersLines : 'diM1' : diM1
                          | async
                      "
                    ></span>
                  </div>
                </ng-container>
                <ng-container
                  *ngIf="item.projectID != null && item.projectID != ''"
                >
                  <div class="text-gray-400 mx-1">|</div>
                  <div class="d-flex align-items-top">
                    <codx-label
                      class="text-gray-700 label-colon"
                      fiedName="ProjectID"
                      [formModel]="fmVouchersLines"
                    >
                    </codx-label>
                    <span
                      #projectID
                      class="fs-6 fw-bold"
                      [innerHTML]="
                        item.projectID
                          | formatvalue
                            : fmVouchersLines
                            : 'projectID'
                            : projectID
                          | async
                      "
                    ></span>
                  </div>
                </ng-container>
              </div>
            </td>
            <td>
              <div class="has-action-menu">
                <codx-mfunc
                  [dataItem]="item"
                  [formModel]="form.formModel"
                  (clickMF)="clickMF($event, item)"
                  isBookMark="true"
                  type="view"
                ></codx-mfunc>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <div #btnRef class="btn-addline" style="top: -38px">
        <button
          type="button"
          class="btn btn-sm btn-light-primary"
          (click)="addRow()"
        >
          <i class="icon-playlist_add icon-16"></i>
          <codx-label
            fiedName="lblSaveAndClear"
            default="Thêm dòng"
          ></codx-label>
        </button>
      </div>
    </div>
  </ng-container>
  <div
    *ngIf="modeGrid == 2"
    class="d-flex flex-wrap justify-content-between mt-6"
  >
    <div class="d-flex align-items-center mb-1 bg-light me-5">
      <span
        class="bullet bullet-vertical d-flex align-items-center min-h-25px mh-100 me-2 bg-primary"
      ></span>
      <span class="text-dark fw-bold py-1 px-2"
        >Tổng cộng: {{ total.toLocaleString("it-IT") }}</span
      >
    </div>
  </div>
</ng-template>
<!-- End: VouchersLine -->

<!-- Start: More function -->
<ng-template #morefunction let-data>
  <codx-mfunc
    [dataItem]="data"
    [formModel]="form.formModel"
    (clickMF)="clickMF($event, data)"
    [isBookMark]="true"
    type="view"
  ></codx-mfunc>
</ng-template>
<!-- End: More function -->

<!-- Start: Footer -->
<ng-template #footer>
  <div
    style="display: grid !important"
    ngClass="collape"
    class="codx-detail-footer dialog-footer align-items-center collape"
    *ngIf="vouchers"
  >
    <!-- <div class="btn btn-white btn-icon tab-action">
        <span (click)="expand()" class="icon-unfold_more icon-20"></span>
        
      </div> -->
    <div
      class="d-flex align-items-center justify-content-end btn-ac-footer mt-1"
    >
      <button
        style="border: 1px solid"
        id="discard"
        type="button"
        class="btn btn-md btn-light-danger me-2"
        (click)="onDiscard()"
      >
        <div class="d-flex align-items-center">
          <i class="icon-delete_outline icon-16"></i>
          <codx-label
            class="fw-normal"
            fiedName="lblDiscard"
            default="Hủy bỏ"
          ></codx-label>
        </div>
      </button>
      <button
        style="border: 1px solid var(--primary-dark) !important"
        type="button"
        class="btn btn-md btn-light-primary me-2"
        (click)="onSaveAdd()"
      >
        <div class="d-flex align-items-center">
          <i class="icon-add_to_photos icon-16"></i>
          <codx-label
            class="fw-normal"
            fiedName="lblSaveAndClear"
            default="Lưu & Thêm"
          ></codx-label>
        </div>
      </button>
      <button
        id="save"
        type="button"
        class="btn btn-md btn-primary"
        style="min-width: 60px"
        (click)="onSave()"
      >
        <div class="d-flex align-items-center">
          <i class="icon-save_alt icon-16"></i>
          <codx-label
            class="fw-normal"
            fiedName="lblSave"
            default="Lưu"
          ></codx-label>
        </div>
      </button>
    </div>
    <ng-container *ngTemplateOutlet="tabRef"></ng-container>
  </div>
</ng-template>
<!-- End: Footer -->

<!-- Start: Tab Referen -->
<ng-template #tabRef>
  <codx-tabs
    [entityName]="form.formModel.entityName"
    [formModel]="form.formModel"
    [objectID]="vouchers.recID"
    [funcID]="form.formModel.funcID"
    [TabControl]="tabInfo"
  ></codx-tabs>
</ng-template>
<!-- End: Tab Referen -->

<!-- Start: Sub toolbar -->
<ng-template #subToolbar>
  <div class="w-100">
    <div class="d-flex align-items-center justify-content-between pt-3">
      <div class="d-flex justify-content-start align-items-center me-2">
        <div class="btn btn-icon btn-sm btn-primary btn-circle me-4">
          <i *ngIf="formType == 'add'" class="icon-add_box icon-16"></i>
          <i *ngIf="formType == 'copy'" class="icon-content_copy icon-16"></i>
          <i *ngIf="formType == 'edit'" class="icon-edit_square icon-16"></i>
        </div>
        <div
          class="line-clamp line-clamp-1 me-3 fs-4 fw-bold text-uppercase mt-1"
        >
          {{ headerText }}
        </div>
        <div class="input-circle input-sm" *ngIf="form?.formGroup">
          <span class="me-2">
            <codx-vll
              [name]="'AC040'"
              [formModel]="form.formModel"
              [field]="'Status'"
              [value]="vouchers?.status"
              [showText]="true"
              [showBgColor]="true"
              class="badge badge-light badge-lg lg"
            >
            </codx-vll>
          </span>
        </div>
      </div>
      <div class="d-flex align-items-center me-3">
        <!-- <div class="d-flex align-items-center justify-content-end">
          <div *ngIf="formType != 'edit'" class="ms-2">
            <button
              type="button"
              class="btn btn-md btn-light-primary"
              (click)="onSaveAdd()"
            >
              <div class="d-flex align-items-center">
                <i class="icon-add_to_photos icon-16"></i>
                <codx-label
                  class="fw-normal"
                  fiedName="lblSave"
                  default="Lưu & thêm"
                ></codx-label>
              </div>
            </button>
          </div>
          <div class="ms-2 me-2">
            <button
              type="button"
              class="btn btn-md btn-primary"
              style="min-width: 60px"
              (click)="onSave()"
            >
              <div class="d-flex align-items-center">
                <i class="icon-save_alt icon-16"></i>
                <codx-label
                  class="fw-normal"
                  fiedName="lblSave"
                  default="Lưu"
                ></codx-label>
              </div>
            </button>
          </div>
          <div *ngIf="vouchers?.status == '0'" class="ms-2">
            <button
              type="button"
              class="btn btn-md btn-danger"
              (click)="onDiscard()"
            >
              <div class="d-flex align-items-center">
                <i class="icon-settings_backup_restore icon-18"></i>
                <codx-label
                  class="fs-6 fw-normal"
                  fiedName="lblDiscard"
                  default="Hủy bỏ"
                ></codx-label>
              </div>
            </button>
          </div>
        </div> -->
        <div class="ms-2">
          <div
            class="btn btn-icon btn-light-danger btn-circle bg"
            (click)="onClose()"
          >
            <i class="icon-close icon-18"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!-- End: Sub toolbar -->
