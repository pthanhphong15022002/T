<div class="h-100">
  <div class="card-body my-2 py-2 d-none">
    <div class="container-fluid px-0">
      <div class="d-block" *ngIf="vll86 && vll86.length">
        <ng-container *ngFor="let item of vll86; let i = index">
          <span>
            {{ item.text }}
          </span>
          <span class="mx-2" *ngIf="i < vll86.length - 1">|</span>
        </ng-container>
      </div>
      <div class="d-block" *ngIf="vll85 && vll85.length">
        <ng-container *ngFor="let item of vll85; let i = index">
          <span>
            {{ item.text }}
          </span>
          <span class="ml-1 mr-2 icon icon-arrow_drop_down"></span>
        </ng-container>
      </div>
    </div>
  </div>
  <codx-views
    #view
    idField="RecID"
    [views]="views"
    [button]="button"
    entityName="AC_Journals"
    (buttonClick)="add($event)"
    (onActions)="onChange($event)"
  >
  </codx-views>
</div>

<ng-template #itemTemplate let-data>
  <codx-card-img
    cardCss="dp-card-process border rounded-2 h-100 w-225px"
    [imageSrc]="
      !data.checkImage
        ? 'assets/themes/ac/default/img/' +
          (data.journalType | vll : 'AC078' : 'text' | async)
        : ''
    "
    [imageId]="data.recID"
    [imageObjType]="view.formModel.entityName"
    resourceObjType="AC_Journals"
    imgCss="w-100 h-150px"
    [imageWidth]="1000"
    [rootData]="data"
    [dataItem]="data"
    [formModel]="view.formModel"
    [typeMF]="'hover'"
    [titleTmp]="titleTmp"
    [desc]="data?.description"
    (clickMF)="clickMF($event, data)"
    (click)="dbClick(data)"
  >
  </codx-card-img>
</ng-template>

<ng-template #titleTmp let-data>
  <span class="fs-6 fw-bold text-dark w-100 py-3">{{ data?.journalDesc }}</span>
</ng-template>

<ng-template #header1Template>
  <codx-label
    field="lblHeader1"
    [formModel]="view.formModel"
    default="Sổ nhật ký"
  ></codx-label>
</ng-template>

<ng-template #header2Template>
  <codx-label
    field="lblHeader2"
    [formModel]="view.formModel"
    default="Thiết lập chung"
  ></codx-label>
</ng-template>

<ng-template #header3Template>
  <codx-label
    field="lblHeader3"
    [formModel]="view.formModel"
    default="Phân quyền"
  ></codx-label>
</ng-template>

<ng-template #column1Template let-data>
  <div class="d-flex gap-3 p-3">
    <codx-img
      [imgSource]="
        !data.checkImage
          ? 'assets/themes/ac/default/img/' +
            (data.journalType | vll : 'AC078' : 'text' | async)
          : ''
      "
      [funcId]="view.formModel?.funcID"
      [objectId]="data.recID"
      [objectType]="view.formModel?.entityName"
      [width]="75"
      [imgOn]="data.modifiedOn"
      [isDefaulImg]="true"
      imageType="square"
    >
    </codx-img>

    <div>
      <div class="fw-bold">{{ data.journalDesc }}</div>
      <div>
        <codx-label
          fiedName="periodID"
          [formModel]="view.formModel"
        ></codx-label>
        : <span class="text-primary">{{ data.periodID }}</span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #column2Template let-data>
  <div class="d-flex gap-3">
    <div class="mw-45 text-truncate">
      <codx-label
        fiedName="drAcctControl"
        [formModel]="view.formModel"
      ></codx-label>
      :
      <span
        class="text-primary"
        [innerHTML]="
          data.drAcctID
            | formatvalue : view.formModel : 'drAcctID'
            | async
            | replace : ';' : ', '
        "
      ></span>
      &nbsp;
    </div>
    •
    <div class="mw-45 text-truncate">
      <codx-label
        fiedName="crAcctControl"
        [formModel]="view.formModel"
      ></codx-label>
      :
      <span
        class="text-primary"
        [innerHTML]="
          data.crAcctID
            | formatvalue : view.formModel : 'crAcctID'
            | async
            | replace : ';' : ', '
        "
      ></span>
      &nbsp;
    </div>
  </div>

  <div class="d-flex gap-3">
    <div class="mw-30 text-truncate">
      <codx-label
        fiedName="diM1Control"
        [formModel]="view.formModel"
      ></codx-label>
      :
      <span
        class="text-primary"
        [innerHTML]="
          data.diM1
            | formatvalue : view.formModel : 'diM1'
            | async
            | replace : ';' : ', '
        "
      ></span>
      &nbsp;
    </div>
    •
    <div class="mw-30 text-truncate">
      <codx-label
        fiedName="diM2Control"
        [formModel]="view.formModel"
      ></codx-label>
      :
      <span
        class="text-primary"
        [innerHTML]="
          data.diM2
            | formatvalue : view.formModel : 'diM2'
            | async
            | replace : ';' : ', '
        "
      ></span>
      &nbsp;
    </div>
    •
    <div class="mw-30 text-truncate">
      <codx-label
        fiedName="diM3Control"
        [formModel]="view.formModel"
      ></codx-label>
      :
      <span
        class="text-primary"
        [innerHTML]="
          data.diM3
            | formatvalue : view.formModel : 'diM3'
            | async
            | replace : ';' : ', '
        "
      ></span>
      &nbsp;
    </div>
  </div>

  <div>
    <codx-label
      fiedName="projectControl"
      [formModel]="view.formModel"
    ></codx-label>
    :
    <span
      class="text-primary"
      [innerHTML]="
        data.assetControl
          | formatvalue : view.formModel : 'projectControl'
          | async
      "
    ></span>
    &nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;
    <codx-label
      fiedName="loanControl"
      [formModel]="view.formModel"
    ></codx-label>
    :
    <span
      class="text-primary"
      [innerHTML]="
        data.assetControl | formatvalue : view.formModel : 'loanControl' | async
      "
    ></span>
    &nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;
    <codx-label
      fiedName="assetControl"
      [formModel]="view.formModel"
    ></codx-label>
    :
    <span
      class="text-primary"
      [innerHTML]="
        data.assetControl
          | formatvalue : view.formModel : 'assetControl'
          | async
      "
    ></span>
  </div>
</ng-template>

<ng-template #column3Template let-data>
  <div class="text-truncate">
    <codx-label fiedName="creater" [formModel]="view.formModel"></codx-label>
    :
    <span class="text-primary">{{
      this.creaters | nameById : "journalNo" : "value" : data.journalNo
    }}</span>
  </div>
  <div class="text-truncate">
    <codx-label fiedName="poster" [formModel]="view.formModel"></codx-label>:
    <span class="text-primary">
      {{
        this.posters | nameById : "journalNo" : "value" : data.journalNo
      }}</span
    >
  </div>
</ng-template>

<ng-template #moreTemplate let-data>
  <codx-mfunc
    [dataItem]="data"
    [formModel]="view.formModel"
    (clickMF)="clickMF($event, data)"
    [isBookMark]="true"
    type="view"
  ></codx-mfunc>
</ng-template>
