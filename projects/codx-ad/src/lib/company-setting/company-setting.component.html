<codx-views
  #view
  [views]="views"
  entityName="AD_CompanySettings"
  service="SYS"
  assemblyName="AD"
  className="CompanySettingsBusiness"
  method="GetAsync"
  [autoLoad]="false"
></codx-views>

<ng-template #paneleft>
  <ejs-tab headerPlacement="Left">
    <e-tabitems>
      <e-tabitem>
        <ng-template #headerText>
          <div class="nav-item">
            <a
              class="nav-link text-dark text-hover-primary btn-light-primary d-flex px-0"
            >
              <span class="icon-info icon-20 me-2"></span>
              <span class="fw-bold">
                <codx-label
                  name="Description"
                  formName="SystemSetting"
                  default="Thông tin chung"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content>
          <div class="w-100 h-100 bg-body rounded-3 p-9 scroll-y h-f">
            <!-- Account Information -->
            <div class="body_detail p-6">
              <div class="row">
                <div class="col-md-10 form-group w-50">
                  <div class="fw-bold text-dark mb-1">
                    <codx-label
                      fiedName="LegalName"
                      formName="SystemSetting"
                      gridViewName=""
                      default="Tên công ty"
                    >
                    </codx-label>
                  </div>
                  <codx-input
                    type="text"
                    field="legalName"
                    [crrValue]="data?.legalName"
                    placeholder="Tên công ty"
                  >
                  </codx-input>
                </div>
                <div class="col-md-2">
                  <button
                    class="btn btn-icon btn-white"
                    (click)="clickEditInfo(data)"
                  >
                    <i class="icon-create icon-18"></i>
                  </button>
                </div>
              </div>
              <div class="form-group w-40">
                <div class="fw-bold text-dark mb-1">
                  <codx-label
                    fiedName=""
                    formName="SystemSetting"
                    gridViewName=""
                    default="Web Address"
                  >
                  </codx-label>
                </div>
                <div class="row">
                  <div class="col-6" *ngIf="tenant">
                    <codx-input
                      type="text"
                      field=""
                      [crrValue]="tenant"
                      (valueChange)="txtToLower($event)"
                      disabled="true"
                    ></codx-input>
                  </div>
                </div>
              </div>
              <div class="form-group w-40">
                <div class="fw-bold text-dark mb-1">
                  <codx-label
                    fiedName="taxCode"
                    formName="SystemSetting"
                    gridViewName=""
                    default="Mã số thuế"
                  >
                  </codx-label>
                </div>
                <div class="col-6">
                  <codx-input
                    type="text"
                    class="form-control"
                    field="taxCode"
                    [crrValue]="data.taxCode"
                  ></codx-input>
                </div>
              </div>
              <div class="d-flex justify-content-center pt-3">
                <div class="form-group">
                  <div class="d-flex">
                    <div class="img_option">
                      <div class="container_img_logo img_logo me-3">
                        <input
                          name="imageUrlMain"
                          hidden
                          #fileInput_main
                          type="file"
                          accept="themes/ad/images/*"
                          (change)="changeMainLogo($event)"
                        />
                        <div
                          *ngIf="
                            !imageLogo;
                            then imageDefaultMain;
                            else imageUpdateMain
                          "
                        ></div>
                        <ng-template #imageDefaultMain>
                          <img
                            class="img_logo img_settings_logo"
                            src="../../../assets/themes/ad/default/img/logo.png"
                          />
                          <div class="overlay_main img_logo"></div>
                          <div class="button_image_main">
                            <button
                              class="btn btn-icon btn-white button_change_main"
                              type="button"
                              (click)="fileInput_main.click()"
                            >
                              <i class="icon-create icon-18"></i>
                            </button>
                          </div>
                        </ng-template>
                        <ng-template #imageUpdateMain>
                          <img
                            [src]="imageLogo"
                            class="img_logo img_settings_logo"
                          />
                          <div class="overlay_main img_logo"></div>
                          <div class="button_image_main">
                            <button
                              class="btn btn-icon btn-white button_change_main"
                              type="button"
                              (click)="fileInput_main.click()"
                            >
                              <i class="icon-create icon-18"></i>
                            </button>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                    <div class="d-flex flex-column">
                      <codx-label
                        fiedName=""
                        class="fw-bold"
                        formName="SystemSetting"
                        gridViewName=""
                        default="Main Logo"
                      >
                      </codx-label>
                      <i>
                        <codx-label
                          fiedName=""
                          formName="SystemSetting"
                          gridViewName=""
                          default="Recommended: 50x50px PNG with"
                        >
                        </codx-label
                        ><br />
                        <codx-label
                          default="transparent background"
                        ></codx-label>
                      </i>
                    </div>
                  </div>
                </div>
                <div class="form-group ps-6">
                  <div class="d-flex">
                    <div class="img_optionFull">
                      <div class="container_img img_logoFull">
                        <input
                          name="imageUrl"
                          hidden
                          #fileInput
                          type="file"
                          accept="themes/ad/images/*"
                          (change)="changeMainHeader($event)"
                        />

                        <div
                          *ngIf="!image; then imageDefault; else imageUpdate"
                        ></div>

                        <ng-template #imageDefault>
                          <img
                            class="img_logoFull img_settings"
                            src="../../../assets/themes/ad/default/img/logoFull_default.png"
                          />
                          <div class="overlay img_logoFull"></div>
                          <div class="button_image">
                            <button
                              class="btn btn-icon btn-white button_change_email"
                              type="button"
                              (click)="fileInput.click()"
                            >
                              <i class="icon-create icon-18"></i>
                            </button>
                          </div>
                        </ng-template>
                        <ng-template #imageUpdate>
                          <img
                            [src]="image"
                            class="img_logoFull img_settings"
                          />
                          <div class="overlay img_logoFull"></div>
                          <div class="button_image">
                            <button
                              class="btn btn-icon btn-white button_change_email"
                              type="button"
                              (click)="fileInput.click()"
                            >
                              <i class="icon-create icon-18"></i>
                            </button>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                    <div class="d-flex flex-column">
                      <div class="col-12">
                        <div class="fw-bold text-dark">
                          <codx-label
                            fiedName=""
                            formName="SystemSetting"
                            gridViewName=""
                            default="E-mail header"
                          ></codx-label>
                        </div>
                        <div class="text-italic text-gray-500">
                          <codx-label
                            fiedName=""
                            formName="SystemSetting"
                            gridViewName=""
                            default="Recommended resolution"
                          >
                          </codx-label>
                          <codx-label default="200x60px"></codx-label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contact Information -->
            <div class="form-group">
              <div class="body_detail p-6">
                <div class="d-flex justify-content-between mb-3">
                  <codx-label
                    fiedName=""
                    class="fw-bold text-dark"
                    formName="SystemSetting"
                    gridViewName=""
                    default="Liên hệ"
                  >
                  </codx-label>
                  <button
                    class="btn btn-icon btn-white"
                    (click)="clickEditContact(data)"
                  >
                    <i class="icon-create icon-18"></i>
                  </button>
                </div>
                <div class="row">
                  <div class="col-5">
                    <div class="fw-bold mb-2">
                      <codx-label
                        formName="CompanySetting"
                        gridViewName=""
                        [default]=""
                      >
                      </codx-label>
                      {{ data.street }}
                    </div>
                    <div class="text-gray-600">
                      <codx-label
                        fiedName="phone"
                        formName="SystemSetting"
                        gridViewName=""
                        [default]="'Tel: '"
                      >
                      </codx-label>
                      {{ data.phone }} - {{ data.faxNo }}
                    </div>
                    <div class="text-gray-600">
                      <codx-label [default]="'Email: '"></codx-label>
                      <span class="url-contact text-primary">{{
                        data.email
                      }}</span>
                    </div>
                    <div class="text-gray-600">
                      <codx-label
                        fiedName=""
                        formName="SystemSetting"
                        gridViewName=""
                        [default]="'Website: '"
                      ></codx-label>
                      <span class="url-contact text-primary">
                        {{ data.webPage }}</span
                      >
                    </div>
                  </div>
                  <div class="col-7" *ngIf="urlEmbedSafe">
                    <div class="contact-map">
                      <iframe
                        class="contact-map-size"
                        [src]="urlEmbedSafe"
                        allowfullscreen=""
                        loading="lazy"
                      ></iframe>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Personal Information -->
            <div class="form-group">
              <div class="body_detail p-6">
                <div class="d-flex justify-content-between">
                  <div class="fw-bold text-dark">
                    <codx-label
                      fiedName=""
                      class="title_contact"
                      formName="SystemSetting"
                      gridViewName=""
                      default="Người đại diện"
                    >
                    </codx-label>
                  </div>
                  <button
                    class="btn btn-icon btn-white"
                    (click)="clickEditPersonal(data)"
                  >
                    <i class="icon-create icon-18"></i>
                  </button>
                </div>
                <div class="footer_content">
                  <div class="row pb-5">
                    <div class="col-6 ps-0">
                      <div class="d-flex align-items-top">
                        <div class="me-4">
                          <div *ngIf="data.recID; else imgDefault_personal">
                            <codx-img
                              [objectId]="data.recID"
                              [objectName]="data.contactName"
                              [imgOn]="data?.modifiedOn"
                              objectType="AD_CompanySettings"
                              [width]="80"
                            >
                            </codx-img>
                          </div>
                          <ng-template #imgDefault_personal>
                            <img
                              class="img_avatar"
                              src="../../../assets/img/avatar.png"
                            />
                          </ng-template>
                        </div>
                        <div class="d-flex flex-column space_personal">
                          <div class="fw-bold text-dark fs-5">
                            <span>{{ data.contactName }}</span>
                          </div>
                          <div class="text-italic text-gray-500">
                            {{ data.jobTitle }}
                          </div>
                          <div class="d-flex">
                            <codx-label
                              fiedName=""
                              class="me-2"
                              formName="SystemSetting"
                              gridViewName=""
                              default="Email"
                            >
                            </codx-label
                            ><span>{{ data.personalEmail }}</span>
                          </div>
                          <div class="d-flex">
                            <codx-label
                              fiedName=""
                              class="me-2"
                              formName="SystemSetting"
                              gridViewName=""
                              default="Phone: "
                            >
                            </codx-label
                            ><span>{{ data.mobile }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Bộ nhớ tài khoảng -->
            <div class="form-group col-6">
              <div class="body_detail p-6">
                <div class="d-flex justify-content-between">
                  <div class="fw-bold text-dark">
                    <codx-label
                      fiedName=""
                      class="title_contact"
                      formName="SystemSetting"
                      gridViewName=""
                      default="Bộ nhớ tài khoản"
                    >
                    </codx-label>
                  </div>
                  <button class="btn btn-icon btn-white">
                    <i class="icon-create icon-18"></i>
                  </button>
                </div>
                <div class="footer_content">
                  <div class="row pb-5">
                    <div>
                      <codx-label
                        default="Bộ nhớ tài khoản của bạn được chia sẽ trên các ứng dụng của hệ thống ERM"
                      >
                      </codx-label>
                    </div>
                    <div class="bg-success-o-60">
                      <div id="container">
                        <div class="wrap">
                          <div class="sliderwrap">
                            <ejs-slider
                              id="minrange"
                              [type]="minType"
                              [min]="0"
                              [max]="formatBytes(data.storage)"
                              [value]="formatBytes(data.memory)"
                              [readonly]="true"
                            >
                            </ejs-slider>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      [innerHTML]="innerHTML(data.memory, data.storage)"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </e-tabitem>
      <e-tabitem>
        <ng-template #headerText>
          <div class="nav-item">
            <a
              class="nav-link text-dark text-hover-primary btn-light-primary d-flex px-0"
            >
              <span class="icon-autorenew icon-20 me-2"></span>
              <span class="fw-bold">
                <codx-label
                  name="lblLstApp"
                  formName=""
                  default="Danh sách ứng dụng"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content>
          <ng-container *ngIf="lstModule">
            <div class="row">
              <span class="fw-bold">
                <codx-label
                  name="lstInstalledApps"
                  formName=""
                  default="Ứng dụng đã cài đặt"
                >
                </codx-label>
              </span>
            </div>
            <div class="row">
              <div
                class="form-group col-6"
                *ngFor="let module of lstInstalledModule"
              >
                <div class="w-100 h-100 bg-body rounded-3 p-9 scroll-y">
                  <div class="container w-100 h-100">
                    <div class="list-empty card card-flush h-100">
                      <div
                        class="d-flex flex-column row flex-start justify-content-start"
                      >
                        <codx-temp-full
                          cardCss="card-template border-bottom px-2 pt-4 pb-2"
                          [typeMF]="'hover'"
                          [title]="module.boughtModule.moduleName"
                          [desc]="module.boughtModule.description"
                          [imageSrc]="module.boughtModule?.image"
                          [icoCss]="
                            'w-35px symbol h-35px  fs-4 d-flex justify-content-center align-items-center rounded-circle me-3 '
                          "
                          [titleLine]="2"
                          [icoDateCss]="'icon-access_alarm'"
                          typeMF="hover"
                          [dataItem]="module"
                        >
                        </codx-temp-full>
                      </div>
                      <div class="row d-flex w-100 h-100 justify-content-end">
                        <div
                          class="btn-spaces d-flex h-100 justify-content-end"
                        >
                          <button
                            type="button"
                            class="btn btn-light-primary me-4"
                            (click)="openModuleDetail(module)"
                          >
                            <codx-label
                              name="lblModuleDetail"
                              formName=""
                              default="Chi tiết"
                            ></codx-label>
                          </button>
                          <button type="button" class="btn btn-primary me-4">
                            <codx-label
                              name="lblExtend"
                              formName=""
                              default="Gia hạn"
                            ></codx-label>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row"></div>
            <div class="row">
              <span class="fw-bold">
                <codx-label
                  name="lstNotInstallApps"
                  formName=""
                  default="Ứng dụng chưa cài đặt"
                >
                </codx-label>
              </span>
            </div>
            <div class="row">
              <div
                class="form-group col-6"
                *ngFor="let module of lstNotInstallModule"
              >
                <div class="w-100 h-100 bg-body rounded-3 p-9 scroll-y">
                  <div class="container w-100 h-100">
                    <div class="list-empty card card-flush h-100">
                      <div
                        class="d-flex flex-column row flex-start justify-content-start"
                      >
                        <codx-temp-full
                          cardCss="card-template border-bottom px-2 pt-4 pb-2"
                          [typeMF]="'hover'"
                          [title]="module.boughtModule.moduleName"
                          [desc]="module.boughtModule.description"
                          [imageSrc]="module.boughtModule?.image"
                          [icoCss]="
                            'w-35px symbol h-35px  fs-4 d-flex justify-content-center align-items-center rounded-circle me-3 '
                          "
                          [titleLine]="2"
                          [icoDateCss]="'icon-access_alarm'"
                          typeMF="hover"
                          [dataItem]="module"
                        >
                        </codx-temp-full>
                      </div>
                      <div class="row d-flex w-100 h-100 justify-content-end">
                        <div
                          class="btn-spaces d-flex h-100 justify-content-end"
                        >
                          <button
                            type="button"
                            class="btn btn-light-primary me-4"
                            (click)="openModuleDetail(module)"
                          >
                            <codx-label
                              name="lblModuleDetail"
                              formName=""
                              default="Chi tiết"
                            ></codx-label>
                          </button>
                          <button type="button" class="btn btn-primary me-4">
                            <codx-label
                              name="lblInstall"
                              formName=""
                              default="Cài đặt"
                            ></codx-label>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-template>
      </e-tabitem>
      <e-tabitem>
        <ng-template #headerText>
          <div class="nav-item">
            <a
              class="nav-link text-dark text-hover-primary btn-light-primary d-flex px-0"
            >
              <span class="icon-autorenew icon-20 me-2"></span>
              <span class="fw-bold">
                <codx-label
                  name="Update"
                  formName="SystemSetting"
                  default="Version update"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content>
          <div class="w-100 h-100 bg-body rounded-3 p-9 scroll-y">
            <div class="container w-100 h-100">
              <div class="list-empty card card-flush h-100">
                <div
                  class="d-flex flex-column flex-center justify-content-center"
                >
                  <img
                    src="../assets/themes/sys/default/img/DataEmpty.svg"
                    class="w-250px"
                  />
                  <div class="fs-5 text-dark fw-bold mt-2 text-center">
                    {{ "SYS011" | mssg | async }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </e-tabitem>
      <e-tabitem>
        <ng-template #headerText>
          <div class="nav-item">
            <a
              class="nav-link text-dark text-hover-primary btn-light-primary d-flex px-0"
            >
              <span class="icon-question_answer icon-20 me-2"></span>
              <span class="fw-bold">
                <codx-label
                  name="Supports"
                  formName="SystemSetting"
                  default="Supports"
                >
                </codx-label>
              </span>
            </a>
          </div>
        </ng-template>
        <ng-template #content>
          <div class="w-100 h-100 bg-body rounded-3 p-9 scroll-y">
            <div class="container w-100 h-100">
              <div class="list-empty card card-flush h-100">
                <div
                  class="d-flex flex-column flex-center justify-content-center"
                >
                  <img
                    src="../assets/themes/sys/default/img/DataEmpty.svg"
                    class="w-250px"
                  />
                  <div class="fs-5 text-dark fw-bold mt-2 text-center">
                    {{ "SYS011" | mssg | async }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </e-tabitem>
    </e-tabitems>
  </ejs-tab>
</ng-template>
