<div class="page-setting">
  <div class="d-flex flex-row">
    <div class="min-w-250px w-250px setting-left">
      <ng-container [ngTemplateOutlet]="leftMenu"></ng-container>
    </div>
    <div class="setting-right">
      <ng-container [ngTemplateOutlet]="itemView"></ng-container>
    </div>
  </div>
</div>
<ng-template #leftMenu>
  <ng-container *ngFor="let items of moreFunc">
    <div class="menu-item">
      <a class="dropdown-toggle" href="javascript:void(0);">
        <span class="icon-holder">
          <i class="fa {{ items.largeIcon }}"></i>
        </span>
        <span class="title_mf">{{ items.defaultName }}</span>
      </a>
    </div>
  </ng-container>
</ng-template>

<ng-template #itemView>
  <!-- <lib-company-setting-details [formModel]="view.formModel"  >
  </lib-company-setting-details> -->

  <codx-detail-tmp [body]="body"></codx-detail-tmp>

  <ng-template #body>

    <!-- Account Information -->
    <div class="header_detail pt-4" *ngIf="data">
      <!-- <codx-label fiedName="" class="fw-bold text-dark" formName="" gridViewName="" default="Thông tin tài khoản">
      </codx-label> -->
      <div class="row">
        <div class="col-6">
          <div class="form-group">
            <div class="fw-bold text-dark mb-1">
              <codx-label fiedName="" formName="" gridViewName="" default="Tên công ty">
              </codx-label>
            </div>
            <codx-input type="text" class="form-control" field="legalName" [crrValue]="data.legalName"
              placeholder="Tên công ty">
            </codx-input>
          </div>
          <div class="form-group">
            <div class="fw-bold text-dark mb-1">
              <codx-label fiedName="" formName="" gridViewName="" default="Web Address">
              </codx-label>
            </div>
            <div class="row">
              <div class="col-6">
                <codx-input type="text" field="" [crrValue]="data.companyCode" (valueChange)="txtToLower($event)"
                  disabled="true"></codx-input>
              </div>
              <div class="col-6 ps-0">
                <codx-label fiedName="" class="text-italic text-gray-500" formName="" gridViewName=""
                  default=".erm.com"></codx-label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="fw-bold text-dark mb-1">
              <codx-label fiedName="" formName="" gridViewName="" default="Mã số thuế">
              </codx-label>
            </div>
            <codx-input type="text" class="form-control" field="" [crrValue]="data.taxCode"></codx-input>
          </div>
          <div class="form-group">
            <div class="d-flex">
              <div class="img_option">
                <!-- change url image Main logo -->
                <div class="container_img_logo img_logo me-3">
                  <input name="imageUrlMain" hidden #fileInput_main type="file" accept="image/*"
                    (change)="handleInputChangeMain($event)" />
                  <div *ngIf="!imageSrcMain; then imageDefaultMain; else imageUpdateMain">
                  </div>
                  <ng-template #imageDefaultMain>
                    <img class="img_logo img_settings_logo" src="../../../assets/themes/ad/default/img/logo.png">
                    <div class="overlay_main img_logo"></div>
                    <div class="button_image_main">
                      <button class="button-icon button_change_main" type="button" (click)="fileInput_main.click()">
                        <i class="icon-create icon-18"></i>
                      </button>
                    </div>
                  </ng-template>
                  <ng-template #imageUpdateMain>
                    <img [src]="imageSrcMain" class="img_logo img_settings_logo">
                    <div class="overlay_main img_logo"></div>
                    <div class="button_image_main">
                      <button class="button-icon button_change_main" type="button" (click)="fileInput_main.click()">
                        <i class="icon-create icon-18"></i>
                      </button>
                    </div>
                  </ng-template>
                </div>

              </div>
              <div class="d-flex flex-column">
                <codx-label fiedName="" class="fw-bold" formName="" gridViewName="" default="Main Logo"></codx-label>
                <i>
                  <codx-label fiedName="" formName="" gridViewName="" default="Recommended: 50x50px PNG with">
                  </codx-label><br>
                  <codx-label default="transparent background"></codx-label>
                </i>

              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="d-flex">
              <div class="img_optionFull">

                <div class="container_img img_logoFull">
                  <input name="imageUrl" hidden #fileInput type="file" accept="themes/ad/images/*"
                    (change)="handleInputChange($event)" />

                  <div *ngIf="!image; then imageDefault; else imageUpdate">
                  </div>

                  <ng-template #imageDefault>
                    <img class="img_logoFull img_settings"
                      src="../../../assets/themes/ad/default/img/logoFull_default.png">
                    <div class="overlay img_logoFull"></div>
                    <div class="button_image">
                      <button class="button-icon button_change_email" type="button" (click)="fileInput.click()">
                        <i class="icon-create icon-18"></i>
                      </button>
                    </div>
                  </ng-template>
                  <ng-template #imageUpdate>
                    <img [src]="image" class="img_logoFull img_settings">
                    <!-- <img [src]="imageSrc" class="img_logoFull img_settings"> -->
                    <div class="overlay img_logoFull"></div>
                    <div class="button_image">
                      <button class="button-icon button_change_email" type="button" (click)="fileInput.click()">
                        <i class="icon-create icon-18"></i>
                      </button>
                    </div>
                  </ng-template>

                </div>
              </div>
              <div class="d-flex flex-column">
                <div class="col-12">
                  <div class="fw-bold text-dark">
                    <codx-label fiedName="" formName="" gridViewName="" default="E-mail header"></codx-label>
                  </div>
                  <div class="text-italic text-gray-500">
                    <codx-label fiedName="" formName="" gridViewName="" default="Recommended resolution"></codx-label>
                    <codx-label default="200x60px"></codx-label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Contact Information -->
    <div class="body_detail p-6" *ngIf="data">
      <div class="d-flex justify-content-between mb-3">
        <codx-label fiedName="" class="fw-bold text-dark" formName="" gridViewName="" default="Liên hệ"></codx-label>
        <div class="button_edit">
          <button (click)="clickEditContact(data)"><i class="icon-create icon-18"></i></button>
        </div>
      </div>
      <div class="row">
        <div class="col-5">
          <div class="fw-bold mb-2">
            <codx-label formName="CompanySetting" gridViewName="" [default]="">
            </codx-label>
            {{data.street}}
          </div>
          <div class="text-gray-600">
            <codx-label fiedName="phone" formName="" gridViewName="" [default]="'Tel: '">
            </codx-label>
            {{data.phone}} - {{data.faxNo}}
          </div>
          <div class="text-gray-600">
            <codx-label [default]="'Email: '"></codx-label>
            <span class="url-contact text-primary">{{data.email}}</span>
          </div>
          <div class="text-gray-600">
            <codx-label fiedName="" formName="" gridViewName="" [default]="'Website: '"></codx-label>
            <span class="url-contact text-primary"> {{data.webPage}}</span>
          </div>
        </div>
        <div class="col-7">
          <div class="contact-map">
            <iframe class="contact-map-size"
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.1916277478313!2d106.67422991524113!3d10.796630561771677!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x317528d61d708d9b%3A0xa88abf9cfd8e5128!2zMjMgTmd1eeG7hW4gVGjhu4sgSHXhu7NuaCwgUGjGsOG7nW5nIDgsIFBow7ogTmh14bqtbiwgVGjDoG5oIHBo4buRIEjhu5MgQ2jDrSBNaW5oLCBWaWV0bmFt!5e0!3m2!1sen!2sus!4v1657168799748!5m2!1sen!2sus"
              allowfullscreen="" loading="lazy"></iframe>
          </div>
        </div>
      </div>
    </div>

    <!-- Personal Information -->
    <div class="body_detail p-6" *ngIf="data">
      <div class="row">
        <div class="col-6">
          <div class="fw-bold mb-3">
            <codx-label fiedName="" class="title_contact" formName="" gridViewName="" default="Người đại diện">
            </codx-label>
          </div>
        </div>
        <div class="col-6">
          <div class="button_edit">
            <button (click)="clickEditPersonal(data)"> <i class="icon-create icon-18"></i></button>
          </div>
        </div>
      </div>
      <div class="footer_content">
        <div class="row pb-5">
          <div class="col-6 ps-0">
            <div class="d-flex align-items-top">
              <div class="w-60px me-3">
                <div *ngIf="data.logo; else imgDefault_personal">
                  <img class="img_avatar" src="../../../{{data.logo}}}" alt="" />
                </div>
                <ng-template #imgDefault_personal> <img class="img_avatar" src="../../../assets/img/avatar.png" />
                </ng-template>
              </div>
              <div class="d-flex flex-column">
                <div class="fw-bold text-dark">
                  <span>{{data.contactName}}</span>
                </div>
                <div class="text-italic text-gray-500">
                  {{data.jobTitle}}
                </div>
                <div>
                  <codx-label fiedName="" formName="" gridViewName="" default="Email">
                  </codx-label><span>{{data.personalEmail}}</span>
                </div>
                <codx-label fiedName="" formName="" gridViewName="" default="Phone: ">
                </codx-label><span>{{data.mobile}}</span>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </ng-template>
  <codx-views #view [views]="views" entityName="AD_CompanySettings" service="SYS" assemblyName="AD"
    className="CompanySettingsBusiness" method="GetAsync" [autoLoad]="false"></codx-views>