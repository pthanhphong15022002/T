<ng-template *ngIf="order" [ngTemplateOutlet]="popupOrder"> </ng-template>

<ng-template #popupOrder class="container w-100 h-100">
  <div class="close d-flex justify-content-end">
    <button
      type="button"
      class="btn btn-light-primary me-4"
      (click)="onClose()"
    >
      <codx-label formName="" default="X"></codx-label>
    </button>
  </div>
  <div class="header d-flex justify-content-center">
    <div></div>
    <h1>
      <codx-label name="lblOrderTitle" default="Đơn hàng"> </codx-label>
    </h1>
  </div>

  <div class="orderTitle">
    <ng-template [ngTemplateOutlet]="orderTmp"> </ng-template>
  </div>
</ng-template>

<ng-template #orderTmp>
  <div class="d-flex justify-content-between h-100 p-2 orderInfo">
    <codx-temp-full
      [typeMF]="'hover'"
      [titleTmp]="oTitleTmp"
      typeMF="hover"
      [dataItem]="order"
      [hideMF]="false"
    >
    </codx-temp-full>

    <codx-temp-full
      [(imageId)]="order.createdBy"
      [imageObjType]="'AD_Users'"
      [imageWidth]="35"
      [title]="order.invoiceBuyerName"
      [subTitle]="order.invoiceEmail"
      [desc]="order.phone"
      imgCss="me-2"
    >
    </codx-temp-full>
  </div>
  <div class="billInfo">
    <div class="title d-flex justify-content-center">
      <h1>
        <codx-label name="" default="Thông tin hóa đơn"> </codx-label>
      </h1>
    </div>
    <div class="info row">
      <div class="col-8">
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyName"
            [formModel]="orderFormodel"
            [default]="'Tên công ty: '"
          >
          </codx-label>
          {{ order.invoiceName }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblOrderAddress"
            [formModel]="orderFormodel"
            [default]="'Địa chỉ: '"
          >
          </codx-label>
          {{ order.invoiceAddress }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyTax"
            [formModel]="orderFormodel"
            [default]="'Mã số thuế: '"
          >
          </codx-label>
          {{ order.invoiceTaxCode }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblContact"
            [formModel]="orderFormodel"
            [default]="'Người liên hệ: '"
          >
          </codx-label>
          {{ order.invoiceBuyerName }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyEmail"
            [formModel]="orderFormodel"
            [default]="'Email: '"
          >
          </codx-label>
          {{ order.invoiceEmail }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyPhone"
            [formModel]="orderFormodel"
            [default]="'Số điện thoại: '"
          >
          </codx-label>
          {{ order.invoicePhone }}
        </div>
      </div>
      <div class="col-4">
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyPhone"
            [formModel]="orderFormodel"
            [default]="'Số hóa đơn: '"
          >
          </codx-label>
          {{ order.invoiceNo }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyPhone"
            [formModel]="orderFormodel"
            [default]="'Ngày hóa đơn: '"
          >
          </codx-label>
          {{ order.invoiceDate }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyPhone"
            [formModel]="orderFormodel"
            [default]="'Số seri: '"
          >
          </codx-label>
          {{ order.invoiceSeri }}
        </div>
        <div class="d-flex text-gray-600">
          <codx-label
            fiedName="lblCompanyPhone"
            [formModel]="orderFormodel"
            [default]="'Form: '"
          >
          </codx-label>
          {{ order.invoiceForm }}
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #oTitleTmp>
  <div class="row">
    <div class="col">
      <div class="text-gray-600">
        <codx-label
          fiedName="lblOrderNo"
          [formModel]="orderFormodel"
          [default]="'Đơn hàng: '"
        >
        </codx-label>
        {{ order.orderNo }}
        <span class="">
          <codx-vll
            [name]="grvTNOrders['OrderType']?.referedValue"
            [value]="order?.orderType"
            [showText]="true"
            [showBgColor]="true"
            class="badge badge-light badge-square badge-md fs-7 p-2"
          >
          </codx-vll>
        </span>
      </div>

      <div class="text-gray-600">
        <codx-label
          fiedName="lblpaymentCreatedOn"
          [formModel]="orderFormodel"
          [default]="'Ngày giao dịch: '"
        >
        </codx-label>
        {{ payment.createdOn ?? "" }}
      </div>
      <div class="text-gray-600">
        <codx-label
          fiedName="lblpaymentStatus"
          [formModel]="orderFormodel"
          [default]="'Tình trạng: '"
        >
        </codx-label>
        <codx-vll
          [name]="grvTNOrders['Status']?.referedValue"
          [value]="order?.status"
          [showText]="true"
          [showBgColor]="true"
          class="badge badge-light badge-square badge-md fs-7 p-2"
        >
        </codx-vll>
      </div>
      <div class="text-gray-600">
        <codx-label
          fiedName="lblpaymentMethod"
          [formModel]="orderFormodel"
          [default]="'Hình thức thanh toán: '"
        >
        </codx-label>
        <codx-vll
          [name]="grvTNOrders['PmtMethod']?.referedValue"
          [value]="order?.pmtMethod"
          [showText]="true"
          [showBgColor]="true"
          class="badge badge-light badge-square badge-md fs-7 p-2"
        >
        </codx-vll>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #module let-module>
  <codx-temp-full
    cardCss="card-template border-bottom px-2 pt-4 pb-2"
    [typeMF]="'hover'"
    [title]="module.moduleName"
    [descTmp]="moduleOperatorDescTmp"
    [desc2Tmp]="moduleEmplDescTmp"
    [descLine]="2"
    [imageSrc]="module.image"
    [icoCss]="
      'w-35px symbol h-35px  fs-4 d-flex justify-content-center align-items-center rounded-circle me-3 '
    "
    [titleLine]="2"
    [icoDateCss]="'icon-access_alarm'"
    typeMF="hover"
    [dataItem]="module"
  >
  </codx-temp-full>
</ng-template>

<ng-template #moduleOperatorDescTmp let-module>
  <div class="d-flex">
    <codx-label name="lblPriceForOperator" default="Nhân viên nghiệp vụ: ">
    </codx-label>
    <span>
      {{ module.price + " " + order.currencyID + "/" + module.umid }}
    </span>
  </div>
</ng-template>
<ng-template #moduleEmplDescTmp let-module>
  <div class="d-flex">
    <codx-label name="lblPriceForEmpl" default="Nhân viên thường: ">
    </codx-label>
    <span>
      {{ module.childPrice + " " + order.currencyID + "/" + module.umid }}
    </span>
  </div>
</ng-template>
