<codx-views #view entityName="AD_Users" service="SYS" assemblyName="ERM.Business.AD" className="UsersBusiness"
  method="GetListUserAsync" [views]="views" idField="userID" [selectedFirst]="true" [button]="button"
  (buttonClick)="click($event)" (viewChanged)="changeView($event)" (selectedChange)="selectedChange($event)">
</codx-views>

<ng-template #itemTemplate let-data>
  <div class="px-5">
    <div class="d-flex justify-content-between align-items-center flex-wrap  pt-4 pb-2">
      <div class=" justify-content-start">
        <codx-temp-full cardCss="card-template" (clickMF)="clickMF($event,data)" [imageId]="data.userID"
          imageObjType="AD_Users" [titleTmp]="titleTmp" [desc]="convertHtmlAgency(data.buName)" [typeMF]="'hover'"
          [formModel]="view.formModel" [dataItem]="data" [footer]="footer" #tempFull>
        </codx-temp-full>
      </div>
      <div class="d-flex flex-wrap">
        <div class="flex">
          <div class="" *ngIf="data.chooseRoles && data.chooseRoles.length <= 5">
            <ng-container class="container" *ngFor="let item of data.chooseRoles; index as num">
              <a (click)="openPopup(data)">
                <img class="w-40px" src="/{{ item.smallIcon}}" />
              </a>
            </ng-container>
            <!-- <codx-imgs class="symbol symbol-30px symbol-circle ms-1" [objectId]="data.resource" objectType="AD_Users"
              [numberImages]="5" (click)="openPopup(data)">
            </codx-imgs> -->
          </div>
          <div class="" *ngIf="data.chooseRoles && data.chooseRoles.length > 5">
            <ng-container class="container" *ngFor="let item of data.chooseRoles; index as num">
              <a *ngIf="num < 4" class="symbol-label fs-3" (click)="openPopup(data)">
                <img class="w-40px" src="../../../{{ item.smallIcon}}" />
              </a>
              <a *ngIf="num == 4" class="symbol-label fs-3" (click)="openPopup(data)">
                <img class="w-40px" src="../../../{{ item.smallIcon}}" />
                <span class="symbol-label fs-3">
                  +{{data.chooseRoles && data.chooseRoles.length-4}}
                </span>
              </a>
            </ng-container>
            <!-- <codx-imgs class="symbol symbol-30px symbol-circle ms-1" [objectId]="data.resource" objectType="AD_Users"
              [numberImages]="5" (click)="openPopup(data)">
            </codx-imgs> -->
          </div>
        </div>
        <div class="d-flex flex-column text-right ms-4" *ngIf="data.status=='1'">
          <div>
            <span [style.color]=" data?.status | vll: 'AD002':'textColor' | async">
              {{ data?.status | vll: "AD002":"text" | async }}
            </span>
          </div>
          <div>{{data.activeOn | timefrom}}</div>
        </div>
        <div class="d-flex flex-column text-right ms-4" *ngIf="data.status=='0'">
          <div>
            <span [style.color]=" data?.status | vll: 'AD002':'textColor' | async">
              {{ data?.status | vll: "AD002":"text" | async }}
            </span>
          </div>
        </div>
      </div>
    </div>
    <div class="separator"></div>
  </div>
</ng-template>

<ng-template #titleTmp let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center mb-1">
      <div class="text-dark fw-bolder line-clamp line-clamp-1 me-2"> {{data.userName}}</div>
      <div class="badge border badge-white d-flex align-items-center me-2" *ngIf="data.employeeID">
        <span class=" icon-account_box  icon-14 me-1"></span>
        {{data.employeeID}}
      </div>
      <div class="badge badge-light-primary  d-flex align-items-center me-2" *ngIf="!data.employeeID"><span
          class="icon-account_box icon-14 me-1"></span>
        <codx-label name="lblEmployeeID" formName="Users" default="Mã nhân viên">
        </codx-label>
      </div>
      <div class="badge badge-light-primary  d-flex align-items-center me-2 " *ngIf="data.groupName"><span
          class="icon-group icon-14 me-1"></span><span>{{data.groupName}}</span>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #footer let-data>
  <div class="d-flex flex-wrap  ms-17">
    <div class="d-flex align-items-center me-4" *ngIf="data.email"><span class="icon-email icon-16 me-1"></span>
      <div class="">{{data.email}}</div>
    </div>
    <div class="d-flex align-items-center me-4" *ngIf="data.mobile"><span
        class="icon-phone_android icon-16 me-1"></span>
      <div class="">{{data.mobile}} </div>
    </div>
  </div>
</ng-template>