<codx-layout-add #form [title]="header" [tabInfo]="tabInfo" [footer]="footer" [formModel]="dialog.formModel"
  [dialog]="dialog" [openMore]="true" [tabContent]="[tabDescription, tabRoles]" [data]="adUser">
</codx-layout-add>

<ng-template #tabDescription>
  <ng-container *ngIf="form?.formGroup">
    <div class="mt-3 pb-5">
      <codx-img #imageUpload class="symbol symbol-120 symbol-circle me-2 image-inpt-wrapper fullImage" [width]="60"
        [funcId]="formModel?.funcID" [objectId]="adUser.userID" [objectType]="'AD_Users'" [isAllowEdit]="true">
      </codx-img>
    </div>
    <div class="row mx-0 mt-3">
      <div class="col-6 ps-0">
        <div class="form-group">
          <codx-label fiedName="UserID" [formModel]="form.formModel">
          </codx-label>
          <codx-input field="userID" [disabled]="true" [Group]="form.formGroup"
            [formModel]="form.formModel">
          </codx-input>
        </div>
      </div>
      <div class="col-6 pe-0">
        <div class="form-group">
          <codx-label fiedName="EmployeeID" [formModel]="form?.formModel">
          </codx-label>
          <codx-input [disabled]="!adUser.employeeID ? false : true" field="employeeID" (valueChange)="valueEmp($event)"
            [Group]="form.formGroup" [formModel]="form.formModel" *ngIf="formType == 'edit'">
          </codx-input>
          <codx-input field="employeeID" (valueChange)="valueEmp($event)"
            *ngIf="formType == 'add' || formType == 'copy'" [Group]="form.formGroup" [formModel]="form.formModel">
          </codx-input>
        </div>
      </div>
    </div>
    <div class="form-group">
      <codx-label fiedName="UserName" [formModel]="form?.formModel">
      </codx-label>
      <codx-input field="userName" (valueChange)="valueChangeU($event)" [Group]="form.formGroup"
        [formModel]="form.formModel">
      </codx-input>
    </div>
    <div class="form-group">
      <codx-label fiedName="UserGroup" [formModel]="form?.formModel">
      </codx-label>
      <codx-input field="userGroup" (valueChange)="valueUG($event)" [Group]="form.formGroup"
        [formModel]="form.formModel">
      </codx-input>
    </div>
    <div class="form-group">
      <codx-label fiedName="BUID" [formModel]="form?.formModel">
      </codx-label>
      <codx-input field="buid" (valueChange)="valueBU($event)" [Group]="form.formGroup" [formModel]="form.formModel">
      </codx-input>
    </div>
    <div class="form-group row m-0">
      <div class="form-group col-6 ps-0">
        <codx-label fiedName="Email" [formModel]="form?.formModel">
        </codx-label>
        <codx-input field="email" [Group]="form.formGroup" [formModel]="form.formModel"
          (valueChange)="valueChangeM($event)" [disabled]="!adUser.email ? false : true" *ngIf="formType == 'edit'">
        </codx-input>
        <codx-input field="email" [Group]="form.formGroup" [formModel]="form.formModel"
          (valueChange)="valueChangeM($event)" [disabled]="false" *ngIf="formType == 'add' || formType == 'copy'">
        </codx-input>
      </div>
      <div class="form-group col-6 pe-0">
        <codx-label fiedName="Mobile" [formModel]="form?.formModel">
        </codx-label>
        <codx-input field="mobile" (valueChange)="valueChangeP($event)" [Group]="form.formGroup"
          [formModel]="form.formModel">
        </codx-input>
      </div>
    </div>
  </ng-container>

</ng-template>
<ng-template #tabRoles>
  <div class="form-group mt-3">
    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-primary" (click)="openPopup(viewChooseRole)">
        <codx-label fiedName="titleUserRoles" [formModel]="form?.formModel" default="Chỉnh sửa
        quyền">
        </codx-label>
      </button>
    </div>
    <div class="" *ngIf="countListViewChooseRoleApp > 0">
      <div class="d-flex align-items-center mb-3">
        <codx-label class="me-1 text-primary fs-6" fiedName="titleUserRoles" [formModel]="form?.formModel"
          default="Ứng dụng được phần quyền">
        </codx-label>
        <span class="fw-bold">({{countListViewChooseRoleApp}})</span>
      </div>
      <div *ngFor="let item of viewChooseRole; let i = index">
        <div class="d-flex align-items-center justify-content-between mb-4" *ngIf="!item.isPortal">
          <div class="d-flex align-items-center">
            <div class="me-2">
              <img class="w-30px" src="../../../{{item.smallIcon}}" alt="" />
            </div>
            <div class="fw-bold">{{item.customName}}</div>
          </div>
          <div class="text-end">
            <div [style.color]="item.color">
              {{item.roleName}}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="form-group" *ngIf="countListViewChooseRoleService > 0">
      <div class="row">
        <div class="col-12">
          <div class="d-flex align-items-center mb-3 mt-3">
            <codx-label class="me-1 text-primary fs-6" fiedName="titleUserRoles" [formModel]="form?.formModel"
              default="Dịch vụ nhân viên được phân quyền">
            </codx-label>
            <span class="fw-bold">({{countListViewChooseRoleService}})</span>
          </div>
        </div>
        <div class="col-12 " *ngFor="let item of viewChooseRole; let i = index">
          <div class="d-flex align-items-center justify-content-between mb-4" *ngIf="item.isPortal">
            <div class="d-flex align-items-center">
              <div class="me-2">
                <img class="w-40px" src="../../../{{item.smallIcon}}" alt="" />
              </div>
              <div class="fw-bold">{{item.customName}}</div>
            </div>
            <div class="text-end">
              <div [style.color]="item.color">
                {{item.roleName}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-primary" (click)="onSave()">
      <codx-label fiedName="Save" [formModel]="formModel" default="Lưu"></codx-label>
    </button>
  </div>
</ng-template>

<!-- <ng-template #firstComment>
  <div *ngIf="dataComment">
    <div class="card border rounded-4 border">
      <div class="card-body d-flex">
        <div class="d-flex flex-column w-350px me-4">
          <a href="/" class="mb-2">
            <img alt="Logo" class="h-15px " src="assets/themes/wp/default/img/WP.svg">
          </a>
          <h4 class="fw-bolder text-primary">{{titleComment}}</h4>
          <div class="mb-4">{{descriptionComment}}</div>
          <div class="d-flex align-items-center flex-center  py-2 px-6">
            <div class="symbol symbol-40px symbol-circle me-4" *ngIf="url">
              <img [src]="url" alt="">
            </div>
            <div class="d-flex flex-column w-100">
              <div class="text-dark fw-bold fs-5">{{dataComment.userName}}</div>
              <div class="text-gray-400">
                <span *ngIf="dataComment.positionName">{{dataComment.positionName}}</span>
              </div>
            </div>
          </div>
        </div>
        <img src="/assets/themes/sys/default/img/Welcome.svg" class="position-absolute me-3  end-0 h-175px" alt="">
      </div>
    </div>
  </div>
</ng-template> -->