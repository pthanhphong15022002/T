<div class="p-6">
    <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
            <codx-label class="fw-bolder fs-1" 
                [formModel]="dialogRef.formModel" 
                name="lblSearch"
                default="Tìm kiếm">
            </codx-label>
        </div>
        <div class="">
            <button class="btn" (click)="clickClosePopup()">
                <i class="icon-close"></i>
            </button>
        </div>
    </div>
    <div class="row mt-2">
        <codx-fulltextsearch #view 
            [centerTmp]="itemTemplate"  
            [funcID]="funcID" 
            [service]="services" 
            [entityName]="entityName" 
            (selectedChange)="onSelected($event)">
        </codx-fulltextsearch>
    </div>
</div>

<ng-template #itemTemplate let-data>  
    <div (click)="clickViewDetail(data)" class="row my-4">
        <codx-temp-full 
            [dataItem]="data"
            [titleTmp]="tmpTitle"
            [subTitleTmp]="tmpContent"
            [imageId]="data.recID"
            [imageObjType]="'WP_News'"
            [imageReferType]="'image'"
            [imageType]="'square'"
            [imageWidth]="150"
            [formModel]="dialogRef.formModel" 
            [height]="150"
            [hideMF]="true"
            [bookmark]="false">
        </codx-temp-full>
    </div>
</ng-template>

<ng-template #tmpTitle let-data>
    <div class="fw-bolder fs-3">
        <span>{{data.subject}}</span>
    </div>
</ng-template>
<ng-template #tmpContent let-data>
    <div class="d-flex flex-column align-items-stretch">
        <div>
            <span *ngIf="data.subContent">{{data.subContent | maxlenght: 200}}</span>
        </div>
        <div class="w-100 my-2 d-flex align-items-center">
            <div class="d-flex align-items-center me-4">
                <span class="icon-account_circle me-2"></span>
                <span *ngIf="data.createdName">{{data.createdName}}</span>
            </div>
            <div class="d-flex align-items-center me-4">
                <span class="icon-calendar_today me-2"></span>
                <span *ngIf="data.createdOn" [innerHTML]="data.createdOn | formatvalue:dialogRef.formModel:'CreatedOn' | async"></span>
            </div>
            <div class="d-flex align-items-center me-4">
                <span class="icon-visibility me-2"></span>
                <span>{{data.views || 0}}</span>
            </div>
        </div>
    </div>
</ng-template>
