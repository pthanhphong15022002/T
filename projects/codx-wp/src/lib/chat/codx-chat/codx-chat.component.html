<div ngbDropdown class="d-inline-block w-100" [autoClose]="autoClose" #dropdown container="body">
  <button type="button" class="btn btn-sm" (click)="openChatBox()" id="chat-box"
    ngbDropdownToggle>
    <div
    class="btn btn-icon btn-active-light-primary position-relative"
    [ngClass]="codxService.toolbarButtonHeightClass">
    <span 
        [inlineSVG]="'./assets/themes/sys/default/img/header_chatting.svg'"
        class="svg-icon"
        [ngClass]="codxService.toolbarButtonIconSizeClass">
    </span>
    <span *ngIf="totalMessage > 0"
      class="position-absolute topbar-badge translate-middle badge badge-sm rounded-pill bg-danger px-2 top-0 start-100">
      <span class="text-white fs-8">{{totalMessage < 9 ? totalMessage : '9+' }}</span>
      </span>
  </div>
  </button>
  <div ngbDropdownMenu #popup aria-labelledby="chat-box" id="chatbox-dropdownPopup"
    class="h-600px w-400px">
    <div class="w-100" id="dropdown" style="height: 600px;">
      <ng-container *ngIf="loaded">
        <wp-chat-list [(isOpen)]="autoClose"></wp-chat-list>
      </ng-container>
    </div>
  </div>
</div>

<ng-template #chatBox let-group>
  <codx-chat-box [groupID]="group.groupID"></codx-chat-box>
</ng-template>