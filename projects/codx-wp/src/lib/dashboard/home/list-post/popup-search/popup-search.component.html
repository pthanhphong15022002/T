<div class="container-fluid w-100 h-100">
  <div class="row"  [style]="'height: 80px'">
      <div class="col-12">
        <div class="d-flex align-items-top justify-content-between w-100 py-2">
          <div>
            <codx-label class="fw-bold fs-1" [formModel]="dialogRef.formModel" name="lblLabel1" default="Tìm kiếm bài viết">
            </codx-label>
          </div>
          <div class="d-flex flex-column">
            <codx-searchbar [width]="300" (searchEvent)="searchEvent($event)" [iconPos]="'left'"></codx-searchbar>
            <div class="fs-6 text-muted p-2">
              <span>{{'WP025' | mssg | async}}</span>
            </div>
          </div>
          <div>
            <button class="btn" (click)="clickClosePopup()">
              <i class="icon-close text-danger"></i>
            </button>
          </div>
        </div>
      </div>
  </div>
  <div class="row" [style]="'height: calc(100% - 80px)'">
    <div class="col-3">
      <div class="form-group">
        <codx-label class="fw-bold fs-5" [formModel]="dialogRef.formModel" name="lblLabel2" [default]="'Ngày tin tức'"></codx-label>
        <div class="row">
          <div class="col-6">
            <codx-input type="datetime" field="fromDate" format="F" (valueChange)="valueChange($event)"></codx-input>
          </div>
          <div class="col-6">
            <codx-input type="datetime" field="toDate" format="F" (valueChange)="valueChange($event)"></codx-input>
          </div>
        </div>
      </div>
      <div class="form-group">
        <codx-label class="fw-bold fs-5" [formModel]="dialogRef.formModel" name="lblLabel3" [default]="'Bộ lọc'"></codx-label>
        <div class="d-flex flex-column w-100 ps-4">
          <div class="d-flex algin-items-center justify-content-between mb-2">
            <div>
              <span class="me-2"><i class="icon-border_all"></i></span>
              <codx-label class="fw-bold fs-6" [formModel]="dialogRef.formModel" name="lblLabel4" [default]="'Tất cả'"></codx-label>
            </div>
            <codx-input type="switch" [checked]="false" field="all" (valueChange)="valueChange($event)"></codx-input>
          </div>
          <div class="d-flex align-items-top mb-2">
            <span class="me-2"><i class="icon-developer_board"></i></span>
            <div class="d-flex flex-column w-100">
              <codx-label class="fw-bold fs-6" [formModel]="dialogRef.formModel" name="lblLabel5" [default]="'Bài viết'"></codx-label>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel6" [default]="'Của tôi'"></codx-label>
                <codx-input type="switch" [checked]="false" field="owner" (valueChange)="valueChange($event)"></codx-input>
              </div>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel7" [default]="'Tôi được tag'"></codx-label>
                <codx-input type="switch" [checked]="false" field="tag" (valueChange)="valueChange($event)"></codx-input>
              </div>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel8" [default]="'Tôi được chia sẻ'"></codx-label>
                <codx-input type="switch" [checked]="false" field="share" (valueChange)="valueChange($event)"></codx-input>
              </div>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel9" [default]="'Công khai'"></codx-label>
                <codx-input type="switch" [checked]="false" field="publlic" (valueChange)="valueChange($event)"></codx-input>
              </div>
            </div>
          </div>
          <div class="d-flex align-items-top mb-2">
            <span class="me-2"><i class="icon-campaign"></i></span>
            <div class="d-flex flex-column w-100">
              <codx-label class="fw-bold fs-6" [formModel]="dialogRef.formModel" name="lblLabel10" [default]="'Tin tức sự kiện'"></codx-label>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel11" [default]="'Của tôi'"></codx-label>
                <codx-input type="switch" [checked]="false" field="WP_News.Owner" (valueChange)="valueChange($event)"></codx-input>
              </div>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel12" [default]="'Tôi được tag'"></codx-label>
                <codx-input type="switch" [checked]="false" field="WP_News.Tag" (valueChange)="valueChange($event)"></codx-input>
              </div>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel13" [default]="'Tôi được chia sẻ'"></codx-label>
                <codx-input type="switch" [checked]="false" field="WP_News.Share" (valueChange)="valueChange($event)"></codx-input>
              </div>
              <div class="d-flex align-items-center justify-content-between mb-2">
                <codx-label [formModel]="dialogRef.formModel" name="lblLabel14" [default]="'Công khai'"></codx-label>
                <codx-input type="switch" [checked]="false" field="WP_News.Publlic"  (valueChange)="valueChange($event)"></codx-input>
              </div>
            </div>
          </div>
          <div class="d-flex algin-items-center justify-content-between mb-2">
            <div>
              <span class="me-2"><i class="icon-image"></i></span>
              <codx-label class="fw-bold fs-6" [formModel]="dialogRef.formModel" name="lblLabel15" [default]="'Hình ảnh'"></codx-label>
            </div>
            <codx-input type="switch" [checked]="false" field="image" (valueChange)="valueChange($event)"></codx-input>
          </div>
          <div class="d-flex algin-items-center justify-content-between mb-2">
            <div>
              <span class="me-2"><i class="icon-video_library"></i></span>
              <codx-label class="fw-bold fs-6" [formModel]="dialogRef.formModel" name="lblLabel15" [default]="'Video'"></codx-label>
            </div>
            <codx-input type="switch" [checked]="false" field="video" (valueChange)="valueChange($event)"></codx-input>
          </div>
        </div>
      </div>
    </div>
    <div class="col-9 h-100 overflow-auto">
      <ng-container *ngIf="lstData?.length > 0;tmpEmpty">
        <div class="row justify-content-center bg-body p-2" *ngFor="let item of lstData">
          <div class="col-6">
            <div class="d-flex flex-column w-100">
              <div class="d-flex align-items-top justify-content-between mb-2 w-100">
                <div class="d-flex align-items-center">
                  <codx-img [objectId]="item?.createdBy" [objectType]="'AD_Users'" [width]="30" [cssClass]="'me-2'"></codx-img>
                  <div class="d-flex flex-column">
                    <div class="d-flex align-items-center mb-1">
                      <div class="fw-bold me-2" *ngIf="item?.createdName">
                        <span>{{item?.createdName}}</span>
                      </div>
                      <div ngbDropdown class="dropdown" *ngIf="item?.tagName">
                        <button ngbDropdownToggle type="button" id="dropdown1">
                          <span [innerHTML]="item?.tagName"></span>
                        </button>
                        <div ngbDropdownMenu aria-labelledby="dropdown1" class="d-flex flex-column">
                          <div ngbDropdownItem class="d-flex flex-column mb-2">
                            <span calss="text-dark">Danh sách người gắn thẻ</span>
                          </div>
                          <ng-container *ngFor="let perItem of item.permissions">
                            <div ngbDropdownItem class="d-flex align-items-center p-2" *ngIf="perItem.memberType == '3'">
                              <codx-img [objectId]="perItem.objectID" [objectName]="perItem.objectName" [objectType]="'AD_Users'" [width]="30" [imgClass]="'me-2'"></codx-img>
                              <div class="d-flex flex-column">
                                <span>{{perItem.objectName}}</span>
                              </div>
                            </div>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                    <div class="d-flex alig-items-center">
                      <codx-date [value]="item.createdOn" option="f" className="text-gray-700 me-4" *ngIf="item?.createdOn"></codx-date>
                      <div  *ngIf="item?.approveControl == '1' && item?.approveStatus == '3'">
                        <span [title]="'WP038' | mssg | async" class="icon-security text-primary icon-16 me-4"></span>
                      </div>
                      <div class="badge badge-md badge-light rounded-1 px-2 fs-7 me-2" *ngIf="item?.shareControl">
                        <codx-vll [name]="'WP001'" [value]="item.shareControl" [showText]="true" [showIcon]="true"
                          [className]="'text-gray-600 vll-post'" [icoCss]="'w-13px h-13px'"
                          [path]="'assets/themes/sys/default/img/'" [showBgColor]="true">
                        </codx-vll>
                      </div>
                      <div ngbDropdown class="dropdown" *ngIf="item?.shareName">
                        <button ngbDropdownToggle type="button" id="dropdown2">
                          <span [innerHTML]="item?.shareName"></span>
                        </button>
                        <div ngbDropdownMenu aria-labelledby="dropdown2" class="d-flex flex-column">
                          <div ngbDropdownItem class="d-flex flex-column mb-2">
                            <span calss="text-dark">Danh sách người chia sẻ</span>
                          </div>
                          <ng-container *ngFor="let perItem of item.permissions">
                            <div ngbDropdownItem class="d-flex align-items-center p-2" *ngIf="perItem.memberType == '2'">
                              <codx-img [objectId]="perItem.objectID" [objectName]="perItem.objectName" [objectType]="'AD_Users'" [width]="30" [imgClass]="'me-2'"></codx-img>
                              <div class="d-flex flex-column">
                                <span>{{perItem.objectName}}</span>
                              </div>
                            </div>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- <div ngbDropdown class="dropdown">
                  <button ngbDropdownToggle type="button" class="btn btn-clean btn-hover-light-primary btn-sm btn-icon" id="dropdownMoreFC" >
                    <i class="fas fa-ellipsis-h"></i>
                  </button>
                  <div ngbDropdownMenu aria-labelledby="dropdownMoreFC">
                    <div ngbDropdownItem class="d-flex align-items-center cursor-pointer" *ngIf="item?.write">
                      <span class="icon-edit icon-16 me-2 text-primary"></span>
                      <codx-label [formModel]="dialogRef.formModel" name="lblEdit" default="Chỉnh sửa"></codx-label>
                    </div>
                    <div ngbDropdownItem class="d-flex align-items-center cursor-pointer" *ngIf="item?.delete">
                      <span class="icon-close icon-16 me-2 text-danger"></span>
                      <codx-label [formModel]="dialogRef.formModel" name="lblDelete" default="Xóa"></codx-label>
                    </div>
                    <div ngbDropdownItem class="d-flex align-items-center cursor-pointer" *ngIf="item?.share && item?.approveStatus != '3'">
                      <span class="icon-share icon-16 me-2"></span>
                      <codx-label [formModel]="dialogRef.formModel" name="lblShare" default="Chia sẻ"></codx-label>
                    </div>
                    <div ngbDropdownItem class="d-flex align-items-center cursor-pointer">
                      <span class="icon-save icon-save_alt icon-16 me-2"></span>
                      <codx-label [formModel]="dialogRef.formModel" name="lblSave" default="Thêm vào kho lưu trữ">
                      </codx-label>
                    </div>
                  </div>
                </div> -->
              </div>
            </div>
            <div class="d-flex flex-column w-100">
                <div class="text-dark mb-2" [innerHTML]="item.content | safe: 'html'" *ngIf="item?.content"></div>
                <div class="text-start mb-2" *ngIf="item?.isShortContent">
                  <codx-label [formModel]="dialogRef.formModel" name="lblViewMore" [default]="'Xem thêm'" [classList]="'text-primary'"></codx-label>
                </div>
                <div class="w-100 mb-2" *ngIf="item?.attachments > 0">
                  <codx-view-files 
                    [objectID]="item?.recID" 
                    [objectType]="'WP_Comments'" 
                    [formModel]="dialogRef.formModel"
                    [medias]="item?.medias" 
                    (selectFile)="clickViewDetail($event)">
                  </codx-view-files>
                </div>
                <div class="w-100" *ngIf="item.category == CATEGORY.SHARE || item.category == CATEGORY.FEEDBACK">
                  <wp-post-share [objectID]="item?.refID" [refType]="item?.refType" [formModel]="dialogRef.formModel"></wp-post-share>
                </div>
            </div>
            <div class="d-flex flex-column w-100">
              <treeview-comment 
                [funcID]="dialogRef?.formModel?.funcID" 
                [formModel]="dialogRef?.formModel"
                [objectType]="'WP_Comments'" 
                [data]="item" 
                [objectID]="item.recID">
              </treeview-comment>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
<ng-template #tmpEmpty>
  <div class="d-flex flex-column align-items-center justify-content-center w-100 h-100">
    <img src="../assets/themes/sys/default/img/DataEmpty.svg" width="200px"/>
    <div class="fw-bold mt-1 text-center">{{'SYS011' | mssg | async}}</div>
  </div>
</ng-template>