<form [formGroup]="sendEmailForm" (ngSubmit)="onSave($event)" class="h-100">
    <codx-form headerText="Gửi mail cho người nhận" subHeaderText="" [body]="body" [footer]="footer" [dialog]="dialog">
        <ng-template popup adde #body>
            <div class="request-to">
                <div class="d-flex align-items-center">
                    <codx-label default="Gửi đến" class="w-100px"></codx-label>
                    <codx-input [refValue]="gridViewSetup!=null?gridViewSetup['Owner']['referedValue']:null"
                        placeholder="Chọn tài khoản" type="combobox" style="width:100%" [Group]="sendEmailForm"
                        ControlName="to" [multiple]="true">
                    </codx-input>
                    <span class="btn btn-sm btn-icon btn-light-primary">
                        <span class="icon-connection-point icon-18"></span>
                    </span>
                </div>
                <div class="d-flex align-items-center flex-grow-1 mt-2">
                    <codx-label default="Từ" style="width:80px"></codx-label>
                    <div class="d-flex align-items-center me-2 mail-user">
                        <div class="symbol symbol-20px symbol-circle me-2">
                            <codx-img #image [objectId]="user.userID"></codx-img>
                        </div>
                        <div class="text-dark-75">{{user.userName}}</div>
                    </div>
                </div>
            </div>
            <div class="d-flex align-items-center flex-grow-1 mt-2">
                <codx-label default="Công việc" class="w-100px"></codx-label>
                <div class="d-flex align-items-center w-100">
                    <codx-input type="text" [Group]="sendEmailForm" ControlName="subject" style="width:100%">
                    </codx-input>
                </div>
            </div>
            <div class="p-2">
                <!-- <thumbnail data="{{getJSONString(data.files)}}"></thumbnail>      -->
            </div>
            <div class="form-group mt-3 p-2">
                <div class="d-flex align-items-center justify-content-between">
                    <label>Nội dung chi tiết</label>
                    <div class="dropdown">
                        <button class="btn btn-xs btn-secondary d-flex align-items-center border-0 dropdown-toggle"
                            type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <span>Chon trường dữ liệu</span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item">
                                <div class="d-flex flex-column">
                                    <span class="text-dark">Cấp quyền xem tài liệu</span>
                                    <i class="tex font-size-sm mt-1">Xin cấp quyền full xem tài liệu</i>
                                </div>
                            </a>
                            <div class="subheader-separator subheader-separator-ver mt-1 ms-1 bg-gray-400">
                            </div>
                            <a class="dropdown-item">
                                <span class="text-primary">Thêm mẫu mail</span>
                            </a>
                        </div>
                    </div>
                </div>
                <codx-input type="textarea" [crrValue]="''" [Group]="sendEmailForm" ControlName="content">
                </codx-input>
            </div>
        </ng-template>
        <ng-template #footer>
            <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex justify-content-start align-items-center">
                    <button type="button" class="btn btn-light-primary ">
                        <i class="icon-cloud_upload fs-5"></i>Upload file
                    </button>
                    <div class="d-flex align-items-center ms-2">
                        <codx-input type="switch" class="test-check" [Group]="sendEmailForm" ControlName="saveTemplate">
                        </codx-input>
                        <codx-label default="Lưu làm template" class="ms-2"></codx-label>
                    </div>
                </div>
                <div class="d-flex justify-content-end">
                    <button class="btn btn-primary" type="submit" name="next">
                        Lưu & tiếp tục
                    </button>
                    <button class="btn btn-primary" type="submit">
                        Lưu
                    </button>
                </div>
            </div>
        </ng-template>
    </codx-form>
</form>

<!-- <attachment #attachment type="center" objectType="TM_Tasks" objectId="628c326c590addf224627f42" functionID="WPT03941" (fileAdded)="fileAdded($event)"></attachment> -->