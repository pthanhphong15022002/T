<codx-form
  [dialog]="dialog"
  [body]="body"
  [footer]="footer"
  [headerText]="headerText"
  *ngIf="isAfterRender"
>
  <ng-template popup add #body>
    <div class="card-body card-scroll mx-5 mx-xl-18 pb-15">
      <div class="text-center mb-6"></div>
      <ul class="flex-center nav nav-tabs nav-pills flex-row border-0 mb-6">
        <li class="nav-item m-0" *ngIf="setupShowForm.showFullName">
          <a
            class="nav-link text-center flex-center border border-gray-300 rounded-0 min-w-100px py-3 px-4"
            [ngClass]="currentTab == 1 ? 'active' : ''"
            data-bs-toggle="tab"
            id="#pane_1"
            (click)="changeTab(1)"
          >
            <span class="d-flex flex-column">
              <span class="icon-text_format icon-24 m-auto mb-1"></span>
              <span class="fs-6 fw-bold">
                <codx-label
                  fiedName="FullName"
                  [formModel]="formModel"
                ></codx-label>
              </span>
            </span>
          </a>
        </li>
        <!--<li class="nav-item m-0"  *ngIf="setupShowForm.showSign">
          <a class="nav-link text-center flex-center border border-gray-300 rounded-0 min-w-100px py-3 px-4"
            [ngClass]="currentTab==2?'active':''" data-bs-toggle="tab" id="#pane_2" (click)="changeTab(2)">
            <span class="d-flex flex-column ">
              <span class=" icon-gesture icon-24 m-auto mb-1"></span>
              <span class="fs-6 fw-bold">
                <codx-label default="Ký" name="lblSignature1" [formModel]="formModel"></codx-label>
              </span>
            </span>
          </a>
        </li> -->
        <li class="nav-item m-0" *ngIf="setupShowForm.showSignature1">
          <a
            class="nav-link text-center flex-center border border-gray-300 rounded-0 min-w-100px py-3 px-4"
            [ngClass]="currentTab == 3 ? 'active' : ''"
            data-bs-toggle="tab"
            id="#pane_3"
            (click)="changeTab(3)"
          >
            <span class="d-flex flex-column">
              <span class="icon-looks_one icon-24 m-auto mb-1"></span>
              <span class="fs-6 fw-bold">
                <codx-label
                  fiedName="Signature1"
                  [formModel]="formModel"
                ></codx-label>
              </span>
            </span>
          </a>
        </li>
        <li class="nav-item m-0" *ngIf="setupShowForm.showSignature2">
          <a
            class="nav-link text-center flex-center border border-gray-300 rounded-0 min-w-100px py-3 px-4"
            [ngClass]="currentTab == 4 ? 'active' : ''"
            data-bs-toggle="tab"
            id="#pane_4"
            (click)="changeTab(4)"
          >
            <span class="d-flex flex-column">
              <span class="icon-looks_two icon-24 m-auto mb-1"></span>
              <span class="fs-6 fw-bold">
                <codx-label
                  fiedName="Signature2"
                  [formModel]="formModel"
                ></codx-label>
              </span>
            </span>
          </a>
        </li>
        <li class="nav-item m-0" *ngIf="setupShowForm.showStamp">
          <a
            class="nav-link text-center flex-center border border-gray-300 rounded-0 min-w-100px py-3 px-4"
            [ngClass]="currentTab == 5 ? 'active' : ''"
            data-bs-toggle="tab"
            id="#pane_5"
            (click)="changeTab(5)"
          >
            <span class="d-flex flex-column">
              <span class="icon-filter_tilt_shift icon-24 m-auto mb-1"></span>
              <span class="fs-6 fw-bold">
                <codx-label
                  fiedName="Stamp"
                  [formModel]="formModel"
                ></codx-label>
              </span>
            </span>
          </a>
        </li>
      </ul>
      <div class="tab-content py-5">
        <div
          class="tab-pane fade"
          id="pane_1"
          *ngIf="setupShowForm.showFullName"
          [ngClass]="currentTab == 1 ? 'active show' : ''"
        >
          <div class="row">
            <div class="col">
              <span
                class="d-flex flex-column text-center btn btn-outline btn-outline-primary w-100 p-3 mb-3"
              >
                <codx-label
                  name="lblSelectedFont"
                  [default]="data?.fullName"
                  [style]="'font-family: ' + selectedFont + ';'"
                ></codx-label>
              </span>
            </div>
          </div>
          <div class="row">
            <div
              class="col-6"
              *ngFor="let font of vllFontStyle; let index = index"
            >
              <span
                class="btn btn-outline border d-flex flex-stack active p-3 mb-3"
                (click)="changeSelectedFont(font.text, index)"
              >
                <codx-label
                  [id]="'areaFullName' + index"
                  name="lblSelectedFont"
                  [default]="data?.fullName"
                  [style]="'font-family: ' + font.text + ';'"
                ></codx-label>
                <span class="me-3">
                  <codx-input
                    type="radio"
                    name="radio"
                    [checked]="selectedFont == font.text"
                    labelPosition="After"
                    [disabled]="false"
                    value="radio"
                  >
                  </codx-input>
                </span>
              </span>
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          *ngIf="setupShowForm.showSign"
          id="pane_2"
          [ngClass]="currentTab == 2 ? 'active show' : ''"
        >
          <div
            class="d-flex align-items-center rounded border-primary border p-10"
          >
            <div class="m-auto">
              <codx-img #image objectId="ADMIN" class="mh-100px"></codx-img>
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="pane_3"
          [ngClass]="currentTab == 3 ? 'active show' : ''"
          *ngIf="setupShowForm.showSignature1"
        >
          <div class="m-auto text-center">
            <codx-img
              #imgSignature1
              class="border border-gray-300 border-dashed rounded symbol symbol-200 square me-2 image-inpt-wrapper fullImage"
              referType="S1"
              [width]="200"
              [funcId]="'ESS21'"
              [objectId]="data.recID"
              [objectType]="'ES_Signatures'"
              data-kt-menu-trigger="click"
              data-kt-menu-attach="parent"
              data-kt-menu-placement="bottom-end"
              data-kt-menu-flip="bottom"
              [isAllowEdit]="true"
              [imgOn]="data?.modifiedOn"
            >
            </codx-img>
            <div class="mt-8">
              {{ "ES008" | mssg | async }}
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="pane_4"
          [ngClass]="currentTab == 4 ? 'active show' : ''"
          *ngIf="setupShowForm.showSignature2"
        >
          <div class="m-auto text-center">
            <codx-img
              #imgSignature2
              class="border border-gray-300 border-dashed rounded symbol symbol-200 square me-2 image-inpt-wrapper fullImage"
              [width]="200"
              referType="S2"
              [funcId]="'ESS21'"
              [objectId]="data.recID"
              [objectType]="'ES_Signatures'"
              data-kt-menu-trigger="click"
              data-kt-menu-attach="parent"
              data-kt-menu-placement="bottom-end"
              data-kt-menu-flip="bottom"
              [isAllowEdit]="true"
              [imgOn]="data?.modifiedOn"
            >
            </codx-img>
            <div class="mt-8">
              {{ "ES008" | mssg | async }}
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="pane_5"
          [ngClass]="currentTab == 5 ? 'active show' : ''"
          *ngIf="setupShowForm.showStamp"
        >
          <div class="m-auto text-center">
            <codx-img
              #imgStamp
              class="border border-gray-300 border-dashed rounded symbol symbol-200 square me-2 image-inpt-wrapper fullImage"
              [width]="200"
              [funcId]="'ESS21'"
              referType="S3"
              [objectId]="data.recID"
              [objectType]="'ES_Signatures'"
              data-kt-menu-trigger="click"
              data-kt-menu-attach="parent"
              data-kt-menu-placement="bottom-end"
              data-kt-menu-flip="bottom"
              [isAllowEdit]="true"
              [imgOn]="data?.modifiedOn"
            >
            </codx-img>
            <div class="mt-8">
              {{ "ES008" | mssg | async }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-primary" (click)="onSaveForm()">
        <codx-label
          default="OK"
          name="lblOK"
          [formModel]="formModel"
        ></codx-label>
      </button>
    </div>
  </ng-template>
</codx-form>

<ng-template #popupSupplier let-dialogSupplier>
  <div class="codx-form card w-100 h-100 rounded-0 border-0">
    <div class="card-header flex-column">
      <div class="d-flex align-items-center justify-content-between w-100">
        <div class="card-title">
          <div class="d-flex flex-column">
            <codx-label
              class="dialog-title line-clamp line-clamp-1"
              name="lblProcessTemplate"
              default="Chọn nhà cung cấp"
              [formModel]="formModel"
            ></codx-label>
          </div>
        </div>
        <div class="card-toolbar">
          <button
            type="button"
            class="btn btn-flex text-dark-75 text-hover-primary px-0"
            (click)="closePopupSupplier(dialogSupplier)"
          >
            <span class="icon-close icon-18"></span>
          </button>
        </div>
      </div>
    </div>
    <div class="card-body">
      <div class="form-group">
        <label class="me-2">
          <codx-label fiedName="Supplier" [formModel]="formModel"></codx-label>
        </label>
        <codx-input
          type="valuelist"
          field="supplier"
          [refValue]="cbxName['Supplier']"
          [crrValue]="data.supplier"
          (valueChange)="valueChange($event)"
        >
        </codx-input>
      </div>
    </div>
    <div class="card-footer border-0">
      <div class="d-flex justify-content-end">
        <a class="btn btn-primary" (click)="onSaveSupplier(dialogSupplier)">
          <codx-label name="lblOk" default="OK" [formModel]=""> </codx-label>
        </a>
      </div>
    </div>
  </div>
</ng-template>
