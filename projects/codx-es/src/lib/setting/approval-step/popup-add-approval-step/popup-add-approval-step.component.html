<codx-form [dialog]="dialog" [headerText]="header1" [subHeaderText]="subHeaderText" [body]="body" [footer]="footer"
  [formModel]="formModel">
  <ng-template popup add #body>
    <div class="tab-content">
      <ejs-tab id="tab_orientation" #orientationTab [showCloseButton]='false' heightAdjustMode='Auto'
        headerPlacement="Left">
        <e-tabitems>
          <e-tabitem [header]='headerText[0]'>
            <ng-template #content>
              <div id="rome" class="tabpanel">
                <div class="tab-content">
                  <div class="d-flex flex-column mb-4">
                    <codx-label class=" fw-bold" default="Mô tả" fiedName="Memo" formName="Users"
                      gridviewName="grvUsers">
                    </codx-label>
                    <codx-input type="text" name="text" ControlName="memo" [Group]="dialogApprovalStep" placeholder=""
                      ngDefaultControl class="form-control"></codx-input>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <div class=" row mt-3">
                      <div class="col-6">
                        <codx-label default="Hành động" fiedName="StepType" [formModel]="formModel">
                        </codx-label>
                        <codx-input type="valuelist" name="valuelist" ngDefaultControl [refValue]="cbxName['StepType']"
                          field="stepType" (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                      <div class="col-5">
                        <codx-label default="Thời gian xử lí (giờ)" fiedName="Leadtime" formName="Users"
                          gridviewName="grvUsers">
                        </codx-label>
                        <codx-input type="number" name="number" field="leadtime" ngDefaultControl [min]="0"
                          placeholder="0" (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                    </div>
                  </div>

                  <div class="d-flex flex-column mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-4 ">
                      <codx-label default="Người xét duyệt" fiedName="Attendees" formName="Users"
                        gridviewName="grvUsers">
                      </codx-label>
                      <span class=" icon-group_add text-primary fs-1"></span>
                    </div>
                    <div class="d-flex align-items-center mb-4">
                      <div class="symbol symbol-35px symbol-circle me-4">
                        <codx-img #image objectId="ADMIN"></codx-img>
                      </div>
                      <div class="d-flex flex-column flex-grow-1">
                        <div class="text-dark fw-bold fs-6 font-weight-bolder">Trần Quốc
                          Hoàn</div>
                        <span class="text-muted font-weight-bold">Chủ trì cuộc họp</span>
                      </div>
                    </div>
                    <div class="d-flex align-items-center mb-4">
                      <div class="symbol symbol-35px symbol-circle me-4">
                        <codx-img #image objectId="ADMIN"></codx-img>
                      </div>
                      <div class="d-flex flex-column flex-grow-1">
                        <div class="text-dark fw-bold fs-6 font-weight-bolder">Trần Quốc
                          Hoàn</div>
                        <span class="text-muted font-weight-bold">Thành viên</span>
                      </div>
                    </div>
                  </div>

                  <div class="d-flex flex-column mb-4">
                    <div class=" row mt-3">
                      <div class="col-4">
                        <div class="d-flex align-items-center">
                          <codx-input #checkbox type="switch" id="switch"
                            [checked]="this.dialogApprovalStep.value.representative" labelPosition="After"
                            field="representative" [disabled]="false" class="test-switch"
                            (valueChange)="valueChange($event)"></codx-input>
                          <codx-label fiedName="Representative" default="Duyệt đại diện" [formModel]="formModel"
                            class="ms-2"></codx-label>
                        </div>
                      </div>
                      <div class="col-4">
                        <div class="d-flex align-items-center">
                          <codx-input #checkbox type="switch" id="switch"
                            [checked]="this.dialogApprovalStep.value.sequential" labelPosition="After"
                            field="sequential" [disabled]="false" class="test-switch"
                            (valueChange)="valueChange($event)"></codx-input>
                          <codx-label fiedName="Sequential" default="Duyệt tuần tự" [formModel]="formModel"
                            class="ms-2"></codx-label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="d-flex flex-column mb-4">
                    <codx-label default="Đóng góp ý kiến" fiedName="Attendees" [formModel]="formModel">
                    </codx-label>
                    <div class=" row mt-3">
                      <div class="col-6">
                        <codx-label default="Cho ý kiến khi duyệt" fiedName="ApproveControl" [formModel]="formModel">
                        </codx-label>
                        <codx-input type="valuelist" name="valuelist" ngDefaultControl
                          [refValue]="cbxName['ApproveControl']" field="approveControl"
                          (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                      <div class="col-6">
                        <codx-label default="Cho ý kiến khi từ chối" fiedName="RejectControl" [formModel]="formModel">
                        </codx-label>
                        <codx-input type="valuelist" name="valuelist" ngDefaultControl
                          [refValue]="cbxName['RejectControl']" field="rejectControl"
                          (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </e-tabitem>
          <e-tabitem [header]='headerText[1]'>
            <ng-template #content>

              <div id="rome" class="tabpanel">
                <div class="tab-content">
                  <!--begin::Title-->
                  <div class="d-flex justify-content-between align-items-center mb-4 ">
                    <h4 class="fw-bolder text-gray-800 d-block mb-2">
                      <codx-label default="Người xét duyệt" fiedName="Attendees" [formModel]="formModel">
                      </codx-label>
                    </h4>
                    <span class=" icon-group_add text-primary fs-1"></span>
                  </div>
                  <!--end::Title-->
                  <!--begin::User item-->
                  <div class="d-flex align-items-center mb-4">
                    <!--begin::Symbol-->
                    <div class="symbol symbol-35px symbol-circle me-4" data-bs-toggle="tooltip" title=""
                      data-bs-original-title="Trần Quốc Hoàn">
                      <img alt="Pic" src="../../../assets/themes/sys/default/light/img/avatar_default.svg">
                      <span
                        class="symbol-badge badge badge-circle bg-primary top-100 start-100 text-white fs-8">R</span>
                    </div>
                    <!--end::Symbol-->
                    <!--begin::Text-->
                    <div class="d-flex flex-column flex-grow-1">
                      <div class="text-dark fw-bold fs-6 font-weight-bolder">Trần Quốc
                        Hoàn</div>
                      <span class="text-muted font-weight-bold">Chủ trì cuộc họp</span>
                    </div>
                    <!--end::Text-->

                  </div>
                  <!--end::User item-->
                  <!--begin::User item-->
                  <div class="d-flex align-items-center mb-4">
                    <!--begin::Symbol-->
                    <div class="symbol symbol-35px symbol-circle me-4" data-bs-toggle="tooltip" title=""
                      data-bs-original-title="Võ Văn Quang">
                      <img class="empImg" alt="Pic"
                        src="../../../assets/themes/sys/default/light/img/avatar_default.svg">
                      <span class="symbol-badge badge badge-circle bg-dark top-100 start-100 text-white fs-8">0</span>
                    </div>
                    <!--end::Symbol-->
                    <!--begin::Text-->
                    <div class="d-flex flex-column flex-grow-1">
                      <div class="text-dark fw-bold fs-6 font-weight-bolder">Trần Quốc
                        Hoàn</div>
                      <span class="text-muted font-weight-bold">Thành viên</span>
                    </div>
                    <!--end::Text-->
                    <!--begin::label-->
                    <div class="d-flex flex-column justify-content-end">
                      <span class="badge badge-light-danger mb-1">Không tham gia</span>
                      <span class="text-muted font-weight-bold text-center"> 1 giờ trước </span>
                    </div>
                    <!--end::label-->
                  </div>
                  <!--end::User item-->
                  <div class="text-center">
                    <div class="Participants d-flex align-items-center w-275px mx-auto">
                      <a href="#" class="d-flex align-items-center text-dark text-hover-primary me-5">
                        <span
                          class="badge badge-sm badge-circle btn-danger top-100 start-100 text-white fs-8 me-1">A</span>
                        Chủ trì
                      </a>
                      <a href="#" class="d-flex align-items-center text-dark text-hover-primary me-5">
                        <span
                          class="badge badge-sm badge-circle btn-success top-100 start-100 text-white fs-8 me-1">S</span>
                        Thư ký
                      </a>
                      <a href="#" class="d-flex align-items-center text-dark text-hover-primary me-5">
                        <span
                          class="badge badge-sm badge-circle btn-primary top-100 start-100 text-white fs-8 me-1">P</span>
                        Tham dự
                      </a>
                    </div>
                  </div>

                </div>
              </div>
            </ng-template>
          </e-tabitem>
          <e-tabitem [header]='headerText[2]'>
            <ng-template #content>
              <div id="rome" class="tabpanel">

                <div class="tab-content">
                  <!--begin::Title-->
                  <div class="d-flex justify-content-between align-items-center mb-4 ">
                    <h4 class="fw-bolder text-gray-800 d-block mb-2">
                      <codx-label default="Thiết lập mẫu email cho từng trường hợp:" [formModel]="formModel"
                        fiedName="Attendees">
                      </codx-label>
                    </h4>
                  </div>


                  <!--end::Title-->
                  <div class="d-flex flex-column mb-4">
                    <div class=" row mt-1">
                      <div class="col-4">
                        <div class="d-flex align-items-center">
                          <codx-input #checkbox type="switch" id="switch"
                            [checked]="this.dialogApprovalStep.value.eSign" labelPosition="After" field="eSign"
                            [disabled]="false" class="test-switch" (valueChange)="valueChange($event)"></codx-input>
                          <label class="ms-2 mt-1">
                            <codx-label default="Gửi email" [formModel]="formModel" fiedName="Attendees">
                            </codx-label>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="d-flex flex-column mb-4">
                    <!--begin::Label-->
                    <codx-label class=" fw-bold" default="Email gửi yêu cầu duyệt" fiedName="Category"
                      [formModel]="formModel">
                    </codx-label>
                    <!--end::Label-->

                    <codx-input type="valuelist" name="valuelist" ngDefaultControl
                      [crrValue]="this.dialogApprovalStep.value.category" [refValue]="cbxName['Category']"
                      field="category" (valueChange)="valueChange($event)">
                    </codx-input>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <!--begin::Label-->
                    <codx-label class=" fw-bold" default="Email đồng thuận/duyệt" fiedName="Category"
                      [formModel]="formModel">
                    </codx-label>
                    <!--end::Label-->

                    <codx-input type="valuelist" name="valuelist" ngDefaultControl
                      [crrValue]="this.dialogApprovalStep.value.category" [refValue]="cbxName['Category']"
                      field="category" (valueChange)="valueChange($event)">
                    </codx-input>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <!--begin::Label-->
                    <codx-label class=" fw-bold" default="Email từ chối" fiedName="Category" [formModel]="formModel">
                    </codx-label>
                    <!--end::Label-->

                    <codx-input type="valuelist" name="valuelist" ngDefaultControl
                      [crrValue]="this.dialogApprovalStep.value.category" [refValue]="cbxName['Category']"
                      field="category" (valueChange)="valueChange($event)">
                    </codx-input>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <!--begin::Label-->
                    <codx-label class=" fw-bold" default="Email trả làm lại" fiedName="Category"
                      [formModel]="formModel">
                    </codx-label>
                    <!--end::Label-->

                    <codx-input type="valuelist" name="valuelist" ngDefaultControl
                      [crrValue]="this.dialogApprovalStep.value.category" [refValue]="cbxName['Category']"
                      field="category" (valueChange)="valueChange($event)">
                    </codx-input>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <!--begin::Label-->
                    <codx-label class=" fw-bold" default="Email xin hủy yêu cầu duyệt" fiedName="Category"
                      [formModel]="formModel">
                    </codx-label>
                    <!--end::Label-->

                    <codx-input type="valuelist" name="valuelist" ngDefaultControl
                      [crrValue]="this.dialogApprovalStep.value.category" [refValue]="cbxName['Category']"
                      field="category" (valueChange)="valueChange($event)">
                    </codx-input>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <!--begin::Label-->
                    <codx-label class=" fw-bold" default="Email nhắc duyệt quá hạn" fiedName="Category"
                      [formModel]="formModel">
                    </codx-label>
                    <!--end::Label-->

                    <codx-input type="valuelist" name="valuelist" ngDefaultControl
                      [crrValue]="this.dialogApprovalStep.value.category" [refValue]="cbxName['Category']"
                      field="category" (valueChange)="valueChange($event)">
                    </codx-input>
                  </div>
                  <div class="d-flex align-items-center mb-4">
                    <span class="fw-bolder text-gray-800 d-block mb-2 text-primary">
                      <codx-label default="Thời gian gửi" [formModel]="formModel" name="lblTime">
                      </codx-label>
                    </span>


                  </div>
                  <div class="d-flex flex-column mb-4">
                    <div class=" row mt-1">
                      <div class="col-3">
                        <div class="d-flex align-items-center">
                          <codx-input #checkbox type="switch" id="switch"
                            [checked]="this.dialogApprovalStep.value.eSign" labelPosition="After" field="eSign"
                            [disabled]="false" class="test-switch" (valueChange)="valueChange($event)"></codx-input>
                          <label class="ms-2 mt-1">
                            <codx-label default="Gửi ngay" [formModel]="formModel" fiedName="Attendees">
                            </codx-label>
                          </label>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="d-flex align-items-center">
                          <label class="ml-2 mt-1">
                            <codx-label default="Gửi vào lúc" [formModel]="formModel" fiedName="Attendees">
                            </codx-label>
                          </label>
                          <div class="col-6">
                            <ejs-timepicker id="workHourStart" showClearButton="false" [value]="this.time"
                              class="test-datetime" (change)="valueEndTimeChange($event)"
                              [value]="dialogApprovalStep.value.endDate"></ejs-timepicker>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="separator my-5"></div>
                </div>
              </div>
            </ng-template>
          </e-tabitem>
          <e-tabitem [header]='headerText[3]'>
            <ng-template #content>
              <div id="rome" class="tabpanel">
                <div class="tab-content">
                  <div class="d-flex justify-content-center mb-4" (click)="extendShowPlan()">
                    <div class="d-flex align-items-center w-auto extend-title">
                      <span class="text-blue text-hover-primary_darker fw-bolder me-1">
                        <codx-label name="lblOverdue" default="Thiết lập xử lí quá hạn" [formModel]="formModel">
                        </codx-label>
                      </span>
                      <span *ngIf="showPlan"
                        class="icon-keyboard_arrow_down icon-16 text-primary text-hover-primary_darker"></span>
                      <span *ngIf="!showPlan"
                        class="icon-keyboard_arrow_up icon-16 text-primary text-hover-primary_darker"></span>
                    </div>
                  </div>
                  <div class="d-flex flex-column mb-4" *ngIf="showPlan">
                    <div class="row mt-3 ">
                      <div class="col-6">
                        <codx-label default="Xử lí động khi quá hạn" fiedName="OverdueControl" [formModel]="formModel">
                        </codx-label>
                        <codx-input type="valuelist" name="valuelist" ngDefaultControl
                          [refValue]="cbxName['OverdueControl']" field="overdueControl"
                          (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                      <div class="col-3">
                        <codx-label default="Thời gian nhắc" fiedName="Reminder" [formModel]="formModel">
                        </codx-label>
                        <codx-input type="valuelist" name="valuelist" ngDefaultControl [refValue]="cbxName['Reminder']"
                          field="reminder" (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                      <div class="col-3">
                        <codx-label default="Số lần lặp" fiedName="Loops" [formModel]="formModel">
                        </codx-label>
                        <codx-input type="number" name="number" ngDefaultControl [min]="0" placeholder="0" field="loops"
                          (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex justify-content-center mb-4" (click)="extendShowPlan1()">
                    <div class="d-flex align-items-center w-auto extend-title">
                      <span class="text-blue text-hover-primary_darker fw-bolder me-1">
                        <codx-label name="lblCancel" default="Thiết lập hủy/thu hồi" [formModel]="formModel">
                        </codx-label>
                      </span>
                      <span *ngIf="showPlan1"
                        class="icon-keyboard_arrow_down icon-16 text-primary text-hover-primary_darker"></span>
                      <span *ngIf="!showPlan1"
                        class="icon-keyboard_arrow_up icon-16 text-primary text-hover-primary_darker"></span>
                    </div>
                  </div>
                  <div class="d-flex flex-column mb-4" *ngIf="showPlan1">
                    <div class="row mt-3 ">
                      <div class="col-7">
                        <codx-label default="Cho phép hủy yêu cầu khi đã duyệt" fiedName="CancelControl"
                          [formModel]="formModel">
                        </codx-label>
                        <codx-input type="valuelist" name="valuelist" ngDefaultControl
                          [refValue]="cbxName['CancelControl']" field="cancelControl"
                          (valueChange)="valueChange($event)">
                        </codx-input>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </e-tabitem>
        </e-tabitems>
      </ejs-tab>
    </div>
  </ng-template>
  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <a class="btn btn-primary font-weight-bold" (click)="onSaveForm()">
        <codx-label name="lblSave" default="Lưu" [formModel]="formModel"></codx-label>
      </a>
    </div>
  </ng-template>

</codx-form>


<ng-template #addLink let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Link cuộc họp</h4>
    <button type="button" class="btn btn-xs btn-icon btn-light btn-hover-primary" aria-label="Close"
      (click)="modal.dismiss()">
      <span class="icon-close icon-20"></span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group row">
      <div class="col-4">
        <label>Đường dẫn</label>
      </div>
    </div>
    <div class="form-group row">
      <codx-input type="text" class="form-control" placeholder="https://home.suremeet.vn/" [crrValue]="link"
        (valueChange)="changeLink($event)"></codx-input>
    </div>

  </div>
  <div class="modal-footer" (click)="modal.close()">
    <button type="button" class="btn btn-primary">Lưu</button>
  </div>
</ng-template>

<ng-template #popupDevice let-modal>
  <!--begin::Card body-->
  <div class="modal-header">
    <div class="d-flex flex-column flex-grow-1">
      <div class="d-flex justify-content-between align-items-center">
        <h2 id="modal-basic-title">Thiết bị</h2>
        <button type="button" class="btn btn-xs btn-icon btn-light btn-hover-primary" aria-label="Close"
          (click)="modal.dismiss()">
          <span class="icon-close icon-20 text-dark text-hover-primary"></span>
        </button>
      </div>
      <div class="text-dark-50">Chọn các thiết bị đã tích tích hợp sẵn trong phòng</div>
    </div>

  </div>
  <div class="modal-body">
    <div class="py-2" *ngFor="let item of tmplstDevice">
      <!--begin::Item-->
      <div class="d-flex flex-stack">
        <div class="d-flex">
          <span class="text-dark icon-wifi me-2 p-1 "></span>
          <div class="d-flex flex-column">
            <a href="#" class="text-dark text-hover-primary fw-bolder">{{item.text}}</a>
          </div>
        </div>
        <div class="d-flex justify-content-end">
          <div class="form-check form-check-solid form-switch">
            <input class="form-check-input w-35px h-20px" type="checkbox" id="googleswitch" [checked]="item.isSelected"
              (change)="checkedChange($event, item)">
            <label class="form-check-label" for="googleswitch"></label>
          </div>
        </div>
      </div>
      <!--end::Item-->
      <!-- <div class="separator separator-dashed my-5"></div> -->
    </div>
    <!--end::Card body-->
  </div>
  <div class="modal-footer" (click)="modal.close()">
    <button type="button" class="btn btn-primary">Lưu</button>
  </div>

</ng-template>
<ng-template>
  <!-- <attachment #attachment type="right" objectType="ES_Signatures" [objectId]="" [functionID]="modelPage.functionID"
    (fileAdded)="fileAdded($event)"></attachment> -->
</ng-template>
