<codx-form [dialog]="dialog" [headerText]="headerText" [subHeaderText]="subHeaderText" [body]="body" [footer]="footer"
  [formControl]="dialogETemplate" *ngIf="isAfterRender">
  <ng-template #body>
    <div class="request-to">
      <div id="from">
        <div class="d-flex justify-content-between border-bottom mb-2 p-2">
          <div class="d-flex align-items-center flex-grow-1">
            <div class="w-50px fw-bold">
              <codx-label name="lblTitleFrom" default="Từ:" formName="EmailTemplates" gridViewName="grvEmailTemplates">
              </codx-label>
            </div>
            <div class="w-100 me-2">
              <!-- <codx-input type="combobox" refValue="Users" field="from" (valueChange)="valueChange($event)">
              </codx-input> -->
            </div>
          </div>
          <span>
            <codx-input [showInput]="false" [multiple]="true" type="share" refValue="ES014" field="popup"
              (valueChange)="valueChange($event)">
            </codx-input>
          </span>
        </div>
      </div>
      <div class="d-flex justify-content-between border-bottom mb-2 p-2">
        <div class="d-flex align-items-center flex-grow-1">
          <div class="w-50px fw-bold">
            <codx-label default="Đến:" name="lblTitleTo" formName="EmailTemplates" gridViewName="grvEmailTemplates">
            </codx-label>
          </div>
          <div class="w-100 me-2">
            <!-- <codx-input type="combobox" refValue="Users" field="to" (valueChange)="valueChange($event)"></codx-input> -->
            <!-- <codx-img class="symbol symbol-20px symbol-circle me-2" #image objectId="ADMIN">
              </codx-img>
              <div class="text-gray-800">Dịp Bảo Ngọc</div>
              <span class="icon-close icon-16 ms-1 text-danger"></span> -->
          </div>
        </div>
        <div class="d-flex">
          <span class="btn btn-sm fw-bold text-primary" (click)="changeSendType('cc')">Cc</span>
          <span class="btn btn-sm fw-bold" (click)="changeSendType('bcc')">Bcc</span>
          <span>
            <codx-input [showInput]="false" [multiple]="true" type="share" refValue="ES014" field="popup"
              (valueChange)="valueChange($event)">
            </codx-input>
          </span>
        </div>
      </div>
      <div id="box_cc" *ngIf="showCC">
        <div class="d-flex justify-content-between border-bottom mb-2 p-2">
          <div class="d-flex align-items-center flex-grow-1">
            <div class="w-50px fw-bold">Cc:</div>
            <!-- <div class="d-flex align-items-center me-2 mail-user">
              <codx-img class="symbol symbol-20px symbol-circle me-2" #image objectId="ADMIN">
              </codx-img>
              <div class="text-gray-800">Lê Phạm Hoài Thương</div>
              <span class="icon-close icon-16 ms-1 text-danger"></span>
            </div>
            <div class="d-flex align-items-center me-2 mail-user">
              <codx-img class="symbol symbol-20px symbol-circle me-2" #image objectId="ADMIN">
              </codx-img>
              <div class="text-gray-800">Nguyễn Minh Đăng</div>
              <span class="icon-close icon-16 ms-1 text-danger"></span>
            </div> -->
          </div>
          <span>
            <codx-input [showInput]="false" [multiple]="true" type="share" refValue="ES014" field="popup"
              (valueChange)="valueChange($event)">
            </codx-input>
          </span>
          <!-- <span class="icon-person_add_alt_1 text-primary text-hover-dark icon-18"></span> -->
        </div>
      </div>
      <div id="box_bcc" *ngIf="showBCC">
        <div class="d-flex justify-content-between border-bottom mb-2 p-2">
          <div class="d-flex align-items-center flex-grow-1">
            <div class="w-50px fw-bold">Bcc:</div>
          </div>
          <span>
            <codx-input [showInput]="false" [multiple]="true" type="share" refValue="ES014" field="popup"
              (valueChange)="valueChange($event)">
            </codx-input>
          </span>
          <!-- <span class="icon-person_add_alt_1 text-primary text-hover-dark icon-18"></span> -->
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-between border-bottom mt-4">
      <div class="d-flex align-items-center flex-grow-1">
        <codx-input type="text" class="borderless" placeholder="Chủ đề email" ControlName="subject"
          [Group]="dialogETemplate">
        </codx-input>
      </div>
      <div ngbDropdown class=" dropdown">
        <button ngbDropdownToggle class="btn btn-sm btn-light d-flex align-items-center" type="button"
          id="dropdownMenuButton1" aria-expanded="false">
          <span>Chọn mẫu</span>
          <span class="icon-keyboard_arrow_down icon-16 ms-2"></span>
        </button>
        <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1">
          <li>
            <div class="mb-1 mx-3">
              <codx-input type="text" [disabled]="false" placeholder="Tìm kiếm" (valueChange)="valueChange($event)">
              </codx-input>
            </div>
          </li>
          <li>
            <a ngbDropdownItem href="#">
              <div class="d-flex flex-column">
                <span class="text-dark">Cấp quyền xem tài liệu</span>
                <i class="fs-7 mt-1">Xin cấp quyền full xem tài liệu</i>
              </div>
            </a>
          </li>
          <li>
            <a ngbDropdownItem href="#">
              <div class="d-flex flex-column">
                <span class="text-dark">Cấp quyền full</span>
                <i class="fs-7 mt-1">Xin cấp quyền full control</i>
              </div>
            </a>
          </li>
          <div class="separator mt-3 opacity-75"></div>
          <li>
            <a ngbDropdownItem href="#">
              <span class="text-primary">Thêm mẫu mail</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="d-flex justify-content-between align-items-center mt-4">
      <div class="d-flex align-items-center">
        <span class="icon-attach_email icon-18 me-2 text-primary"></span>
        <span class="text-primary fw-bold">
          <codx-label default="Đính kèm file" name="lblAttachment" formName="EmailTemplates"
            gridViewName="grvEmailTemplates"></codx-label>
        </span>
      </div>
      <button class="btn btn-sm btn-light d-flex align-items-center" type="button">
        <span>
          <codx-label default="Chọn trường dữ liệu" name="lblChooseField" formName="EmailTemplates"
            gridViewName="grvEmailTemplates"></codx-label>
        </span>
        <span class="icon-keyboard_arrow_down icon-16 ms-2"></span>
      </button>
    </div>
    <div class="request-box mt-4">
      <!-- <textarea class="form-control" rows="12" placeholder="Nhập nội dung..."></textarea> -->
      <codx-input type="textarea"></codx-input>
    </div>


    <div class="d-flex flex-column mb-4 mt-4">
      <div class="row mt-1">
        <div class="col-3" *ngIf="showIsTemplate">
          <div class="d-flex align-items-center">
            <label class="ms-2 mt-1">
              <codx-label default="Lưu thành template" fiedName="IsTemplate" formName="EmailTemplates"
                gridViewName="grvEmailTemplates">
              </codx-label>
            </label>
            <codx-input #checkbox type="switch" [checked]="dialogETemplate.value.isTemplate" field="isTemplate"
              (valueChange)="valueChange($event)">
            </codx-input>
          </div>
        </div>
        <div class="col-3" *ngIf="showIsPublish">
          <div class="d-flex align-items-center">
            <label class="ms-2 mt-1">
              <codx-label default="Dùng chung" formName="EmailTemplates" gridViewName="grvEmailTemplates"
                fiedName="IsPublish">
              </codx-label>
            </label>
            <codx-input type="switch" [checked]="dialogETemplate.value.isPublish" field="isPublish"
              (valueChange)="valueChange($event)">
            </codx-input>
          </div>
        </div>
        <div class="col-2" *ngIf="showSendLater">
          <div class="d-flex align-items-center">
            <label class="ms-2 mt-1">
              <codx-label default="Gửi ngay" formName="EmailTemplates" gridViewName="grvEmailTemplates"
                fiedName="SendLater">
              </codx-label>
            </label>
            <codx-input type="switch" [checked]="dialogETemplate.value.sendLater" field="sendLater"
              (valueChange)="valueChange($event)">
            </codx-input>
          </div>
        </div>
        <div class="col-4">
          <div class="d-flex align-items-center">
            <label class="mt-1">
              <codx-label default="Gửi vào lúc" formName="EmailTemplates" gridViewName="grvEmailTemplates"
                fiedName="SendTime">
              </codx-label>
            </label>
            <codx-input class="test-datetime" type="datetime" format="t" field="sendTime"
              [crrValue]="dialogETemplate.value.sendTime" (valueChange)="valueChange($event)"></codx-input>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <a class="btn btn-primary font-weight-bold" (click)="onSaveForm()">
        <codx-label name="lblSave" default="Lưu" formName="EmailTemplates" gridViewName="grvEmailTemplates">
        </codx-label>
      </a>
    </div>
  </ng-template>
</codx-form>
