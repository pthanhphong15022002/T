<div class="container-fluid">
  <div class="row">
    <div class="col-3 border border-2 overflow-auto" #paramEle>
      <div class="d-flex">
        <div class="float-start w-100">
          <h3 class="mt-5">Tham số báo cáo</h3>
        </div>
        <div class="float-end mt-3">
          <button class="btn btn-light" (click)="save()">
            <i class="icon-save"></i>
          </button>

        </div>
      </div>

      <div class="row p-3" *ngFor="let group of lstParent; let idx = index">
        <a
          [id]="group"
          (click)="collapseChange($event, group)"
          [attr.aria-expanded]="!collapses[idx]"
          [attr.aria-controls]="group"
          class="text-primary font-weight-500"
        >
          <div class="d-flex">
            <div class="w-100">
              <codx-label [name]="group"></codx-label>
            </div>
            <div><i class="icon-keyboard_arrow_down text-primary"></i></div>
          </div>
        </a>
        <div [id]="group" [ngbCollapse]="collapses[idx]">
          <div class="w-100">
            <ng-container>
              <!-- <div class="mt-3">
                <span class="text-muted"
                  ><codx-label name="lblTime" default="Thời gian"></codx-label
                ></span>
                <div>
                  <codx-dropdown-calendar
                    cssClass="w-100 button-radius"
                    cssPopup="h-600px w-800px"
                    (change)="dateChange($event)"
                  ></codx-dropdown-calendar>
                </div>
              </div>
              <div class="mt-3">
                <span class="text-muted"
                  ><codx-label
                    name="lblValuelist"
                    default="Giá trị Valuelist"
                  ></codx-label
                ></span>
                <div class="w-100 ms-5 mt-3">
                  <codx-input
                    type="checkBox"
                    labelPosition="right"
                    field="Done"
                    [crrValue]="isDone"
                    (valueChange)="valueChange($event)"
                  ></codx-input>
                  <codx-label
                    class="ms-3"
                    name="lblDone"
                    default="Hoàn thành"
                  ></codx-label>
                </div>
                <div class="w-100 ms-5 mt-3">
                  <codx-input
                    type="checkBox"
                    field="Assigned"
                    [crrValue]="isAssigned"
                    (valueChange)="valueChange($event)"
                  ></codx-input>
                  <codx-label
                    class="ms-3"
                    name="lblAssigned"
                    default="Chưa thực hiện"
                  ></codx-label>
                </div>
                <div class="w-100 ms-5 mt-3">
                  <codx-input
                    type="checkBox"
                    field="Inprocess"
                    [crrValue]="isInprocess"
                    (valueChange)="valueChange($event)"
                  ></codx-input>
                  <codx-label
                    class="ms-3"
                    name="lblInprocess"
                    default="Đang thực hiện"
                  ></codx-label>
                </div>
              </div>
              <div class="mt-3">
                <span class="text-muted"
                  ><codx-label
                    name="lblCombobox"
                    default="Giá trị Combobox"
                  ></codx-label
                ></span>
                <div class="w-100 mt-3">
                  <codx-input type="combobox"></codx-input>
                </div>
              </div>
              <div class="mt-3">
                <div class="d-flex">
                  <div class="w-100 float-start">
                    <span class="text-muted"
                      ><codx-label
                        name="lblCheckboxCbx"
                        default="Giá trị Checkbox + cbx"
                      ></codx-label
                    ></span>
                  </div>
                  <div class="float-end">
                    <codx-input class="float-right" type="switch"></codx-input>
                  </div>
                </div>
                <div class="w-100 mt-3">
                  <codx-input type="combobox"></codx-input>
                </div>
              </div>
              <div class="mt-3">
                <span class="text-muted"
                  ><codx-label
                    name="lblVllCbx"
                    default="Giá trị vll + combobox"
                  ></codx-label
                ></span>
                <div class="w-100 mt-3">
                  <codx-input type="valuelist"></codx-input>
                </div>
                <div class="w-100 mt-1">
                  <codx-input type="combobox"></codx-input>
                </div>
              </div>
              <div class="mt-3">
                <div class="d-flex">
                  <div class="w-100 float-start">
                    <span class="text-muted"
                      ><codx-label
                        name="lblCheckbox"
                        default="Giá trị Checkbox"
                      ></codx-label
                    ></span>
                  </div>
                  <div class="float-end">
                    <codx-input class="float-right" type="switch"></codx-input>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <span class="text-muted"
                  ><codx-label name="lblTextbox" default="Textbox"></codx-label
                ></span>
                <div class="w-100 mt-3">
                  <codx-input
                    type="textarea"
                    field="memo"
                    placeholder="Có chứa giá trị..."
                    format="ed2"
                    [crrValue]="textValue"
                    (valueChange)="valueChange($event)"
                  ></codx-input>
                </div>
              </div>
              <div class="mt-3">
                <span class="text-muted"
                  ><codx-label
                    name="lblNumberValue"
                    default="Giá trị kiểu số"
                  ></codx-label
                ></span>
                <div class="w-100 mt-3">
                  <div class="d-flex">
                    <div class="float-start me-1">
                      <codx-input type="number" placeholder="Từ"></codx-input>
                    </div>
                    <div class="float-end ms-1">
                      <codx-input type="number" placeholder="Đến"></codx-input>
                    </div>
                  </div>
                </div>
              </div> -->

              <div *ngFor="let item of parameters[group]" class="mt-3">
                <codx-label
                  [default]="item.labelName"
                  class="fw-bold text-muted"
                  *ngIf="item.isVisible"
                ></codx-label>

                  <ng-container *ngIf="item.dependences" >
                    <div class="w-100 mt-3" *ngFor="let child of lstParamsNotGroup" >
                      <div *ngIf="child.controlName == item.dependences">
                        <ng-container [ngSwitch]="child?.dataType">
                          <ng-container *ngSwitchCase="'string'">
                            <div class="w-100 mt-3" *ngIf="!child.referedType">
                              <codx-input
                                type="textarea"
                                [field]="child.controlName"
                                placeholder="Có chứa giá trị..."
                                format="ed2"
                                [rows]="2"
                                [crrValue]="child.defaultValue"
                                (valueChange)="valueChange($event,true)"
                              ></codx-input>
                            </div>
                            <div class="w-100 mt-3" *ngIf="child.referedType == '3'">
                              <codx-input
                                type="combobox"
                                [field]="child.controlName"
                                [crrValue]="child.defaultValue"
                                [refValue]="child.referedValue"
                                (valueChange)="valueChange($event,true)"
                              >
                              </codx-input>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'bool'">
                            <div
                              class="w-100 mt-1"
                              *ngIf="child.controlType == 'LVSwitch'"
                            >
                            <div class="d-flex">
                              <div class="w-100 float-start">
                                <span
                                  style="font-size:12px;font-weight: 400;"
                                  >{{child.labelName}}
                                </span>
                              </div>
                              <div class="float-end">
                                <codx-input
                                class="float-right"
                                type="switch"
                                [field]="child.controlName"
                                [crrValue]="
                                child.defaultValue ? child.defaulValue : false
                                "
                                (valueChange)="valueChange($event,true,'switch')"
                              ></codx-input>
                              </div>
                            </div>

                            </div>
                            <div
                              class="w-100 ms-5 mt-3"
                              *ngIf="child.controlType == 'LVCheckbox'"
                            >
                            <div class="d-flex">
                              <div class="float-start mx-5">
                                <codx-input
                                type="checkBox"
                                [field]="child.controlName"
                                [crrValue]="
                                child.defaultValue ? child.defaulValue : false
                                "
                                (valueChange)="valueChange($event,true,'checkbox')"
                              ></codx-input>
                              </div>
                              <div class="w-100 float-end">
                                <span
                                style="font-size:12px;font-weight: 400;"
                                >{{child.labelName}}
                              </span>
                              </div>
                            </div>

                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'DateTime'">
                            <div class="my-2">
                              <codx-dropdown-calendar
                                cssPopup="h-600px w-800px"
                                cssClass="w-100 button-radius"
                                (change)="changeValueDate($event,true)"
                              ></codx-dropdown-calendar>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'int'">
                            <div class="w-100 mt-3">
                              <div class="d-flex">
                                <div class="float-start me-1">
                                  <codx-input
                                    type="number"
                                    field="numberFrom"
                                    [crrValue]="
                                    child.defaultValue ? child.defaultValue : 0
                                    "
                                    (valueChange)="valueChange($event,true)"
                                    placeholder="Từ"
                                  ></codx-input>
                                </div>
                                <div class="float-end ms-1">
                                  <codx-input
                                    type="number"
                                    field="numberTo"
                                    [crrValue]="
                                    child.defaultValue ? child.defaultValue : 0
                                    "
                                    (valueChange)="valueChange($event,true)"
                                    placeholder="Đến"
                                  ></codx-input>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </ng-container>

                <ng-container [ngSwitch]="item?.dataType" *ngIf="item.isVisible">
                  <ng-container *ngSwitchCase="'string'">
                    <div class="w-100 mt-3" *ngIf="!item.referedType">
                      <codx-input
                        type="textarea"
                        [field]="item.controlName"
                        placeholder="Có chứa giá trị..."
                        format="ed2"
                        [disabled]="!item.isEnable"
                        [crrValue]="item.defaultValue"
                        (valueChange)="valueChange($event)"
                      ></codx-input>
                    </div>
                    <div class="w-100 mt-3" *ngIf="item.referedType == '3'">
                      <codx-input
                        type="combobox"
                        [field]="item.controlName"
                        [crrValue]="item.defaultValue"
                        [refValue]="item.referedValue"
                        [disabled]="!item.isEnable"
                        (valueChange)="valueChange($event)"
                      >
                      </codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'bool'">
                    <div
                      class="float-end"
                      *ngIf="item.controlType == 'LVSwitch'"
                    >
                      <codx-input
                        class="float-right"
                        type="switch"
                        [field]="item.controlName"
                        [crrValue]="
                          item.defaultValue ? item.defaulValue : false
                        "
                        [disabled]="!item.isEnable"
                        (valueChange)="valueChange($event,false,'switch')"
                      ></codx-input>
                    </div>
                    <div
                      class="w-100 ms-5 mt-3"
                      *ngIf="item.controlType == 'LVCheckbox'"
                    >
                    <div class="d-flex">
                      <div class="float-start mx-5">
                        <codx-input
                        type="checkBox"
                        [field]="item.controlName"
                        [crrValue]="
                          item.defaultValue ? item.defaulValue : false
                        "
                        [disabled]="!item.isEnable"
                        (valueChange)="valueChange($event)"
                      ></codx-input>
                      </div>
                      <div class="w-100 float-end">
                        <span
                        style="font-size:12px;font-weight: 400;"
                        >{{item.labelName}}
                      </span>
                      </div>
                    </div>

                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'DateTime'">
                    <div class="my-2">
                      <codx-dropdown-calendar
                        cssPopup="h-600px w-800px"
                        cssClass="w-100 button-radius"
                        (change)="changeValueDate($event)"
                        [disabled]="!item.isEnable"
                      ></codx-dropdown-calendar>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'int'">
                    <div class="w-100 mt-3">
                      <div class="d-flex">
                        <div class="float-start me-1">
                          <codx-input
                            type="number"
                            field="numberFrom"
                            [crrValue]="
                              item.defaultValue ? item.defaultValue : 0
                            "
                            (valueChange)="valueChange($event)"
                            placeholder="Từ"
                            [disabled]="!item.isEnable"
                          ></codx-input>
                        </div>
                        <div class="float-end ms-1">
                          <codx-input
                            type="number"
                            field="numberTo"
                            [crrValue]="
                              item.defaultValue ? item.defaultValue : 0
                            "
                            [disabled]="!item.isEnable"
                            (valueChange)="valueChange($event)"
                            placeholder="Đến"
                          ></codx-input>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="fixed-bottom col-3 background-white pt-2 mb-5 mx-2">
        <div class="float-start">
          <button class="btn btn-light-primary ms-5 mb-5" (click)="restoreDefault()">
            <div class="d-flex">
              <div class="float-start">
                <i class="icon-replay"></i>
              </div>
              <div class="float-end w-100">
                <codx-label name="lblRestore" default="Khôi phục"></codx-label>
              </div>
            </div>
          </button>
        </div>
        <div class="float-end">
          <button class="btn btn-primary me-5 mb-5" (click)="apply()">
            <div class="d-flex">
              <div class="float-start">
                <i class="icon-check"></i>
              </div>
              <div class="float-end w-100">
                <codx-label name="lblApply" default="Áp dụng"></codx-label>
              </div>
            </div>
          </button>
        </div>
      </div>
    </div>
    <div class="col-9" #reportEle>
      <codx-report [showToolbar]="true" [reportUUID]="reportUUID" [parameters]="param" [print]="print"></codx-report>
    </div>
  </div>
</div>
