<codx-form [headerText]="headerText" [subHeaderText]="subHeaderText" [body]="body" [footer]="footer" [dialog]="dialog"
  [formControl]="dialogAddRoom" *ngIf="isAfterRender">
</codx-form>
<ng-template #body>
  <div class="row mb-4">
    <div style="width: 88%">
      <codx-label class="fs-5 fw-bold" default="Tên phòng họp" fiedName="ResourceName" [formModel]="dialog.formModel">
      </codx-label>
      <div class="d-flex position-relative">
        <div class="w-100">
          <codx-input type="text" class="form-control flex-grow-1 me-3 w-100" ControlName="resourceName"
            [Group]="dialogAddRoom" [crrValue]="dialogAddRoom.value.resourceName" (valueChange)="valueCbxChange($event)">
          </codx-input>
        </div>
        <div class="ms-2 room-icon" style="display: none">
          <codx-input type="vllicon" refValue="L1470" field="icon" class="btn btn-primary dropdown-toggle">
          </codx-input>
        </div>
      </div>
    </div>
    <div style="width: 12%; margin-top: 21px">
      <button type="button" class="btn btn-primary">Icon</button>
    </div>
  </div>

  <div class="row mb-4">
    <!--begin::Col-->
    <div class="col-6">
      <!--begin::Label-->
      <codx-label class="fw-bold" default="Phân loại" fiedName="Ranking" [formModel]="dialog.formModel">
      </codx-label>
      <!--end::Label-->
      <!--begin::Input-->
      <codx-input type="valuelist" name="valuelist" ControlName="ranking" [refValue]="CbxName['Ranking']"
        [crrValue]="dialogAddRoom.value.ranking" (valueChange)="valueCbxChange($event)">
      </codx-input>
    </div>

    <div class="col-3">
      <!--begin::Label-->
      <codx-label class="fw-bold" default="Diện tích(m2)" fiedName="Area" [formModel]="dialog.formModel">
      </codx-label>
      <!--end::Label-->
      <!--begin::Input-->
      <codx-input type="text" [Group]="dialogAddRoom" ControlName="area" field="area" [crrValue]="dialogAddRoom.value.area"
        (valueChange)="valueCbxChange($event)">
      </codx-input>
    </div>
    <div class="col-3">
      <codx-label class="fw-bold" default="Sức chứa(người)" fiedName="Capacity" [formModel]="dialog.formModel">
      </codx-label>
      <codx-input type="text" ControlName="capacity" [Group]="dialogAddRoom" field="capacity"
        (valueChange)="valueCbxChange($event)">
      </codx-input>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-8">
      <codx-label class="fw-bold" default="Vị trí" fiedName="Location" [formModel]="dialog.formModel">
      </codx-label>
      <codx-input type="combobox" name="combobox" ngDefaultControl [crrValue]="dialogAddRoom.value.location"
        field="location" (valueChange)="valueCbxChange($event)">
      </codx-input>
      <!--end::Input-->
    </div>
    <!--end::Col-->
    <!--begin::Col-->
    <div class="col-4">
      <codx-label class="fw-bold" default="Đơn vị" fiedName="CompanyID" [formModel]="dialog.formModel">
      </codx-label>
      <codx-input type="combobox" name="combobox" ngDefaultControl [refValue]="CbxName['CompanyID']"
        [crrValue]="dialogAddRoom.value.companyID" field="companyID" (valueChange)="valueCbxChange($event)">
      </codx-input>
    </div>
    <!--end::Col-->
  </div>

  <!--end::Input group-->
  <!--begin::Input group-->
  <div class="row mb-4">
    <!--begin::Col-->
    <div class="w-100">
      <codx-label class="fw-bold" default="Người quản lí" fiedName="Owner" [formModel]="dialog.formModel">
      </codx-label>
      <codx-input type="combobox" name="combobox" ngDefaultControl [refValue]="CbxName['Owner']"
        [crrValue]="dialogAddRoom.value.owner" field="owner" multiple="false" (valueChange)="valueCbxChange($event)">
      </codx-input>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-12">
      <codx-label default="Mô tả" fiedName="Note" [formModel]="dialog.formModel"></codx-label>
      <codx-input type="textarea" class="test-textarea" field="note" [crrValue]="dialogAddRoom.value.note" placeholder=""
        rows="3" ControlName="note" (valueChange)="valueCbxChange($event)">
      </codx-input>
    </div>
  </div>
  <div class="d-flex flex-wrap align-items-center justify-content-between w-bold fs-7 mb-2">
    <codx-label name="lblEqiupment" default="Thiết bị" [formModel]="dialog.formModel"></codx-label>
    <!--begin: btn-icon-->
    <span class="text-end align-items-end">
      <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" data-dismiss="modal"
        (click)="openPopupDevice(popupDevice)">
        <i class="icon-select_all text-primary text-hover-primary-dark icon-24"></i>
      </button>
    </span>
    <!--end: btn-icon-->
  </div>
  <div class="row mb-4">
    <div class="col-12 d-flex justify-content-between">
      <div class="d-flex" *ngFor="let item of lstDeviceRoom">
        <span class="d-flex align-items-center me-2 mb-2" [ngClass]="item.isSelected ? 'text-primary' : 'text-muted'">
          <span class="icon-wifi me-1" [ngClass]="item.isSelected ? 'text-primary' : ''">
          </span>{{ item.text }}
        </span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button class="btn btn-light-primary" (click)="onSaveForm()">
      <codx-label name="lblSave" default="Lưu" [formModel]="dialog.formModel"></codx-label>
    </button>
  </div>
</ng-template>
<ng-template #popupDevice let-dialog>
  <!--begin::Card body-->
  <div class="modal-header">
    <div class="d-flex flex-column flex-grow-1">
      <div class="d-flex justify-content-between align-items-center">
        <h2 id="modal-basic-title">
          <codx-label name="lblEquipment" default="Thiết bị" [formModel]="dialog.formModel"></codx-label>
        </h2>
        <button type="button" class="btn btn-xs btn-icon btn-light btn-hover-primary" aria-label="Close"
          (click)="dialog.close()">
          <span class="icon-close icon-20 text-dark text-hover-primary"></span>
        </button>
      </div>
      <div class="text-dark-50">
        <codx-label name="lblChooseEquipments" default="Chọn các thiết bị đã tích hợp sẵn trong phòng"
          [formModel]="dialog.formModel"></codx-label>
      </div>
    </div>
  </div>
  <div class="modal-body">
    <div class="py-2" *ngFor="let item of tmplstDevice">
      <!--begin::Item-->
      <div class="d-flex flex-stack">
        <div class="d-flex">
          <span class="text-dark icon-wifi me-2 p-1"></span>
          <div class="d-flex flex-column">
            <a href="#" class="text-dark text-hover-primary fw-bolder">{{
              item.text
              }}</a>
          </div>
        </div>
        <div class="d-flex justify-content-end">
          <div class="form-check form-check-solid form-switch">
            <codx-input class="form-check-input w-35px h-20px" type="switch" id="googleswitch"
              [checked]="item.isSelected" (change)="checkedChange($event, item)"></codx-input>
            <label class="form-check-label" for="googleswitch"></label>
          </div>
        </div>
      </div>
      <!--end::Item-->
      <!-- <div class="separator separator-dashed my-5"></div> -->
    </div>
    <!--end::Card body-->
  </div>
  <div class="modal-footer" (click)="dialog.close()">
    <button type="button" class="btn btn-primary">
      <codx-label name="lblSave" default="Lưu" [formModel]="dialog.formModel"></codx-label>
    </button>
  </div>
</ng-template>