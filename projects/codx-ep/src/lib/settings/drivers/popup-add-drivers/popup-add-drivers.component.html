<codx-form
  #form
  [headerText]="headerText"
  [subHeaderText]="subHeaderText"
  [body]="body"
  [footer]="footer"
  [dialog]="dialog"
  [formControl]="dialogAddDriver"
  *ngIf="isAfterRender"
>
</codx-form>

<ng-template #body>
  <div class="row mb-4">
    <div class="col-8">
      <codx-label class="fw-bold" default="Nguồn" fiedName="Category">
      </codx-label>
      <codx-input
        type="valuelist"
        name="valuelist"
        ngDefaultControl
        [crrValue]="dialogAddDriver.value.category"
        refValue="VL005"
        field="category"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
      <!-- <codx-combobox 
        service="EP"   
        name="combobox"  
        ngDefaultControl
        refValue="VL005"
        field="category"
        [pageSize]="5"
        [allowFilter]=true>
      </codx-combobox> -->
      <!--end::Input-->
    </div>

    <!--end::Col-->
    <!--begin::Col-->
    <div class="col-4">
      <codx-label
        class="fw-bold"
        default="Đơn vị"
        fiedName="CompanyID"
        [formModel]="dialog.formModel"
      >
      </codx-label>
      <codx-input
        service="SYS"
        type="combobox"
        name="combobox"
        [crrValue]="dialogAddDriver.value.Owner"
        ngDefaultControl
        refValue="BusinessUnits"
        [loadFull]="true"
        field="BUName"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
    </div>
    <!--end::Col-->
  </div>

  <div class="row mb-4 position-relative">
    <div class="col-10">
      <codx-label
        class="fw-bold"
        default="Tên lái xe"
        fiedName="ResourceName"
        [formModel]="dialog.formModel"
      >
      </codx-label>
      <div class="d-flex position-relative">
        <div class="w-100">
          <codx-input
            ControlName="resourceName"            
          >
          <!-- [formModel]="form.formModel"
            [Group]="form.formGroup" -->
          </codx-input>
           <codx-input type="text" class="form-control flex-grow-1 me-3 w-100" ControlName="resourceName"
          [Group]="dialogAddDriver" [crrValue]="dialogAddDriver.value.resourceName" (valueChange)="valueChange($event)">
        </codx-input> 
        </div>
        <!-- <div class="room-icon" >
          <codx-input
            type="vllicon"
            refValue="L1470"
            field="icon"
            class="btn btn-primary dropdown-toggle"
          >
          </codx-input>
          <select-icon (valueChange)="valueChangeIcon($event)" field="icon" [itemSelected]="icon">
                  </select-icon>
        </div> -->
      </div>
    </div>
    <div class="col-2 position-absolute bottom-0 end-0">
      <button type="button" class="btn btn-primary">Chọn</button>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-8">
      <codx-label class="fw-bold" default="Xe"> </codx-label>
      <codx-combobox
        service="ERM.Business.CM"
        name="combobox"
        ngDefaultControl
        refValue="EP_Cars"
        field="ResourceName"
        [pageSize]="5"
        [allowFilter]="true"
      >
      </codx-combobox> 

      <!--end::Input-->
    </div>
    <div class="col-3">
      <!--begin::Label-->
      <codx-label class="fw-bold" default="Biển số" fiedName="Code">
      </codx-label>
      <!--end::Label-->
      <!--begin::Input-->
      <codx-input
        type="text"
        class="form-control"
        field="code"
        [crrValue]="dialogAddDriver.value.code"
        ControlName="code"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-12">
      <codx-label
        class="fw-bold"
        default="Người điều phối"
        fiedName="Owner"
        [formModel]="dialog.formModel"
      >
      </codx-label>
      <codx-combobox 
        service="SYS"   
        name="combobox"  
        ngDefaultControl
        refValue="Users"
        field="UserName"
        multiple="false"
        [pageSize]="5"
        [allowFilter]=true>
      </codx-combobox>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-12">
      <codx-label default="Mô tả" fiedName="Note"></codx-label>
      <!-- <codx-label default="Mô tả" class="fs-5 fw-bold mb-2"></codx-label> -->
      <codx-input
        type="textarea"
        class="test-textarea"
        field="note"
        [crrValue]="dialogAddDriver.value.note"
        rows="3"
        ControlName="note"
        (valueChange)="valueChange($event)"
      >
      </codx-input>
    </div>
  </div>
</ng-template>
<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button class="btn btn-light-primary" (click)="onSaveForm()">
      <codx-label
        name="lblSave"
        F
        default="Lưu"
        [formModel]="dialog.formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>
