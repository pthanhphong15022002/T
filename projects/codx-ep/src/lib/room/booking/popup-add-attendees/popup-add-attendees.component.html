<codx-form [headerText]="headerText" subHeader="" [body]="body"  [footer]="footer" [dialog]="dialogRef" #form>
</codx-form>
<ng-container *ngIf="isPopupUserCbb">
  <codx-combobox-popup [comboboxName]="'Users'" [field]="'cbbUser'" [multiple]="true" [width]="700"
    [height]="600" [value]="" [formModel]="formModel" (clickSave)="valueCbxUserChange($event)">
  </codx-combobox-popup>
</ng-container>

<ng-template #subHeader>
  
</ng-template>
<ng-template #body>
    <div class="d-flex align-items-center justify-content-between mt-4 mb-2">
      <div class="d-flex align-items-center">
        <ng-container *ngFor="let item of listRoles">
          <div class="d-flex align-items-center justify-content-start me-4">
            <span inlineSVG="./assets/themes/ep/default/img/{{ item.icon }}"></span>
            <div class="fs-8 text-gray-500 ms-1">{{ item.text }}</div>
          </div>
      </ng-container>
    </div>
  
    <!-- <button class="btn btn-sm btn-outline btn-outline-secondary d-flex flex-row align-items-center"
      (click)="openUserPopup()">
      <span class="icon-group_add icon-18 me-2 text-gray-800"></span>
      <codx-label name="lblChooseRoomAttendees" class="fw-bold text-gray-800" default="Chọn người tham dự">
      </codx-label>
    </button> -->
    <div class="mx-2">
      <codx-input type="Share" refValue="TM003" (valueChange)="eventApply($event)" field="resources" [dataShared]="[]"
        [multiple]="true" [showInput]="false">
      </codx-input>
    </div>
    </div>
    
    <div class="d-flex align-items-center justify-content-between mt-4 mb-2">
      <div class="d-flex align-items-center">
        <div class="fw-bold fs-6 text-primary">
          <codx-label fiedName="Resources" [formModel]="form.formModel" default="Người tham gia">
          </codx-label>
        </div>
      </div>
      <div class="fw-bold fs-6 text-primary">
        <codx-label name="lblOptional" default="Không bắt buộc">
        </codx-label>
      </div>
    </div>
  

  <div class="overflow-auto" style="height: 300px;">
    <div class="d-flex align-items-center mb-4 pb-2 position-relative" *ngFor="let item of oldAttendees">
        
      <div class="symbol symbol-30px symbol-circle me-4">
        <codx-img [width]="30" [objectId]="item.userID" objectType="AD_Users"></codx-img>
        <div role="button" class="pe-auto" ><!-- (click)="showPopover(p, item.userID)" -->
          <!-- <span popoverClass="userPopoverClass" [ngbPopover]="popoverSelectRoles" placement="right" #p="ngbPopover"
            autoClose="outside" class="position-absolute" inlineSVG="./assets/themes/ep/default/img/{{ item.icon }}"
            style="bottom: -5px;right:-4px">
          </span> -->
          <span  class="position-absolute" inlineSVG="./assets/themes/ep/default/img/{{ item.icon }}"
            style="bottom: -5px;right:-4px">
          </span>
        </div>
      </div>
  
      <div class="d-flex flex-column flex-grow-1">
        <div class="text-dark fw-bold fs-6 fw-bolder">
          {{ item.userName }}
        </div>
        <div>
          <span class="text-muted">{{
            item.roleType | vll: "EP009":"text" | async
            }}</span>
        </div>
      </div>
  
      <div class="d-flex flex-column justify-content-center align-items-center me-5 pe-5">
        <codx-input type="checkbox" [checked]="item.optional" [disabled]="true"
          (valueChange)="attendeesCheckChange($event, item.userID)">
        </codx-input>          
      </div>
  
    
  </div>
  <div class="d-flex align-items-center mb-4 pb-2 position-relative" *ngFor="let item of newAttendees">
          
    <div class="symbol symbol-30px symbol-circle me-4">
      <codx-img [width]="30" [objectId]="item.userID" objectType="AD_Users"></codx-img>
      <div role="button" class="pe-auto" >
        <span  class="position-absolute" inlineSVG="./assets/themes/ep/default/img/{{ item.icon }}"
            style="bottom: -5px;right:-4px">
          </span>
      </div>
    </div>
  
    <div class="d-flex flex-column flex-grow-1">
      <div class="text-dark fw-bold fs-6 fw-bolder">
        {{ item.userName }}
      </div>
      <div>
        <span class="text-muted">{{
          item.roleType | vll: "EP009":"text" | async
          }}</span>
      </div>
    </div>
  
    <div class="d-flex flex-column justify-content-center align-items-center me-5">
      <codx-input type="checkbox" [checked]="item.optional"
        (valueChange)="attendeesCheckChange($event, item.userID)">
      </codx-input>          
    </div>
  
    <div class="d-flex flex-column justify-content-center align-items-center me-5">
      <span class="icon-close" role="button" (click)="deleteAttender(item.userID)"></span>        
    </div>
  
  </div>
  </div>
  
</ng-template>
<ng-template #footer>
  <button type="button" (click)="onSave()" class="btn btn-primary">Lưu</button>
</ng-template>

<ng-template #popoverSelectRoles>
  
</ng-template>
