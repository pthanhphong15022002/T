<codx-layout-add #form [title]="title" [tabInfo]="tabInfo" [formModel]="dialogRef.formModel" [subHeader]=""
  [footer]="footer" [dialog]="dialogRef" [openMore]="true" (buttonClick)="buttonClick($event)"
  [tabContent]="[tabGeneralInfo, tabPeopleInfo, tabMoreInfo]" (setTitle)="setTitle($event)" [data]="data" 
  [formControl]="fGroupAddBookingCar"
  >
  <ng-template #tabGeneralInfo>
    <div id="GeneralInfo">
        <codx-label class="mb-3 fs-5 fw-bold" name="lblGeneralInfo" default="Thông tin chung">
        </codx-label>
    </div>
      <div class="row form-group">
        <div class="d-flex justify-content-between align-items-center">
          <codx-label
            default="Xe"
            fieldName="ResourceID"
            [formModel]="dialogRef.formModel"
          >
          </codx-label>
          <span class="label-status text-primary">{{
            fGroupAddBookingCar.value.status
              | vll: CbxName["Status"]:"text"
              | async
          }}</span>
        </div>
        <codx-input
          type="combobox"
          refValue="EP_Cars"
          [multiple]="false"
          ControlName="resourceID"          
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
        >
        </codx-input>
      </div>
      <div class="row">
        <div class="col-12 form-group d-flex justify-content-between">
          <div class="d-flex" *ngFor="let item of tmplstDevice">
            <span
              class="d-flex align-items-center me-2"
              [ngClass]="item.isSelected ? 'text-primary' : 'text-muted'"
            >
              <span
              class="me-1"
              [ngClass]="[item.isSelected ? 'text-primary' : 'text-muted',item.id=='1' ? 'icon-wifi' : item.id=='2' ? 'icon-personal_video' : item.id=='3' ? 'icon-videocam' : item.id=='4' ? 'icon-video_settings' : ' icon-thermostat']"
            >
              </span
              >{{ item.text }}
            </span>
          </div>
          <span class="text-end align-items-end">
            <button
              type="button"
              class="btn btn-clean btn-sm btn-icon btn-icon-md"
              data-dismiss="modal"
              (click)="openPopupDevice(popupDevice)"
            >
              <i
                class="icon-select_all text-primary text-hover-primary-dark icon-24"
              ></i>
            </button>
          </span>
        </div>        
      </div>
      <div class="row">
        <div class="col-6 form-group">
          <codx-label
            default="Từ ngày"
            fiedName="StartDate"
            [formModel]="dialogRef.formModel"
          >
          </codx-label>
          <codx-input
            type="datetime"
            format="f"
            class="test-datetime"
            placeholder="Ngày bắt đầu"
            field="startDate"
            [crrValue]="fGroupAddBookingCar.value.startDate"
            (valueChange)="changeTime($event)"
            
          >
          </codx-input>
        </div>
        <div class="col-6 form-group">
          <codx-label
            default="Đến ngày"
            fiedName="EndDate"
            [formModel]="dialogRef.formModel"
          >
          </codx-label>
          <codx-input
            type="datetime"
            format="f"
            class="test-datetime"
            placeholder="Ngày kết thúc"
            field="endDate"
            [crrValue]="fGroupAddBookingCar.value.endDate"
            (valueChange)="changeTime($event)"
          >
          </codx-input>
        </div>
      </div>
      <div class="form-group">        
        <codx-label
          default="Mục đích sử dụng"
          fiedName="ReasonID"
          [formModel]="dialogRef.formModel"
        >
        </codx-label>        
        <codx-input
          type="combobox"
          refValue="EP_BookingCars"
          [multiple]="false"
          ControlName="reasonID"          
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
        >
        </codx-input>
      </div>

      <div class="form-group">        
        <codx-label
          default="Tiêu đề"
          fiedName="Title"
          [formModel]="dialogRef.formModel"
        >
        </codx-label>        
        <codx-input
          type="text"
          ControlName="title"         
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
        ></codx-input>
      </div>

      <div class="form-group">        
        <codx-label
          default="Khách hàng"
          fiedName="AgencyName"
          [formModel]="dialogRef.formModel"
        >
        </codx-label>        
        <codx-input
          type="combobox"
          refValue="AgencyNames"
          ControlName="agencyName"         
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
        >
        </codx-input>
      </div>

      <div class="form-group">
        <codx-label
          default="Địa chỉ"
          fiedName="Address"
          [formModel]="dialogRef.formModel"
        >
        </codx-label>
        <codx-input
          type="text"
          ControlName="address"         
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
        >
        </codx-input>
      </div>

      <div class="row">
        <div class="col-7 form-group">
          <codx-label
            default="Người liên hệ"
            fiedName="ContactName"
            [formModel]="dialogRef.formModel"
          >
          </codx-label>
          <codx-input
            type="text"            
            ControlName="contactName"         
            [formModel]="form.formModel"
            [Group]="fGroupAddBookingCar"
          ></codx-input>
        </div>
        <div class="col-5 form-group">
          <codx-label
            default="Số điện thoại"
            fiedName="Phone"
            [formModel]="dialogRef.formModel"
          >
          </codx-label>
          <codx-input
          type="text"            
          ControlName="phone"         
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
          ></codx-input>
        </div>
      </div>

      <div class="d-flex flex-column mb-8">
        <div class="d-flex justify-content-between align-items-center mb-2 form-group">          
          <codx-label
            default="Lái xe & người đi cùng"
            fiedName="Note"
          >
          </codx-label>
          
          <div class="d-flex flex-row text-end align-items-end">        
            <codx-input 
              type="Combobox" 
              name="Driver"
              [refValue]="'EP_Drivers'" 
              [multiple]="false"
              [showInput]="false" 
              refType="P" 
              field="popup" 
              [ngClass]="'w-100'" 
              (valueChange)="valueChange($event)">
            </codx-input>
            
    
            <!-- <codx-input 
              type="Combobox" 
              name="User"
              [refValue]="'Users'" 
              [multiple]="false"
              [showInput]="false" 
              refType="P" 
              field="popup" 
              [ngClass]="'w-100'" 
              (valueChange)="valueChange($event)">
            </codx-input>         -->
            <codx-input type="Combobox" 
              name="combobox" 
              [refValue]="'Users'" 
              refType="P" 
              field="userID" 
              [showInput]="false"
            (valueChange)="valueChange($event)">
          </codx-input>
          </div>
        </div>

        <div class="symbol-group symbol-group-check symbol-hover flex-nowrap">
          <div
            class="symbol symbol-35px symbol-circle"
            data-bs-toggle="tooltip"
            title=""
            data-bs-original-title="Alan Warden"
          >
            <span class="symbol-label bg-warning text-inverse-warning fw-bolder">A</span>
            <span class="symbol-badge badge badge-circle bg-warning top-100 start-100 icon-swap_horiz text-white"></span>
          </div>

          <div
            class="symbol symbol-35px symbol-circle"
            data-bs-toggle="tooltip"
            title=""
            data-bs-original-title="Michael Eberon"
          >
            <img alt="Pic" src="../../../assets/themes/sys/default/light/img/avatar_default.svg" />
            <span class="symbol-badge badge badge-circle bg-success top-100 start-100 icon-check text-white" ></span>
          </div>

          <div
            class="symbol symbol-35px symbol-circle"
            data-bs-toggle="tooltip"
            title=""
            data-bs-original-title="Melody Macy"
          >
            <img alt="Pic" src="../../../assets/themes/sys/default/light/img/avatar_default.svg" />
            <span class="symbol-badge badge badge-circle bg-success top-100 start-100 icon-check text-white" ></span>
          </div>

          <a href="#" class="symbol symbol-35px symbol-circle" data-bs-toggle="modal" data-bs-target="#kt_modal_view_users">
            <span class="symbol-label bg-light-primary text-primary fs-8 fw-bolder">+3</span>
          </a>
        </div>
      </div>
  </ng-template>
  
  <ng-template #tabPeopleInfo>
    <div class="d-flex justify-content-between align-items-center" id="PeopleInfo">
      <div class="mb-3 fs-5 fw-bold">
        <codx-label name="lblPeopleInfo" default="Người đi cùng">
        </codx-label>
      </div>
      <div class="d-flex flex-row text-end align-items-end ">        
        <codx-input 
          type="Combobox" 
          name="Driver"
          [refValue]="'EP_Drivers'" 
          [multiple]="false"
          [showInput]="false" 
          refType="P" 
          field="popup" 
          [ngClass]="'w-100'" 
          (valueChange)="valueChange($event)">
        </codx-input>

        <codx-input
          type="Combobox" 
          name="User"
          [refValue]="'Users'" 
          [multiple]="false"
          [showInput]="false" 
          refType="P" 
          field="popup" 
          [ngClass]="'w-100'" 
          (valueChange)="valueChange($event)">
        </codx-input>        
      </div>
    </div>
    
    <div class="d-flex align-items-center mb-4">
      <div class="symbol symbol-35px symbol-circle me-4">
        <codx-img
          [objectId]="'ADMIN'"
          [objectName]="'ADMIN'"
          objectType="AD_Users"
        ></codx-img>
        <span
          class="symbol-badge badge badge-circle bg-primary top-100 start-100 text-white fs-8"
          >R</span
        >
      </div>
      <div class="d-flex flex-column flex-grow-1">
        <div class="text-dark fw-bold fs-6 fw-bolder">
          Trần Quốc Hoàn
        </div>
        <span class="text-muted fw-bold">Chủ trì cuộc họp</span>
      </div>
      <div class="d-flex flex-column justify-content-end">
        <span class="badge badge-light-success fs-7 fw-bold mb-1"
          >Chưa xác định</span
        >
        <span class="text-muted fw-bold text-center">
          1 ngày trước
        </span>
      </div>
    </div>
  </ng-template>
  
  <ng-template #tabMoreInfo>
    <div id="MoreInfo">
      <div class="mb-3 fs-5 fw-bold">
        <codx-label name="lblMoreInfo" default="Thông tin khác">
        </codx-label>
      </div>
    </div>    
      <div class="form-group">
        <codx-label
          default="Ghi chú"
          fiedName="Note"
        >
        </codx-label>
        <codx-input
          type="textarea"
          ControlName="note"
          [formModel]="form.formModel"
          [Group]="fGroupAddBookingCar"
        >
        </codx-input>
      </div>
  </ng-template>
  
  
  
  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <button class="btn btn-light-primary" (click)="onSaveForm()">Lưu</button>
    </div>
  </ng-template>
</codx-layout-add>

<ng-template #popupDevice let-dialog>
  <div class="modal-header">
    <div class="d-flex flex-column flex-grow-1">
      <div class="d-flex justify-content-between align-items-center">
        <h2 id="modal-basic-title">
          <codx-label
            name="lblEquipment"
            default="Thiết bị"
            [formModel]="dialog.formModel"
          ></codx-label>
        </h2>
        <button
          type="button"
          class="btn btn-xs btn-icon btn-light btn-hover-primary"
          aria-label="Close"
          (click)="dialog.close()"
        >
          <span
            class="icon-close icon-20 text-dark text-hover-primary"
          ></span>
        </button>
      </div>
      <div class="text-dark-50">
        <codx-label
          name="lblChooseEquipments"
          default="Chọn các thiết bị đã tích hợp sẵn trong xe"
          [formModel]="dialog.formModel"
        ></codx-label>
      </div>
    </div>
  </div>
  <div class="modal-body">
    <div class="py-2" *ngFor="let item of tmplstDevice">
      <div class="d-flex flex-stack">
        <div class="d-flex">
          <span class="text-dark me-2 p-1" [ngClass]="[item.isSelected ? 'text-primary' : 'text-muted',item.id=='1' ? 'icon-wifi' : item.id=='2' ? 'icon-personal_video' : item.id=='3' ? 'icon-videocam' : item.id=='4' ? 'icon-video_settings' : ' icon-thermostat']">
          </span>
          <div class="d-flex flex-column justify-content-center">
            <span href="#" class="text-dark fw-bolder">{{
              item.text
            }}</span>
          </div>
        </div>
        <div class="d-flex justify-content-end">
          <div class="form-check form-check-solid form-switch">
            <codx-input
              class="form-check-input w-35px h-20px"
              type="switch"
              id="googleswitch"
              [checked]="item.isSelected"
              (valueChange)="checkedChange($event, item)"
            ></codx-input>
            <label class="form-check-label" for="googleswitch"></label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer" (click)="dialog.close()">
    <button type="button" class="btn btn-primary">
      <codx-label
        name="lblSave"
        default="Lưu"
        [formModel]="dialog.formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>

<!-- <codx-form 
  #form
  [headerText]="headerText"
  [subHeaderText]="subHeaderText"
  [body]="body"
  [footer]="footer"
  [dialog]="dialogRef"
  [formModel]="formModel"
  [formControl]="fGroupAddBookingCar"
  *ngIf="isAfterRender"
>
  <ng-template popup #body>
    <div class="tab-content">
      <ejs-tab
        id="tab_orientation"
        #orientationTab
        [showCloseButton]="false"
        heightAdjustMode="Auto"
        headerPlacement="Left"
      >
        <e-tabitems>
          <e-tabitem [header]="headerText[0]">
            <ng-template #content>
              <div id="rome" class="tabpanel">
                <div class="tab-content">
                  <div class="row form-group">
                    <div class="d-flex justify-content-between align-items-center">
                      <codx-label
                        class="fw-bold"
                        default="Xe"
                        fieldName="ResourceID"
                        formName="BookingCars"
                        gridViewName="grvBookingCars"
                      >
                      </codx-label>
                      <span class="label-status text-muted">Chờ duyệt</span>
                      <span class="label-status text-primary">{{
                        fGroupAddBookingCar.value.status
                          | vll: CbxName["Status"]:"text"
                          | async
                      }}</span>
                    </div>
                    <codx-input
                      service="EP"
                      refValue="EP_Cars"
                      type="combobox"
                      ControlName="resourceID"
                      [formModel]="form.formModel"
                      [Group]="fGroupAddBookingCar"
                    >
                    </codx-input>
                  </div>
                  <div class="row">
                    <div class="col-12 form-group d-flex justify-content-between">
                      <div class="d-flex" *ngFor="let item of tmplstDevice">
                        <span
                          class="d-flex align-items-center me-2 mb-2"
                          [ngClass]="item.isSelected ? 'text-primary' : 'text-muted'"
                        >
                          <span
                          class="me-1"
                          [ngClass]="[item.isSelected ? 'text-primary' : 'text-muted',item.id=='1' ? 'icon-wifi' : item.id=='2' ? 'icon-personal_video' : item.id=='3' ? 'icon-videocam' : item.id=='4' ? 'icon-video_settings' : ' icon-thermostat']"
                        >
                          </span
                          >{{ item.text }}
                        </span>
                      </div>
                      <span class="text-end align-items-end">
                        <button
                          type="button"
                          class="btn btn-clean btn-sm btn-icon btn-icon-md"
                          data-dismiss="modal"
                          (click)="openPopupDevice(popupDevice)"
                        >
                          <i
                            class="icon-select_all text-primary text-hover-primary-dark icon-24"
                          ></i>
                        </button>
                      </span>
                    </div>
                    
                  </div>
                </div>
                
              </div>
            </ng-template>
          </e-tabitem>
          <e-tabitem [header]="headerText[1]">
            <ng-template #content>
              <div id="rome" class="tabpanel">
                <div class="tab-content">
                  <div
                    class="d-flex justify-content-between align-items-center mb-4"
                  >
                    <codx-label
                      name="lblAttendee"
                      default="Người đi xe"
                      [formModel]="dialog.formModel"
                    ></codx-label>
                    <span class="icon-group_add text-primary fs-1"></span>
                  </div>
                  <div class="d-flex align-items-center mb-4">
                    <div class="symbol symbol-35px symbol-circle me-4">
                      <codx-img
                        [objectId]="'ADMIN'"
                        [objectName]="'ADMIN'"
                        objectType="AD_Users"
                      ></codx-img>
                      <span
                        class="symbol-badge badge badge-circle bg-primary top-100 start-100 text-white fs-8"
                        >R</span
                      >
                    </div>
                    <div class="d-flex flex-column flex-grow-1">
                      <div class="text-dark fw-bold fs-6 fw-bolder">
                        Trần Quốc Hoàn
                      </div>
                      <span class="text-muted fw-bold">Chủ trì cuộc họp</span>
                    </div>
                    <div class="d-flex flex-column justify-content-end">
                      <span class="badge badge-light-success fs-7 fw-bold mb-1"
                        >Chưa xác định</span
                      >
                      <span class="text-muted fw-bold text-center">
                        1 ngày trước
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </e-tabitem>
          <e-tabitem [header]="headerText[2]">
            <ng-template #content>
              <div id="rome" class="tabpanel">
                <div class="tab-content">
                  <div class="d-flex flex-column mb-4">
                    <codx-label
                      name="lblOrther"
                      default="Thông tin khác"
                      [formModel]="dialog.formModel"
                    ></codx-label>
                  </div>
                  <div class="d-flex flex-column mb-4">
                    <codx-label
                      class="fw-bold"
                      default="Ghi chú"
                      fiedName="Note"
                    >
                    </codx-label>
                    <codx-input
                      type="textarea"
                      class="test-textarea"
                      field="note"
                      placeholder="textarea"
                      ControlName="note"
                      (valueChange)="valueChange($event)"
                      ngDefaultControl
                      [crrValue]="fGroupAddBookingCar.value.note"
                    >
                    </codx-input>
                  </div>
                </div>
              </div>
            </ng-template>
          </e-tabitem>
        </e-tabitems>
      </ejs-tab>
    </div>
  </ng-template>

  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <button class="btn btn-light-primary" (click)="onSaveForm()">Lưu</button>
    </div>
  </ng-template>
</codx-form>

 -->
