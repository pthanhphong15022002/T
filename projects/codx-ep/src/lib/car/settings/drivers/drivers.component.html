<codx-views #view [funcID]="funcID" [service]="service" [assemblyName]="assemblyName" [entityName]="entityName"
  [views]="views" [button]="buttons" (buttonClick)="click($event)" [moreFuncs]="moreFuncs" [idField]="idField"
  [className]="className" (onLoading)="onLoading($event)" [method]="method" [viewActiveType]="viewType.grid">
  
  <ng-template #itemAction let-data>
    <codx-mfunc [formModel]="view.formModel" (clickMF)="clickMF($event, data)" [dataItem]="data">
    </codx-mfunc>
  </ng-template>

  <ng-template #resourceNameCol let-data>
    <div class="d-flex flex-row align-items-center">
      <codx-img [objectName]="data.resourceName" [objectId]="data?.recID" [funcId]="funcID"
        [objectType]="'EP_Resources'" imageType="circle" width="35" [imgOn]="data.modifiedOn"></codx-img>
      <div class="ms-3 d-flex flex-column">
        <span class="fw-bold" [innerHTML]=" data?.resourceName | formatvalue : formModel : 'ResourceName' | async"></span>
      
      </div>
    </div>
  </ng-template>
  <ng-template #locationCol let-data>
    <div class="d-flex flex-column justify-content-start">
      <span class="text-truncate" [innerHTML]=" data?.companyID | formatvalue : formModel : 'CompanyID' | async"></span>
  
    </div>
  </ng-template>
  <ng-template #popupDevice let-dialog>
    <div class="modal-header">
      <div class="d-flex flex-column flex-grow-1">
        <div class="d-flex justify-content-between align-items-center">
          <h2 id="modal-basic-title">
            <codx-label default="Cài đặt thiết bị" name="lblEquipment" [default]="'Thiết bị'"
              [formModel]="dialog.formModel"></codx-label>
          </h2>
          <button type="button" class="btn btn-xs btn-icon btn-light btn-hover-primary" aria-label="Close"
            (click)="dialog.close()">
            <span class="icon-close icon-20 text-dark text-hover-primary"></span>
          </button>
        </div>
        <div class="text-dark-50">
          <codx-label name="lblChooseCarEquipments" default="Chọn các thiết bị đã tích hợp sẵn trong xe"
            [formModel]="dialog.formModel"></codx-label>
        </div>
      </div>
    </div>
    <div class="modal-body">
      <div class="py-2" *ngFor="let item of carsEquipments">
        <div class="d-flex flex-stack">
          <div class="d-flex">
            <span class="text-dark me-2 p-1" [className]="item.icon"
              [ngClass]="[item.isSelected ? 'text-primary' : 'text-muted']">
            </span>
            <div class="d-flex flex-column justify-content-center">
              <span href="#" class="text-dark fw-bolder">{{ item.text }}</span>
            </div>
          </div>
          <div class="d-flex justify-content-end">
            <div class="form-check form-check-solid form-switch">
              <codx-input class="form-check-input w-35px h-20px" type="switch" id="googleswitch"
                [checked]="item.isSelected" [disabled]="true"></codx-input>
              <label class="form-check-label" for="googleswitch"></label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #equipmentsCol let-data>
    <div (click)="openPopupDevice(popupDevice, data?.carEquipments)" class="d-flex align-items-center">
      <i class="icon-devices"></i>
      <span class="ms-2 fw-bold">{{ data?.equipmentQty }}</span>
      <codx-label [default]="'Thiết bị'" class="ms-1 fw-bold" name="lblDevice"></codx-label>
    </div>
  </ng-template>

  <ng-template #noteCol let-data>
    <div class="d-flex align-items-center">
        <span  [innerHTML]="data?.note | formatvalue : formModel : 'Note' | async"></span>    
    </div>
  </ng-template>

  <ng-template #carCol let-data>
    <div class="d-flex flex-row align-items-center">
      <codx-img [objectId]="data.carRecID" [objectName]="data.carName" imageType="circle" [imgOn]="data.modifiedOn"
        [width]="35" [objectType]="'EP_Resources'"></codx-img>
        <div class="ms-2">
          <span class="fw-bold" [innerHTML]="data?.linkID | formatvalue : formModel : 'LinkID' | async"></span>   
        </div>
    </div>
  </ng-template>
  <ng-template #ownerCol let-data>
    <div class="d-flex has-action-menu align-items-center">
      <codx-img [width]="25" [objectId]="data.owner" objectType="AD_Users"></codx-img>
      <div class="ms-2">
        <span class="fw-bold"[innerHTML]=" data?.owner | formatvalue : formModel : 'Owner' | async"></span>
      </div>
    </div>
  </ng-template>
</codx-views>