<codx-views
  #view
  [views]="views"
  [funcID]="funcID"
  [service]="'DP'"
  [entityName]="'DP_Activities'"
  [autoLoad]="true"
  (onActions)="onAction($event)"
  (viewChanged)="viewChanged($event)"
  [viewActiveType]="viewActiveType"
>
</codx-views>

<ng-template #cellTemplate let-data>
  <div [innerHtml]="getCellContent(data?.date)"></div>
</ng-template>

<ng-template #contentTmp let-data>
  <div>
    <h5>{{ data?.taskName }}</h5>
  </div>

  <div class="d-flex mt-1 flex-grow-1 mb-2 me-6">
    <i class="icon-person me-1"></i>
    <span class="ms-1 fw-bold">
      {{ data?.createdByName }}
    </span>
  </div>

  <div class="d-flex mt-1 flex-grow-1 mb-2">
    <div class="d-flex me-6">
      <i class="icon-calendar_today icon-16 me-2"></i>
      <span class="ms-1 fw-bold">
        <span
          class="text-gray-700"
          #startDate
          [innerHTML]="
            data?.startDate
              | formatvalue : formModelActivities : 'startDate'
              | async
          "
        >
        </span>
        <span>-</span>
        <span
          class="text-gray-700"
          #startDate
          [innerHTML]="
            data?.endDate
              | formatvalue : formModelActivities : 'endDate'
              | async
          "
        ></span>
      </span>
    </div>
  </div>

  <hr />

  <div class="mb-2 text-dark me-6">
    <span>
      <codx-label
        fiedName="Memo"
        [formModel]="formModelActivities"
        class="text-gray-600 label-colon"
      >
      </codx-label>
    </span>
    <span class="ms-2 fw-bold">
      <span class="text-gray-700 size-content-schedule cursor-pointer">
        <span
          *ngIf="data?.memo"
          [innerHTML]="data?.memo"
          [ngbTooltip]="tooltipMemo"
          placement="left bottom top right"
          container="body"
        ></span>
        <span
          *ngIf="!data?.memo"
          [innerHTML]="
            data?.memo | formatvalue : formModelActivities : 'memo' | async
          "
        ></span>
      </span>
    </span>
  </div>
  <div class="d-flex mb-2">
    <div class="d-flex text-dark me-6">
      <codx-label
        class="text-gray-600 me-4 label-colon"
        fiedName="Owner"
        [setRequire]="false"
        [formModel]="formModelActivities"
      >
      </codx-label>
      <div class="d-flex justify-content-end">
        <codx-imgs
          [objectId]="data?.owner"
          objectType="AD_Users"
          [width]="30"
          [numberImages]="3"
        >
        </codx-imgs>
      </div>
    </div>
  </div>

  <ng-template #tooltipMemo>
    <div [innerHTML]="data?.memo"></div>
  </ng-template>
</ng-template>

<ng-template #resourceHeader let-data>
  <div class="container">
    <codx-temp-full
      [imageId]="data?.resourceData?.owner"
      [title]="data?.resourceData?.userName"
      [subTitle]="data?.resourceData?.postionName"
    >
      <!-- [content]="'(' + data.resourceData.events + ')'" -->
    </codx-temp-full>
  </div>
</ng-template>

<ng-template #eventTemplate let-data>
  <div class="d-flex flex-column w-100">
    <span class="d-flex flex-start"
      >{{ showHour(data?.startDate) }} - {{ showHour(data?.endDate) }}</span
    >
    <span class="fw-bold text-truncate">{{ data?.taskName }}</span>
  </div>
</ng-template>

<ng-template #headerTempContent>
  <div class="mt-6"></div>
</ng-template>
