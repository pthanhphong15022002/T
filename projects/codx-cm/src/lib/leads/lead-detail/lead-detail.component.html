<ng-container *ngIf="dataSelected?.recID">
  <codx-detail-tmp class="leads-detail"
    [header]="header"
    [formModel]="formModel"
    [body]="body"
    [dataItem]="dataSelected"
    [hideMF]="dataSelected.status == '5' ? true : false"
    [footer]="tabs"
    (changeDataMF)="changeDataMF($event, dataSelected)"
    (clickMF)="clickMF($event, dataSelected)"
  >
    <ng-template #header let-data>
      <div class="d-flex align-items-center justify-content-start text-info py-2">
        <span class="icon-add_shopping_cart icon-18 me-2 text-gray-700"></span>
          <span class="text-dark fs-6 fw-bold"
            #businessLineID
            [ngbTooltip]="gridViewSetup['BusinessLineID']?.headerText"
            [innerHTML]="
            dataSelected?.businessLineID
                | formatvalue
                  : formModel
                  : 'businessLineID'
                  : businessLineID
                | async
            "
          ></span>
      </div>
      <div class="container_detail mt-1">
        <div class="d-flex justify-content-between mb-2">
          <div class="d-flex flex-column w-100">

        <div class="d-flex align-items-start">
              <div class="me-4">
                <codx-img
                  [objectId]="dataSelected?.recID"
                  [objectName]="dataSelected?.leadName"
                  [imgOn]="dataSelected?.modifiedOn"
                  [objectType]="'CM_Leads'"
                  [referType]="'avt'"
                  [width]="40"
                >
                </codx-img>

              </div>
              <div class="d-flex flex-column">
                  <span class="fw-bold text-dark fs-5 mb-1"
                  #leadName
                  [innerHTML]="
                  dataSelected?.leadName
                      | formatvalue
                        : formModel
                        : 'leadName'
                        : leadName
                      | async
                  "
                ></span>
              </div>
            </div>

          </div>
          <div class="ms-5">
            <span class="badge badge-light-primary"
              #status
              [innerHTML]="
              dataSelected?.status
                  | formatvalue
                    : formModel
                    : 'status'
                    : status
                    : 'CMLeads'
                    : 'grvCMLeads'
                  | async
              "
            ></span>
          </div>
        </div>
        <div class="d-flex justify-content-between mb-1">
          <div class="d-flex align-items-center">
            <codx-label default="Lĩnh vực hoạt động:" class="fw-bold me-2"></codx-label>
            <span
                class="text-gray-700 line-clamp line-clamp-1"
                #industries
                [innerHTML]="
                  dataSelected?.industries
                    | formatvalue
                      : formModel
                      : 'industries'
                      : industries
                      : 'CMLeads'
                      : 'grvCMLeads'
                    | async
                "
              ></span>
          </div>
        </div>
        <div class="d-flex align-items-top mb-2">
          <codx-label default="Nhu cầu:" class="fw-bold me-2 text-nowrap"></codx-label>
          <span class="text-gray-600 line-clamp line-clamp-2"
              #note
              [innerHTML]="
                dataSelected?.note
                  | formatvalue
                    : formModel
                    : 'note'
                  | async
              "
            ></span>
        </div>
        <div class="mb-2">
          <codx-tag
            [entityName]="formModel.entityName"
            [disabled]="true"
            [isEdit]="false"
            [value]="dataSelected?.tags"
          >
          </codx-tag>
        </div>

        <div class="d-flex justify-content-between mb-3">
          <div>
            <div class="d-flex flex-column" *ngIf="dataSelected?.contactID">
              <div class="mb-2">
                <codx-label class="text-dark fw-bold"
                  default="Liên hệ chính:"
                  ></codx-label>
              </div>
              <div class="d-flex align-items-start">
                <div class="me-3">
                  <codx-img
                    [objectId]="dataSelected?.contactID"
                    [objectName]="dataSelected?.contactName"
                    [imgOn]="dataSelected?.modifiedOn"
                    [objectType]="formModel?.entityName"
                    [width]="60"
                  >
                  </codx-img>
                </div>
                <div class="d-flex flex-column">
                  <div class="fw-bold text-dark fs-6 mb-1">
                    {{ dataSelected?.contactName }}
                  </div>
                  <div class="fs-7 text-gray-600 mb-1">
                    {{ dataSelected?.jobTitle }}
                  </div>
                  <div class="d-flex align-items-start">
                    <div class="d-flex align-items-center me-5" *ngIf="dataSelected?.phone">
                      <span class="icon-phone_android text-primary icon-16 me-2"></span>
                      <span class="text-gray-800 fs-7">{{ dataSelected?.phone }}</span>
                    </div>
                    <div class="d-flex align-items-center" *ngIf="dataSelected?.email">
                      <span class="icon-email icon-16 text-primary icon-16 me-2"></span>
                      <span class="text-gray-800 fs-7">{{ dataSelected?.email }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex flex-column justify-content-end">
            <div class="mb-2">
              <codx-label
                default="Thông tin bán hàng"
                class="text-dark fw-bold"
              ></codx-label>
            </div>
            <div class="d-flex flex-center">
              <codx-imgs
                [isToolTip]="true"
                [width]="30"
                [objectId]="dataSelected.salespersonID"
                ojectType="AD_Users"
                [numberImages]="1"
              >
              </codx-imgs>

              <codx-imgs
                [isToolTip]="true"
                [width]="30"
                [objectId]="dataSelected?.consultantID"
                ojectType="AD_Users"
                [numberImages]="1"
              >
              </codx-imgs>
              <codx-imgs
                [isToolTip]="true"
                [width]="30"
                [objectId]="dataSelected?.owner"
                ojectType="AD_Users"
                [numberImages]="1"
              >
              </codx-imgs>
            </div>
          </div>
        </div>

        <div class="view-details-header bg-body scroll-y me-3 h-100">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex tab-header">
              <codx-taskbar
                [listTab]="tabDetail"
                [change]="dataSelected"
                (tab)="changeTab($event)"
                size="18"
                class="mb-3 fw-bold"
              ></codx-taskbar>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </codx-detail-tmp>
</ng-container>
<ng-template #body let-data>
  <codx-tab-lead-detail
    [tabClicked]="tabClicked"
    [dataSelected]="dataSelected"
    [formModel]="formModel"
  ></codx-tab-lead-detail>
</ng-template>
<ng-template #tabs let-data>
  <codx-tabs
    [entityName]="formModel.entityName"
    [formModel]="formModel"
    [TabControl]="tabControl"
    [objectID]="dataSelected.recID"
    [funcID]="formModel.funcID"
    [dataTree]="treeTask"
    [funcIDQuotations]="'CM0202'"
    [refType]="formModel.entityName"
    [refID]="dataSelected.recID"
    [customerID]="dataSelected.customerID"
    [salespersonID]="dataSelected.salespersonID"
    [consultantID]="dataSelected.consultantID"
    (tabChange)="changeFooter($event)"
  ></codx-tabs>
</ng-template>

<ng-template #contract let-data>
  <!-- <list-contracts [projectID]="dataSelected?.recID" [customers]=""></list-contracts> -->
</ng-template>
<!-- <ng-template #quotations let-data>
 <lib-quotations [funcID]="'CM0202'" [customerID]="dataSelected.customerID" ></lib-quotations>
</ng-template> -->

<ng-template #references>

  <!-- <codx-temp-full
  [typeMF]="'hover'"
  [imageId]="deals?.customerID"
  [imgOn]="deals?.modifiedOn"
  [imageObjName]="deals?.customerName"
  [imageReferType]="'avt'"
  [imageWidth]="35"
  imgCss="me-4"
  [iconCss]="deals.closed ? 'icon-lock text-danger' : ''"
  [imageObjType]="'CM_Customers'"
  cardCss="card-template border-bottom p-3 list-task"
  (clickMF)="clickMF($event, deals)"
  (changeDataMF)="changeDataMF($event, deals)"
  [typeMF]="'hover'"
  [title]="deals?.customerName"
  [descTmp]="descTmp"
  [body]="footer"
  [formModel]="view.formModel"
  [footer]="footer"
  [titleCss]="'fw-bold fs-6'"
  [hideMF]="false"
  [dataItem]="deals"
>
</codx-temp-full> -->

</ng-template>
