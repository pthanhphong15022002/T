<ng-container *ngIf="dataSelected?.recID">
  <codx-detail-tmp
    [header]="header"
    [formModel]="formModel"
    [body]="body"
    [dataItem]="dataSelected"
    [hideMF]="dataSelected.status == '5' ? true : false"
    [footer]="tabs"
    (changeDataMF)="changeDataMF($event, dataSelected)"
    (clickMF)="clickMF($event, dataSelected)"
  >
    <ng-template #header let-data>
      <div class="d-flex justify-content-start text-info mt-n6">
        <span>
          <i class="icon-add_shopping_cart icon-18 me-2 text-gray-700"></i>
        </span>
        <span
          class="text-dark fs-6 fw-bold"
          #businesslineID
          [innerHTML]="
          dataSelected?.businesslineID
              | formatvalue
                : formModel
                : 'businesslineID'
                : businesslineID
                : 'CMLeads'
                : 'grvCMLeads'
              | async
          "
        ></span>
      </div>
      <div class="container_detail mt-3">
        <div class="d-flex justify-content-between pb-3">
          <div>
            <div class="d-flex align-items-stretch">
              <div>
                <div
                  class="fw-bold fs-6 text-dark codx-text-overflow-1line pb-2"
                >
                 {{dataSelected.leadName}}
                </div>
                <div class="d-flex align-items-start me-4 mb-1">
                  <div class="me-3 pe-5">
                    <span
                      class="icon-location_on text-primary icon-16 me-1"
                    ></span>
                    <span
                    class="fs-7"
                    #addresses
                    [innerHTML]="
                    dataSelected?.addresses
                        | formatvalue
                          : formModel
                          : 'addresses'
                          : addresses
                          : 'CMLeads'
                          : 'grvCMLeads'
                        | async
                    "
                  ></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div></div>
          <div>
            <div class="me-2 badge badge-light-primary">
              <span
              class="fs-7"
              #status
              [innerHTML]="
              dataSelected?.status
                  | formatvalue
                    : formModel
                    : 'status'
                    : status
                    : 'CMLeads'
                    : 'grvCMLeads'
                  | async
              "
            ></span>

            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between pb-1">
          <div class="d-flex flex-row">
            <div class="d-flex justify-content-start">
              <codx-label default="Lĩnh vực hoạt động:" class="fs-6 me-1"></codx-label>
              <div class="fs-6">
                <span
                  class="fs-7"
                  #industries
                  [innerHTML]="
                    dataSelected?.industries
                      | formatvalue
                        : formModel
                        : 'industries'
                        : industries
                        : 'CMLeads'
                        : 'grvCMLeads'
                      | async
                  "
                ></span>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-start">
          </div>
          <div class="d-flex align-items-stretch">
              <codx-label
                default="Nhân viên bán hàng:"
                class="fs-6 me-2"
              ></codx-label>
                <codx-imgs
                [isToolTip]="true"
                [width]="25"
                [objectId]="dataSelected.salespersonID"
                ojectType="AD_Users"
                [numberImages]="1"
              >
              </codx-imgs>
          </div>
        </div>
        <div class="d-flex justify-content-between pb-3">
          <div class="d-flex flex-row">
            <div class="d-flex justify-content-start">
              <codx-label default="Nhu cầu:" class="fs-6 me-1"></codx-label>
              <div class="fs-6">
                <span
                  class="fs-7"
                  #note
                  [innerHTML]="
                    dataSelected?.note
                      | formatvalue
                        : formModel
                        : 'note'
                      | async
                  "
                ></span>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-start">
          <codx-tag
            [entityName]="formModel.entityName"
            [disabled]="true"
            [isEdit]="false"
            [value]="dataSelected?.tags"
          >
          </codx-tag>
        </div>

        <div class="d-flex justify-content-between">
          <div>
            <div class="d-flex justify-content-start py-2" *ngIf="contactPerson != null">
              <codx-label
                default="Liên hệ chính:"
                class="fs-6 me-1"
              ></codx-label>
              <div class="fs-6">
                <div class="d-flex align-items-stretch">
                  <div class="pe-2 avatar-center">
                    <codx-img
                      [objectId]="contactPerson?.recID"
                      [objectName]="contactPerson?.contactName"
                      [imgOn]="contactPerson?.modifiedOn"
                      [objectType]="'CM_Contacts'"
                      [width]="30"
                    >
                    </codx-img>
                  </div>
                  <div>
                    <div
                      class="fw-bold fs-6 text-dark codx-text-overflow-1line pb-2"
                    >
                      {{ contactPerson?.contactName }}
                    </div>
                    <div
                    class="fw-bold fs-6 text-dark codx-text-overflow-1line pb-2"
                  >
                    {{ contactPerson?.jobTitle }}
                  </div>
                    <div class="d-flex align-items-start me-4 mb-1">
                      <div class="me-3 pe-5">
                        <span
                          class="icon-phone_android text-primary icon-16 me-1"
                        ></span>
                        <span class="text-gray-900">
                          {{ contactPerson?.mobile }}</span
                        >
                      </div>
                      <div>
                        <span
                          class="icon-print_disabled icon-16 me-1 text-gray-500"
                        ></span>
                        <span class="text-gray-900">
                          {{ contactPerson?.personalEmail }}</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div></div>
          <div class="d-flex flex-column">
                <div>              <codx-label
                  default="Bán hàng/Tư vấn"
                  class="fs-6 me-1"
                ></codx-label></div>
                <div class="d-flex flex-row">
                  <codx-imgs
                    [isToolTip]="true"
                    [width]="30"
                    [objectId]="dataSelected.owner"
                    ojectType="AD_Users"
                    [numberImages]="1"
                  >
                  </codx-imgs>

                  <codx-imgs
                  [isToolTip]="true"
                  [width]="30"
                  [objectId]="dataSelected.consultantID"
                  ojectType="AD_Users"
                  [numberImages]="1"
                >
                </codx-imgs>
                </div>
          </div>
        </div>

        <div class="view-details-header bg-body scroll-y me-3 h-100">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex tab-header">
              <codx-taskbar
                [listTab]="tabDetail"
                (tab)="changeTab($event)"
                size="22"
                class="mb-3"
              ></codx-taskbar>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </codx-detail-tmp>
</ng-container>
<ng-template #body let-data>
  <codx-tab-lead-detail
    [tabClicked]="tabClicked"
    [dataSelected]="dataSelected"
  ></codx-tab-lead-detail>
</ng-template>
<ng-template #tabs let-data>
  <codx-tabs
    [entityName]="formModel.entityName"
    [formModel]="formModel"
    [TabControl]="tabControl"
    [objectID]="dataSelected.recID"
    [funcID]="formModel.funcID"
    [dataTree]="treeTask"
    [funcIDQuotations]="'CM0202'"
    [refType]="formModel.entityName"
    [refID]="dataSelected.recID"
    [customerID]="dataSelected.customerID"
    [salespersonID]="dataSelected.salespersonID"
    [consultantID]="dataSelected.consultantID"
    (tabChange)="changeFooter($event)"
  ></codx-tabs>
</ng-template>

<ng-template #contract let-data>
  <!-- <list-contracts [projectID]="dataSelected?.recID" [customers]=""></list-contracts> -->
</ng-template>
<!-- <ng-template #quotations let-data>
 <lib-quotations [funcID]="'CM0202'" [customerID]="dataSelected.customerID" ></lib-quotations>
</ng-template> -->
