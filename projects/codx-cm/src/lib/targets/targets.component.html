<codx-views
  #view
  [funcID]="funcID"
  [service]="service"
  [assemblyName]="assemblyName"
  [entityName]="entityName"
  [className]="className"
  [method]="method"
  [views]="views"
  [button]="!viewCalendar && showButtonAdd ? button : null"
  (buttonClick)="click($event)"
  [dataObj]="dataObj"
  [moreFuncs]="moreFuncs"
  [autoLoad]="true"
  [idField]="idField"
  [autoSearch]="false"
  (selectedChange)="selectedChange($event)"
  (viewChanged)="viewChanged($event)"
  (onLoading)="onLoading($event)"
  (searchChanged)="searchChanged($event)"
  (filterChange)="filterChange($event)"
  (filterReportChange)="filterReportChange($event)"
></codx-views>

<!----------------------------------Schedule---------------------------------->
<ng-template #cardTemplate let-data>
  <div class="d-flex flex-row justify-content-start align-items-center w-100">
    <!-- <codx-img [objectId]="data?.owner" objectType="AD_Users" [width]="30">
    </codx-img> -->
    <div class="ps-3 d-flex w-100 flex-column pe-12">
      <!-- <span class="w-100 text-truncate fw-bold">{{ showHour(data?.startDate) }} - {{ showHour(data?.endDate) }}</span> -->
      <span
        class="w-100 text-truncate fw-bold"
        [innerHTML]="targetToFixed(data?.target)"
      ></span>
    </div>
  </div>
</ng-template>

<ng-template #resourceHeader let-data>
  <div class="d-flex flex-row ms-5 align-items-center">
    <codx-img
      [objectId]="data?.resourceData?.salespersonID"
      imageType="circle"
      width="40"
      [objectType]="'AD_Users'"
      [objectName]="data?.resourceData?.userName"
    ></codx-img>
    <div class="ms-4 d-flex flex-column" style="width: 160px">
      <span
        class="fw-bold text-truncate"
        [title]="data?.resourceData?.userName"
        >{{ data?.resourceData?.userName }}</span
      >
      <div [ngbTooltip]="tooltip" class="line-clamp line-clamp-1">
        {{ data?.resourceData?.positionName }}
        <ng-template #tooltip>
          <div>{{ data?.resourceData?.positionName }}</div>
        </ng-template>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #contentTmp let-data> </ng-template>

<ng-template #resourceTootip let-data>
  <span
    class="w-100 text-truncate fw-bold"
    [innerHTML]="targetToFixed(data?.target)"
  ></span>
</ng-template>

<ng-template #mfButton let-data>
  <div class="mt-1 me-1">
    <codx-mfunc
      [dataItem]="data"
      [formModel]="view.formModel"
      [hideMF]="viewCalendar"
      (clickMF)="clickMF($event, data)"
      type="hover"
      (changeDataMF)="changeDataMF($event, data)"
    ></codx-mfunc>
  </div>
</ng-template>
<!--end-->

<!--Tree-->
<ng-template #panelRight>
  <div class="w-100 h-100 bg-white rounded-2 d-flex flex-column">
    <div class="d-flex p-3 justify-content-between align-items-center">
      <div class="d-flex align-items-center justify-content-start">
        <div class="d-flex flex-row">
          <div
            *ngFor="let item of lstCurrentView"
            class="w-130px text-center"
            [ngClass]="
              item.value == '1'
                ? 'cm-rounded-pill-left'
                : 'cm-rounded-pill-right'
            "
            (click)="viewBusinessLines(item.value)"
          >
            <div
              [ngClass]="
                isActive(item.value, 'viewCurrent')
                  ? 'cm-bg-primary'
                  : 'view-switch'
              "
            >
              <button
                class="btn btn-32px min-w-60px"
                type="button"
                aria-expanded="false"
              >
                <span class="me-1">{{ item.text }}</span>
                <span class="" *ngIf="item.value == '1'"
                  >({{ countTarget }})</span
                >
                <span class="" *ngIf="item.value == '2'"
                  >({{ countPersons }})</span
                >
              </button>
            </div>
          </div>
        </div>

        <div class="d-flex flex-row ms-4" *ngIf="this.viewMode == 9">
          <div
            class="w-130px text-center"
            [ngClass]="'cm-rounded-pill-left'"
            (click)="viewDataValueGrid('1')"
          >
            <div
              [ngClass]="viewDataValue == '1' ? 'cm-bg-primary' : 'view-switch'"
            >
              <button
                class="btn btn-32px min-w-60px"
                type="button"
                aria-expanded="false"
              >
                <span class="me-1"
                  ><codx-label
                    name="lblViewTarget"
                    [formModel]="view.formModel"
                    default="Xem theo chỉ tiêu"
                  ></codx-label
                ></span>
              </button>
            </div>
          </div>
          <div
            class="w-130px text-center"
            [ngClass]="'cm-rounded-pill-right'"
            (click)="viewDataValueGrid('2')"
          >
            <div
              [ngClass]="viewDataValue == '2' ? 'cm-bg-primary' : 'view-switch'"
            >
              <button
                class="btn btn-32px min-w-60px"
                type="button"
                aria-expanded="false"
              >
                <span class="me-1"
                  ><codx-label
                    name="lblViewDataValue"
                    [formModel]="view.formModel"
                    default="Xem theo doanh số thực tế"
                  ></codx-label
                ></span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end">
        <div class="ms-2" ngbDropdown [container]="'body'">
          <div
            role="button"
            class="d-flex align-items-center border px-2 h-32px rounded-1 w-100px bg-gray-100"
            (click)="clickShow(!isShow)"
            *ngIf="isShow == true"
          >
            <i class="icon-i-arrows-collapse me-2"></i>
            <codx-label
              default="Thu gọn"
              [formModel]="view.formModel"
              fiedName="lblCollapse"
            ></codx-label>
          </div>
          <div
            role="button"
            class="d-flex align-items-center border px-2 h-32px rounded-1 w-100px"
            (click)="clickShow(!isShow)"
            *ngIf="isShow == false"
          >
            <i class="icon-i-arrows-expand me-2"></i>
            <codx-label
              default="Mở rộng"
              [formModel]="view.formModel"
              fiedName="lblExpand"
            ></codx-label>
          </div>
        </div>
        <div class="ms-2 btn-32px target-calendar">
          <codx-dropdown-calendar
            #calendarDrop
            cssPopup="h-350px w-550px"
            [value]="date"
            [selectedType]="'y'"
            [displayOption]="ops"
            cssClass="w-100"
            (valueChange)="changeCalendar($event)"
            (change)="changeCalendar($event)"
          ></codx-dropdown-calendar>
        </div>
        <div class="w-75px ms-2 input-32px" *ngIf="viewDataValue == '2'">
          <codx-input
            #codxInput
            type="valuelist"
            refValue="CRM055"
            [crrValue]="probability"
            (valueChange)="valueChangeProbability($event)"
            field="probability"
          >
          </codx-input>
        </div>
        <div class="w-75px ms-2 input-32px">
          <codx-input
            #codxInput
            [formModel]="view.formModel"
            [crrValue]="currencyID"
            (valueChange)="valueChange($event)"
            field="currencyID"
          >
          </codx-input>
        </div>
      </div>
    </div>

    <div class="scroll-tree" *ngIf="viewMode === 16">
      <ng-container *ngIf="loadedTree">
        <div *ngIf="lstDataTree != null && lstDataTree.length > 0; else noData">
          <div
            class="container treeview w-100"
            *ngIf="loadedTree"
            style="padding-right: 70px; padding-left: 70px"
          >
            <codx-view-tree-targets
              [dataTree]="lstDataTree"
              [fmTargetLines]="fmTargetLines"
              [formModel]="view.formModel"
              [viewCurrent]="viewCurrent"
              [hidenMF]="viewCalendar"
              (clickMoreFunc)="clickMoreFunc($event)"
              (changeMoreMF)="changeMoreMF($event)"
            ></codx-view-tree-targets>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="h-100 scroll-grid" *ngIf="viewMode === 9">
      <codx-gridview-v2
        #gridBusiness
        [formName]="view.formModel?.formName"
        [gridViewName]="view.formModel?.gridViewName"
        [entityName]="view.formModel?.entityName"
        [columnsGrid]="columnGrids"
        rowHeight="35"
        [allowFiltering]="true"
        [autoAddRow]="true"
        [allowSorting]="true"
        [hideMoreFunc]="true"
        [showRowNumber]="false"
        [loaded]="loadedTree"
        service="CM"
        [autoLoad]="false"
        [autoFitColumns]="false"
        [dataSource]="lstDataTree"
        [height]="'100%'"
      >
      </codx-gridview-v2>
    </div>
  </div>
</ng-template>

<ng-template #noData>
  <div class="empty-data">
    <div class="container h-100">
      <div class="list-empty card card-flush h-100">
        <div class="d-flex flex-column flex-center justify-content-center">
          <img
            src="../assets/themes/sys/default/img/DataEmpty.svg"
            class="w-200px"
          />
          <div class="fs-5 text-dark fw-bold mt-2 text-center">
            {{ "SYS011" | mssg | async }}
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!--end-->

<!--Grid-->
<!--Headerrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr ---------------------------- -->
<ng-template #headerBusinessLine>
  <codx-label
    *ngIf="viewCurrent == '1'"
    class="container"
    [formModel]="view.formModel"
    fiedName="BusinessLineID"
    default="Dòng sản phẩm"
    [setRequire]="false"
  >
  </codx-label>
  <codx-label
    *ngIf="viewCurrent == '2'"
    class="container"
    [formModel]="view.formModel"
    name="lblSalepersons"
    default="Nhân viên bán hàng"
    [setRequire]="false"
  >
  </codx-label>
</ng-template>
<ng-template #headerYear>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblYear" default="Năm">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerQuarter1>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblQuarter1" default="Quý 1">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerQuarter2>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblQuarter2" default="Quý 2">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerQuarter3>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblQuarter3" default="Quý 3">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerQuarter4>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblQuarter4" default="Quý 4">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth1>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth1" default="Tháng 1">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth2>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth2" default="Tháng 2">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth3>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth3" default="Tháng 3">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth4>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth4" default="Tháng 4">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth5>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth5" default="Tháng 5">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth6>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth6" default="Tháng 6">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth7>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth7" default="Tháng 7">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth8>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth8" default="Tháng 8">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth9>
  <div class="d-flex justify-content-end">
    <codx-label [formModel]="view.formModel" name="lblMonth9" default="Tháng 9">
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth10>
  <div class="d-flex justify-content-end">
    <codx-label
      [formModel]="view.formModel"
      name="lblMonth10"
      default="Tháng 10"
    >
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth11>
  <div class="d-flex justify-content-end">
    <codx-label
      [formModel]="view.formModel"
      name="lblMonth11"
      default="Tháng 11"
    >
    </codx-label>
  </div>
</ng-template>
<ng-template #headerMonth12>
  <div class="d-flex justify-content-end">
    <codx-label
      [formModel]="view.formModel"
      name="lblMonth12"
      default="Tháng 12"
    >
    </codx-label>
  </div>
</ng-template>
<!--Headerrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr ---------------------------- -->

<!-- BODYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY -->
<ng-template #templateBusinessLine let-item>
  <div class="container">
    <div class="d-flex" [ngClass]="'height-parent'">
      <codx-mfunc
        *ngIf="viewCurrent == '1' && !viewCalendar"
        [formModel]="view.formModel"
        (clickMF)="clickMF($event, item)"
        (changeDataMF)="changeDataMF($event, item)"
        [isBookMark]="false"
        [dataItem]="item"
        type="view"
      >
      </codx-mfunc>
      <div class="me-1 w-30px">
        <span
          (click)="clickShowGrid(item, !item.isCollapse)"
          *ngIf="item.isCollapse == false"
          class="i-collapse cursor-pointer icon-22 icon-arrow_right me-2"
        ></span>

        <span
          (click)="clickShowGrid(item, !item.isCollapse)"
          *ngIf="item.isCollapse == true"
          class="i-collapse cursor-pointer icon-22 icon-arrow_drop_down me-2"
        ></span>
      </div>
      <div class="d-flex flex-column w-100">
        <div
          *ngIf="viewCurrent == '1'"
          class="fw-bold mb-1 mt-1 line-clamp line-clamp-1 overflow-ellipsis"
          [ngbPopover]="item?.title"
          #p="ngbPopover"
          [openDelay]="500"
          (mouseenter)="PopoverDetail($event, p, item)"
          (mouseleave)="p.close()"
          placement="bottom right top"
          [popoverClass]="item.recID"
        >
          {{ item?.title }}
        </div>
        <div class="d-flex mb-1 mt-1 flex-row" *ngIf="viewCurrent == '2'">
          <codx-img
            [objectId]="item?.salespersonID"
            imageType="circle"
            width="30"
            [objectType]="'AD_Users'"
            [objectName]="item?.title"
          ></codx-img>
          <div [ngClass]="'ms-2 d-flex flex-column'">
            <span class="text-dark fw-bold fs-6">
              {{ item?.title }}
            </span>
            <div
              class="line-clamp line-clamp-1 text-gray-600"
              [ngbPopover]="item?.positionName"
              #p="ngbPopover"
              [openDelay]="500"
              (mouseenter)="PopoverDetail($event, p, item)"
              (mouseleave)="p.close()"
              placement="bottom right top"
              [popoverClass]="item.recID"
            >
              {{ item?.positionName }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="item?.items != null && item?.items.length > 0">
      <ng-container *ngFor="let busi of item?.items">
        <div *ngIf="busi.isCollapse">
          <div
            class="d-flex container treeview height-child"
            *ngIf="
              item.businessLineID == busi.businessLineID && viewCurrent == '1'
            "
          >
            <codx-mfunc
              *ngIf="!viewCalendar"
              [formModel]="view.formModel"
              (clickMF)="clickMF($event, busi)"
              (changeDataMF)="changeDataMF($event, busi)"
              [isBookMark]="false"
              [dataItem]="busi"
              type="view"
            >
            </codx-mfunc>
            <div class="d-flex flex-row ms-5">
              <codx-img
                [objectId]="busi?.salespersonID"
                imageType="circle"
                width="30"
                [objectType]="'AD_Users'"
                [objectName]="busi?.title"
              ></codx-img>
              <div [ngClass]="'ms-4 d-flex flex-column'">
                <span class="text-dark fw-bold mb-1">
                  {{ busi?.title }}
                </span>
                <div
                  class="line-clamp line-clamp-1 text-gray-500"
                  [ngbPopover]="busi?.positionName"
                  #p="ngbPopover"
                  [openDelay]="500"
                  (mouseenter)="PopoverDetail($event, p, busi)"
                  (mouseleave)="p.close()"
                  placement="bottom right top"
                  [popoverClass]="busi.recID"
                >
                  {{ busi?.positionName }}
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              item.salespersonID == busi.salespersonID && viewCurrent == '2'
            "
            class="container treeview height-child-user"
            style="margin-left: 50px"
            [ngbPopover]="busi?.title"
            #p="ngbPopover"
            [openDelay]="500"
            (mouseenter)="PopoverDetail($event, p, busi)"
            (mouseleave)="p.close()"
            placement="bottom right top"
            [popoverClass]="busi.recID"
          >
            <span class="text-dark fw-bold">
              {{ busi?.title }}
            </span>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</ng-template>

<ng-template #templateYear let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="item?.target > 0"
        [innerHTML]="
          targetToFixed(item?.target)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="item?.target === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="item.dealValue > 0"
          [innerHTML]="
            targetToFixed(item?.dealValue)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="item?.dealValue === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            formatNumberWithoutTrailingZeros(item?.probabilityDV) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="busi?.target > 0"
              class="text-gray-800"
              [innerHTML]="
                targetToFixed(busi?.target)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span class="text-gray-800" *ngIf="busi?.target === 0">0</span>
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="busi.dealValue > 0"
                [innerHTML]="
                  targetToFixed(busi?.dealValue)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span class="text-gray-800" *ngIf="busi?.dealValue === 0">0</span>
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  formatNumberWithoutTrailingZeros(busi?.probabilityDV) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateQuarter1 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="sumTargetQuarter(item.targetsLines, 1) > 0"
        [innerHTML]="
          sumTargetQuarter(item.targetsLines, 1)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="sumTargetQuarter(item.targetsLines, 1) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="sumDealValueQuarter(item?.deals, 1) > 0"
          [innerHTML]="
            sumDealValueQuarter(item?.deals, 1)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="sumDealValueQuarter(item?.deals, 1) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            sumProbabilityDVQuarter(item?.deals, item.targetsLines, 1) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="sumTargetQuarter(busi.targetsLines, 1) > 0"
              class="text-gray-800"
              [innerHTML]="
                sumTargetQuarter(busi.targetsLines, 1)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="sumTargetQuarter(busi.targetsLines, 1) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 1) > 0"
                [innerHTML]="
                  sumDealValueQuarter(busi?.deals, 1)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 1) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  sumProbabilityDVQuarter(busi?.deals, busi.targetsLines, 1) +
                  '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateQuarter2 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="sumTargetQuarter(item.targetsLines, 2) > 0"
        [innerHTML]="
          sumTargetQuarter(item.targetsLines, 2)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="sumTargetQuarter(item.targetsLines, 2) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="sumDealValueQuarter(item?.deals, 2) > 0"
          [innerHTML]="
            sumDealValueQuarter(item?.deals, 2)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="sumDealValueQuarter(item?.deals, 2) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            sumProbabilityDVQuarter(item?.deals, item.targetsLines, 2) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="sumTargetQuarter(busi.targetsLines, 2) > 0"
              class="text-gray-800"
              [innerHTML]="
                sumTargetQuarter(busi.targetsLines, 2)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="sumTargetQuarter(busi.targetsLines, 2) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 2) > 0"
                [innerHTML]="
                  sumDealValueQuarter(busi?.deals, 2)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 2) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  sumProbabilityDVQuarter(busi?.deals, busi.targetsLines, 2) +
                  '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateQuarter3 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="sumTargetQuarter(item.targetsLines, 3) > 0"
        [innerHTML]="
          sumTargetQuarter(item.targetsLines, 3)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="sumTargetQuarter(item.targetsLines, 3) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="sumDealValueQuarter(item?.deals, 3) > 0"
          [innerHTML]="
            sumDealValueQuarter(item?.deals, 3)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="sumDealValueQuarter(item?.deals, 3) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            sumProbabilityDVQuarter(item?.deals, item.targetsLines, 3) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="sumTargetQuarter(busi.targetsLines, 3) > 0"
              class="text-gray-800"
              [innerHTML]="
                sumTargetQuarter(busi.targetsLines, 3)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="sumTargetQuarter(busi.targetsLines, 3) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 3) > 0"
                [innerHTML]="
                  sumDealValueQuarter(busi?.deals, 3)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 3) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  sumProbabilityDVQuarter(busi?.deals, busi.targetsLines, 3) +
                  '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateQuarter4 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="sumTargetQuarter(item.targetsLines, 4) > 0"
        [innerHTML]="
          sumTargetQuarter(item.targetsLines, 4)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="sumTargetQuarter(item.targetsLines, 4) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="sumDealValueQuarter(item?.deals, 4) > 0"
          [innerHTML]="
            sumDealValueQuarter(item?.deals, 4)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="sumDealValueQuarter(item?.deals, 4) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            sumProbabilityDVQuarter(item?.deals, item.targetsLines, 4) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="sumTargetQuarter(busi.targetsLines, 4) > 0"
              class="text-gray-800"
              [innerHTML]="
                sumTargetQuarter(busi.targetsLines, 4)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="sumTargetQuarter(busi.targetsLines, 4) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 4) > 0"
                [innerHTML]="
                  sumDealValueQuarter(busi?.deals, 4)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="sumDealValueQuarter(busi?.deals, 4) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  sumProbabilityDVQuarter(busi?.deals, busi.targetsLines, 4) +
                  '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth1 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 1) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 1)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 1) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 1) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 1)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 1) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 1) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 1) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 1)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 1) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 1) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 1)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 1) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 1) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth2 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 2) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 2)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 2) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 2) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 2)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 2) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 2) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 2) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 2)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 2) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 2) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 2)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 2) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 2) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth3 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 3) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 3)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 3) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 3) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 3)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 3) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 3) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 3) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 3)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 3) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 3) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 3)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 3) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 3) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth4 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 4) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 4)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 4) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 4) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 4)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 4) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 4) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 4) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 4)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 4) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 4) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 4)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 4) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 4) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth5 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 5) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 5)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 5) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 5) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 5)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 5) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 5) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 5) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 5)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 5) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 5) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 5)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 5) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 5) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth6 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 6) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 6)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 6) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 6) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 6)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 6) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 6) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 6) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 6)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 6) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 6) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 6)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 6) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 6) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth7 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 7) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 7)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 7) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 7) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 7)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 7) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 7) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 7) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 7)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 7) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 7) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 7)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 7) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 7) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth8 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 8) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 8)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 8) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 8) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 8)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 8) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 8) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 8) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 8)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 8) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 8) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 8)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 8) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 8) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth9 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 9) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 9)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 9) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 9) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 9)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 9) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 9) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 9) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 9)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 9) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 9) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 9)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 9) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 9) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth10 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 10) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 10)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 10) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 10) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 1)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 10) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 10) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 10) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 10)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 10) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 10) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 10)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 10) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 10) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth11 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 11) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 11)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 11) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 11) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 11)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 11) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 11) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 11) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 11)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 11) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 11) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 11)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 11) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 11) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #templateMonth12 let-item>
  <div
    class="pt-5px d-flex align-items-start justify-content-end"
    [ngClass]="'height-parent'"
  >
    <div *ngIf="viewDataValue == '1'">
      <span
        *ngIf="getTargetMonth(item.targetsLines, 12) > 0"
        [innerHTML]="
          getTargetMonth(item.targetsLines, 12)
            | formatvalue : view.formModel : 'Target'
            | async
        "
      ></span>
      <span *ngIf="getTargetMonth(item.targetsLines, 12) === 0">0</span>
    </div>
    <div *ngIf="viewDataValue == '2'">
      <ng-container *ngIf="probability == '1'">
        <span
          *ngIf="getDealValueMonth(item?.deals, 12) > 0"
          [innerHTML]="
            getDealValueMonth(item?.deals, 12)
              | formatvalue : view.formModel : 'Target'
              | async
          "
        ></span>
        <span *ngIf="getDealValueMonth(item?.deals, 12) === 0">0</span>
      </ng-container>
      <ng-container *ngIf="probability == '2'">
        <span
          [innerHTML]="
            getProbabilityMonth(item?.deals, item.targetsLines, 12) + '%'
          "
        ></span>
      </ng-container>
    </div>
  </div>
  <div *ngIf="item?.items != null && item?.items.length > 0">
    <ng-container *ngFor="let busi of item?.items">
      <div *ngIf="busi.isCollapse">
        <div
          class="d-flex align-items-start justify-content-end"
          [ngClass]="viewCurrent == '1' ? 'height-child' : 'height-child-user'"
        >
          <div *ngIf="viewDataValue == '1'">
            <span
              *ngIf="getTargetMonth(busi.targetsLines, 12) > 0"
              class="text-gray-800"
              [innerHTML]="
                getTargetMonth(busi.targetsLines, 12)
                  | formatvalue : view.formModel : 'Target'
                  | async
              "
            ></span>
            <span
              class="text-gray-800"
              *ngIf="getTargetMonth(busi.targetsLines, 12) === 0"
              >0</span
            >
          </div>
          <div *ngIf="viewDataValue == '2'">
            <ng-container *ngIf="probability == '1'">
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 12) > 0"
                [innerHTML]="
                  getDealValueMonth(busi?.deals, 12)
                    | formatvalue : view.formModel : 'Target'
                    | async
                "
              ></span>
              <span
                class="text-gray-800"
                *ngIf="getDealValueMonth(busi?.deals, 12) === 0"
                >0</span
              >
            </ng-container>
            <ng-container *ngIf="probability == '2'">
              <span
                class="text-gray-800"
                [innerHTML]="
                  getProbabilityMonth(busi?.deals, busi.targetsLines, 12) + '%'
                "
              ></span>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>
<!-- BODYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY -->

<!--end-->
