<div class="empty-data" *ngIf="!itemSelected?.recID">
  <div class="container h-100">
    <div class="list-empty card card-flush h-100">
      <div class="d-flex flex-column flex-center justify-content-center">
        <img
          src="../assets/themes/sys/default/img/DataEmpty.svg"
          class="w-200px"
        />
        <div class="fs-5 text-dark fw-bold mt-2 text-center">
          {{ "SYS011" | mssg | async }}
        </div>
      </div>
    </div>
  </div>
</div>
<ng-container *ngIf="itemSelected?.recID">
  <codx-detail-tmp
    [header]="header"
    [formModel]="formModel"
    [body]="body"
    [footer]="footer"
    (clickMF)="clickMF($event, itemSelected)"
    (changeDataMF)="changeDataMF($event, itemSelected)"
    [dataItem]="itemSelected"
  >
    <ng-template #header>
      <div class="container_detail mt-3">
        <div class="d-flex flex-grow-1 mb-4">
          <div class="d-flex flex-column flex-grow-1">
            <div class="d-flex justify-content-between">
              <div class="fw-bold fs-3 text-dark">
                <span
                  class="me-5"
                  [innerHTML]="
                    itemSelected.quotationName
                      | formatvalue : formModel : 'quotationName'
                      | async
                  "
                ></span>
                <span
                  [innerHTML]="
                    itemSelected.quotationID
                      | formatvalue : formModel : 'quotationID'
                      | async
                  "
                ></span>
              </div>
              <div class="d-flex flex-row align-items-start">
                <codx-vll
                  *ngIf="vllStatus"
                  [name]="vllStatus"
                  [field]="'Status'"
                  [value]="itemSelected?.status"
                  [showText]="true"
                  [showBgColor]="true"
                  class="badge badge-light badge-md fs-7"
                >
                </codx-vll>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
    <ng-template #body>
      <div class="container_detail mt-3">
        <div class="d-flex justify-content-between">
          <div class="d-flex">
            <div class="me-10 d-flex">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="VersionNo"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.versionNo
                    | formatvalue : formModel : 'versionNo'
                    | async
                "
              ></span>
            </div>
            <div class="me-10 d-flex">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="CreatedOn"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.createdOn
                    | formatvalue : formModel : 'createdOn'
                    | async
                "
              ></span>
            </div>
            <div class="d-flex">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="Deadline"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.deadline
                    | formatvalue : formModel : 'deadline'
                    | async
                "
              ></span>
            </div>
          </div>
          <div class="d-flex flex-row align-items-start">
            <codx-imgs
              [width]="35"
              [objectId]="itemSelected.createdBy"
              ojectType="AD_Users"
              [numberImages]="1"
            >
            </codx-imgs>
          </div>
        </div>

        <div class="d-flex flex-column py-3">
          <div class="d-flex row">
            <div class="d-flex col-6">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="RefID"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.refID
                    | formatvalue : formModel : 'refID'
                    | async
                "
              ></span>
            </div>
            <div class="d-flex col-6">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="CurrencyID"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.currencyID
                    | formatvalue : formModel : 'currencyID'
                    | async
                "
              ></span>
            </div>
          </div>
          <div class="d-flex row">
            <div class="d-flex col-6">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="CustomerID"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                class="icon-corporate_fare text-primary icon-16 me-2"
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.customerID
                    | formatvalue : formModel : 'customerID'
                    | async
                "
              ></span>
            </div>
            <div class="d-flex col-6">
              <span>
                <codx-label
                  class="label-colon"
                  fiedName="ExchangeRate"
                  [formModel]="formModel"
                ></codx-label
              ></span>
              <span
                [innerHTML]="
                  itemSelected?.exchangeRate
                    | formatvalue : formModel : 'exchangeRate'
                    | async
                "
              ></span>
            </div>
          </div>
        </div>

        <div *ngIf="contact" class="d-flex flex-grow-1 mt-4 mb-4">
          <div class="me-3">
            <codx-img
              [referType]="'avt'"
              [width]="50"
              [objectId]="itemSelected?.contactID"
              objectType="CM_Contacts"
              [imgOn]="contact?.modifiedOn"
              [objectName]="contact?.contactName"
            >
            </codx-img>
          </div>
          <div class="d-flex flex-column flex-grow-1">
            <div class="d-flex justify-content-between">
              <div class="d-flex flex-column">
                <div class="fw-bold fs-6 text-dark codx-text-overflow-1line">
                  <span
                    #contactName
                    [innerHTML]="
                      contact?.contactName
                        | formatvalue
                          : formModel
                          : 'contactName'
                          : contactName
                          : 'CMContacts'
                          : 'grvCmContacts'
                        | async
                    "
                  ></span>
                </div>
                <div class="text-gray-500 me-4 mb-1"></div>
                <ng-container>
                  <div class="d-flex align-items-center">
                    <div class="d-flex align-items-center me-4">
                      <span
                        class="icon-phone_android icon-16 text-gray-700 me-2"
                      ></span>
                      <div div class="text-gray-700">
                        <span
                          #phone
                          [innerHTML]="
                            contact?.mobile
                              | formatvalue
                                : formModel
                                : 'mobile'
                                : phone
                                : 'CMContacts'
                                : 'grvCmContacts'
                              | async
                          "
                        ></span>
                      </div>
                    </div>
                    <div class="d-flex align-items-center">
                      <span
                        class="icon-email icon-16 text-gray-700 me-2"
                      ></span>
                      <div div class="font-size-sm">
                        <span
                          #email
                          [innerHTML]="
                            contact?.personalEmail
                              | formatvalue
                                : formModel
                                : 'personalEmail'
                                : email
                                : 'CMContacts'
                                : 'grvCmContacts'
                              | async
                          "
                        ></span>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-6 mb-3 text-primary fw-bold">
        <codx-label
          name="lblTaskName"
          [formModel]="formModel"
          default="Chi tiết mặt hàng"
        >
        </codx-label>
      </div>
      <codx-gridview-v2
        #gridQuationsLines
        service="CM"
        [formName]="fmQuotationLines.formName"
        [gridViewName]="fmQuotationLines.gridViewName"
        [entityName]="fmQuotationLines.entityName"
        [editSettings]="editSettings"
        [allowFiltering]="true"
        [allowSorting]="true"
        [dataSource]="dataSource"
        [height]="gridHeight"
        [autoLoad]="false"
        rowHeight="40"
        predicates="TransID=@0"
        [dataValues]="itemSelected.recID"
      ></codx-gridview-v2>
      <!-- <codx-gridview-v2
        idField="recID"
        [service]="'CM'"
        [gridViewName]="fmQuotationLines.gridViewName"
        [formName]="fmQuotationLines.formName"
        [entityName]="fmQuotationLines.entityName"
        [assemblyName]="'Core'"
        [className]="'DataBusiness'"
        [method]="'LoadDataAsync'"
        predicates="TransID=@0"
        [autoLoad]="true"
        [height]="gridHeight"
        [dataValues]="itemSelected.recID"
        [contentEditable]="false"
        [allowResizing]="true"
      ></codx-gridview-v2> -->

      <div #tabsNote class="row mt-5">
        <div class="form-group col-7">
          <codx-label fiedName="Memo" [formModel]="formModel"></codx-label>
          <div
            class="text-gray-700"
            *ngIf="itemSelected?.memo"
            [innerHTML]="sanitizer.bypassSecurityTrustHtml(itemSelected?.memo)"
          ></div>
          <div
            *ngIf="!itemSelected?.memo"
            [innerHTML]="
              itemSelected?.memo | formatvalue : formModel : 'memo' | async
            "
          ></div>
        </div>
        <div
          class="col-5 fw-bolder fs-6"
          style="padding-left: 100px; padding-right: 50px"
        >
          <div class="d-flex justify-content-between">
            <div class="">
              <codx-label
                class="label-colon"
                fiedName="TotalAmt"
                [formModel]="formModel"
              ></codx-label>
            </div>
            <div
              [innerHTML]="
                itemSelected.totalAmt
                  | formatvalue : formModel : 'TotalAmt'
                  | async
              "
            ></div>
          </div>
          <div class="d-flex justify-content-between">
            <div>
              <codx-label
                class="label-colon"
                fiedName="DiscAmt"
                [formModel]="formModel"
              ></codx-label>
            </div>
            <div
              [innerHTML]="
                itemSelected.discAmt
                  | formatvalue : formModel : 'DiscAmt'
                  | async
              "
            ></div>
          </div>
          <div class="d-flex justify-content-between">
            <div>
              <codx-label
                class="label-colon"
                fiedName=""
                [formModel]="formModel"
                default="Tiền thuế"
              ></codx-label>
            </div>
            <div>2.300.000</div>
          </div>
          <div class="d-flex justify-content-between">
            <div class="">
              <codx-label
                class="label-colon text-danger"
                fiedName="TotalAmt"
                [formModel]="formModel"
              ></codx-label>
            </div>
            <div
              [innerHTML]="
                itemSelected.totalAmt
                  | formatvalue : formModel : 'TotalAmt'
                  | async
              "
            ></div>
          </div>
        </div>
      </div>
    </ng-template>

    <ng-template #footer>
      <codx-tabs
        [entityName]="formModel.entityName"
        [formModel]="formModel"
        [TabControl]="tabControl"
        [objectID]="itemSelected.recID"
        [funcID]="formModel.funcID"
      ></codx-tabs>
    </ng-template>
  </codx-detail-tmp>
</ng-container>
