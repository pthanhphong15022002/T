<ng-container *ngIf="loaded">
  <div class="h-100 scroll-grid">
    <codx-gridview-v2
      #grid
      service="WR"
      [formModel]="formModel"
      [dataSource]="lstCampContacts"
      [templateMore]="tempMorefunction"
      rowHeight="40"
      [height]="'100%'"
      [hideMoreFunc]="false"
      [columnsGrid]="columnsGrid"
    ></codx-gridview-v2>
  </div>
  <div [class]="'d-flex justify-content-center mt-1'">
    <button
      type="button"
      class="btn btn-sm btn-icon btn-primary me-2 d-flex"
      style="min-width: 100px"
      (click)="addCampaignContact('add')"
    >
      <i class="icon-add_location_alt icon-16 me-1"></i>
      <codx-label
        name="lblAdd"
        [formModel]="formModel"
        default="Thêm"
      ></codx-label>
    </button>
  </div>
</ng-container>

<ng-template #tempMorefunction let-data>
  <div class="" style="height: 30px">
    <codx-mfunc
      [dataItem]="data"
      [formModel]="formModel"
      type="view"
      [isBookMark]="false"
      (clickMF)="clickMF($event, data)"
      (changeDataMF)="changeDataMF($event, data)"
    ></codx-mfunc>
  </div>
</ng-template>

<ng-template #headerCustomerName>
  <codx-label
    [formModel]="formModel"
    name="lblCustomerName"
    default="Tên khách hàng"
  >
  </codx-label>
</ng-template>

<ng-template #tempCustomerName let-data>
  <div class="d-flex justify-content-start align-items-center">
    <div class="d-flex flex-column">
      <div
        class="mb-1 fw-bold"
        [innerHTML]="
          data?.objectName | formatvalue : formModel : 'ObjectName' | async
        "
      ></div>
      <div
        class="text-gray-700"
        [innerHTML]="
          data?.address | formatvalue : formModel : 'Address' | async
        "
      ></div>
    </div>
  </div>
</ng-template>

<ng-template #headerIndustries>
  <codx-label
    [formModel]="formModel"
    name="lblIndustries"
    default="Lĩnh vực hoạt động"
  >
  </codx-label>
</ng-template>

<ng-template #tempIndustries let-data>
  <div class="d-flex justify-content-start align-items-center">
    <div
      class="mb-1"
      [innerHTML]="
        data?.industries | formatvalue : formModel : 'Industries' | async
      "
    ></div>
  </div>
</ng-template>

<ng-template #headerContact>
  <codx-label
    [formModel]="formModel"
    name="lblContacts"
    default="Người liên hệ"
  >
  </codx-label>
</ng-template>

<ng-template #tempContact let-data>
  <div class="d-flex justify-content-start align-items-center">
    <div class="d-flex flex-column">
      <div
        class="mb-1"
        [innerHTML]="
          data?.contactName | formatvalue : formModel : 'ContactName' | async
        "
      ></div>
      <div
        class="mb-1 text-gray-700"
        [innerHTML]="
          data?.jobTitle | formatvalue : formModel : 'JobTitle' | async
        "
      ></div>
      <div
        class="mb-1 text-primary"
        [innerHTML]="data?.phone | formatvalue : formModel : 'Phone' | async"
      ></div>
      <div
        class="mb-1 text-primary"
        [innerHTML]="data?.email | formatvalue : formModel : 'Email' | async"
      ></div>
    </div>
  </div>
</ng-template>

<ng-template #headerOwner>
  <codx-label
    [formModel]="formModel"
    fiedName="Owner"
    default="Người phụ trách"
  >
  </codx-label>
</ng-template>

<ng-template #tempOwner let-data>
  <div class="d-flex justify-content-start align-items-center">
    <div
      class="mb-1"
      [innerHTML]="data?.owner | formatvalue : formModel : 'Owner' | async"
    ></div>
  </div>
</ng-template>

<ng-template #headerStatus>
  <codx-label [formModel]="formModel" fiedName="Status" default="Trạng thái">
  </codx-label>
</ng-template>

<ng-template #tempStatus let-data>
  <div class="d-flex justify-content-start align-items-center">
    <codx-vll
      [name]="gridViewSetup?.Status?.referedValue"
      [field]="'Status'"
      [value]="data?.status"
      [showText]="true"
      [showBgColor]="true"
      class="badge badge-light badge-sm"
    >
    </codx-vll>
  </div>
</ng-template>

<ng-template #headerHistory>
  <codx-label
    [formModel]="formModel"
    name="lblHistory"
    default="Lịch sử tác động"
  >
  </codx-label>
</ng-template>

<ng-template #tempHistory let-data>
  <div class="d-flex justify-content-start align-items-center">
    <div class="d-flex me-2">
      <div class="icon-email text-primary icon-16 me-1"></div>
      <div
        *ngIf="data?.called && data?.called > 0"
        [innerHTML]="data?.called | formatvalue : formModel : 'Called' | async"
      ></div>
      <div *ngIf="data?.called == null || data?.called == 0">0</div>
    </div>
    <div class="d-flex me-2">
      <div class="icon-email text-primary icon-16 me-1"></div>
      <div
        *ngIf="data?.sendMail && data?.sendMail > 0"
        [innerHTML]="
          data?.sendMail | formatvalue : formModel : 'SendMail' | async
        "
      ></div>
      <div *ngIf="data?.sendMail == null || data?.sendMail == 0">0</div>
    </div>
  </div>
</ng-template>
