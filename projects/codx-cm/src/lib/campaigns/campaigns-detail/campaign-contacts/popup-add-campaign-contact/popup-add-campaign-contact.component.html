<codx-form
  #form
  [headerText]="titleAction"
  [openMore]="false"
  [dialog]="dialog"
  [formModel]="dialog.formModel"
  [footer]="footer"
  [body]="tabCriteria"
></codx-form>
<!-- <codx-layout-add
  #form
  [title]="title"
  [tabInfo]="tabInfo"
  [footer]="footer"
  [formModel]="dialog.formModel"
  [dialog]="dialog"
  (setTitle)="setTitle()"
  [tabContent]="[tabCriteria, tabListCustomers]"
></codx-layout-add> -->
<ng-template #tabCriteria>
  <div class="form-group row">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isProvince'"
          [crrValue]="isProvince"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isProvince, 'isProvince')"
      >
        <codx-label [formModel]="form.formModel" fiedName="ProvinceID">
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <!-- <codx-input
        type="combobox"
        [field]="'provinceIDs'"
        [multiple]="true"
        [showInput]="true"
        [crrValue]="provinceIDs"
        [disabled]="!isProvince"
        refValue="CMProvinces"
        (valueChange)="valueChange($event)"
      ></codx-input> -->
      <codx-dropdown-select
        #cbxProvince
        type="combobox"
        field="provinceIDs"
        [refValue]="gridViewSetup?.ProvinceID?.referedValue"
        [emptyText]="gridViewSetup?.ProvinceID?.headerText"
        [value]="provinceIDs"
        [disabled]="!isProvince"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isDistrict'"
          [crrValue]="isDistrict"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isDistrict, 'isDistrict')"
      >
        <codx-label [formModel]="form.formModel" fiedName="DistrictID">
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <codx-dropdown-select
        #cbxDistrict
        type="combobox"
        field="districtIDs"
        [refValue]="gridViewSetup?.DistrictID?.referedValue"
        [emptyText]="gridViewSetup?.DistrictID?.headerText"
        [value]="districtIDs"
        [disabled]="!isDistrict"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
      <!-- <codx-input
        type="combobox"
        [field]="'districtIDs'"
        [multiple]="true"
        [crrValue]="districtIDs"
        refValue="CMDistricts"
        [disabled]="!isDistrict"
        (valueChange)="valueChange($event)"
      ></codx-input> -->
    </div>
  </div>
  <div class="form-group row">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isIndustries'"
          [crrValue]="isIndustries"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isIndustries, 'isIndustries')"
      >
        <codx-label [formModel]="form.formModel" fiedName="industries">
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <codx-dropdown-select
        #cbxIndustries
        type="combobox"
        field="industries"
        [refValue]="gridViewSetup?.Industries?.referedValue"
        [emptyText]="gridViewSetup?.Industries?.headerText"
        [value]="industries"
        [disabled]="!isIndustries"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
    </div>
  </div>
  <div class="form-group row" *ngIf="objectType == '1'">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isCustGroupID'"
          [crrValue]="isCustGroupID"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isCustGroupID, 'isCustGroupID')"
      >
        <codx-label [formModel]="form.formModel" fiedName="CustGroupID">
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <codx-dropdown-select
        #cbxCustGroupID
        type="combobox"
        field="custGroupIDs"
        [refValue]="gridViewSetup?.CustGroupID?.referedValue"
        [emptyText]="gridViewSetup?.CustGroupID?.headerText"
        [value]="custGroupIDs"
        [disabled]="!isCustGroupID"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isAnnualRevenue'"
          [crrValue]="isAnnualRevenue"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isAnnualRevenue, 'isAnnualRevenue')"
      >
        <codx-label [formModel]="form.formModel" fiedName="AnnualRevenue">
        </codx-label>
      </div>
    </div>
    <div class="col-8 d-flex align-items-center">
      <div class="col-5 d-flex align-items-center">
        <codx-label
          class="col-3 "
          [formModel]="form.formModel"
          name="lblFrom"
          default="Từ"
        >
        </codx-label>
        <div class="col-9">
          <codx-input
            [field]="'annualRevenue'"
            [formModel]="form.formModel"
            [disabled]="!isAnnualRevenue"
            [crrValue]="annualRevenue1"
            (valueChange)="valueChangeAnnual($event, 'annualRevenue1')"
          ></codx-input>
        </div>
      </div>
      <span class="col-2 d-flex justify-content-center align-items-center"
        >-</span
      >
      <div class="col-5 d-flex align-items-center">
        <codx-label
          class="col-3"
          [formModel]="form.formModel"
          name="lblTo"
          default="Đến"
        >
        </codx-label>
        <div class="col-9">
          <codx-input
            class=""
            [field]="'annualRevenue'"
            [formModel]="form.formModel"
            [disabled]="!isAnnualRevenue"
            [crrValue]="annualRevenue2"
            (valueChange)="valueChangeAnnual($event, 'annualRevenue2')"
          ></codx-input>
        </div>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isHeadcounts'"
          [crrValue]="isHeadcounts"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isHeadcounts, 'isHeadcounts')"
      >
        <codx-label [formModel]="form.formModel" [fiedName]="'Headcounts'">
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <codx-dropdown-select
        #cbxHeadCounts
        type="valuelist"
        field="headCounts"
        [refValue]="gridViewSetup?.Headcounts?.referedValue"
        [emptyText]="gridViewSetup?.Headcounts?.headerText"
        [value]="headCounts"
        [disabled]="!isHeadcounts"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
    </div>
  </div>
  <div class="form-group row" *ngIf="objectType == '1'">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isChannelIDs'"
          [crrValue]="isChannelIDs"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isChannelIDs, 'isChannelIDs')"
      >
        <codx-label [formModel]="form.formModel" [fiedName]="'ChannelID'">
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <codx-dropdown-select
        #cbxChannelID
        type="combobox"
        field="channelIDs"
        [refValue]="gridViewSetup?.ChannelID?.referedValue"
        [emptyText]="gridViewSetup?.ChannelID?.headerText"
        [value]="channelIDs"
        [disabled]="!isHeadcounts"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-4 d-flex">
      <div class="me-1">
        <codx-input
          type="checkbox"
          [field]="'isStatus'"
          [crrValue]="isStatus"
          (valueChange)="valueChangeCB($event)"
        ></codx-input>
      </div>
      <div
        style="cursor: pointer"
        (click)="valueChangeClick(isStatus, 'isStatus')"
      >
        <codx-label
          [formModel]="form.formModel"
          [fiedName]="objectType == '1' ? 'CustomerStatus' : 'LeadStatus'"
        >
        </codx-label>
      </div>
    </div>
    <div class="col-8">
      <codx-dropdown-select
        #cbxStatus
        type="valuelist"
        field="status"
        [refValue]="objectType == '3' ? 'CRM041' : 'CRM039'"
        [emptyText]="gridViewSetup?.Status?.headerText"
        [value]="status"
        [disabled]="!isStatus"
        [isMulti]="true"
        (valueChange)="valueChange($event)"
      ></codx-dropdown-select>
      <!-- <codx-input
        type="valuelist"
        [field]="'status'"
        [multiple]="true"
        [crrValue]="status"
        [disabled]="!isStatus"
        refValue="CRM041"
        (valueChange)="valueChange($event)"
      ></codx-input> -->
    </div>
  </div>
  <div class="form-group d-flex">
    <codx-label
      class="label-colon text-gray-500"
      [formModel]="form.formModel"
      [name]="objectType == '3' ? 'lblCountLeads' : 'lblCountCustomers'"
      [default]="
        objectType == '3'
          ? 'Số lượng khách hàng tiềm năng được tìm thấy'
          : 'Số lượng khách hàng được tiềm thấy'
      "
    >
    </codx-label>
    <span class="fw-bold">{{ countLeadCus }}</span>
  </div>
  <div class="form-group d-flex">
    <codx-label
      class="label-colon text-gray-500"
      [formModel]="form.formModel"
      [name]="objectType == '3' ? 'lblHadCountLeads' : 'lblHadCountCustomers'"
      [default]="
        objectType == '3'
          ? 'Số lượng khách hàng tiềm năng đã có trong chiến dịch'
          : 'Số lượng khách hàng đã có trong chiến dịch'
      "
    >
    </codx-label>
    <span class="fw-bold">{{ countHadLeadCus }}</span>
  </div>
  <div class="form-group d-flex">
    <codx-label
      class="label-colon text-gray-500"
      [formModel]="form.formModel"
      [name]="objectType == '3' ? 'lblCountAddLeads' : 'lblCountAddCustomers'"
      [default]="
        objectType == '3'
          ? 'Số lượng khách hàng tiềm năng sẽ được thêm'
          : 'Số lượng khách hàng sẽ được thêm'
      "
    >
    </codx-label>
    <span class="fw-bold">{{ countAdd }}</span>
  </div>
</ng-template>
<ng-template #tabListCustomers>
  <div class="form-group d-flex">
    <codx-label
      class="label-colon text-gray-500"
      [formModel]="form.formModel"
      [name]="objectType == '3' ? 'lblCountAddLeads' : 'lblCountAddCustomers'"
      [default]="
        objectType == '3'
          ? 'Số lượng khách hàng tiềm năng sẽ được thêm'
          : 'Số lượng khách hàng sẽ được thêm'
      "
    >
    </codx-label>
    <span class="fw-bold">{{ countAdd }}</span>
  </div>
  <div class="container-list">
    <ng-container *ngFor="let item of lstCampainsAdd">
      <div class="d-flex flex-column">
        <div
          class="mb-1 fw-bold"
          [innerHTML]="
            objectType == '3'
              ? item?.leadName
              : (item?.customerName
                | formatvalue : dialog.formModel : 'ObjectName'
                | async)
          "
        ></div>
        <div
          class="mb-1 d-flex align-items-top text-hover-primary"
          *ngIf="item.address"
        >
          <span
            class="icon-16 icon-place me-1 text-gray-700"
            [ngbTooltip]="popupAddress"
          >
          </span>
          <span class="fs-7 text-gray-600">{{ item?.address }} </span>
          <ng-template #popupAddress>
            <codx-label
              fiedName="Address"
              [formModel]="dialog.formModel"
            ></codx-label>
          </ng-template>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>
<ng-template #footer>
  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-primary" (click)="onSave()">
      <codx-label
        name="lblSave"
        [formModel]="dialog.formModel"
        default="Lưu"
      ></codx-label>
    </button>
  </div>
</ng-template>
