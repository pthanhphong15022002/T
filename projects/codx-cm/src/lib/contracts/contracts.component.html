<codx-views
  #view
  [funcID]="funcID"
  idField="recID"
  [service]="service"
  [assemblyName]="assemblyName"
  [entityName]="entityName"
  [className]="className"
  [method]="methodLoadData"
  [views]="views"
  [button]="button"
  (buttonClick)="click($event)"
  [toolbarDisplay]="true"
  [selectedFirst]="true"
  [autoLoad]="true"
  [autoSearch]="true"
  (selectedChange)="selectedChange($event)"
></codx-views>
<!-- temp left -->
<ng-template #itemTemplate let-data>
  <codx-temp-full
    cardCss="card-template border-bottom p-3 list-task"
    [titleCss]="'fw-bold fs-6 mb-1'"
    [typeMF]="'hover'"
    (clickMF)="clickMF($event, data)"
    (changeDataMF)="changeDataMF($event, data)"
    [title]="data.contractName"
    [descTmp]="descTmp"
    [formModel]="view.formModel"
    [dataItem]="data"
    [imageId]="data?.customerID"
    [imageObjType]="'CM_Customers'"
    [imgOn]="data?.modifiedOn"
    [imageReferType]="'avt'"
    [imageWidth]="35"
    imgCss="me-3"
  >
  </codx-temp-full>
</ng-template>

<ng-template #descTmp let-data>
  <div class="d-flex flex-column w-100">
    <div class="d-flex align-items-center text-gray-700 mb-1">
      <span class="icon-corporate_fare icon-16 me-1"></span>
      <span
        class="codx-textcontent line-clamp line-clamp-1"
        [innerHTML]="
          data?.customerID | formatvalue : view.formModel : 'CustomerID' | async
        "
      ></span>
    </div>
    <div class="d-flex justify-content-between align-items-center mb-1">
      <div class="d-flex justify-content-end align-items-center">
        <span
          class="icon-monetization_on icon-16 me-1 text-warning"
        ></span>
        <span
          class="text-dark me-1"
          [innerHTML]="
            data?.contractAmt
              | formatvalue : view.formModel : 'ContractAmt'
              | async
          "
        ></span>
        <span
          class="text-dark"
          [innerHTML]="
            data?.currencyID
              | formatvalue : view.formModel : 'CurrencyID'
              | async
          "
        ></span>
      </div>
    </div>
    <div class="d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-end codx-badge">
        <div
          *ngIf="data.status == '2'; else statusDefault"
          [ngStyle]="{'background-color': data?.steps['backgroundColor']}"
          class="me-1 badge badge-sm d-flex align-items-center mw-125px"
        >
          <span
            [ngClass]="data?.steps['icon']"
            [ngStyle]="{ color: data?.steps['iconColor'] }"
            class="me-1"
          ></span>
          <span
            class="text-ellipsis line-clamp line-clamp-1"
            [ngbTooltip]="data?.currentStepName"
            [ngStyle]="{ color: data?.steps['textColor'] }"
            >{{ data?.currentStepName }}</span
          >
        </div>
        <ng-template #statusDefault>
          <codx-vll
            [name]="vllStatus"
            [field]="'Status'"
            [value]="data?.status"
            [showText]="true"
            [showBgColor]="true"
            class="badge badge-primary badge-sm"
          >
          </codx-vll>
        </ng-template>

        <ng-container *ngIf="data?.approveStatus && data?.approveStatus != '1'">
          <codx-vll
            [name]="vllApprove"
            [field]="'ApproveStatus'"
            [value]="data?.approveStatus"
            [showText]="true"
            [showBgColor]="true"
            class="badge badge-primary badge-sm"
          >
          </codx-vll>
        </ng-container>
      </div>
      <div class="d-flex align-items-center">
        <div class="d-flex align-items-center me-2">
          <span class="icon-16 icon-av_timer me-1 text-gray-700"></span>
          <span
            class="text-gray-700 line-clamp line-clamp-1"
            [innerHTML]="
              data?.createdOn
                | formatvalue : view.formModel : 'CreatedOn'
                | async
            "
          ></span>
        </div>
        <div class="h-25px">
          <codx-imgs
            [width]="25"
            [objectId]="data.createdBy"
            ojectType="AD_Users"
            [numberImages]="1"
          >
          </codx-imgs>
        </div>
      </div>
    </div>
  </div>
</ng-template>


<!-- temp right -->
<ng-template #templateDetail>
  <contracts-view-detail
    [listInsStepStart]="listInsStep"
    [contract]="itemSelected"
    [formModel]="view.formModel"
    (changeMF)="changeMF($event)"
    (clickMoreFunc)="clickMoreFunc($event)"
    (changeProgress)="autoStart($event)"
  ></contracts-view-detail>
</ng-template>

<!--Tên hợp đồng -->
<ng-template #contractName let-data>
  <div class="">
    <span
      [innerHTML]="
        data?.contractName | formatvalue : view.formModel : 'ContractName' | async
      "
    ></span>
  </div>
</ng-template>
<!-- Khách hàng -->
<!-- báo giá -->
<!-- Giá trị hợp đồng -->
<ng-template #templateTotalAmt let-data>
  <div class="">
    <span
      [innerHTML]="
        data?.totalAmt | formatvalue : view.formModel : 'totalAmt' | async
      "
    ></span>
  </div>
</ng-template>
<!-- Cơ hội -->
<ng-template #templateTotalAmt let-data>
  <div class="">
    <span
      [innerHTML]="
        data?.totalAmt | formatvalue : view.formModel : 'totalAmt' | async
      "
    ></span>
  </div>
</ng-template>
<!-- Giá trị hợp đồng -->
<ng-template #templateTotalAmt let-data>
  <div class="">
    <span
      [innerHTML]="
        data?.totalAmt | formatvalue : view.formModel : 'totalAmt' | async
      "
    ></span>
  </div>
</ng-template>
<!-- Số tiền đã thanh toán -->
<!-- Số tiền còn lại -->
<!-- Trạng thái -->