<codx-form
  #form
  [customToolbar]="header"
  [body]="body"
  [dialog]="dialog"
></codx-form>

<ng-template #header>
  <div class="d-flex justify-content-between align-items-center w-100">
    <codx-label
      name="heardPaymentHistory"
      class="text-gray-600 fs-6"
      [default]="'Lịch sử thanh toán'"
    ></codx-label>
    <button
      style="border: none; outline: none; background: none"
      (click)="dialog.close()"
    >
      <i class="icon-close icon-18 text-hover-danger"></i>
    </button>
  </div>
</ng-template>

<ng-template #body>
	<div>
		<codx-label
		class="text-dark text-primary fw-bold"
		fiedName="scheduleDate"
		[formModel]="dialog.formModel"
	  >
	  </codx-label>
		<span class="fs-7"
		[innerHTML]="
		payment?.scheduleDate
			| formatvalue : dialog.formModel : 'ScheduleDate'
			| async
		"
	  ></span>
	  <span>|</span>
	  <codx-label
		class="text-dark text-primary fw-bold"
		fiedName="scheduleDate"
		[formModel]="dialog.formModel"
		default="Tiền hẹn"
	  >
	  </codx-label>
	  <span class="fs-7"
		[innerHTML]="
		payment?.scheduleDate
			| formatvalue : dialog.formModel : 'ScheduleDate'
			| async
		"
	  ></span>
	</div>
	<div>
		<codx-label
		class="text-dark text-primary fw-bold"
		fiedName="scheduleDate"
		[formModel]="dialog.formModel"
	  >
	  </codx-label>
		<span class="fs-7"
		[innerHTML]="
		payment?.scheduleDate
			| formatvalue : dialog.formModel : 'ScheduleDate'
			| async
		"
	  ></span>
	  <span>|</span>
	  <codx-label
		class="text-dark text-primary fw-bold"
		fiedName="scheduleDate"
		[formModel]="dialog.formModel"
		default="Tiền hẹn"
	  >
	  </codx-label>
	  <span class="fs-7"
		[innerHTML]="
		payment?.scheduleDate
			| formatvalue : dialog.formModel : 'ScheduleDate'
			| async
		"
	  ></span>
	</div>
	<ng-container [ngTemplateOutlet]="PayTableTemplate"></ng-container>
</ng-template>

<ng-template #PayTableTemplate let-data="value">
	<div>
	  <codx-gridview-v2
	  #productTable
	  service="CM"
	  [formName]="dialog.formModel.formName"
	  [gridViewName]="dialog.formModel.gridViewName"
	  [entityName]="dialog.formModel.entityName"
	  [templateMore]="more"
	  [contentEditable]="false"
	  [allowFiltering]="true"
	  [allowSorting]="true"
	  [dataSource]="listPaymentHistory"
	  [autoLoad]="false"
	  rowHeight="40"
	  predicates="TransID=@0"
	  ></codx-gridview-v2>
	</div>
	<ng-template #more let-data>
	  <codx-mfunc
	  [formModel]="dialog.formModel"
	  [isBookMark]="true"
	  [dataItem]="moreDefaut"
	  [type]="'view'"
	  (clickMF)="onClickMFPayment($event, data)"
	  ></codx-mfunc>
	</ng-template>
  </ng-template>