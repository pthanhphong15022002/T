<div class="py-5">
  <header
    class="px-6 mb-6 w-100 d-flex align-items-center justify-content-between"
  >
    <div class="d-flex align-items-center">
      <button type="text" class="btn btn-icon btn-primary rounded-circle me-3">
        <span *ngIf="action == 'add'" class="icon-add_box icon-18"></span>
        <span *ngIf="action == 'copy'" class="icon-file_copy icon-16"></span>
        <span *ngIf="action == 'edit'" class="icon-edit_square icon-16"></span>
      </button>
      <codx-label
        class="fs-3 fw-bold"
        [formModel]="dialog.formModel"
        fiedName=""
        [default]="headerTest"
      ></codx-label>
    </div>
    <div class="d-flex align-items-center">
      <button
        type="button"
        class="btn btn-md btn-primary min-w-70px"
        (click)="handleSaveContract()"
      >
        <codx-label
          [formModel]="dialog.formModel"
          fiedName=""
          default="Lưu"
        ></codx-label>
      </button>
      <button
        class="button-close d-flex p-3"
        style="border: none; outline: none; background: none"
        (click)="dialog.close()"
      >
        <i class="icon-close icon-18 text-hover-danger p-1"></i>
      </button>
    </div>
  </header>
  <main class="px-6 h-100">
    <codx-taskbar
      [listTab]="listTypeContract"
      (tab)="changeTab($event)"
      size="22"
    ></codx-taskbar>
    <div class="mt-6">
      <container-element [ngSwitch]="tabClicked">
        <some-element
          *ngSwitchCase="'general'"
          [ngTemplateOutlet]="generalTemplate"
        ></some-element>
        <some-element
          *ngSwitchCase="'quotations'"
          [ngTemplateOutlet]="quotationsTemplate"
        ></some-element>
        <some-element
          *ngSwitchCase="'pay'"
          [ngTemplateOutlet]="payTemplate"
        ></some-element>
        <some-element
          *ngSwitchCase="'ship'"
          [ngTemplateOutlet]="shipTemplate"
        ></some-element>
        <some-element
          *ngSwitchCase="'extend'"
          [ngTemplateOutlet]="extendTemplate"
        ></some-element>
        <some-element *ngSwitchDefault></some-element>
      </container-element>
    </div>
  </main>
</div>

<!-- thông tin chung -->
<ng-template #generalTemplate let-data="value">
  <div class="d-flex justify-content-between">
    <div class="w-50">
      <div class="row form-group">
        <div class="col-9">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="contractName"
              default="Tên hợp đồng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="contractName"
              type="text"
              [crrValue]="contracts?.contractName"
              (valueChange)="valueChangeText($event)"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-3">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="contractID"
              default="Mã hợp đồng"
            >
            </codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="contractID"
              type="text"
              [crrValue]="contracts?.contractID"
              [placeholder]="
                planceHolderAutoNumber ?? grvSetup['ContractID'].headerText
              "
              (controlBlur)="changeAutoNum($event)"
              [disabled]="disabledShowInput"
            >
            </codx-input>
          </div>
        </div>
      </div>
      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="dealID"
              default="Cơ hội"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              #inputDeal
              [formModel]="dialog.formModel"
              field="dealID"
              [crrValue]="contracts?.dealID"
              (valueChange)="valueChangeCombobox($event)"
              [model]="customerID"
              [disabled]="type == 'deal'"
            >
            </codx-input>
            <!-- <codx-combobox-select></codx-combobox-select> -->
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="quotationID"
              default="Báo giá"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              #inputQuotation
              [formModel]="dialog.formModel"
              field="quotationID"
              [crrValue]="contracts?.quotationID"
              (valueChange)="valueChangeCombobox($event)"
              [model]="customerID"
              [disabled]="type == 'quotation'"
            >
            </codx-input>
          </div>
        </div>
        <!-- <div class="col-4">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="orderID"
              default="Đơn hàng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              field="orderID"
              [formModel]="dialog.formModel" 
              type="combobox"
              [crrValue]="contracts?.orderID"
              (valueChange)="valueChangeCombobox($event)"
            >
            </codx-input>
          </div>
        </div> -->
      </div>
    </div>

    <div class="w-40">
      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="effectiveFrom"
              default="Ngày hiệu lực"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              field="effectiveFrom"
              type="datetime"
              [crrValue]="contracts?.effectiveFrom"
              (valueChange)="changeValueDate($event)"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="effectiveTo"
              default="Ngày hết hiệu lực"
            >
            </codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]=""
              field="effectiveTo"
              type="datetime"
              [crrValue]="contracts?.effectiveTo"
              (valueChange)="changeValueDate($event)"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="processID"
              >
              <!-- default="Hợp đồng sử dụng" -->
            </codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="processID"
              [crrValue]="contracts?.useType"
              (valueChange)="valueChangeCombobox($event)"
            >
            </codx-input>
            <!-- type="valuelist"
            refValue="CRM033" -->
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="contractType"
              default="Loại hợp đồng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="contractType"
              [crrValue]="contracts?.contractType"
              (valueChange)="valueChangeCombobox($event)"
            >
            </codx-input>
          </div>
        </div>
      </div>
    </div>
  </div>
  <codx-taskbar
    [listTab]="[
      {
        icon: 'icon-error_outline',
        name: 'contract',
        textDefault: 'Chủ thể hợp đồng'
      }
    ]"
    size="22"
  ></codx-taskbar>
  <div class="mt-5">
    <ng-container
      [ngTemplateOutlet]="representativeTemplate"
      [ngTemplateOutletContext]="{}"
    ></ng-container>
  </div>
</ng-template>

<!-- chi tiết mặt hàng -->
<ng-template #quotationsTemplate let-data="value">
  <codx-quotations-lines
    #viewQuotationsLine
    [transID]="quotations?.recID"
    [exchangeRate]="1"
    [currencyID]="quotations?.currencyID"
    [listQuotationLines]="listQuotationsLine"
    [quotationLinesAddNew]="quotationLinesAddNew"
    [quotationLinesEdit]="quotationLinesEdit"
    [quotationLinesDeleted]="quotationLinesDeleted"
    [actionParent]="action"
    [isSetMoreFunc]="true"
    (eventQuotationLines)="eventQuotationLines($event)"
  ></codx-quotations-lines>
</ng-template>

<!-- phương thức thanh toán -->
<ng-template #payTemplate let-data="value">
  <ng-container [ngTemplateOutlet]="methodPayTemplate"></ng-container>
  <ng-container [ngTemplateOutlet]="calendarPayTemplate"></ng-container>
</ng-template>

<!-- giao hàng -->
<ng-template #shipTemplate let-data="value">
  <div>
    <codx-taskbar
      [listTab]="[
        {
          icon: 'icon-error_outline',
          name: 'contract',
          textDefault: 'Thông tin giao hàng'
        }
      ]"
      class="mb-2"
      size="22"
    ></codx-taskbar>
    <div class="d-flex justify-content-between mt-5">
      <div class="w-50">
        <div class="row form-group">
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delTermID"
                default="Điều khoản giao hàng"
              ></codx-label>
            </div>
            <div class="">
              <!-- TODO -->
              <codx-input
                [formModel]="dialog.formModel"
                field="delTermID"
                [crrValue]="contracts?.delTermID"
                (valueChange)="valueChangeCombobox($event)"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delModeID"
                default="Hình thức giao hàng"
              ></codx-label>
            </div>
            <div class="">
              <!-- TODO -->
              <codx-input
                [formModel]="dialog.formModel"
                field="delModeID"
                (valueChange)="valueChangeCombobox($event)"
                [crrValue]="contracts?.delModeID"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delPrice"
                default="Phí vận chuyển"
              ></codx-label>
            </div>
            <div class="">
              <codx-input
                field="delPrice"
                type="number"
                [min]="0"
                (valueChange)="valueChangeText($event)"
                [crrValue]="contracts?.delPrice"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-6">
            <div class="d-flex justify-content-between align-items-center">
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delContactID"
                default="Liên hệ giao hàng"
              ></codx-label>
              <span
                class="icon-person_add_alt_1 icon-20 text-primary cursor-pointer"
              ></span>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="delContactID"
                [crrValue]="contracts?.delContactID"
                (valueChange)="valueChangeCombobox($event)"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-6">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delPhone"
                default="Số điện thoại"
              >
              </codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="delPhone"
                (valueChange)="valueChangeText($event)"
                [crrValue]="contracts?.delPhone"
              >
              </codx-input>
            </div>
          </div>
        </div>
      </div>

      <div class="w-40">
        <div class="row form-group">
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delDeadline"
                default="Hạn giao hàng"
              >
              </codx-label>
            </div>
            <div class="">
              <!-- [formModel]="dialog.formModel" -->
              <codx-input
                field="delDeadline"
                type="datetime"
                (valueChange)="changeValueDate($event)"
                [crrValue]="contracts?.delDeadline"
              >
              </codx-input>
            </div>
          </div>

          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delStatus"
                default="Tình trạng giao hàng"
              ></codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="delStatus"
                type="valuelist"
                refValue="CRM019"
                (valueChange)="valueChangeCombobox($event)"
                [crrValue]="contracts?.delStatus"
              >
              </codx-input>
            </div>
          </div>

          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delActualDate"
                default="Ngày giao hàng thành công"
              >
              </codx-label>
            </div>
            <div class="">
              <!-- [formModel]="dialog.formModel" -->
              <codx-input
                field="delActualDate"
                type="datetime"
                (valueChange)="changeValueDate($event)"
                [crrValue]="contracts?.delActualDate"
                [disabled]="disabledDelActualDate"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="delAddress"
                default="Địa chỉ giao hàng"
              ></codx-label>
              <span
                class="icon-add_location_alt text-primary icon-20 cursor-pointer"
              ></span>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="delAddress"
                type="valuelist"
                [crrValue]="contracts?.delAddress"
                (valueChange)="valueChangeText($event)"
              >
              </codx-input>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- Gia hạn -->
<ng-template #extendTemplate let-data="value"> </ng-template>

<!-- điều khoản hợp đồng -->
<ng-template #termsAndRelatedTemplate let-data="value">
  <div class="d-flex justify-content-between mt-5">
    <div class="d-flex align-items-center nav-item w-100 mb-1">
      <div class="d-flex align-items-center mb-2">
        <span class="icon-attach_file icon-18 me-2 text-primary"></span>
        <div class="fw-bold text-primary">
          <codx-label
            name="lblAttachments"
            [formModel]="dialog.formModel"
            default="Tài liệu đính kèm"
          >
          </codx-label>
        </div>
      </div>
    </div>

    <button
      style="float: left"
      type="button"
      class="btn btn-light-primary d-flex align-items-center"
      (click)="addFile($event)"
    >
      <i class="icon-cloud_upload fs-5"></i
      ><span>
        <codx-label
          class="text-nowrap"
          [formModel]="dialog.formModel"
          name="UploadFile"
          formName="Tasks"
          default="Đính kèm"
        ></codx-label>
      </span>
    </button>
  </div>

  <div>
    <codx-attachment
      #attachment
      [objectType]="dialog.formModel.entityName"
      [objectId]="contracts?.recID"
      hideFolder="1"
      hideImageUpload="0"
      hideImageThumb="0"
      hideUploadBtn="1"
      [showMessage]="0"
      hideDes="1"
      type="inline"
      allowMultiFile="1"
      referType="source"
      [formModel]="dialog.formModel"
      displayThumb="full"
    >
    </codx-attachment>
  </div>
</ng-template>

<!-- Template phụ -->
<!-- chủ thể hợp đồng -->
<ng-template #representativeTemplate let-data="value">
  <div class="d-flex justify-content-between">
    <div class="w-50">
      <div class="row form-group">
        <div class="col-8">
          <div>
            <!-- Tên cty  -->
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="companyName"
              default="Bên A"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="companyName"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.legalName"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-4">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="taxCode"
              default="Mã số thuế"
            >
            </codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="taxCode"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.taxCode"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-12">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="address"
              default="Địa chỉ"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="address"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.street"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="phone"
              default="Điện thoại"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="phone"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.phone"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="faxNo"
              default="Fax"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="faxNo"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.faxNo"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="contactName"
              default="Người đại diện"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="contactName"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.contactName"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="jobTitle"
              default="Chức vụ"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="jobTitle"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.jobTitle"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="bankAccount"
              default="Tài khoản ngân hàng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="bankAccount"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.bankAccount"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="bankID"
              default="Ngân hàng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="bankID"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="account?.bankID"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>
    </div>

    <div class="w-40">
      <div class="row form-group">
        <div class="col-8">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="customerID"
              default="Bên B"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="customerID"
              type="combobox"
              (valueChange)="valueChangeCombobox($event)"
              [crrValue]="contracts?.customerID"
              [disabled]="
                type == 'deal' || type == 'quotation' || type == 'customer'
              "
            >
            </codx-input>
          </div>
        </div>
        <div class="col-4">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="taxCode"
              default="Mã số thuế"
            >
            </codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="taxCode"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.taxCode"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-12">
          <div>
            <!-- TODO -->
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="address"
              default="Địa chỉ"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="address"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.address"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="phone"
              default="Điện thoại"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="phone"
              type="number"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.phone"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="faxNo"
              default="Fax"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="faxNo"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.faxNo"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="representative"
              default="Người đại diện"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="representative"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.representative"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="jobTitle"
              default="Chức vụ"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="jobTitle"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.jobTitle"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>

      <div class="row form-group">
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="bankAccount"
              default="Tài khoản ngân hàng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="bankAccount"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.bankAccount"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
        <div class="col-6">
          <div>
            <codx-label
              [formModel]="dialog.formModel"
              fiedName="bankID"
              default="Ngân hàng"
            ></codx-label>
          </div>
          <div class="">
            <codx-input
              [formModel]="dialog.formModel"
              field="bankID"
              type="text"
              (valueChange)="valueChangeText($event)"
              [crrValue]="contracts?.bankID"
              [disabled]="true"
            >
            </codx-input>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- thanh toán -->
<ng-template #methodPayTemplate let-data="value">
  <div>
    <codx-taskbar
      [listTab]="[
        {
          icon: 'icon-error_outline',
          name: 'contract',
          textDefault: 'Thông tin thanh toán'
        }
      ]"
      size="22"
      class="mb-3"
    ></codx-taskbar>
    <div class="d-flex justify-content-between mt-5">
      <div class="w-50">
        <div class="row form-group">
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="contractAmt"
                default="Giá trị hợp đồng"
              ></codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="contractAmt"
                type="number"
                [min]="0"
                [crrValue]="contracts?.contractAmt"
                (valueChange)="valueChangeText($event)"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="paidAmt"
                default="Số tiền thanh toán"
              >
              </codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="paidAmt"
                type="number"
                [min]="0"
                (valueChange)="valueChangeText($event)"
                [crrValue]="contracts?.paidAmt"
                [disabled]="true"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="remainAmt"
                default="Số tiền còn lại"
              >
              </codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="remainAmt"
                type="number"
                [min]="0"
                (valueChange)="valueChangeText($event)"
                [crrValue]="contracts?.remainAmt"
                [disabled]="true"
              >
              </codx-input>
            </div>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-4">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="pmtTermID"
                default="Điều khoản thanh toán"
              ></codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="pmtTermID"
                (valueChange)="valueChangeCombobox($event)"
                [crrValue]="contracts?.pmtTermID"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-8">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="pmtMethodID"
                default="Phương thức thanh toán"
              ></codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="pmtMethodID"
                type="valuelist"
                (valueChange)="valueChangeCombobox($event)"
                [crrValue]="contracts?.pmtMethodID"
              >
              </codx-input>
            </div>
          </div>
        </div>
      </div>

      <div class="w-40">
        <div class="row form-group">
          <div class="col-6">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="currencyID"
                default="Tiền tệ"
              ></codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="currencyID"
                type="valuelist"
                [crrValue]="contracts?.currencyID"
                (valueChange)="valueChangeText($event)"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-6">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="exchangeRate"
                default="Tỷ giá"
              >
              </codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="exchangeRate"
                type="number"
                [crrValue]="contracts?.exchangeRate"
                [disabled]="true"
              >
              </codx-input>
            </div>
          </div>
        </div>

        <div class="row form-group">
          <div class="col-6">
            <div>
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="pmtStatus"
                default="Tình trạng thanh toán"
              >
              </codx-label>
            </div>
            <div class="">
              <codx-input
                [formModel]="dialog.formModel"
                field="pmtStatus"
                (valueChange)="valueChangeCombobox($event)"
                [crrValue]="contracts?.pmtStatus"
              >
              </codx-input>
            </div>
          </div>
          <div class="col-6">
            <div>
              <!-- TODO -->
              <codx-label
                [formModel]="dialog.formModel"
                fiedName="pmtDeadline"
                default="Hạn thanh toán"
              ></codx-label>
            </div>
            <div class="">
              <!-- [formModel]="dialog.formModel" -->
              <codx-input
                field="pmtDeadline"
                type="datetime"
                (valueChange)="changeValueDate($event)"
                [crrValue]="contracts?.pmtDeadline"
              >
              </codx-input>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- lịch thanh toán -->
<ng-template #calendarPayTemplate let-data="value">
  <div>
    <codx-taskbar
      [listTab]="[
        {
          icon: 'icon-error_outline',
          name: 'contract',
          textDefault: 'Lịch thanh toán'
        }
      ]"
      size="22"
      class="mb-3"
    ></codx-taskbar>
  </div>
  <view-payment
    [isSave]="false"
    [contracts]="contracts"
    [listPayment]="listPayment"
    [listPaymentAdd]="listPaymentAdd"
    [listPaymentEdit]="listPaymentEdit"
    [listPaymentDelete]="listPaymentDelete"
    [listPaymentHistory]="listPaymentHistory"
  ></view-payment>
</ng-template>
