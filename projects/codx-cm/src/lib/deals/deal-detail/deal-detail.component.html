<ng-container *ngIf="dataSelected?.recID">
  <codx-detail-tmp
    [header]="header"
    [formModel]="formModel"
    [body]="body"
    [dataItem]="dataSelected"
    [hideMF]="false"
    [footer]="tabs"
    (changeDataMF)="changeDataMF($event, dataSelected)"
    (clickMF)="clickMF($event, dataSelected)"
  >
    <ng-template #header let-data>
      <div class="container_detail mt-3">
        <div class="d-flex justify-content-between mb-3">
          <div class="fs-2">{{ dataSelected?.dealName }}</div>
          <div></div>
          <div class="d-flex align-items-center">
            <span class="icon-monetization_on pe-1 text-wraning"></span>
            <span class="fs-2 fw-bold">{{dataSelected?.dealValue}}</span>
          </div>
        </div>
        <div class="d-flex justify-content-between pb-3">
          <div class="d-flex flex-row">
            <div class=" d-flex justify-content-start">
              <codx-label default="Khách hàng:" class="fs-6 me-1"></codx-label>
              <i class="icon-business pe-1"></i>
              <div class="fs-6">

                <span
                class="fs-7"
                #customerID
                [innerHTML]="
                dataSelected?.customerID
                    | formatvalue
                      : formModel
                      : 'customerID'
                      : customerID
                      : 'CMDeals'
                      : 'grvCMDeals'
                    | async
                "
              ></span>

              </div>
            </div>
          </div>
          <div>
            <div class=" d-flex justify-content-start">
              <codx-label default="Dòng sản phẩm:" class="fs-6 me-1"></codx-label>
              <div class="fs-6">
                <span
                class="fs-7"
                #businessLineID
                [innerHTML]="
                data?.businessLineID
                    | formatvalue
                      : formModel
                      : 'businessLineID'
                      : businessLineID
                      : 'CMDeals'
                      : 'grvCMDeals'
                    | async
                "
              ></span>
              </div>
            </div>
          </div>
          <div>
            % <span class="pe-2">{{dataSelected?.probability}}</span>
          </div>
        </div>
        <div class="d-flex justify-content-between pb-3" >
          <div class="d-flex justify-content-start">
            <span class="nowrap me-2">
              <codx-label default="Quy trình:" class="text-break fs-6 me-1"></codx-label>
            </span>

            <div class="fs-6">{{dataSelected?.processName}}</div>
          </div>
          <div>

          </div>
          <div class="badge badge-primary ms-5">
              <span>
              {{dataSelected?.currentStepName}}
              </span>
          </div>
        </div>
        <div class="d-flex flex-wrap align-items-top mb-3">
          <div class=" d-flex align-items-center">
            <codx-label default="Ngày tạo:" class="text-dark me-1"></codx-label>
            <span
              class="text-gray-600"
              #createdOn
              [innerHTML]="
              dataSelected?.createdOn
                  | formatvalue
                    : formModel
                    : 'createdOn'
                    : createdOn
                    : 'CMDeals'
                    : 'grvCMDeals'
                  | async
              "
            ></span>
          </div>
          <div class="d-flex align-items-center">
            <codx-label default="Ngày bắt đầu:" class="text-dark me-1"></codx-label>
            <span
              class="text-gray-600"
              #startDate
              [innerHTML]="
              dataSelected?.startDate
                  | formatvalue
                    : formModel
                    : 'startDate'
                    : createdOn
                    : 'CMDeals'
                    : 'grvCMDeals'
                  | async
              "
            ></span>
          </div>
          <div class=" d-flex align-items-center">
            <codx-label default="Ngày đến hạn:" class="text-dark me-1"></codx-label>
            <span
              class="text-gray-600"
              #endDate
              [innerHTML]="
              dataSelected?.endDate
                  | formatvalue
                    : formModel
                    : 'endDate'
                    : createdOn
                    : 'CMDeals'
                    : 'grvCMDeals'
                  | async
              "
            ></span>
          </div>
          <div class="d-flex align-items-top">
            <codx-label default="Nhân viên bán hàng:" class="text-dark me-2"></codx-label>
            <codx-imgs
              [isToolTip]="true"
              [width]="25"
              [objectId]="dataSelected.owner"
              ojectType="AD_Users"
              [numberImages]="1"
            >
            </codx-imgs>
          </div>
        </div>
        <div class="d-flex justify-content-start">
          <codx-tag
            [entityName]="formModel.entityName"
            [disabled]="true"
            [isEdit]="false"
            [value]="dataSelected?.tags"
          >
          </codx-tag>
        </div>

        <div class="view-details-header bg-body scroll-y me-3 h-100">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex tab-header">
              <codx-taskbar
              [listTab]="tabDetail"
              (tab)="changeTab($event)"
              size="18"
              class="mb-3"
            ></codx-taskbar>


            </div>
          </div>
        </div>
      </div>
    </ng-template>

  </codx-detail-tmp>
</ng-container>
<ng-template #body let-data>
  <codx-tab-deal-detail [tabClicked]="tabClicked"
  [dataSelected]="dataSelected"></codx-tab-deal-detail>
</ng-template>
<ng-template #tabs let-data>
  <codx-tabs
    [entityName]="formModel.entityName"
    [formModel]="formModel"
    [TabControl]="tabControl"
    [objectID]="dataSelected.recID"
    [funcID]="formModel.funcID"
    [dataTree]="treeTask"
    [funcIDQuotations]="'CM0202'"
    [refType]="formModel.entityName"
    [refID]="dataSelected.recID"
    [customerID]="dataSelected.customerID"
    [salespersonID]="dataSelected.salespersonID"
    [consultantID]="dataSelected.consultantID"
    (tabChange)="changeFooter($event)"
  ></codx-tabs>
</ng-template>

<ng-template #contract let-data>
  <list-contracts [projectID]="dataSelected?.recID" [customers]=""></list-contracts>
</ng-template>
<!-- <ng-template #quotations let-data>
 <lib-quotations [funcID]="'CM0202'" [customerID]="dataSelected.customerID" ></lib-quotations>
</ng-template> -->

