<container-element [ngSwitch]="tabClicked">
  <some-element
    *ngSwitchCase="tabInformation"
    [ngTemplateOutlet]="information"
  ></some-element>
  <some-element
    *ngSwitchCase="tabField"
    [ngTemplateOutlet]="field"
  ></some-element>
  <some-element
    *ngSwitchCase="tabContact"
    [ngTemplateOutlet]="contact"
  ></some-element>
  <some-element
    *ngSwitchCase="tabOpponent"
    [ngTemplateOutlet]="opponent"
  ></some-element>
  <some-element
    *ngSwitchCase="tabTask"
    [ngTemplateOutlet]="task"
  ></some-element>
  <some-element
    *ngSwitchCase="tabGanttChart"
    [ngTemplateOutlet]="ganttChart"
  ></some-element>

  <some-element *ngSwitchDefault></some-element>
</container-element>
<!-- nvthuan công việc -->
<ng-template #task let-data="value">
  <div
    *ngFor="let step of listStep"
    class="list-step ps-4"
    [ngStyle]="step?.stepStatus != '1' ? { background: '#00000030' } : {}"
  >
    <codx-step-task
      [dataSources]="step"
      [isShowButton]="false"
      [isShowMore]="true"
      [isDeepCopy]="false"
      [isShowStep]="true"
      (continueStep)="continueStep($event,step)"
      (saveAssign)="saveAssignTask($event)"
    ></codx-step-task>
    <!-- <codx-step-task
      [dataSources]="step"
      [isShowMore]="true"
      [isDeepCopy]="false"
      [isShowButton]="true"
      [isStart]="isStart"
      [isClose]="isClosed"
      [isRoleAll]="isRoleAll"
      [isOnlyView]="isOnlyView"
      (saveAssign)="saveAssignStepTask($event)"
      (continueStep)="continueStep($event)"
      (isChangeProgress)="changeProgressStep($event)"
  ></codx-step-task> -->
    <hr class="m-0 p-0" />
  </div>
</ng-template>
<!-- nvthuan sản phẩm -->
<ng-template #product>
  <div class="h-100">
    <codx-gridview-v2
      #gridProductsLine
      [formName]="fmProcductsLines.formName"
      [gridViewName]="fmProcductsLines.gridViewName"
      [entityName]="fmProcductsLines.entityName"
      [editSettings]="editSettings"
      [allowFiltering]="true"
      [allowSorting]="true"
      service="CM"
      [autoLoad]="false"
      rowHeight="40"
    ></codx-gridview-v2>
  </div>
</ng-template>

<ng-template #information>
  <div class="d-flex flex-column">
    <div class="text-dark text-primary fw-bold fs-6 mb-3">
      <codx-label default="Thông tin chung"></codx-label>
    </div>

    <div class="mb-3">
      <div class="row">
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label default="Mã cơ hội"></codx-label>:
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              {{dataSelected?.dealID }}
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              fiedName="ChannelID"
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
              ></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
                #channelID
                [innerHTML]="
                dataSelected?.channelID
                    | formatvalue
                      : formModel
                      : 'channelID'
                      : channelID
                      : 'CMDeals'
                      : 'grvCMDeals'
                    | async
                "
              ></span>
            </div>
          </div>
        </div>
      </div>


      <div class="row">
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              fiedName="Category"
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"

              default="Loại cơ hội"></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              {{ getNameCategory(dataSelected?.category) }}
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              fiedName="CampaignID"
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
             ></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
              #campaignID
              [innerHTML]="
              dataSelected?.campaignID
                  | formatvalue
                    : formModel
                    : 'campaignID'
                    : campaignID
                    : 'CMDeals'
                    : 'grvCMDeals'
                  | async
              "
            ></span>
            </div>
          </div>
        </div>

      </div>

      <div class="row">
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
              fiedName="DealValue"
              ></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
              #dealValue
              [innerHTML]="
              dataSelected?.dealValue
                  | formatvalue
                    : formModel
                    : 'dealValue'
                    : dealValue
                    : 'CMDeals'
                    : 'grvCMDeals'
                  | async
              "
            ></span>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
              fiedName="ConsultantID"
              ></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
                #consultantID
                [innerHTML]="
                dataSelected?.consultantID
                    | formatvalue
                      : formModel
                      : 'consultantID'
                      : consultantID
                      : 'CMDeals'
                      : 'grvCMDeals'
                    | async
                "
              ></span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
              fiedName="Probability"

            ></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
                #probability
                [innerHTML]="
                dataSelected?.probability
                    | formatvalue
                      : formModel
                      : 'probability'
                      : probability
                      : 'CMDeals'
                      : 'grvCMDeals'
                    | async
                "
              ></span>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
              fiedName="SalespersonID"></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
                #salespersonID
                [innerHTML]="
                dataSelected?.salespersonID
                    | formatvalue
                      : formModel
                      : 'salespersonID'
                      : salespersonID
                      : 'CMDeals'
                      : 'grvCMDeals'
                    | async
                "
              ></span>
            </div>
          </div>
        </div>

      </div>

      <div class="row">
        <div class="col-6">
          <div class="mb-3 d-flex align-items-top">
            <div class="w-150px min-w-150px text-gray-600 codx-textlabel">
              <codx-label
              class="me-2 label-colon"
              [setRequire]="false"
              [formModel]="formModel"
              fiedName="ExpectedClosed"></codx-label>
            </div>
            <div class="text-dark fw-bold codx-textcontent">
              <span
                #expectedClosed
                [innerHTML]="
                dataSelected?.expectedClosed
                    | formatvalue
                      : formModel
                      : 'expectedClosed'
                      : expectedClosed
                    | async
                "
              ></span>
            </div>
          </div>
        </div>

      </div>
  </div>
    <div class="mt-5">
      <div class="text-dark text-primary fw-bold fs-6 mb-3">
        <codx-label default="Mô tả nhu cầu"></codx-label>
      </div>
      <span class="py-2">
        {{dataSelected.memo}}
      </span>
    </div>
  </div>
</ng-template>

<ng-template #contact>
  <div>
    <codx-list-contacts
      [selectAll]="false"
      [funcID]="'CM0205'"
      [objectID]="dataSelected?.recID"
      [objectName]="dataSelected.dealName"
      [customerID]="dataSelected?.customerID"
      [objectType]="'4'"
      [type]="'formDetail'"
      [hidenMF]="false"
    ></codx-list-contacts>
  </div>
</ng-template>

<ng-template #ganttChart>
  <codx-step-chart
    [dataSelected]="dataSelected"
    [listSteps]="listSteps"
  ></codx-step-chart>
</ng-template>

<ng-template #field>
  <div class="d-flex flex-column">
    <ng-container *ngFor="let item of listStep">
      <codx-fields-detail-temp
        *ngIf="item?.fields?.length > 0"
        [dataStep]="item"
        [showColumnControl]="showColumnControl(item.stepID)"
        [isUpdate]="isUpdate && item.stepStatus < '2'"
      >
      </codx-fields-detail-temp>
    </ng-container>
  </div>
</ng-template>

<ng-template #opponent>
  <codx-tab-dealcompetitors
    [dealID]="dataSelected.recID"
  ></codx-tab-dealcompetitors>
</ng-template>

<ng-template #opportunity>
  <div class="d-flex justify-content-between">
    <div class="d-flex flex-column">
      <div class="fw-bold fs-6 text-dark codx-text-overflow-1line">
        Trương Đặng Ngọc Phúc
      </div>
      <div class="d-flex align-items-start me-4 mb-1">
        <div class="me-3">
          <span class="icon-money icon-16 me-1"></span>
          <codx-label
            class="text-gray-600"
            name="lblNumber"
            default="Doanh số
            kỳ vọng: "
          ></codx-label>
          <span class="ms-1">50.000.000 VND</span>
        </div>
        <div>
          <span class="me-1">%</span>
          <codx-label
            class="text-gray-600"
            name="lblNumber"
            default="Tỷ lệ
            thành công: "
          ></codx-label>
          <span class="ms-1">70%</span>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top">
      <div class="d-flex flex-column">
        <div class="badge badge-primary">Giới thiệu sản phẩm</div>
        <div class="ms-5">
          <span class="icon-money icon-16 me-1"></span>
          <span class="text-gray-500 my-2">23/04/2023</span>
        </div>
      </div>
      <div class="ms-3">
        <!-- <codx-imgs
          [isToolTip]="true"
          [width]="35"
          [objectId]="'ADMIN'"
          ojectType="AD_Users"
          [numberImages]="1"
        >
        </codx-imgs> -->
      </div>
    </div>
  </div>
</ng-template>
