<container-element [ngSwitch]="tabClicked">
  <some-element
    *ngSwitchCase="tabInformation"
    [ngTemplateOutlet]="information"
  ></some-element>
  <some-element
    *ngSwitchCase="tabField"
    [ngTemplateOutlet]="field"
  ></some-element>
  <some-element
    *ngSwitchCase="tabContact"
    [ngTemplateOutlet]="contact"
  ></some-element>
  <some-element
    *ngSwitchCase="tabOpponent"
    [ngTemplateOutlet]="opponent"
  ></some-element>
  <some-element
    *ngSwitchCase="tabTask"
    [ngTemplateOutlet]="task"
  ></some-element>
  <some-element
    *ngSwitchCase="tabGanttChart"
    [ngTemplateOutlet]="ganttChart"
  ></some-element>


  <some-element *ngSwitchDefault></some-element>
</container-element>
<!-- nvthuan công việc -->
<ng-template #task let-data="value">
  <div *ngFor="let step of listStep; let i = index" class="mt-5">
    <div>
      <span
        class="h4 me-3 justify-content-center align-items-center"
        style="
          width: 35px;
          height: 35px;
          border-radius: 50%;
          background-color: rgb(45, 171, 255);
          display: inline-flex;
        "
        >{{ i + 1 }}</span
      >
      <span class="h4">{{ step.stepName }}</span>
    </div>
    <codx-step-task
      [dataSources]="step"
      [isShowButton]="false"
      [isShowMore]="true"
    ></codx-step-task>
    <hr />
  </div>
</ng-template>
<!-- nvthuan sản phẩm -->
<ng-template #product>
  <div class="h-100">
    <codx-gridview-v2
      #gridProductsLine
      [formName]="fmProcductsLines.formName"
      [gridViewName]="fmProcductsLines.gridViewName"
      [entityName]="fmProcductsLines.entityName"
      [editSettings]="editSettings"
      [allowFiltering]="true"
      [allowSorting]="true"
      service="CM"
      [autoLoad]="false"
      rowHeight="40"
    ></codx-gridview-v2>
  </div>
</ng-template>

<ng-template #information>
  <div class="d-flex flex-column">
    <div class="mt-3">
      <h2><codx-label default="Thông tin chung"></codx-label></h2>
    </div>
    <div class="mb-3">
      <div class="row py-2">
        <div class="col-2"><codx-label default="Mã cơ hội"></codx-label>:</div>
        <div class="col-4">{{dataSelected?.dealID }}</div>

        <div class="col-2"><codx-label default="Chiến dịch"></codx-label>:</div>
        <div class="col-4">
          <span
          class="fs-7"
          #campaignID
          [innerHTML]="
          dataSelected?.campaignID
              | formatvalue
                : formModel
                : 'campaignID'
                : campaignID
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
        </div>
      </div>

      <div class="row py-2">
        <div class="col-2"><codx-label default="Loại cơ hội"></codx-label>:</div>
        <div class="col-4">
          {{ getNameCategory(dataSelected?.category) }}
        </div>
        <div class="col-2"><codx-label default="Kênh"></codx-label>:</div>
        <div class="col-4">
          <span
          class="fs-7"
          #channelID
          [innerHTML]="
          dataSelected?.channelID
              | formatvalue
                : formModel
                : 'channelID'
                : channelID
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
          </div>
      </div>
      <div class="row py-2">
        <div class="col-2">
          <codx-label  fiedName="DealValue" default="Doanh số dự kiến"></codx-label>:
        </div>
        <div class="col-4">
          <span
          class="fs-7"
          #dealValue
          [innerHTML]="
          dataSelected?.dealValue
              | formatvalue
                : formModel
                : 'dealValue'
                : dealValue
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
        </div>

        <div class="col-2"><codx-label default="Quy trình"></codx-label>:</div>
        <div class="col-4">
          <span
          class="fs-7"
          #processName
          [innerHTML]="
          dataSelected?.processName
              | formatvalue
                : formModel
                : 'processName'
                : processName
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
          </div>
      </div>

      <div class="row py-2">
        <div class="col-2">
          <codx-label default="Tỷ lệ thành công"></codx-label>:
        </div>
        <div class="col-4">

          <span
          class="fs-7"
          #probability
          [innerHTML]="
          dataSelected?.probability
              | formatvalue
                : formModel
                : 'probability'
                : probability
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
        </div>

        <div class="col-2">
          <codx-label default="Nhân viên bán hàng"></codx-label>:
        </div>
        <div class="col-4">
          <span
          class="fs-7"
          #salespersonID
          [innerHTML]="
          dataSelected?.salespersonID
              | formatvalue
                : formModel
                : 'salespersonID'
                : salespersonID
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
      </div>

    </div>
      <div class="row pt-2">
        <div class="col-2">
          <codx-label default="Ngày dự kiến đóng"></codx-label>:
        </div>
        <div class="col-4">
          <span
          class="fs-7"
          #endDate
          [innerHTML]="
          dataSelected?.endDate
              | formatvalue
                : formModel
                : 'endDate'
                : endDate
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
        </div>

        <div class="col-2">
          <codx-label default="Nhân viến tư vấn"></codx-label>:
        </div>
        <div class="col-4">
          <span
          class="fs-7"
          #consultantID
          [innerHTML]="
          dataSelected?.consultantID
              | formatvalue
                : formModel
                : 'consultantID'
                : consultantID
                : 'CMDeals'
                : 'grvCMDeals'
              | async
          "
        ></span>
        </div>


      </div>
    </div>
    <div class="mt-2">
      <div class="mb-3">
        <h2><codx-label default="Mô tả nhu cầu"></codx-label></h2>
      </div>
      <span class="py-2"
        >
        {{dataSelected.memo}}
        </span
      >
    </div>
  </div>
</ng-template>

<ng-template #contact>
  <div>
    <codx-list-contacts
      [selectAll]="false"
      [funcID]="'CM0205'"
      [objectID]="dataSelected?.recID"
      [objectName]="dataSelected.dealName"
      [objectType]="'4'"
      [hidenMF]="true"
    ></codx-list-contacts>
  </div>
</ng-template>

<ng-template #ganttChart>
  <div class="border border-gray-150">
    <codx-gantt-chart
      [dataSource]="ganttDs"
      [taskFields]="taskFields"
      [taskbarHeight]="60"
      [rowHeight]="60"
      [readOnly]="true"
      [templateTaskbar]="ganttItems"
      [timelineSettings]="timelineSettings"
      [columns]="columns"
      [toolbar]="[]"
    ></codx-gantt-chart>
    <ng-template #ganttItems let-data>
      <div
        class="d-flex justify-content-center align-items-center"
        (click)="clickDetailGanchart(data.recID)"
        [ngStyle]="{
          'background-color': getColor(data.recID),
          'border-radius': '3px',
        }"
      >
        <span class="fw-bold text-dark line-clamp line-clamp-1 px-1">
          {{ data.name }}
        </span>
      </div>
    </ng-template>
  </div>
</ng-template>

<ng-template #field>
  <div class="d-flex flex-column">
    <ng-container *ngFor="let item of listStep">
      <codx-fields-detail-temp
        *ngIf="item?.fields?.length > 0"
        [dataStep]="item"
        [showColumnControl]="showColumnControl(item.stepID)"
        [isUpdate]="isUpdate && item.stepStatus < '2'"
      >
      </codx-fields-detail-temp>
    </ng-container>
  </div>
</ng-template>

<ng-template #opponent>
  <codx-tab-dealcompetitors [dealID]="dataSelected.recID"></codx-tab-dealcompetitors>
</ng-template>

<ng-template #opportunity>
  <div class="d-flex justify-content-between">
    <div class="d-flex flex-column">
      <div class="fw-bold fs-6 text-dark codx-text-overflow-1line">
        Trương Đặng Ngọc Phúc
      </div>
      <div class="d-flex align-items-start me-4 mb-1">
        <div class="me-3">
          <span class="icon-money icon-16 me-1"></span>
          <codx-label
            class="text-gray-600"
            name="lblNumber"
            default="Doanh số
            kỳ vọng: "
          ></codx-label>
          <span class="ms-1">50.000.000 VND</span>
        </div>
        <div>
          <span class="me-1">%</span>
          <codx-label
            class="text-gray-600"
            name="lblNumber"
            default="Tỷ lệ
            thành công: "
          ></codx-label>
          <span class="ms-1">70%</span>
        </div>
      </div>
    </div>
    <div class="d-flex align-items-top">
      <div class="d-flex flex-column">
        <div class="badge badge-primary">Giới thiệu sản phẩm</div>
        <div class="ms-5">
          <span class="icon-money icon-16 me-1"></span>
          <span class="text-gray-500 my-2">23/04/2023</span>
        </div>
      </div>
      <div class="ms-3">
        <!-- <codx-imgs
          [isToolTip]="true"
          [width]="35"
          [objectId]="'ADMIN'"
          ojectType="AD_Users"
          [numberImages]="1"
        >
        </codx-imgs> -->
      </div>
    </div>
  </div>
</ng-template>
