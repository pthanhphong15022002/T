<codx-views
  #view
  [views]="views"
  [autoLoad]="false"
  [funcID]="funcID"
  (filterReportChange)="filterChange($event)"
  (onActions)="onActions($event)"
>
</codx-views>

<ng-template #template>
  <div class="w-100 h-100" *ngIf="isLoaded">
    <ng-container *ngIf="funcID == 'CMD001'">
      <codx-dashboard
        [templates]="dashBoardTaget"
        [panels]="panelsDeals1"
        [datas]="datasDeals1"
        [isEditMode]="isEditMode"
        [cellSpacing]="[10, 10]"
      ></codx-dashboard>
    </ng-container>

    <ng-container *ngIf="funcID == 'CMD002' || funcID == 'CMD003'">
      <codx-dashboard
        [templates]="dashBoardDeals"
        [panels]="panelsDeals2"
        [datas]="datasDeals2"
        [isEditMode]="isEditMode"
        [cellSpacing]="[10, 10]"
      ></codx-dashboard>
    </ng-container>

    <ng-container *ngIf="funcID == 'CMD004'">
      <cm-targets [viewDashboard]="true"></cm-targets>
    </ng-container>
  </div>

  <div class="w-100 h-100" *ngIf="!isLoaded">
    <div id="loader"></div>
  </div>
</ng-template>

<!---------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------->
<!-- cơ hội mới -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="1" [title]="getTitle('1')">
    <div class="w-100 h-100 border border-secondary rounded border-2">
      <count-chart
        class="w-100 h-100"
        [height]="'75%'"
        [hasIcon]="true"
        [iconUrl]="
          'assets/themes/cm/default/img/dashboard-status-new-i-clipboard-plus.svg'
        "
        [title]="getNameStatus('1')"
        [value]="countNew ?? 0"
      ></count-chart>
    </div>
  </div>
</ng-template>

<!-- cơ hội đang thực hiện -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="2" [title]="getTitle('2')">
    <div class="w-100 h-100 border border-warning rounded border-2">
      <count-chart
        class="w-100 h-100"
        [height]="'75%'"
        [hasIcon]="true"
        [iconUrl]="
          'assets/themes/cm/default/img/dashboard-status-inprogress-i-clipboard-data.svg'
        "
        [title]="getNameStatus('2')"
        [value]="countProcessing ?? 0"
      ></count-chart>
    </div>
  </div>
</ng-template>

<!-- cơ hội thành công  -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="3" [title]="getTitle('3')">
    <div class="w-100 h-100 border border-success rounded border-2">
      <count-chart
        class="w-100 h-100"
        [height]="'75%'"
        [hasIcon]="true"
        [iconUrl]="
          'assets/themes/cm/default/img/dashboard-status-win-i-clipboard-check.svg'
        "
        [title]="getNameStatus('3')"
        [value]="countSuccess ?? 0"
      ></count-chart>
    </div>
  </div>
</ng-template>

<!-- cơ hội thất bại  -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="4" [title]="getTitle('5')">
    <div class="w-100 h-100 border border-danger rounded border-2">
      <count-chart
        class="w-100 h-100"
        [height]="'75%'"
        [hasIcon]="true"
        [iconUrl]="
          'assets/themes/cm/default/img/dashboard-status-fail-i-clipboard-minus.svg'
        "
        [title]="getNameStatus('5')"
        [value]="countFail ?? 0"
      ></count-chart>
    </div>
  </div>
</ng-template>

<!-- Tỷ lệ phân bổ cơ hội theo dòng sản phẩm -->
<!-- title="Tỷ lệ phân bổ cơ hội theo dòng sản phẩm" -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="5" style="overflow: hidden">
    <div>
      <codx-label
        class="fs-5 fw-bold"
        name="lblPercentageOfDeals"
        default="Tỷ lệ phân bổ cơ hội"
      ></codx-label>
    </div>
    <div id="chartPercentageOfDeals" class="mt-3">
      <div class="d-flex justify-content-center h-10">
        <div id="group1" class="btn-group">
          <input
            class="btn-check"
            type="radio"
            id="btBussinessLine"
            name="align1"
            #ele1
            checked
            (change)="
              changeBusIns(ele1, {
                chart1: { pie1 },
                chart2: { pie2 }
              })
            "
          />
          <label class="btn btn-outline-primary" for="btBussinessLine"
            ><codx-label
              name="btBussinessLine"
              formModel="CMMyDashboard"
              default="Dòng sản phẩm"
            ></codx-label
          ></label>
          <input
            class="btn-check"
            type="radio"
            id="btIndustries"
            name="align1"
            #ele2
            (change)="
              changeBusIns(ele2, {
                chart1: { pie1 },
                chart2: { pie2 }
              })
            "
          />
          <label class="btn btn-outline-primary" for="btIndustries">
            <codx-label
              name="btIndustries"
              formModel="CMMyDashboard"
              default="Lĩnh vực hoạt động"
            ></codx-label
          ></label>
        </div>
      </div>
    </div>
    <div class="w-100">
      <ejs-treemap
        #pie1
        class="w-100"
        [dataSource]="dataSourceBussnessLine ?? []"
        weightValuePath="quantity"
        rangeColorValuePath="quantity"
        [palette]="palette"
        [leafItemSettings]="leafItemSettings"
        [tooltipSettings]="{
          visible: true,
          format:
            '${businessLineName}<br>${quantity} ' +
            this.titLeModule +
            '-(${percentage} %)'
        }"
      >
      </ejs-treemap>

      <ejs-treemap
        #pie2
        class="w-100"
        [dataSource]="dataSourceIndustry ?? []"
        weightValuePath="quantity"
        rangeColorValuePath="quantity"
        [palette]="paletteIndustry"
        [leafItemSettings]="leafItemSettingsIns"
        [tooltipSettings]="{
          visible: true,
          format:
            '${industryName}<br>${quantity} ' +
            this.titLeModule +
            '-(${percentage} %)'
        }"
      >
      </ejs-treemap>
    </div>
  </div>
</ng-template>

<!-- Thống kê tỷ lệ thành công thất bại trong năm theo dòng sản phẩm -->
<!-- title="Thống kê tỷ lệ thành công ,thất bại trong năm theo dòng sản phẩm" -->
<ng-template #templateDeals>
  <div class="chartBusinessLines w-100 h-100" id="6" style="overflow: hidden">
    <codx-label
      id="chartBusinessLinesHeader"
      class="fs-5 fw-bold"
      name="lblChartBusinessLines"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Thống kê tỷ lệ thành công, thất bại trong năm theo dòng sản phẩm"
    ></codx-label>
    <div id="chartBusinessLinesButton" class="mt-3">
      <div class="d-flex justify-content-center align-items-center">
        <div
          [ngClass]="isSuccess ? 'button-selected' : 'button-no-selected'"
          class="btn-left py-1 d-flex justify-content-center align-items-center"
        >
          <codx-label
            name="btSuccess"
            formModel=""
            default="Thành công"
            (click)="clickButton('btSuccess')"
          ></codx-label>
        </div>
        <div
          [ngClass]="!isSuccess ? 'button-selected' : 'button-no-selected'"
          class="btn-right py-1 d-flex justify-content-center align-items-center"
        >
          <codx-label
            name="btFail"
            formModel=""
            default="Thất bại"
            (click)="clickButton('btFail')"
          ></codx-label>
        </div>
      </div>
    </div>

    <ng-container
      *ngIf="dataDashBoard?.countsBussinessLines?.length > 0; else noData"
    >
      <div class="w-100" style="height: 90%">
        <ejs-chart
          id="chart-container"
          class="w-100"
          [primaryXAxis]="primaryXAxis"
          [primaryYAxis]="primaryYAxis"
          [title]=""
          [tooltip]="tooltipChartLine"
        >
          <e-series-collection>
            <ng-container
              *ngFor="let item of dataDashBoard?.countsBussinessLines"
            >
              <e-series
                [dataSource]="
                  isSuccess ? item?.chartDataSuscess : item?.chartDataFail ?? []
                "
                type="Line"
                xName="month"
                yName="percentage"
                [name]="item.businessLineName"
                width="3"
                [fillColor]="item.color"
              ></e-series>

              <!-- <e-series
                *ngIf="!isSuccess"
                [dataSource]="item?.chartDataFail ?? []"
                type="Line"
                xName="month"
                yName="percentage"
                [name]="item.businessLineName"
                width="3"
                [fillColor]="item.color"
              ></e-series> -->
            </ng-container>
          </e-series-collection>
        </ejs-chart>
      </div>
    </ng-container>
  </div>
</ng-template>

<!-- Top nhân viên có nhiều cơ hội thành công nhất -->
<!-- title="Top nhân viên có nhiều cơ hội thành công nhất" -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="7" style="overflow-y: hiden">
    <codx-label
      class="fs-5 fw-bold"
      name="lblChartOwners"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Top nhân viên có nhiều cơ hội thành công nhất"
    ></codx-label>
    <div class="mt-5" style="overflow-y: auto; max-height: 85%">
      <div class="d-flex justify-content-center align-items-center">
        <div
          [ngClass]="isMax ? 'button-selected' : 'button-no-selected'"
          class="btn-left py-1 d-flex justify-content-center align-items-center"
          (click)="clickButton('btnMax')"
        >
          <codx-label
            name="btnMax"
            formModel=""
            default="Cao nhất"
          ></codx-label>
        </div>
        <div
          [ngClass]="!isMax ? 'button-selected' : 'button-no-selected'"
          class="btn-right py-1 d-flex justify-content-center align-items-center"
          (click)="clickButton('btnMin')"
        >
          <codx-label
            name="btnMin"
            formModel=""
            default="Thấp nhất"
          ></codx-label>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <ng-container *ngIf="isMax">
        <ng-container *ngIf="maxOwners?.length > 0; else noData">
          <div
            *ngFor="let ownerCount of maxOwners; let i = index"
            class="d-flex align-items-center justify-content-end cursor-pointer"
            [title]="ownerCount.objectName"
          >
            <div class="fw-bold me-2">{{ ownerCount?.quantity }}</div>
            <div
              class="owners-top"
              style="color: #000000"
              [style.background-color]="ownerCount?.color"
              [style.width]="ownerCount.percentage + '%'"
            >
              <span class="">{{ ownerCount.objectName }}</span>
            </div>
          </div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="!isMax">
        <ng-container *ngIf="minOwners?.length > 0; else noData">
          <div
            *ngFor="let ownerCount of minOwners; let i = index"
            class="d-flex align-items-center justify-content-end cursor-pointer"
            [title]="ownerCount.objectName"
          >
            <div class="fw-bold me-2">{{ ownerCount?.quantity }}</div>
            <div
              class="owners-top"
              style="color: #000000; background-color: aqua"
              [style.background-color]="ownerCount?.color"
              [style.width]="ownerCount.percentage + '%'"
            >
              <span class="">{{ ownerCount.objectName }}</span>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>
</ng-template>

<!-- Lý do thành công -->
<!-- title="Lý do thành công" -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="8" style="overflow: hidden">
    <codx-label
      class="fs-5 fw-bold"
      name="lblReasonSuscess"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Lý do thành công"
    ></codx-label>

    <div class="mt-5" style="overflow-y: auto; max-height: 85%">
      <div class="d-flex justify-content-center align-items-center">
        <div
          [ngClass]="isReasonSuscess ? 'button-selected' : 'button-no-selected'"
          class="btn-left py-1 d-flex justify-content-center align-items-center"
          (click)="clickButton('btnMax')"
        >
          <codx-label
            name="btnMax"
            formModel=""
            default="Cao nhất"
          ></codx-label>
        </div>
        <div
          [ngClass]="
            !isReasonSuscess ? 'button-selected' : 'button-no-selected'
          "
          class="btn-right py-1 d-flex justify-content-center align-items-center"
          (click)="clickButton('btnMin')"
        >
          <codx-label
            name="btnMin"
            formModel=""
            default="Thấp nhất"
          ></codx-label>
        </div>
      </div>
    </div>

    <div
      style="overflow-y: auto; max-height: 90%"
      *ngIf="
        isReasonSuscess
          ? dataDashBoard?.countsReasonsSuscess?.length > 0
          : dataDashBoard?.countsReasonsFails?.length > 0;
        else noData
      "
    >
      <div
        *ngFor="
          let data of isReasonSuscess
            ? dataDashBoard?.countsReasonsSuscess
            : dataDashBoard?.countsReasonsFails
        "
        class="mt-4"
      >
        <div class="mx-2 my-5">
          <div class="d-flex justify-content-between">
            <div>
              <span>{{ data?.reasonName }}</span>
              <span>&nbsp;(</span>
              <span>{{ data?.quantity }}</span>
              <span>)</span>
            </div>
            <div>
              <span>{{ data?.percentage }}</span
              ><span>% </span>
            </div>
          </div>
          <div class="d-flex align-items-center min-w-200px">
            <div class="h-5px w-100 bg-gray-200 rounded-4">
              <div
                class="rounded-4 h-5px"
                [ngStyle]="{ backgroundColor: colorReasonSuscess }"
                role="progressbar"
                [style.width]="data.percentage + '%'"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <ng-container *ngIf="!isReasonSuscess">
      <div
        style="overflow-y: auto; max-height: 95%"
        *ngIf="dataDashBoard?.countsReasonsFails?.length > 0; else noData"
      >
        <div
          *ngFor="let data of dataDashBoard?.countsReasonsFails"
          class="mt-4"
        >
          <div class="mx-2 my-5">
            <div class="d-flex justify-content-between">
              <div>
                <span>{{ data?.reasonName }}</span>
                <span>&nbsp;(</span>
                <span>{{ data.quantity }}</span>
                <span>)</span>
              </div>
              <div>
                <span>{{ data?.percentage }}</span
                ><span>% </span>
              </div>
            </div>
            <div class="d-flex align-items-center min-w-200px">
              <div class="h-5px w-100 bg-gray-200 rounded-4">
                <div
                  class="rounded-4 h-5px"
                  role="progressbar"
                  [ngStyle]="{ backgroundColor: colorReasonFails }"
                  [style.width]="data.percentage + '%'"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container> -->
  </div>
</ng-template>

<!-- Lý do thất bại -->
<!-- title="Lý do thất bại " -->
<!-- <ng-template #templateDeals>
  <div class="w-100 h-100" id="9" style="overflow: hidden">
    <codx-label
      class="fs-5 fw-bold"
      name="lblReasonFails"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Lý do thất bại"
    ></codx-label>
    <div
      style="overflow-y: auto; max-height: 95%"
      *ngIf="dataDashBoard?.countsReasonsFails?.length > 0; else noData"
    >
      <div *ngFor="let data of dataDashBoard?.countsReasonsFails" class="mt-4">
        <div class="mx-2 my-5">
          <div class="d-flex justify-content-between">
            <div>
              <span>{{ data?.reasonName }}</span>
              <span>&nbsp;(</span>
              <span>{{ data.quantity }}</span>
              <span>)</span>
            </div>
            <div>
              <span>{{ data?.percentage }}</span
              ><span>% </span>
            </div>
          </div>
          <div class="d-flex align-items-center min-w-200px">
            <div class="h-5px w-100 bg-gray-200 rounded-4">
              <div
                class="rounded-4 h-5px"
                role="progressbar"
                [ngStyle]="{ backgroundColor: colorReasonFails }"
                [style.width]="data.percentage + '%'"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template> -->

<!-- chart pyramid -->
<ng-template #templateDeals>
  <div
    class="w-100 h-100"
    id="9"
    style="height: 100% !important; overflow: hidden"
  >
    <codx-label
      class="fs-5 fw-bold"
      name="lblConversionRate"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Tỷ lệ chuyển đổi tiềm năng thành cơ hội"
    ></codx-label>

    <div id="chartCoverionButton" class="mt-3">
      <div class="d-flex justify-content-center align-items-center">
        <div
          [ngClass]="isStatus ? 'button-selected' : 'button-no-selected'"
          class="btn-left py-1 d-flex justify-content-center align-items-center"
        >
          <codx-label
            name="btStatus"
            formModel=""
            default="Status"
            (click)="clickButton('btStatus')"
          ></codx-label>
        </div>
        <div
          [ngClass]="!isStatus ? 'button-selected' : 'button-no-selected'"
          class="btn-right py-1 d-flex justify-content-center align-items-center"
        >
          <codx-label
            name="btStage"
            formModel=""
            default="Stage"
            (click)="clickButton('btStage')"
          ></codx-label>
        </div>
      </div>
    </div>
    <div
      style="height: 100% !important"
      *ngIf="
        isStatus
          ? dataSourcePyStatus?.length > 0
          : dataSourcePyStage?.length > 0;
        else noData
      "
    >
      <!-- <div class="control-section">
        <div> tooltipPy -->
      <ejs-accumulationchart
        id="pyramidcontainer"
        #pyramid
        style="height: 100%"
        [legendSettings]="legendSettingsPy"
        [tooltip]="{
          header: '',
          enable: true,
          format: '${point.tooltip}'
        }"
        (pointRender)="formatCrrView($event)"
      >
        <e-accumulation-series-collection>
          <e-accumulation-series
            name="ConversionRate"
            [dataSource]="isStatus ? dataSourcePyStatus : dataSourcePyStage"
            xName="name"
            yName="quantity"
            [neckWidth]="neckWidth"
            [neckHeight]="neckHeight"
            [gapRatio]="gapRatio"
            [emptyPointSettings]="emptyPointSettings"
            width="60%"
            height="100%"
            [explode]="explode"
            [dataLabel]="dataLabel"
            type="Funnel"
          >
          </e-accumulation-series>
        </e-accumulation-series-collection>
      </ejs-accumulationchart>
      <!-- </div>
      </div> -->
    </div>
  </div>
</ng-template>

<!-- Thống kê hiệu suất trong năm -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="10" title="" style="overflow: hidden">
    <codx-label
      class="fs-5 fw-bold"
      name="lblEfficiency"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Thống kê hiệu suất trong năm"
    ></codx-label>
    <ng-container *ngIf="dataStatisticTarget?.length > 0; else noData">
      <div class="d-flex row w-100" style="height: 95% !important">
        <div class="col-10">
          <!-- <div class="control-section mb-10"> -->
          <!-- <div class="trackball-control-section" align="center"> -->
          <ejs-chart
            id="chartcontainer"
            style="height: 100%"
            [primaryXAxis]="primaryXAxisRatio"
            [primaryYAxis]="primaryYAxisRatio"
            [tooltip]="tooltip"
            [legendSettings]="legend"
            (pointRender)="setColorPoint($event)"
          >
            <e-series-collection>
              <e-series
                [dataSource]="dataStatisticTarget"
                [minRadius]="minRadius"
                [maxRadius]="maxRadius"
                type="Bubble"
                xName="totalTarget"
                yName="totalDealValue"
                size="quantity"
                [marker]="markerRatio"
                tooltipMappingName="businessLineName"
                [border]="border"
              >
              </e-series>
            </e-series-collection>
          </ejs-chart>
          <!-- </div> -->
          <!-- </div> -->
        </div>
        <div class="col-2">
          <codx-label
            class="codx-label fw-bold"
            name="lblNote"
            formName="CMMyDashboard"
            gridViewName="grvCMMyDashboard"
            default="Chú thích"
          ></codx-label>
          <ng-container *ngFor="let item of dataStatisticTarget">
            <div class="d-flex mb-2 align-items-center">
              <span
                class="color-note me-2"
                [style.background-color]="item.color"
              ></span>
              <span
                [ngbTooltip]="item.businessLineName"
                class="line-clamp-name"
                [innerHTML]="item.businessLineName"
              ></span>
            </div>
          </ng-container>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>

<!-- Thống kê năng suất nhân viên -->
<ng-template #templateDeals>
  <div class="w-100 h-100" id="11" title="" style="overflow: hidden">
    <codx-label
      class="fs-5 fw-bold"
      name="lblProductivityOfOwners"
      default="Thống kê năng suất nhân viên"
    ></codx-label>
    <ng-container *ngIf="productivityOwner?.length > 0; else noData">
      <div style="overflow-y: auto; max-height: 95%">
        <div *ngFor="let productivity of productivityOwner">
          <div class="mx-2 my-3">
            <div class="d-flex justify-content-between">
              <div class="mb-2">
                <span class="fw-bold">{{ productivity?.objectName }}</span>
              </div>
              <div class="d-flex align-items-end">
                <span class="text-gray-400">{{
                  productivity?.sumTarget | currency : productivity?.currencyID
                }}</span>
              </div>
            </div>
            <div
              class="d-flex align-items-center min-w-200px"
              [title]="
                productivity?.sumDealValueSuccess
                  | currency : productivity?.currencyID
              "
            >
              <div class="w-100 bg-gray-200 rounded-4" style="height: 15px">
                <div class="h-5px w-100 bg-gray-200 rounded-4">
                  <div
                    class="rounded-4 h-15px align-items-center progress-bar"
                    role="progressbar"
                    [ngStyle]="{
                      backgroundColor:
                        productivity?.percentage >= 50
                          ? '#187de4'
                          : colorReasonFails
                    }"
                    [style.width]="productivity?.percentage + '%'"
                  >
                    <div class="fw-bold text-light">
                      {{ productivity?.percentage + "%" }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>
<!---------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------->

<!-- SALE TAGET =>CMD001  templateTarget-->
<!-- Tem TOp sale Tager -->
<ng-template #templateTarget>
  <div class="w-100 h-100" id="1" title=""></div>
</ng-template>
<ng-template #templateTarget>
  <div class="w-100 h-100" id="2" title=""></div>
</ng-template>
<ng-template #templateTarget>
  <div class="w-100 h-100" id="3" title=""></div>
</ng-template>
<ng-template #templateTarget>
  <div class="w-100 h-100" id="4" title=""></div>
</ng-template>
<ng-template #templateTarget>
  <div class="w-100 h-100" id="5" title=""></div>
</ng-template>
<ng-template #templateTarget>
  <div class="w-100 h-100" id="6" title=""></div>
</ng-template>
<ng-template #templateTarget>
  <div class="w-100 h-100" id="7" title=""></div>
</ng-template>

<ng-template #templateTarget>
  <div class="w-100 h-100" id="8" title="">
    <codx-label
      class="fs-5 fw-bold mb-3"
      name="lblSalesTargets"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Sales targets"
    ></codx-label>
    <div class="w-100 d-flex justify-content-center">
      <ejs-bulletchart
        valueField="value"
        targetField="target"
        title="2023"
        width="1000px"
        height="80%"
        [minimum]="minimumBullet"
        [maximum]="maximumBullet"
        [interval]="interval"
        [dataSource]="dataBullet"
      >
        <e-bullet-range-collection>
          <e-bullet-range end="400" color="#ebebeb"></e-bullet-range>
          <e-bullet-range end="600" color="#d8d8d8"></e-bullet-range>
        </e-bullet-range-collection>
      </ejs-bulletchart>
    </div>
    <div class="row">
      <div class="col-6 d-flex justify-content-center">
        <ejs-bulletchart
          valueField="value"
          targetField="target"
          title="Q1"
          width="500px"
          height="80%"
          [minimum]="minimumBullet"
          [maximum]="maximumBullet"
          [interval]="interval"
          [dataSource]="dataBullet"
        >
          <e-bullet-range-collection>
            <e-bullet-range end="400" color="#ebebeb"></e-bullet-range>
            <e-bullet-range end="600" color="#d8d8d8"></e-bullet-range>
          </e-bullet-range-collection>
        </ejs-bulletchart>
      </div>
      <div class="col-6 d-flex justify-content-center">
        <ejs-bulletchart
          valueField="value"
          targetField="target"
          title="Q2"
          width="500px"
          height="80%"
          [minimum]="minimumBullet"
          [maximum]="maximumBullet"
          [interval]="interval"
          [dataSource]="dataBullet"
        >
          <e-bullet-range-collection>
            <e-bullet-range end="400" color="#ebebeb"></e-bullet-range>
            <e-bullet-range end="600" color="#d8d8d8"></e-bullet-range>
          </e-bullet-range-collection>
        </ejs-bulletchart>
      </div>
    </div>
    <div class="row">
      <div class="col-6 d-flex justify-content-center">
        <ejs-bulletchart
          valueField="value"
          targetField="target"
          title="Q3"
          width="500"
          height="80%"
          [minimum]="minimumBullet"
          [maximum]="maximumBullet"
          [interval]="interval"
          [dataSource]="dataBullet"
        >
          <e-bullet-range-collection>
            <e-bullet-range end="400" color="#ebebeb"></e-bullet-range>
            <e-bullet-range end="600" color="#d8d8d8"></e-bullet-range>
          </e-bullet-range-collection>
        </ejs-bulletchart>
      </div>
      <div class="col-6 d-flex justify-content-center">
        <ejs-bulletchart
          valueField="value"
          targetField="target"
          title="Q4"
          width="500"
          height="80%"
          [minimum]="minimumBullet"
          [maximum]="maximumBullet"
          [interval]="interval"
          [dataSource]="dataBullet"
        >
          <e-bullet-range-collection>
            <e-bullet-range end="400" color="#ebebeb"></e-bullet-range>
            <e-bullet-range end="600" color="#d8d8d8"></e-bullet-range>
          </e-bullet-range-collection>
        </ejs-bulletchart>
      </div>
    </div>
  </div>
</ng-template>

<!-- Tem templateSaker -->
<ng-template #templateTarget>
  <div class="w-100 h-100" id="9" title="">
    <codx-label
      class="fs-5 fw-bold mb-3"
      name="lblSakerQuarters"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Sales last 4 quarters"
    ></codx-label>
    <ng-container *ngIf="piedata?.length > 0; else noData">
      <ejs-accumulationchart
        id="container"
        #pie
        style="display: block; width: 92%"
        [legendSettings]="legendSettings"
        [enableSmartLabels]="false"
        (textRender)="onTextRender($event)"
        [enableBorderOnMouseMove]="false"
        [tooltip]="{
        enable: true,
        format: '${point.y}%',
      }"
      >
        <e-accumulation-series-collection>
          <e-accumulation-series
            [dataSource]="piedata"
            xName="x"
            yName="y"
            [startAngle]="startAngle"
            [endAngle]="endAngle"
            innerRadius="0%"
            radius="70%"
            [dataLabel]="dataLabel"
            [explode]="false"
            explodeOffset="10%"
            [explodeIndex]="explodeIndex"
          >
          </e-accumulation-series>
        </e-accumulation-series-collection>
      </ejs-accumulationchart>
    </ng-container>
  </div>
</ng-template>

<!-- Tem TOp sale performan -->
<ng-template #templateTarget>
  <div class="w-100 h-100" id="10" title="">
    <codx-label
      class="fs-5 fw-bold mb-3"
      name="lblSalePerformance"
      formName="CMMyDashboard"
      gridViewName="grvCMMyDashboard"
      default="Top sales performance"
    ></codx-label>
    <div class="table-container border" style="overflow-x: auto">
      <table class="table">
        <thead class="thead-light">
          <tr>
            <th
              style="width: 300px !important"
              style="border-bottom: 1px var(--gray-100) solid !important"
            ></th>
            <ng-container *ngFor="let item of lstUsers">
              <th
                class="w-50px"
                style="border-bottom: 1px var(--gray-100) solid !important"
              >
                <div class="d-flex justify-content-center">
                  <codx-imgs
                    [width]="30"
                    [objectId]="item?.userID"
                    [objectName]="item?.userName"
                    objectType="AD_Users"
                    [numberImages]="5"
                    class=""
                  >
                  </codx-imgs>
                </div>
                <div class="mt-1">{{ item?.userName }}</div>
              </th>
            </ng-container>
          </tr>
        </thead>
        <tbody *ngFor="let item of lstTitlePerformance">
          <tr>
            <td style="border-bottom: 1px var(--gray-100) solid !important">
              <span class="fw-bold">{{ item.text }}</span>
            </td>
            <ng-container *ngFor="let user of lstUsers">
              <td
                *ngIf="findItemUser(item.value, user.lstTitlePerformance)"
                style="border-bottom: 1px var(--gray-100) solid !important"
              >
                <div class="text-gray-800 d-flex justify-content-center">
                  {{ findItemUser(item.value, user.lstTitlePerformance)?.text }}
                </div>
              </td>
            </ng-container>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</ng-template>
<!-- END  -->
<!---------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------->

<ng-template #noData>
  <codx-no-data [size]="150"></codx-no-data>
</ng-template>

<!-- temp filter -->
<ng-template #filterTemplate>
  <!-- <codx-input
    [cssClass]="'rounded-pill border-1'"
    cssPopup="h-350px w-300px"
    type="valuelist"
    [crrValue]="'2'"
    refValue="AC083"
    field="payType"
    (valueChange)="valueChangeFilter($event)"
  ></codx-input> -->
</ng-template>
