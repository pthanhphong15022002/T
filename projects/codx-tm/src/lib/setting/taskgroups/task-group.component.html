<codx-views #view entityName="TM_TaskGroups" service="TM" assemblyName="ERM.Business.TM" className="TaskGroupBusiness"
  method="GetListTaskGroupsAsync" [views]="views" [button]="button" [moreFuncs]="moreFuncs"
  (viewChanged)="changeView($event)" (buttonClick)="buttonClick($event)" (selectedChange)="selectedChange($event)"
  idField="taskGroupID" [pageSize]="100" [selectedFirst]="true">
</codx-views>

<ng-template #grid let-data>
  <tr>
    <td class="rowphoto">
      <div class="padding">
        {{data.taskGroupID}}
      </div>
    </td>
    <td class="rowphoto" placement="left">
      <div class="padding  cursor-pointer line-clamp line-clamp-2" [ngbTooltip]="data.taskGroupName">
        {{data.taskGroupName}}

      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        {{data.taskGroupName2}}

      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <div [innerHTML]="data.note" [ngbTooltip]="data.note">
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.projectControl!='0'">
        <div class="badge badge-danger me-2" [style.border-color]="
        (data?.projectControl | vll: 'TM012':'color' | async) + '30'
      " [style.background-color]="
        (data?.projectControl | vll: 'TM012':'color' | async) + '30'
      " [style.color]="data?.projectControl | vll: 'TM012':'color' | async" style="border: none">
          {{data?.projectControl|vll:"TM012":"text"|async}}
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.locationControl">
        <div class="badge badge-danger me-2" [style.border-color]="
        (data?.locationControl | vll: 'TM012':'color' | async) + '30'
      " [style.background-color]="
        (data?.locationControl | vll: 'TM012':'color' | async) + '30'
      " [style.color]="data?.locationControl | vll: 'TM012':'color' | async" style="border: none">
          {{data?.locationControl|vll:"TM012":"text"|async}}
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.planControl">
        <div class="badge badge-danger me-2" [style.border-color]="
        (data?.planControl | vll: 'TM012':'color' | async) + '30'
      " [style.background-color]="
        (data?.planControl | vll: 'TM012':'color' | async) + '30'
      " [style.color]="data?.planControl | vll: 'TM012':'color' | async" style="border: none">
          {{data?.planControl|vll:"TM012":"text"|async}}
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.updateControl">
        <div class="badge badge-danger me-2" [style.border-color]="
        (data?.updateControl | vll: 'TM013':'color' | async) + '30'
      " [style.background-color]="
        (data?.updateControl | vll: 'TM013':'color' | async) + '30'
      " [style.color]="data?.updateControl | vll: 'TM013':'color' | async" style="border: none">
          {{data?.updateControl|vll:"TM013":"text"|async}}
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.checkListControl">
        <div class="d-flex align-items-center" style="padding-right: 30px;">
          <div class="badge badge-danger me-2" [style.border-color]="
          (data?.checkListControl | vll: 'L1463':'color' | async) + '30'
        " [style.background-color]="
          (data?.checkListControl | vll: 'L1463':'color' | async) + '30'
        " [style.color]="data?.checkListControl | vll: 'L1463':'color' | async" style="border: none">
            {{data?.checkListControl|vll:"L1463":"text"|async}}
          </div>
          <div class="dropdown ms-2" [ngbPopover]="popDetail" placement="bottom" #empPopover="ngbPopover"
            [openDelay]="500" (mouseenter)="PopoverDetail(empPopover, data)"
            (mouseleave)="PopoverDetail(empPopover, null)">
            <button [disabled]="!data.checkList" class="btn" type="button" id="dropdownShowDescription"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <div class="d-flex">
                <span class="icon-assignment icon-16 text-gray-600 me-1" *ngIf="data.checkList"></span>
                <!-- <div class="b text-start" >
                  {{data?.checkList}}
                </div> -->
              </div>
              <span class="icon-assignment icon-16 b text-start" *ngIf="!data.checkList"></span>
            </button>
          </div>
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.verifyControl == '1'">
        <div class="badge badge-danger me-2" [style.border-color]="
        (data?.verifyByType | vll: 'TM006':'color' | async) + '30'
      " [style.background-color]="
        (data?.verifyByType | vll: 'TM006':'color' | async) + '30'
      " [style.color]="data?.verifyByType | vll: 'TM006':'color' | async" style="border: none">
          {{data?.verifyByType|vll: 'TM006':"text"|async}}
        </div>
        <div class="font-italic"
          *ngIf="data.verifyByType =='R' || data.verifyByType == 'P' || data.verifyByType == 'U'">
          {{data.verifyBy}}
        </div>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.approveControl == '1'">
        <div class="badge badge-danger me-2" [style.border-color]="
        (data?.approveBy | vll: 'TM014':'color' | async) + '30'
      " [style.background-color]="
        (data?.approveBy | vll: 'TM014':'color' | async) + '30'
      " [style.color]="data?.approveBy | vll: 'TM014':'color' | async" style="border: none">
          {{data?.approveBy|vll:"TM014":"text"|async}}
        </div>
        <div class="font-italic" *ngIf="data.approveBy =='R' || data.approveBy == 'P'">
          {{data.approvers}}
        </div>
      </div>

    </td>
    <td class="rowphoto">
      <div class="padding" *ngIf="data.maxHoursControl == '1'">
        <span class="text-gray-600 me-1">
          {{data.maxHours}}
        </span>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <codx-input name="editControl" type="switch" class="test-switch" field="editControl"
          [crrValue]="data.editControl === '1' ? true : false">
        </codx-input>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <codx-input name="dueDateControl" type="switch" class="test-switch" field="dueDateControl"
          [crrValue]="data.dueDateControl === '1' ? true : false">
        </codx-input>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <codx-input name="autoCompleted" type="switch" class="test-switch" field="autoCompleted"
          [crrValue]="data.autoCompleted === '1' ? true : false">
        </codx-input>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <codx-input name="extendControl" type="switch" class="test-switch" field="extendControl"
          [crrValue]="data.extendControl === '1' ? true : false">
        </codx-input>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <codx-input name="confirmControl" type="switch" class="test-switch" field="confirmControl"
          [crrValue]="data.confirmControl === '1' ? true : false">
        </codx-input>
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <div class="d-flex align-items-center" #itemCreateBy>
          <codx-img class="symbol symbol-24 symbol-circle me-2" width="25" [objectId]="data.createdBy"
            objectType="AD_Users">
          </codx-img>
          <div class="text-dark" placement="left" [ngbTooltip]="data.createName">
            {{data.createName}}
          </div>
        </div>
      </div>
      <!-- <codx-temp-full [imageId]="data.createdBy" imageObjType="AD_Users" imageWidth="25" [desc]="data.createName">
      </codx-temp-full> -->
    </td>
    <td class="rowphoto">
      <div class="padding">
        {{data.createdOn | date: 'dd/MM/yyyy'}}
      </div>
    </td>
    <td class="rowphoto">
      <div class="padding">
        <codx-mfunc [formModel]="view.formModel" (clickMF)="clickMF($event, data)" [isBookMark]="false"
          [dataItem]="data">
        </codx-mfunc>
      </div>
    </td>
  </tr>
</ng-template>

<ng-template #popDetail let-data>
  <ng-container *ngFor="let item of popoverDetail; index as i;">
    <div class="d-flex justify-content-between align-items-center checkbox-item mb-4">
      <label class="checkbox checkbox-square checkbox-sm mb-0">
        <codx-input type="checkbox" checked="checked" label="{{item}}" disabled>
        </codx-input>
      </label>
    </div>
  </ng-container>
</ng-template>


<ng-template #itemTaskGroupID let-data>
  <div class="padding">
    <codx-label fiedName="TaskGroupID" formName="TaskGroups" gridViewName="grvTaskGroups" default="Mã nhóm">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemTaskGroupName let-data>
  <div class="padding">

    <codx-label fiedName="TaskGroupName" formName="TaskGroups" gridViewName="grvTaskGroups" default="Nhóm công việc">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemTaskGroupName2 let-data>
  <div class="padding">

    <codx-label fiedName="TaskGroupName2" formName="TaskGroups" gridViewName="grvTaskGroups" default="Tên khác">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemNote let-data>
  <div class="padding">

    <codx-label fiedName="Note" formName="TaskGroups" gridViewName="grvTaskGroups" default="Ghi chú">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemProjectControl let-data>
  <div class="padding">
    <codx-label fiedName="ProjectControl" formName="TaskGroups" gridViewName="grvTaskGroups" default="Chọn dự án">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemLocationControl let-data>
  <div class="padding">
    <codx-label fiedName="LocationControl" formName="TaskGroups" gridViewName="grvTaskGroups" default="Nhập địa điểm">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemPlanControl let-data>
  <div class="padding">
    <codx-label fiedName="PlanControl" formName="TaskGroups" gridViewName="grvTaskGroups" default="Lập KH thực hiện">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemUpdateControl let-data>
  <div class="padding">
    <codx-label fiedName="UpdateControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Cập nhật tình trạng">
    </codx-label>
  </div>
</ng-template>


<ng-template #itemCheckListControl let-data>
  <div class="padding">
    <codx-label fiedName="CheckListControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Nhập việc cần làm">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemVerifyControl let-data>
  <div class="padding">
    <codx-label fiedName="VerifyControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Duyệt thực hiện công việc">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemApproveControl let-data>
  <div class="padding">
    <codx-label fiedName="ApproveControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Đánh giá công việc hoàn tất">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemProjectControl let-data>
  <div class="padding">

    <codx-label fiedName="ProjectControl" formName="TaskGroups" gridViewName="grvTaskGroups" default="Chọn dự án">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemMaxHoursControl let-data>
  <div class="padding">
    <codx-label fiedName="MaxHoursControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Thời gian tối đa hoàn thành">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemEditControl let-data>
  <div class="padding">
    <codx-label fiedName="EditControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Chỉnh sửa nội dung giao việc">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemDueDateControl let-data>
  <div class="padding">
    <codx-label fiedName="DueDateControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Thêm công việc quá khứ">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemAutoCompleted let-data>
  <div class="padding">
    <codx-label fiedName="AutoCompleted" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Cập nhật hoàn thành tự động">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemExtendControl let-data>
  <div class="padding">
    <codx-label fiedName="ExtendControl" formName="TaskGroups" gridViewName="grvTaskGroups" default="Gia hạn công việc">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemConfirmControl let-data>
  <div class="padding">
    <codx-label fiedName="ConfirmControl" formName="TaskGroups" gridViewName="grvTaskGroups"
      default="Xác nhận thực hiện công việc">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemCreatedBy let-data>
  <div class="padding">

    <codx-label fiedName="CreatedBy" formName="TaskGroups" gridViewName="grvTaskGroups" default="Người tạo">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemCreatedOn let-data>
  <div class="padding">

    <codx-label fiedName="CreatedOn" formName="RangesKanban" gridViewName="grvRangesKanban" default="Ngày tạo">
    </codx-label>
  </div>
</ng-template>

<ng-template #itemTemplate let-data>
  <codx-temp-full cardCss="card-template border-bottom px-2 py-3" (clickMF)="moreFuncClick($event,data)"
    [title]="data.taskGroupName" [esc2]="data.note" [formModel]="view.formModel" [imageId]="data.createdBy"
    imageObjType="AD_Users">
    <!-- icoSubTitleCss="icon-assignment" [subTitle]="data.positionName" 1;fa fa-flag-o;2;fa fa-flag-o;3;fa fa-flag-o-->
  </codx-temp-full>
</ng-template>


<!-- <ng-template #itemCreateBy let-dataItem>
  <div class="d-flex align-items-center" #itemCreateBy>
    <codx-img class="symbol symbol-24 symbol-circle me-2" [objectId]="dataItem.createdBy" objectType="AD_Users">
    </codx-img>
    <div class="text-dark font-size-lg" placement="bottom">
      {{dataItem.createName}}
    </div>
  </div>
</ng-template>
<ng-template #itemNote let-data>
  <div [innerHTML]="data.note">

  </div>
</ng-template>
<ng-template #itemCreate let-data>
  {{data.createdOn | date: 'dd/MM/yyyy'}}
</ng-template>
<ng-template #itemApproveControlVll let-data>
  <div class="badge badge-danger me-2" [style.border-color]="
  (data?.approveControl | vll: 'L1433':'color' | async) + '30'
" [style.background-color]="
  (data?.approveControl | vll: 'L1433':'color' | async) + '30'
" [style.color]="data?.approveControl | vll: 'L1433':'color' | async" style="border: none">
    {{data?.approveControl|vll:"L1433":"text"|async}}
  </div>
</ng-template>
<ng-template #itemProjectControlVll let-data>
  <div class="badge badge-danger me-2" [style.border-color]="
  (data?.projectControl | vll: 'L1462':'color' | async) + '30'
" [style.background-color]="
  (data?.projectControl | vll: 'L1462':'color' | async) + '30'
" [style.color]="data?.projectControl | vll: 'L1462':'color' | async" style="border: none">
    {{data?.projectControl|vll:"L1462":"text"|async}}
  </div>

</ng-template>
<ng-template #itemAttachmentControl let-data>
  <div class="badge badge-danger me-2" [style.border-color]="
  (data?.attachmentControl | vll: 'L1462':'color' | async) + '30'
" [style.background-color]="
  (data?.attachmentControl | vll: 'L1462':'color' | async) + '30'
" [style.color]="data?.attachmentControl | vll: 'L1462':'color' | async" style="border: none">
    {{data?.attachmentControl|vll:"L1462":"text"|async}}
  </div>

</ng-template>
<ng-template #itemCheckListControlVll let-data>
  <div class="badge badge-danger me-2" [style.border-color]="
  (data?.checkListControl | vll: 'L1463':'color' | async) + '30'
" [style.background-color]="
  (data?.checkListControl | vll: 'L1463':'color' | async) + '30'
" [style.color]="data?.checkListControl | vll: 'L1463':'color' | async" style="border: none">
    {{data?.checkListControl|vll:"L1463":"text"|async}}
  </div>
</ng-template>
<ng-template #itemCheckList let-data>
  <ng-container *ngFor="let item of getCheckList(data.checkList); index as i;">
    <div class="d-flex justify-content-between align-items-center checkbox-item mb-4"
      *ngIf=" (i<3 || data.disableReadmore) ">
      <label class="checkbox checkbox-square checkbox-sm mb-0">
        <input type="checkbox" checked="checked" disabled>
        <span></span> {{item}}
      </label>
    </div>
  </ng-container>
  <div *ngIf="getCheckList(data.checkList)?.length > 3"> <a class="text-35-italic" style="color: blue"
      (click)="readMore(data)">{{ !data.disableReadmore ? 'Read More ...': '... Read Less' }}</a></div>
</ng-template> -->
