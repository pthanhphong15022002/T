<div class="row m-0 bg-body rounded-2 mb-3 p-3 sprints-task-header">
  <div class="col-8">
    <div class="d-flex">
      <div class="text-dark fw-bolder my-1 fs-3 p-3">
        {{ sprints?.iterationName }}
      </div>
      <div class="d-status p-3">
        <div class="badge badge-danger me-2 label-status">Nội bộ</div>
      </div>
      <div class="p-3">
        <span #createdOn> {{ sprints?.createdOn | date: "dd/MM/yyyy" }}</span>
      </div>
      <div class="p-3">
        {{ sprints?.createdByName }}
      </div>
    </div>
    <div>
      <div class="d-flex">
        <ng-container *ngFor="let item of tabControl; let i = index">
          <a
            [class]="
              'm-3 text-gray-800 text-hover-primary btn-light-primary' +
              ' ' +
              (item.isActive ? 'text-primary' : '')
            "
          >
            <codx-label
              [name]="'lbl' + item.name"
              [formName]="'SYS'"
              [default]="item.textDefault"
              (click)="clickMenu(item)"
            >
            </codx-label>
          </a>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="col-4">
    <codx-imgs
      style="float: right"
      [objectId]="sprints?.resources"
      objectType="AD_Users"
      [numberImages]="7"
      [width]="40"
      (mouseenter)="popoverEmpList(popoverList)"
      [ngbPopover]="popEmpList"
      popoverClass="empPopoverClass"
      #popoverList="ngbPopover"
      placement="bottom"
      container="body"
      autoClose="outside"
      [openDelay]="500"
    ></codx-imgs>
  </div>
</div>
<div class="page-content d-flex flex-row">
  <div class="w-100">
    <div
      class="m-0 bg-body rounded-2 sprints-task-detail"
      data-kt-scroll="true"
      data-kt-scroll-activate="{default: true}"
      data-kt-scroll-height="auto"
      data-kt-scroll-dependencies=".page-content, .sprints-task-header"
      data-kt-scroll-wrappers=".sprints-task-detail, .no-wrapper"
      data-kt-scroll-offset="0px"
    >
      <ng-container *ngIf="name == 'Dashboard'">
        <codx-sprintdetails-dashboard
          [sprints]="sprints"
        ></codx-sprintdetails-dashboard>
      </ng-container>
      <ng-container *ngIf="name == 'Công việc'">
        <codx-tasks [projectID]="projectID"></codx-tasks>
      </ng-container>
      <ng-container *ngIf="name == 'Lịch sử'">
        <ng-container>
          <ng-container>This is history... </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="name == 'Bình luận'">
        <ng-container>
          <ng-container> This is comment... </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="name == 'Họp định kì'">
        <!-- <ng-container> This is mettings... </ng-container> -->
        <lib-tmmeetings></lib-tmmeetings>
      </ng-container>
    </div>
  </div>
</div>

<ng-template #popEmpList>
  <div class="fw-bold">
    <codx-label
      name="Resouces"
      formName="Sprints"
      default="Danh sách phân công cho"
    ></codx-label>
    <span>{{ "(" + countResource + ")" }}</span>
  </div>
  <div>
    <codx-searchbar
      *ngIf="countResource > 0"
      (searchEvent)="searchName($event)"
    ></codx-searchbar>
  </div>
  <div
    class="d-flex align-items-start user-card p-3"
    *ngFor="let item of listTaskResousceSearch"
  >
    <div class="me-3">
      <div>
        <codx-img class="" [objectId]="item?.employeeID" objectType="AD_Users">
        </codx-img>
      </div>
    </div>
    <div class="d-flex flex-column flex-grow-1">
      <div class="text-dark fw-bold">{{ item?.employeeName }}</div>
      <div class="text-gray-600 fs-7">{{ item?.positionName }}</div>
    </div>
  </div>
</ng-template>
