<codx-form #form headerText="{{title}}" subHeaderText="" [body]="body" [footer]="footer" [dialog]="dialog"
  [formModel]="dialog.formModel" [data]="master">
  <ng-template popup adde #body>

    <div class="form-group row">
      <span class="col-10">
        <codx-input field="iterationName" [disabled]="readOnly" [formModel]="form.formModel" [Group]="form.formGroup">
        </codx-input>
      </span><span class="col-2">
        <div class="form-group">
          <div class="image-input image-input-outline" id="kt_user_add_avatar">
            <div>
              <codx-img #imageAvatar [width]="50" [objectId]="master?master.iterationID:''"
                [objectName]="master?master.iterationName:''" objectType="TM_Sprints" [funcId]="funcID"
                isAllowEdit="true" [updateDirect]="isUploadImg" [width]="50" [disabled]="readOnly" [height]="50">
              </codx-img>
            </div>
          </div>
        </div>
      </span>
    </div>
    <div class="form-group">
      <div class="text-dark fw-bold mb-1">
        <codx-label fiedName="ProjectName" [formModel]="form.formModel" default="Dự án"></codx-label>
      </div>

      <codx-input field="projectID" [formModel]="form.formModel" [Group]="form.formGroup"></codx-input>
    </div>
    <div class="form-group ">
      <div class="text-dark fw-bold mb-1">
        <codx-label fiedName="ViewMode" [formModel]="form.formModel" default="Lưu mặc định">
        </codx-label>
      </div>

      <codx-input field="viewMode" [formModel]="form.formModel" [Group]="form.formGroup"></codx-input>
    </div>
    <div class="form-group">
      <div class="text-dark fw-bold mb-1">
        <codx-label fiedName="Memo" [formModel]="form.formModel" default="Mô tả công việc">
        </codx-label>
      </div>
      <!-- <codx-input type="textarea"  field="memo" [crrValue]="master?.memo" (valueChange)="changeMemo($event)" format="ed1"></codx-input> -->
      <codx-input  field="memo" [formModel]="form.formModel" [Group]="form.formGroup"></codx-input>
    </div>
    <div class="d-flex align-items-center justify-content-between mt-4">
      <div class="d-flex align-items-center">
        <span class="icon-person icon-16 me-2 text-primary"></span>
        <div class="fw-bold fs-6 text-primary">
          <codx-label fiedName="Resources" [formModel]="form.formModel" default="Phân công cho">
          </codx-label>
        </div>
      </div>
      <codx-input type="Share" [refValue]="vllShare" field="Resources" [dataShared]="[]" multiple="true" [showInput]="false"
        (valueChange)="eventApply($event)"></codx-input>
    </div>
    <div class="mt-3">
      <ng-container *ngFor="let item of listUserDetail; index as i">
        <div class="d-flex justify-content-between user-mini-nav align-items-center" style="background-color:#F4F7FF">
          <span>
            <codx-img [width]="25" class="me-2" [objectId]="item?.userID" objectType="AD_Users">
            </codx-img>
          </span><span class="text-dark fw-bold">
            {{item?.userName}}
          </span><span class="mt-1" *ngIf="!readOnly"><a (click)="onDeleteUser(item.userID)" style="cursor: pointer">
              <span class="icon-close icon-16 text-danger ms-3"></span>
            </a></span>
        </div>
      </ng-container>
    </div>

  </ng-template>
  <ng-template #footer>
    <div class="d-flex justify-content-between ">
      <codx-input type="checkbox" (valueChange)="valueChangeShared($event)" labelPosition="After"
        label="Chia sẽ board cho nguồn lực" [crrValue]="master.isShared"></codx-input>
      <button type="button" class="btn btn-primary" (click)="saveData(master.iterationID)">
        <codx-label name="Save" formName="Sprints" default="Lưu"></codx-label>
      </button>
    </div>
  </ng-template>
</codx-form>