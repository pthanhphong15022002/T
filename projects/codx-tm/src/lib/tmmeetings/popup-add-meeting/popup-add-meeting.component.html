<codx-form headerText="{{title}}" #form [subHeader]="subHeader" [body]="body" [footer]="footer" [dialog]="dialog"
  [formModel]="dialog.formModel" [data]="data">

  <ng-template #subHeader>
    <codx-tag [entityName]="dialog.formModel.entityName" [isEdit]="true" [value]="''"
      (valueChange)="valueChangeTags($event)"></codx-tag>
  </ng-template>
  <ng-template #body>
    <div class="codx_tab">
      <ejs-tab headerPlacement="Left">
        <e-tabitems>
          <e-tabitem>
            <ng-template #headerText class="">
              <div class="nav-item">
                <a class="nav-link text-dark text-hover-primary btn-light-primary d-flex  px-0">
                  <span class="icon-info icon-24 me-2"></span>
                  <span class="d-flex flex-column align-items-start">
                    <span class="fw-bolder">
                      <codx-label name="GeneralInformation" formName="TMMeetings" default="Thông tin chung">
                      </codx-label>
                    </span>
                    <span class="fs-7">Thông tin chung</span>
                  </span>
                </a>
              </div>
            </ng-template>
            <ng-template #content>
              <div class="form-group">
                <div>
                  <codx-label fiedName="MeetingName" formName="TMMeetings" gridViewName="grvTMMeetings"
                    default="Tên buổi họp">
                  </codx-label>
                </div>
                <codx-input field="meetingName" type="text" [crrValue]="meeting?.meetingName" placeholder="Tên buổi họp"
                  (valueChange)="valueChange($event)">
                </codx-input>
              </div>

              <div class="form-group row mt-3">
                <div class="col-4">
                  <div>
                    <codx-label fiedName="StartDate" [formModel]="form.formModel" default="Ngày">
                    </codx-label>
                  </div>
                  <codx-input type="datetime" class="test-datetime" [crrValue]="meeting?.startDate"
                    (valueChange)="valueDateChange($event)" field="startDate" format="d" placeholder="datetime">
                  </codx-input>
                </div>
                <div class="col-3">
                  <div>
                    <codx-label fiedName="StartDate" [formModel]="form.formModel" default="Từ giờ">
                    </codx-label>
                  </div>
                  <codx-input type="datetime" [crrValue]="startTime" format="t" placeholder="timefrom"
                    (valueChange)="valueStartTimeChange($event)">
                  </codx-input>
                </div>
                <div class="col-3">
                  <div>
                    <codx-label fiedName="EndDate" [formModel]="form.formModel" default="Đến giờ">
                    </codx-label>
                  </div>
                  <codx-input type="datetime" [crrValue]="endTime" format="t" placeholder="timefrom"
                    (valueChange)="valueEndTimeChange($event)">
                  </codx-input>
                </div>
                <div class="col-2">
                  <codx-label class="fs-6 fw-bold mb-2" default>
                  </codx-label>
                  <codx-input #checkbox type="checkbox" label="Cả ngày" labelPosition="after" field="day"
                    class="test-check" (valueChange)="valueChange($event)" [crrValue]="isFullDay">
                  </codx-input>
                </div>

              </div>
              <div class="form-group ">
                <div>
                  <codx-label fiedName="Location" formName="TMMeetings" gridViewName="grvTMMeetings" default="Địa điểm">
                  </codx-label>
                </div>
                <codx-input field="location" type="text" [crrValue]="meeting?.location"
                  (valueChange)="valueChange($event)">
                </codx-input>
              </div>
              <div class="d-flex flex-column mb-4">
                <!--begin::Label-->
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <div class="form-switch1">
                    <codx-input #checkbox field="isOnline" type="switch" [checked]="meeting?.isOnline"
                      labelPosition="After" [disabled]="false" class="test-switch" (valueChange)="valueChange($event)">
                    </codx-input>
                    <span class="fw-bold ms-2"><label for="switchOnl">
                        <codx-label fiedName="IsOnline" default="Họp online" [formModel]="form.formModel"></codx-label>
                      </label></span>
                  </div>
                  <!--begin: btn-icon-->
                  <span class="text-end align-items-end">
                    <button type="button" class="btn btn-clean btn-sm btn-icon btn-icon-md" (click)="openPopupLink()"
                      *ngIf="meeting?.isOnline">
                      <i class="icon-insert_link text-primary text-hover-primary-dark icon-24"></i>
                    </button>
                  </span>
                  <!--end: btn-icon-->
                </div>
                <!--end::Label-->
                <!--begin::Input-->
                <div class="d-flex align-items-center fw-bold">
                  <a href="" *ngIf="meeting?.isOnline">{{
                    meeting?.link
                  }}</a>
                </div>
                <!--end::Input-->
              </div>
              <!-- <ng-container>
                <div class="d-flex align-items-center justify-content-between mt-6">
                  <div class="d-flex align-items-center mb-3">
  
                    <codx-input #saveTemplate class="test-switch" type="switch" [checked]="false" [disabled]="false"
                      labelPosition="Before"></codx-input>
                    <div class="ms-2">Họp online</div>
                  </div>
                  <codx-input type="Share" field="Link" [dataShared]="[]" multiple="true" [showInput]="false">
                  </codx-input>
                </div>
                <div class="">
                  <ng-container>
  
                  </ng-container>
                </div>
              </ng-container> -->
              <ng-container>
                <div class="d-flex align-items-center justify-content-between mt-6">
                  <div class="d-flex align-items-center mb-3">
                    <span class="icon-person icon-24 me-2 text-primary"></span>
                    <div class="fw-bold fs-6 text-primary">
                      <codx-label fiedName="Resources" [formModel]="form.formModel" default="Người tham gia">
                      </codx-label>
                    </div>
                  </div>
                  <codx-input type="Share" refValue="TM003" field="resources" [dataShared]="[]" multiple="true"
                    [showInput]="false">
                  </codx-input>
                </div>
                <div class="d-flex flex-column mb-8">
                  <!--begin::Title-->
                  <div
                    class="d-flex justify-content-between align-items-center mb-2"
                  >
                    <h4 class="fw-bolder text-gray-800 d-block">
                      <codx-label
                        default="Người tham dự"
                        fiedName="Attendees"
                      ></codx-label>
                    </h4>
                    <!--begin: btn-icon-->
                    <span class="text-end align-items-end">
                      <button
                        type="button"
                        class="btn btn-clean btn-sm btn-icon btn-icon-md"
                        data-dismiss="modal"
                      >
                        <i
                          class="icon-group_add text-primary text-hover-primary-dark icon-24"
                        ></i>
                      </button>
                    </span>
                    <!--end: btn-icon-->
                  </div>
                  <!--end::Title-->
                  <!--begin::Users group-->
                  <div
                    class="symbol-group symbol-group-check symbol-hover flex-nowrap"
                  >
                    <div
                      class="symbol symbol-35px symbol-circle"
                      data-bs-toggle="tooltip"
                      title=""
                      data-bs-original-title="Alan Warden"
                    >
                      <span
                        class="symbol-label bg-warning text-inverse-warning fw-bolder"
                        >A</span
                      >
                      <span
                        class="symbol-badge badge badge-circle bg-warning top-100 start-100 icon-swap_horiz text-white"
                      ></span>
                    </div>
                    <div
                      class="symbol symbol-35px symbol-circle"
                      data-bs-toggle="tooltip"
                      title=""
                      data-bs-original-title="Michael Eberon"
                    >
                      <img
                        alt="Pic"
                        src="../../../assets/themes/sys/default/light/img/avatar_default.svg"
                      />
                      <span
                        class="symbol-badge badge badge-circle bg-success top-100 start-100 icon-check text-white"
                      ></span>
                    </div>
                    <div
                      class="symbol symbol-35px symbol-circle"
                      data-bs-toggle="tooltip"
                      title=""
                      data-bs-original-title="Melody Macy"
                    >
                      <img
                        alt="Pic"
                        src="../../../assets/themes/sys/default/light/img/avatar_default.svg"
                      />
                      <span
                        class="symbol-badge badge badge-circle bg-success top-100 start-100 icon-check text-white"
                      ></span>
                    </div>

                    <a
                      href="#"
                      class="symbol symbol-35px symbol-circle"
                      data-bs-toggle="modal"
                      data-bs-target="#kt_modal_view_users"
                    >
                      <span
                        class="symbol-label bg-light-primary text-primary fs-8 fw-bolder"
                        >+3</span
                      >
                    </a>
                  </div>
                  <!--end::Users group-->
                </div>
              </ng-container>
              <div class="extend-function" *ngIf="(param?.PlanControl !='0'|| param?.PlanControl == null)">
                <hr />
                <div class="d-flex justify-content-center" (click)="showPlan = !showPlan">
                  <div class="d-flex align-items-center w-auto extend-title">
                    <span class="text-primary text-hover-primary_darker fw-bold me-1">
                      <codx-label name="Plan" formName="Tasks" default="Công việc review"></codx-label>
                    </span>
                    <span *ngIf="showPlan"
                      class="icon-keyboard_arrow_down icon-16 text-primary text-hover-primary_darker"></span>
                    <span *ngIf="!showPlan"
                      class="icon-keyboard_arrow_up icon-16 text-primary text-hover-primary_darker"></span>
                  </div>
                </div>
              </div>

              <ng-container *ngIf="(param?.PlanControl !='0'|| param?.PlanControl == null) && showPlan ">
                <div class="form-group row mt-3">
                  <div class="col-6">
                    <div>
                      <codx-label fiedName="FromDate" [formModel]="form.formModel" default="Ngày bắt đầu">
                      </codx-label>
                    </div>
                    <codx-input type="datetime" class="test-datetime" (valueChange)="valueChange($event)"
                      [crrValue]="meeting?.fromDate" field="fromDate" placeholder="datetime" format="F">
                    </codx-input>
                  </div>
                  <div class="col-6">
                    <div>
                      <codx-label fiedName="ToDate" [formModel]="form.formModel" default="Ngày kết thúc">
                      </codx-label>
                    </div>
                    <codx-input type="datetime" class="test-datetime" [crrValue]="meeting?.toDate"
                      (valueChange)="valueChange($event)" field="toDate" format="F" placeholder="datetime">
                    </codx-input>
                  </div>
                </div>
                <div class="form-group mt-3">
                  <codx-label fiedName="Projects" formName="TMMeetings" gridViewName="grvTMMeetings" default="Dự án">
                  </codx-label>
                  <codx-input type="combobox" field="projects" refValue="Projects" [multiple]="false" loadFull="true">
                  </codx-input>
                </div>
              </ng-container>
            </ng-template>
          </e-tabitem>

          <e-tabitem>
            <ng-template #headerText>
              <div class="nav-item ">
                <a class="nav-link text-dark text-hover-primary btn-light-primary d-flex  px-0">
                  <span class="icon-article icon-24 me-2"></span>
                  <span class="d-flex flex-column align-items-start">
                    <span class="fw-bolder">
                      <codx-label name="Person" formName="TMMeetings" default="Người tham gia"></codx-label>
                    </span>
                    <span class="fs-7">Thành viên tham gia buổi họp</span>
                  </span>
                </a>
              </div>
            </ng-template>
            <ng-template #content>
              <div class="d-flex align-items-center justify-content-between mt-4">
                <div class="d-flex align-items-center">
                  <span class="icon-person icon-16 me-2 text-primary"></span>
                  <div class="fw-bold fs-6 text-primary">
                    <codx-label fiedName="Resources" [formModel]="form.formModel" default="Người tham gia">
                    </codx-label>
                  </div>
                </div>
                <codx-input type="Share" refValue="L1906" field="resources" [dataShared]="[]" multiple="true"
                  [showInput]="false">
                </codx-input>
              </div>
              <ng-container>
                <div class="d-flex py-2 border-bottom justify-content-between list-title">
                  <div class="d-flex align-items-top">
                    <codx-img class="" objectType="AD_Users">
                    </codx-img>

                    <div class="d-flex flex-column me-2 ">
                      <div class="text-dark fw-bold fs-6">
                        aaa
                      </div>
                      <div class="text-gray-700">aaa</div>
                    </div>
                  </div>
                  <div>
                    <a style="cursor: pointer">
                      <div class="d-flex align-item-center">
                        <span class="icon-check_box icon-24 me-2"></span>
                      </div>
                    </a>
                  </div>
                </div>
              </ng-container>
            </ng-template>
          </e-tabitem>

          <e-tabitem>
            <ng-template #headerText>
              <div class="nav-item">
                <a class="nav-link text-dark text-hover-primary btn-light-primary d-flex  px-0">
                  <span class="icon-check_box icon-24 me-2"></span>
                  <span class="d-flex flex-column align-items-start">
                    <span class="fw-bolder">
                      <codx-label fiedName="lblListTaskBoard" formName="TMMeetings" default="Mở rộng">
                      </codx-label>
                    </span>
                    <span class="fs-7">Thông tin tham chiếu</span>
                  </span>
                </a>
              </div>
            </ng-template>
            <ng-template #content>
              <ng-container>
                <div class="form-group">
                  <div class="d-flex py-2 border-bottom justify-content-between list-title">
                    <div class="d-flex me-2 ">
                      <codx-label fiedName="Repeated" formName="TMMeetings" default="Lặp lại">
                      </codx-label>
                    </div>
                    <div class="d-flex flex-wrap">
                      <div class="flex">
                        <codx-input #saveTemplate class="test-switch" type="switch" [checked]="false" [disabled]="false"
                          labelPosition="Before"></codx-input>
                      </div>
                      <div class="d-flex flex-column text-right ms-4">
                        <span class="icon-check_box icon-24 me-2"></span>
                      </div>
                    </div>
                  </div>
                  <codx-input field="repeated" type="textarea">
                  </codx-input>
                </div>
              </ng-container>
            </ng-template>
          </e-tabitem>
        </e-tabitems>
      </ejs-tab>
    </div>

  </ng-template>
  <ng-template #footer>
    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-primary ms-1">
        <codx-label name="Save" default="Lưu" (click)="onSave()"></codx-label>
      </button>
    </div>
  </ng-template>
</codx-form>

<ng-template #addLink let-dialog>
  <div class="card-header">
    <h4 class="card-title" id="card-basic-title">
      <codx-label
        name="lblLink"
        default="Link cuộc họp"
        [formModel]="dialog.formModel"
      ></codx-label>
    </h4>
    <button
      type="button"
      class="btn btn-xs btn-icon btn-light btn-hover-primary"
      aria-label="Close"
      (click)="dialog.close()"
    >
      <span class="icon-close icon-20"></span>
    </button>
  </div>
  <div class="card-body">
    <div class="form-group row">
      <div class="col-4">
        <label
          ><codx-label
            name="lblPath"
            default="Đường dẫn"
            [formModel]="dialog.formModel"
          ></codx-label
        ></label>
      </div>
    </div>
    <div class="form-group row">
      <codx-input
        type="text"
        class="form-control"
        placeholder="https://home.suremeet.vn/"
        [crrValue]="linkURL"
        (valueChange)="changeLink($event)"
      ></codx-input>
    </div>
  </div>
  <div class="card-footer" (click)="dialog.close()">
    <button type="button" class="btn btn-primary">
      <codx-label
        name="lblSave"
        default="Lưu"
        [formModel]="dialog.formModel"
      ></codx-label>
    </button>
  </div>
</ng-template>