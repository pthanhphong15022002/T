<ng-template #titleTmp let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center mb-1">
      <div class="text-dark fw-bolder line-clamp line-clamp-1 me-2"> {{meeting.meetingName}}</div>
      <div class="badge badge-danger label-status" [style.border-color]="
      (meeting?.meetingType | vll: 'CO002':'textColor' | async) +
      '30'
    " [style.background-color]="
      (meeting?.meetingType | vll: 'CO002':'textColor' | async) +
      '30'
    " [style.color]="
    meeting?.meetingType | vll: 'CO002':'textColor' | async
    " style="border: none">
        {{ meeting?.meetingType | vll: "CO002":"text" | async }}
      </div>
    </div>
  </div>

</ng-template>

<ng-template #footer let-data>
  <div class="d-flex flex-column">
    <div class="d-flex align-items-center mb-1">
      <div class="d-flex" *ngIf="data.fromDate && data.toDate">
        <div class="text-dark fw-bolder line-clamp line-clamp-1 me-2">Thời gian review dữ liệu:</div>
        <div class="d-flex align-items-center me-2">
          {{data.fromDate | date: "dd/MM/yyyy"}} - {{data.toDate | date: "dd/MM/yyyy"}}
        </div>
      </div>
    </div>
  </div>
</ng-template>

<div class="page-content d-flex flex-row">
  <div class="w-100">
    <div class="row m-0 bg-body rounded-2 mb-3 p-3">
      <div class="col-8 ">
        <codx-temp-full cardCss="card-template" [titleTmp]="titleTmp"
          [desc]="convertHtmlAgency(startDateMeeting, getDate(startDateMeeting, endDateMeeting), userName)"
          [dataItem]="meeting" [footer]="footer">
        </codx-temp-full>
        <div class="row">
          <div class="d-flex col-4">
            <ng-container *ngFor="let item of tabControl; let i = index">
              <a
                [class]="'m-3 text-gray-800 text-hover-primary btn-light-primary'+' '+(item.isActive?'text-primary':'')">
                <codx-label [name]="'lbl'+ item.name" [formName]="'SYS'" [default]="item.textDefault"
                  (click)="clickMenu(item)">
                </codx-label>
              </a>
            </ng-container>
          </div>

        </div>
      </div>
      <div class="col-4">
        <div class="d-flex justify-content-end">
          <codx-imgs class="symbol symbol-30px symbol-circle ms-1" [objectId]="meeting.avataResource"
          objectType="AD_Users" [numberImages]="6">
        </codx-imgs>
        </div>

        <div class="d-flex justify-content-end" style="padding-top: 40px;">
          <codx-label class="text-gray-800 text-primary" default="Xem công việc >>" (click)="viewDetail(meeting)">
          </codx-label>
        </div>
      </div>
    </div>
    <div class="m-0 bg-body rounded-2 h-100">
      <ng-container *ngIf="name=='Nội dung họp'">
        <ng-container *ngTemplateOutlet="templateMeeting">
        </ng-container>
      </ng-container>
      <ng-container *ngIf="name=='Thảo luận'">
        <div class="tab_container">
          <div class="tab_body" *ngFor="let cmt of lstComment">
            <codx-comment-history
              [data]="cmt"
              [type]="'view'"
            ></codx-comment-history>
          </div>
          <div class="tab_footer">
            <codx-comment-history
              [objectID]="'TMT05011'"
              [objectType]="'CO_Meetings'"
              [type]="'create'"
            ></codx-comment-history>
          </div>
        </div>
      </ng-container>

    </div>
  </div>
</div>

<ng-template #templateMeeting>
  <codx-note [showMenu]="true" [showMF]="true"></codx-note>
</ng-template>
