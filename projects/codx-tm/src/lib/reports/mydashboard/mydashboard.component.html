<div class="page-content d-flex flex-row pt-4">
  <div class="w-75 m-2">
    <!-- <codx-input type="switch"></codx-input> -->
    <div class="d-xl-flex justify-content-xl-between bg-body mb-2 p-4 rounded">
      <div class="border rounded" style="background-color: rgb(4, 222, 183, 0.1);">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div class="d-flex justify-content-between">
              <div class="icon icon-access_time" style="color: rgb(4, 222, 183)">
              </div>
              <div>
                <div class="fw-bold text-gray-400">
                  <codx-label
                    name="lblTask"
                    default="Công việc"
                    [formModel]="formModel"
                  ></codx-label>
                </div>
                <div class="text-gray-900 fw-bold mb-2 mt-5">
                  <codx-label
                    name="lblOverdueTask"
                    default="Đã quá hạn"
                    [formModel]="formModel"
                  ></codx-label>
                </div>
              </div>
            </div>
            <div class="text-gray-900 fw-bolder fs-2 mb-2 mt-5">
              {{ dbData?.overDueTasks }}
            </div>
          </div>
        </div>
      </div>
      <div class="border rounded" style="background-color: rgb(0, 93, 199, 0.1);">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div class="d-flex justify-content-between">
              <div class="icon icon-access_time" style="color: rgb(0, 93, 199);"></div>
              <div>
                <div class="fw-bold text-gray-400">
                  <codx-label
                    name="lblTask"
                    default="Công việc"
                    [formModel]="formModel"
                  ></codx-label>
                </div>
                <div class="text-gray-900 fw-bold mb-2 mt-5">
                  <codx-label
                    name="lblOverdueTask"
                    default="Chưa thực hiên"
                    [formModel]="formModel"
                  ></codx-label>
                </div>
              </div>
            </div>
            <div class="text-gray-900 fw-bolder fs-2 mb-2 mt-5">
              {{ dbData?.newTasks }}
            </div>
          </div>
        </div>
      </div>
      <div class="border rounded" style="background-color: rgb(255, 128, 8, 0.1)">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div class="d-flex justify-content-between">
              <div class="icon icon-access_time" style="color:rgb(255, 128, 8)"></div>
              <div>
                <div class="fw-bold text-gray-400">
                  <codx-label
                    name="lblTask"
                    default="Công việc"
                    [formModel]="formModel"
                  ></codx-label>
                </div>
                <div class="fw-bold text-black">
                  <codx-label
                    name="lblOverdueTask"
                    default="Hoãn lại"
                    [formModel]="formModel"
                  ></codx-label>
                </div>
              </div>
            </div>
            <div class="text-gray-900 fw-bolder fs-2 mb-2 mt-5">
              {{ dbData?.postponeTasks }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row bg-body mb-2">
      <div class="col-xxl-3 col-xl-6 col-lg-6" style="position: relative; height: 250px">
        <ejs-circulargauge style="display: block" centerY="40%" height="250">
          <e-axes>
            <e-axis
              [lineStyle]="lineStyle"
              radius="90%"
              startAngle="230"
              endAngle="130"
              minimum="0"
              maximum="150"
              [labelStyle]="labelStyle1"
              [majorTicks]="majorTicks1"
              [minorTicks]="minorTicks1"
            >
              <e-ranges>
                <e-range
                  start="0"
                  end="150"
                  radius="115%"
                  roundedCornerRadius="10"
                  [linearGradient]="rangeLinearGradient"
                  startWidth="17"
                  endWidth="17"
                >
                </e-range>
              </e-ranges>
              <e-pointers>
                <e-pointer
                  type="Marker"
                  [value]="dbData?.availability"
                  markerShape="Image"
                  imageUrl="https://ej2.syncfusion.com/angular/demos/assets/circular-gauge/images/golf-ball.png"
                  radius="108%"
                  markerWidth="28"
                  markerHeight="28"
                  [animation]="animation1"
                >
                </e-pointer>
              </e-pointers>
            </e-axis>
          </e-axes>
        </ejs-circulargauge>
        <div
          style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
          "
        >
          <p class="text-center">Availability</p>
          <p class="text-center text-gray-900 fw-bolder fs-2 mb-2 mt-5">
            {{ dbData?.availability.toFixed(2) }}
          </p>
        </div>
      </div>
      <div class="col-xxl-3 col-xl-6 col-lg-6" style="position: relative; height: 250px">
        <ejs-circulargauge style="display: block" centerY="40%" height="250">
          <e-axes>
            <e-axis
              [lineStyle]="lineStyle"
              radius="90%"
              startAngle="230"
              endAngle="130"
              minimum="0"
              maximum="150"
              [labelStyle]="labelStyle1"
              [majorTicks]="majorTicks1"
              [minorTicks]="minorTicks1"
            >
              <e-ranges>
                <e-range
                  start="0"
                  end="150"
                  radius="115%"
                  roundedCornerRadius="10"
                  [linearGradient]="rangeLinearGradient"
                  startWidth="17"
                  endWidth="17"
                >
                </e-range>
              </e-ranges>
              <e-pointers>
                <e-pointer
                  type="Marker"
                  [value]="dbData?.performance"
                  markerShape="Image"
                  imageUrl="https://ej2.syncfusion.com/angular/demos/assets/circular-gauge/images/golf-ball.png"
                  radius="108%"
                  markerWidth="28"
                  markerHeight="28"
                  [animation]="animation1"
                >
                </e-pointer>
              </e-pointers>
            </e-axis>
          </e-axes>
        </ejs-circulargauge>
        <div
          style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
          "
        >
          <p class="text-center">Performance</p>
          <p class="text-center text-gray-900 fw-bolder fs-2 mb-2 mt-5">
            {{ dbData?.performance.toFixed(2) }}
          </p>
        </div>
      </div>
      <div class="col-xxl-3 col-xl-6 col-lg-6" style="position: relative; height: 250px">
        <ejs-circulargauge style="display: block" centerY="40%" height="250">
          <e-axes>
            <e-axis
              [lineStyle]="lineStyle"
              radius="90%"
              startAngle="230"
              endAngle="130"
              minimum="0"
              maximum="150"
              [labelStyle]="labelStyle1"
              [majorTicks]="majorTicks1"
              [minorTicks]="minorTicks1"
            >
              <e-ranges>
                <e-range
                  start="0"
                  end="150"
                  radius="115%"
                  roundedCornerRadius="10"
                  [linearGradient]="rangeLinearGradient"
                  startWidth="17"
                  endWidth="17"
                >
                </e-range>
              </e-ranges>
              <e-pointers>
                <e-pointer
                  type="Marker"
                  [value]="dbData?.quality"
                  markerShape="Image"
                  imageUrl="https://ej2.syncfusion.com/angular/demos/assets/circular-gauge/images/golf-ball.png"
                  radius="108%"
                  markerWidth="28"
                  markerHeight="28"
                  [animation]="animation1"
                >
                </e-pointer>
              </e-pointers>
            </e-axis>
          </e-axes>
        </ejs-circulargauge>
        <div
          style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
          "
        >
          <p class="text-center">Quality</p>
          <p class="text-center text-gray-900 fw-bolder fs-2 mb-2 mt-5">
            {{ dbData?.quality.toFixed(2) }}
          </p>
        </div>
      </div>
      <div class="col-xxl-3 col-xl-6 col-lg-6" style="position: relative; height: 250px">
        <ejs-circulargauge style="display: block" centerY="40%" height="250">
          <e-axes>
            <e-axis
              [lineStyle]="lineStyle"
              radius="90%"
              startAngle="230"
              endAngle="130"
              minimum="0"
              maximum="150"
              [labelStyle]="labelStyle1"
              [majorTicks]="majorTicks1"
              [minorTicks]="minorTicks1"
            >
              <e-ranges>
                <e-range
                  start="0"
                  end="150"
                  radius="115%"
                  roundedCornerRadius="10"
                  [linearGradient]="rangeLinearGradient"
                  startWidth="17"
                  endWidth="17"
                >
                </e-range>
              </e-ranges>
              <e-pointers>
                <e-pointer
                  type="Marker"
                  [value]="dbData?.kpi"
                  markerShape="Image"
                  imageUrl="https://ej2.syncfusion.com/angular/demos/assets/circular-gauge/images/golf-ball.png"
                  radius="108%"
                  markerWidth="28"
                  markerHeight="28"
                  [animation]="animation1"
                >
                </e-pointer>
              </e-pointers>
            </e-axis>
          </e-axes>
        </ejs-circulargauge>
        <div
          style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
          "
        >
          <p class="text-center">KPI</p>
          <p class="text-center text-gray-900 fw-bolder fs-2 mb-2 mt-5">
            {{ dbData?.kpi.toFixed(2) }}
          </p>
        </div>
      </div>
    </div>
    <div class="row bg-body mb-2">
      <div class="col-xl-6" style="position: relative; width: 450px; height: 200px">
        <ejs-accumulationchart
          id="chart-task-group"
          [legendSettings]="legendSettings"
          width="450"
          height="200"
        >
          <e-accumulation-series-collection>
            <e-accumulation-series
              [dataSource]="dbData?.tasksByGroup"
              xName="taskGroupName"
              yName="qty"
              innerRadius="70%"
            ></e-accumulation-series>
          </e-accumulation-series-collection>
        </ejs-accumulationchart>
        <div style="position: absolute; top: 35%; left: 35%">
          <div class="text-center">{{ dbData?.tasks }}</div>
          <codx-label
            name="lblTasks"
            default="Công việc"
            [formModel]="formModel"
          >
          </codx-label>
        </div>
      </div>
      <div class="col-xl-6">
        <div class="d-flex">
          <div style="height: 250px; width: 200px">
            <ejs-circulargauge
              id="range-container"
              width="200"
              height="250"
              centerX="50%"
              centerY="50%"
            >
              <e-axes>
                <e-axis
                  radius="150"
                  minimum="0"
                  maximum="100"
                  startAngle="0"
                  endAngle="360"
                  [majorTicks]="majorTicks2"
                  [labelStyle]="labelStyle2"
                  [lineStyle]="lineStyle"
                  [minorTicks]="minorTicks2"
                  [ranges]="ranges"
                >
                  <e-pointers>
                    <e-pointer
                      [value]="dbData?.rateDoneTask.toFixed(2)"
                      roundedCornerRadius="20"
                      pointerWidth="10"
                      type="RangeBar"
                      radius="50%"
                      color="#357CD2"
                      [border]="border"
                      [animation]="animation"
                    ></e-pointer>
                  </e-pointers>
                </e-axis>
                <e-axis
                  radius="120"
                  minimum="0"
                  maximum="100"
                  startAngle="0"
                  endAngle="360"
                  [majorTicks]="majorTicks2"
                  [labelStyle]="labelStyle2"
                  [lineStyle]="lineStyle"
                  [minorTicks]="minorTicks2"
                  [ranges]="ranges"
                >
                  <e-pointers>
                    <e-pointer
                      [value]="dbData?.rateDoneTaskOnTime.toFixed(2)"
                      roundedCornerRadius="20"
                      pointerWidth="10"
                      type="RangeBar"
                      radius="50%"
                      color="#20BDAE"
                      [border]="border"
                      [animation]="animation"
                    ></e-pointer>
                  </e-pointers>
                </e-axis>
              </e-axes>
            </ejs-circulargauge>
          </div>
          <div style="width: 200px; margin-top: 70px">
            <div style="display: flex; justify-content: between">
              <div class="label1" style="margin-left: 10px"></div>
              <div>Tỷ lệ hoàn thành công việc</div>
            </div>
            <h3>{{ dbData?.rateDoneTask.toFixed(2) }}%</h3>
            <div style="display: flex; justify-content: between">
              <div class="label2"></div>
              <div>Tỷ lệ hoàn thành công việc đúng hạn</div>
            </div>
            <h3>{{ dbData?.rateDoneTaskOnTime.toFixed(2) }}%</h3>
          </div>
        </div>
      </div>
    </div>
    <div class="row bg-body mb-2">
      <ejs-chart
        style="display: block"
        background="transparent"
        align="center"
        id="chartbar"
        [primaryXAxis]="columnXAxis"
        [primaryYAxis]="columnYAxis"
        [legendSettings]="legendSettings"
        width="100%"
      >
        <e-axes>
          <e-axis
            rowIndex="0"
            name="WorkHours"
            opposedPosition="true"
            labelFormat=""
            [minimum]="0"
            [maximum]="100"
            [interval]="4"
          >
          </e-axis>
        </e-axes>
        <e-series-collection>
          <e-series
            fill="#005DC7"
            [dataSource]="dbData?.dataBarChart?.barChart"
            type="Column"
            name="Tasks"
            xName="label"
            yName="value"
            [cornerRadius]="radius"
          >
          </e-series>
          <e-series
            fill="#F9D923"
            [dataSource]="dbData?.dataBarChart?.lineChart"
            type="Line"
            name="WorkHours"
            yName="value"
            xName="label"
            yAxisName="WorkHours"
          >
          </e-series>
        </e-series-collection>
      </ejs-chart>
    </div>
  </div>
  <div class="w-25 border bg-body m-2">
    <div class="taskbox-user">
      <selectweek
        #selectweek
        (onChangeValue)="onChangeValueSelectedWeek($event)"
      ></selectweek>
      <div class="taskbox-list">
        <div
          class="d-flex p-3 flex-grow-1 task-item"
          *ngFor="let task of taskOfDay"
        >
          <codx-img
            class="symbol symbol-40px symbol-circle me-3"
            objectType="AD_Users"
            [objectId]="task?.createdBy"
            [objectName]="task?.userName"
          ></codx-img>
          <div class="d-flex flex-column flex-grow-1">
            <div class="text-dark fw-bold">
              {{ task?.userName }}
            </div>
            <div class="text-gray-600 fs-7">{{ task?.positionName }}</div>
            <div class="task-name text-gray-600 fs-7">
              {{ task?.taskName }}
            </div>
            <div class="d-flex justify-content-start">
              <div
                class="bagde bagde-light-primary me-2"
                [style.border-color]="
                  task.status | vll: 'L0614':'color' | async
                "
                [style.background-color]="
                  (task.status | vll: 'L0614':'color' | async) + '30'
                "
                [style.color]="task.status | vll: 'L0614':'color' | async"
                style="border: none"
              >
                {{ task.status | vll: "L0614":"text" | async }}
              </div>
              <div>{{ task.dueDate | date }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
