<!-- <div [ngClass]="toolbarContainerCssClasses" class="d-flex flex-stack container-fluid">
  <nav class="navbar navbar-expand-lg navbar-light bg-light w-100">
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active text-center">
          <div class="d-flex justify-content-center h-100">
            <button type="button" class="btn btn-sm btn-light " (click)="collapse($event)">
              <i style="font-size: 24px !important;font-weight:600" class="icon-tune text-muted"></i>
            </button>
          </div>
        </li>
        <li class="nav-item w-275px mx-3" *ngFor="let item of lstPined">
          <ng-container [ngSwitch]="item?.dataType" >
            <ng-container *ngSwitchCase="'string'">
              <div class="w-100 mt-3" *ngIf="!item.referedType">
                <codx-input
                  type="textarea"
                  [field]="item.controlName"
                  placeholder="Có chứa giá trị..."
                  format="ed2"
                  [crrValue]="item.defaultValue"
                  (valueChange)="valueChange($event)"
                ></codx-input>
              </div>
              <div class="w-100 mt-3" *ngIf="item.referedType == '3'">
                <codx-input
                  type="combobox"
                  [field]="item.controlName"
                  [crrValue]="item.defaultValue"
                  [refValue]="item.referedValue"
                  (valueChange)="valueChange($event)"
                >
                </codx-input>
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'bool'">
              <div
                class="float-end"
                *ngIf="item.controlType == 'LVSwitch'"
              >
                <codx-input
                  class="float-right"
                  type="switch"
                  [field]="item.controlName"
                  [crrValue]="
                    item.defaultValue ? item.defaulValue : false
                  "
                  (valueChange)="valueChange($event,false,'switch')"
                ></codx-input>
              </div>
              <div
                class="w-100 ms-5 mt-3"
                *ngIf="item.controlType == 'LVCheckbox'"
              >
              <div class="d-flex">
                <div class="float-start mx-5">
                  <codx-input
                  type="checkBox"
                  [field]="item.controlName"
                  [crrValue]="
                    item.defaultValue ? item.defaulValue : false
                  "
                  (valueChange)="valueChange($event)"
                ></codx-input>
                </div>
                <div class="w-100 float-end">
                  <span
                  style="font-size:12px;font-weight: 400;"
                  >{{item.labelName}}
                </span>
                </div>
              </div>

              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'DateTime'">
              <div class="my-2">
                <codx-dropdown-calendar
                  cssPopup="h-600px w-800px"
                  cssClass="w-100 button-radius"
                  (change)="changeValueDate($event)"
                ></codx-dropdown-calendar>
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="'int'">
              <div class="w-100 mt-3">
                <div class="d-flex">
                  <div class="float-start me-1">
                    <codx-input
                      type="number"
                      field="numberFrom"

                      [crrValue]="
                        item.defaultValue ? item.defaultValue : 0
                      "
                      (valueChange)="valueChange($event)"
                      placeholder="Từ"
                    ></codx-input>
                  </div>
                  <div class="float-end ms-1">
                    <codx-input
                      type="number"
                      field="numberTo"
                      [crrValue]="
                        item.defaultValue ? item.defaultValue : 0
                      "
                      (valueChange)="valueChange($event)"
                      placeholder="Đến"
                    ></codx-input>
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
        </li>
      </ul>

    </div>
    <div class="d-flex float-right">
      <button class="btn btn-sm btn-light"><i style="font-size: 23px !important;" class="icon-storage  text-muted"></i></button>
      <button class="btn btn-sm btn-light" (click)="printReport()"><i style="font-size: 23px !important;" class="icon-print  text-muted"></i></button>
      <codx-toolbar-more [buttons]="moreFunc" (buttonClick)="click($event)"></codx-toolbar-more>
    </div>
  </nav>
</div> -->

<div class="container-fluid" id="reportviewerele">
  <ejs-contextmenu #contextmenu target='#paramEle' [items]='menuItems' (select)="menuSelect($event)" (beforeItemRender)='addDisabled($event)' (created)='onCreated()'></ejs-contextmenu>
  <div class="row">
    <div class="col-3 border border-2 overflow-auto fade-in" #paramEle id="paramEle">
      <div class="d-flex">
        <div class="float-start w-100">
          <h3 class="mt-5">Tham số báo cáo</h3>
        </div>
        <div class="float-end mt-3">
          <button class="btn btn-light" (click)="printReport()">
            <i class="icon-save"></i>
          </button>

        </div>
      </div>

      <div class="row p-3" *ngFor="let group of lstParent; let idx = index">
        <a
          [id]="group"
          (click)="collapseChange($event, group)"
          [attr.aria-expanded]="!collapses[idx]"
          [attr.aria-controls]="group"
          class="text-primary font-weight-500"
        >
          <div class="d-flex">
            <div class="w-100">
              <codx-label [name]="group" default="Nhóm tham số {{group}}"></codx-label>
            </div>
            <div><i class="icon-keyboard_arrow_down text-primary"></i></div>
          </div>
        </a>
        <div [id]="group" [ngbCollapse]="collapses[idx]">
          <div class="w-100">
            <ng-container>

              <div *ngFor="let item of parameters[group]" class="mt-3">
                <codx-label
                  [default]="item.labelName"
                  class="fw-bold text-muted"
                  *ngIf="item.isVisible"
                ></codx-label>

                  <ng-container *ngIf="item.dependences" >
                    <div class="w-100 mt-3" *ngFor="let child of lstParamsNotGroup" >
                      <div *ngIf="child.controlName == item.dependences">
                        <ng-container [ngSwitch]="child?.dataType">
                          <ng-container *ngSwitchCase="'string'">
                            <div class="w-100 mt-3" *ngIf="!child.referedType">
                              <codx-input
                                type="textarea"
                                [field]="child.controlName"
                                placeholder="Có chứa giá trị..."
                                format="ed2"
                                [rows]="2"
                                [crrValue]="child.defaultValue"
                                (valueChange)="valueChange($event,true)"
                              ></codx-input>
                            </div>
                            <div class="w-100 mt-3" *ngIf="child.referedType == '3'">
                              <codx-input
                                type="combobox"
                                [field]="child.controlName"
                                [crrValue]="child.defaultValue"
                                [refValue]="child.referedValue"
                                (valueChange)="valueChange($event,true)"
                              >
                              </codx-input>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'bool'">
                            <div
                              class="w-100 mt-1"
                              *ngIf="child.controlType == 'LVSwitch'"
                            >
                            <div class="d-flex">
                              <div class="w-100 float-start">
                                <span
                                  style="font-size:12px;font-weight: 400;"
                                  >{{child.labelName}}
                                </span>
                              </div>
                              <div class="float-end">
                                <codx-input
                                class="float-right"
                                type="switch"
                                [field]="child.controlName"
                                [crrValue]="
                                child.defaultValue == true ? child.defaultValue : false
                                "
                                (valueChange)="valueChange($event,true,'switch')"
                              ></codx-input>
                              </div>
                            </div>

                            </div>
                            <div
                              class="w-100 ms-5 mt-3"
                              *ngIf="child.controlType == 'LVCheckbox'"
                            >
                            <div class="d-flex">
                              <div class="float-start mx-5">
                                <codx-input
                                type="checkBox"
                                [field]="child.controlName"
                                [crrValue]="
                                child.defaultValue == true ? child.defaultValue : false
                                "
                                (valueChange)="valueChange($event,true,'checkbox')"
                              ></codx-input>
                              </div>
                              <div class="w-100 float-end">
                                <span
                                style="font-size:12px;font-weight: 400;"
                                >{{child.labelName}}
                              </span>
                              </div>
                            </div>

                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'DateTime'">
                            <div class="my-2">
                              <codx-dropdown-calendar
                                cssPopup="h-600px w-800px"
                                cssClass="w-100 button-radius"
                                (change)="changeValueDate($event,true)"
                              ></codx-dropdown-calendar>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'int'">
                            <div class="w-100 mt-3">
                              <div class="d-flex">
                                <div class="float-start me-1">
                                  <codx-input
                                    type="number"
                                    field="numberFrom"
                                    [crrValue]="
                                    child.defaultValue ? child.defaultValue : 0
                                    "
                                    (valueChange)="valueChange($event,true)"
                                    placeholder="Từ"
                                  ></codx-input>
                                </div>
                                <div class="float-end ms-1">
                                  <codx-input
                                    type="number"
                                    field="numberTo"
                                    [crrValue]="
                                    child.defaultValue ? child.defaultValue : 0
                                    "
                                    (valueChange)="valueChange($event,true)"
                                    placeholder="Đến"
                                  ></codx-input>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </ng-container>

                <ng-container [ngSwitch]="item?.dataType" *ngIf="item.isVisible">
                  <ng-container *ngSwitchCase="'string'">
                    <div class="w-100 mt-3" *ngIf="!item.referedType">
                      <codx-input
                        type="textarea"
                        [field]="item.controlName"
                        placeholder="Có chứa giá trị..."
                        format="ed2"
                        [disabled]="!item.isEnable"
                        [crrValue]="item.defaultValue"
                        (valueChange)="valueChange($event)"
                      ></codx-input>
                    </div>
                    <div class="w-100 mt-3" *ngIf="item.referedType == '3'">
                      <codx-input
                        type="combobox"
                        [field]="item.controlName"
                        [crrValue]="item.defaultValue"
                        [refValue]="item.referedValue"
                        [disabled]="!item.isEnable"
                        (valueChange)="valueChange($event)"
                      >
                      </codx-input>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'bool'">
                    <div
                      class="float-end"
                      *ngIf="item.controlType == 'LVSwitch'"
                    >
                      <codx-input
                        class="float-right"
                        type="switch"
                        [field]="item.controlName"
                        [crrValue]="
                          item.defaultValue ? item.defaulValue : false
                        "
                        [disabled]="!item.isEnable"
                        (valueChange)="valueChange($event,false,'switch')"
                      ></codx-input>
                    </div>
                    <div
                      class="w-100 ms-5 mt-3"
                      *ngIf="item.controlType == 'LVCheckbox'"
                    >
                    <div class="d-flex">
                      <div class="float-start mx-5">
                        <codx-input
                        type="checkBox"
                        [field]="item.controlName"
                        [crrValue]="
                          item.defaultValue ? item.defaulValue : false
                        "
                        [disabled]="!item.isEnable"
                        (valueChange)="valueChange($event)"
                      ></codx-input>
                      </div>
                      <div class="w-100 float-end">
                        <span
                        style="font-size:12px;font-weight: 400;"
                        >{{item.labelName}}
                      </span>
                      </div>
                    </div>

                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'DateTime'">
                    <div class="my-2">
                      <codx-dropdown-calendar
                        cssPopup="h-600px w-800px"
                        cssClass="w-100 button-radius"
                        (change)="changeValueDate($event)"
                        [disabled]="!item.isEnable"
                      ></codx-dropdown-calendar>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'int'">
                    <div class="w-100 mt-3">
                      <div class="d-flex">
                        <div class="float-start me-1">
                          <codx-input
                            type="number"
                            field="numberFrom"
                            [crrValue]="
                              item.defaultValue ? item.defaultValue : 0
                            "
                            (valueChange)="valueChange($event)"
                            placeholder="Từ"
                            [disabled]="!item.isEnable"
                          ></codx-input>
                        </div>
                        <div class="float-end ms-1">
                          <codx-input
                            type="number"
                            field="numberTo"
                            [crrValue]="
                              item.defaultValue ? item.defaultValue : 0
                            "
                            [disabled]="!item.isEnable"
                            (valueChange)="valueChange($event)"
                            placeholder="Đến"
                          ></codx-input>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="fixed-bottom col-3 background-white pt-2 mb-5 mx-2">
        <div class="float-start">
          <button class="btn btn-light-primary ms-5 mb-5" (click)="restoreDefault()">
            <div class="d-flex">
              <div class="float-start">
                <i class="icon-replay"></i>
              </div>
              <div class="float-end w-100">
                <codx-label name="lblRestore" default="Khôi phục"></codx-label>
              </div>
            </div>
          </button>
        </div>
        <div class="float-end">
          <button class="btn btn-primary me-5 mb-5" (click)="apply()">
            <div class="d-flex">
              <div class="float-start">
                <i class="icon-check"></i>
              </div>
              <div class="float-end w-100">
                <codx-label name="lblApply" default="Áp dụng"></codx-label>
              </div>
            </div>
          </button>
        </div>
      </div>
    </div>
    <div class="col-9" #reportEle>
      <codx-report [showToolbar]="true" [reportUUID]="reportUUID" [parameters]="param" [print]="print"></codx-report>
    </div>
  </div>
</div>
