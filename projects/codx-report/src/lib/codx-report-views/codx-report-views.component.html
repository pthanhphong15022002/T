<div class="card-ep-report" *ngIf="module">
  <codx-views
    #view
    service="rptrp"
    entityName="RP_ReportList"
    idField="recID"
    assemblyName="Codx.RptBusiness.RP"
    className="ReportListBusiness"
    method="GetReportsByModuleAsync"
    [predicates]="predicates"
    [dataValues]="dataValues"
    (viewChanged)="viewChanged($event)"
    [toolbarDisplay]="true"
    [views]="views"
    [autoLoad]="false"
    [button]="button"
    (onActions)="onActions($event)"
  >
  </codx-views>
</div>
<ng-template #templateListCard let-data>
  <codx-card-img
    (click)="cardClick(data)"
    cardCss="border w-225px h-250px card-report"
    [formModel]="view.formModel"
    [imageObjType]="'RP_ReportList'"
    [imageObjName]="data.defaultName"
    [imageId]="data.recID"
    [hideMF]="true"
    [typeMF]="'hover'"
    [rootData]="data"
    [imgOn]="data.modifiedOn"
    [imageWidth]="500"
    [height]="500"
    [contentLine]="data.defaultName"
    [content]="data.customName"
    [dataItem]="data"
    [imageRecId]="data.recID"
    (tiltleClick)="cardClick(data)"
    [footer]="footerbg"
  >
  </codx-card-img>
</ng-template>

<ng-template #footerbg let-data>
  <div class="d-flex bg-footer">
    <div class="d-flex flex-column w-100 h-100">
      <div class="footerCard-item">
        <div class="d-flex align-items-center justify-content-between pb-1">
          <div class="d-flex align-items-center">
            <span class="icon-access_alarm icon-16 me-2"></span>
            <span class="text-gray-700">{{
              data.createdOn | date : "dd/MM/yyyy"
            }}</span>
          </div>
        </div>
      </div>
      <div class="footerCard-item">
        <div class="d-flex justify-content-start align-items-center">
          <div class="me-2 mt-1">
            <span
              class="icon-i-star-fill icon-14 text-warning"
              placement="right"
              >&nbsp;{{ data.rating ? data.rating : 0 }}</span
            >
          </div>
          <div class="me-2 mt-1">
            <span class="icon-how_to_vote text-info icon-16" placement="right"
              >&nbsp;{{ data?.votes ? data.votes : 0 }}</span
            >
          </div>
          <div class="ms-auto">
            <button
              class="circle-button rounded-circle"
              (click)="bookmark(data.recID)"
            >
              <i class="icon-bookmark" [class.active]="hasBookmark(data)"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
