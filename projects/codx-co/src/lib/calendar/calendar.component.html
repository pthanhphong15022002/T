<codx-views #view [views]="views" [toolbarDisplay]="false" [autoLoad]="false">
</codx-views>
<ng-template #templateLeft>
  <div class="rounded-3 p-0 position-relative h-100">
    <div class="row w-100 h-100">
      <!-- template left -->
      <div class="col-2 h-100">
        <div class="calendar-left">
          <div ngbAccordion class="w-100 h-100">
            <!-- Lịch công ty -->
            <ng-container *ngIf="calendarID == 'COT01'">
              <div ngbAccordionItem [collapsed]="false" [disabled]="true" class="d-flex flex-column h-50">
                <div ngbAccordionHeader class="">
                  <div ngbAccordionHeader class="custom-header w-100">
                    <div ngbAccordionToggle class="w-100"  >
                      <div class="d-flex justify-content-between align-items-center mt-3 w-100">
                        <codx-label
                          fiedName="Events"
                          default="Sơ đồ tổ chức"
                          class="fw-bold">
                        </codx-label>
                      </div>
                    </div>
                  </div>
                </div>
                <div ngbAccordionCollapse class="h-80">
                  <div ngbAccordionBody class="h-100 px-0">
                    <codx-listview 
                    [dataService]="hrRequest" 
                    [itemTemplate]="orgUnitTemplate" 
                    funcID="HRT01" 
                    [entityName]="'HR_OrganizationUnits'"
                    [selectFirst]="true"
                    (onSelectionChanged)="selectOrganizationUnit($event)">
                    </codx-listview>
                  </div>
                </div>
              </div>
            </ng-container>
            <!-- Lịch nhóm -->
            <ng-container *ngIf="calendarID == 'COT02'">
              <div ngbAccordionItem [collapsed]="false" [disabled]="true" class="d-flex flex-column h-50">
                <div ngbAccordionHeader class="">
                  <div ngbAccordionHeader class="custom-header w-100">
                    <div ngbAccordionToggle class="w-100">
                      <div class="d-flex justify-content-between align-items-center mt-3 w-100">
                        <codx-label
                          fiedName="Events"
                          default="Danh sách nhóm"
                          class="fw-bold">
                        </codx-label>
                      </div>
                    </div>
                  </div>
                </div>
                <div ngbAccordionCollapse class="h-80">
                  <div ngbAccordionBody class="h-100 px-0">
                    <div class="w-100 h-100 overflow-auto">
                      <ng-container *ngFor="let item of lstUserGroups">
                        <p class="p-2 cursor-pointer" (click)="selectUserGroup(item)">{{item.groupName}}</p>
                      </ng-container>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
            <!-- Lịch cá nhân -->
            <ng-container *ngIf="calendarID == 'COT03'">
              <div ngbAccordionItem [collapsed]="false" [disabled]="true" class="d-flex flex-column align-items-stretch h-50">
                <div ngbAccordionCollapse class="w-100 h-100">
                  <div ngbAccordionBody class="py-0">
                    <ejs-calendar
                      #ejCalendar
                      cssClass="width-calendar"
                      class="e-customStyle w-100 mw-100"
                      [locale]="locale"
                      [firstDayOfWeek]="1"
                      [value]="selectedDate"
                      (change)="changeDay($event)"
                      (navigated)="navigateMoth($event)"
                      (renderDayCell)="renderDayCell($event)">
                    </ejs-calendar>
                  </div>
                </div>
              </div>
            </ng-container>
            <!-- Calendar Setting -->
            <ng-container *ngIf="calendarParams">
              <div ngbAccordionItem [collapsed]="false" [disabled]="true" class="d-flex flex-column align-items-stretch h-50">
                <div ngbAccordionHeader class="custom-header w-100">
                  <div ngbAccordionToggle class="w-100">
                    <div class="d-flex justify-content-between align-items-center w-100">
                      <codx-label
                        fiedName="Events"
                        default="Danh sách sự kiện"
                        class="fw-bold">
                      </codx-label>
                      <button class="btn btn-icon btn-primary me-1"
                        (click)="openPopupSetting()">
                        <i class="icon-settings text-white icon-18"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div ngbAccordionCollapse class="h-80">
                  <div ngbAccordionBody class="h-100 px-0">
                    <div class="w-100 h-100 overflow-auto">
                      <div class="d-flex mt-3 align-items-center w-100" *ngFor="let item of calendarParams">
                        <div class="w-5px me-2">
                          <li
                            [style.background-color]="item.ShowColor"
                            [style.color]="item.ShowColor">
                          </li>
                        </div>
                        <div class="show-list-event w-100">
                          <codx-vll
                            [showText]="true"
                            [showBgColor]="false"
                            name="WP006"
                            [value]="item.Template.TransType">
                          </codx-vll>
                        </div>
                        <div class="show-event-check me-2 w-50px d-flex justify-content-end">
                          <codx-input
                            type="checkbox"
                            [field]="item.Template.TransType"
                            [checked]="item.ShowEvent === '1'"
                            labelPosition="Before"
                            [disabled]="false"
                            class="test-check"
                            (valueChange)="valueChange($event)">
                          </codx-input>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
        <div class="w-100 bg-body">
          <div class="p-2 border-top">
            <div class="d-flex justify-content-between align-items-center nav">
              <div class="d-flex flex-column justify-content-between nav-item"
                [ngClass]="{ active: calendarID == 'COT03' }"
                (click)="changeCalendarID('COT03')">
                <span class="text-center">
                  <i class="icon-i-person icon-24"></i>
                </span>
                <div class="user-select-none">Cá nhân</div>
              </div>

              <div class="d-flex flex-column justify-content-between nav-item"
                [ngClass]="{ active: calendarID == 'COT02' }"
                (click)="changeCalendarID('COT02')">
                <span class="text-center">
                  <i class="icon-i-people icon-24"></i>
                </span>
                <div class="user-select-none">Nhóm</div>
              </div>
              <div class="d-flex flex-column justify-content-between nav-item"
                [ngClass]="{ active: calendarID == 'COT01' }"
                (click)="changeCalendarID('COT01')">
                <span class="text-center">
                  <i class="icon-i-diagram-3 icon-24"></i>
                </span>
                <div class="user-select-none">Công ty</div>
              </div> 
              <div
                class="d-flex flex-column justify-content-between nav-item disabled"
              >
                <span class="text-center">
                  <i class="icon-i-gear icon-24"></i>
                </span>
                <div class="user-select-none">Thiết lập</div>
              </div>
              <!-- <ng-container *ngFor="let func of lstCalendars">
                <div class="col cursor-pointer"
                  [class.active]="calendarID === func.functionID"
                  (click)="changeCalendarID(func.functionID)">
                  <p class="text-center">
                    <i class="icon-i-person icon-24"></i>
                  </p>
                  <p>{{func.customName}}</p>
                </div>
              </ng-container>
              
              <div class="col disabled">
                <p class="text-center">
                  <i class="icon-i-gear icon-24"></i>
                </p>
                <p class="cursor-pointer">Thiết lập</p>
              </div> -->
            </div>
          </div>
        </div>
      </div>
      <!-- template right -->
      <div class="col-10 bg-white h-100">
        <co-calendar-center 
          #calendarCenter 
          [selectedDate]="selectedDate"
          [statusColor]="statusColor"
          [isOutSource]="true" 
          [eventData]="lstEvents" 
          [eventModel]="eventModel"
          [resources]="lstResources"
          [resourceModel]="resourceModel"
          [resourceTemplate]="resourceTemplate"
          (evtDateSelectChange)="dateSelectChange($event)">
        </co-calendar-center>
      </div>
    </div>
  </div>
  <div class="calendar-btnadd" *ngIf="speedDialItems.length > 0">
    <button
      #speeddial
      ejs-speeddial
      [items]="speedDialItems"
      [itemTemplate]="itemTemplate"
      openIconCss="icon-add icon-22"
      cssClass="e-primary"
      (clicked)="addEvent($event)"
    >
    <ng-template #itemTemplate let-items>
      <div class="itemlist">
        <span class="text">{{ items.text }}</span>
      </div>
    </ng-template>
    </button>
  </div>
</ng-template>

<ng-template #resourceTemplate let-data>
  <div class="container">
    <codx-temp-full
      [imageId]="data.resourceData.idField"
      [imageObjType]="'AD_Users'"
      [imageReferType]="'avt'"
      [title]="data.resourceData.title"
      [content]="'(' + data.resourceData.events + ')'">
    </codx-temp-full>
  </div>
</ng-template>
<ng-template #orgUnitTemplate let-item>
  <p class="p-2 text-break">{{ item.OrgUnitName }}</p>
</ng-template>
