<ng-container>
  <!--Begin Login-->
  <div class="d-flex flex-column flex-root bg-linear-gradient-blue" style="display: none" *ngIf="mode == 'login'">
    <!--begin::Login-->
    <div class="login login-signin-on d-flex flex-row-fluid">
      <div class="d-flex flex-center bgi-size-cover bgi-no-repeat flex-row-fluid"
        style="background-image: url(/assets/codx/bg/bg-login.png)">
        <div class="login-container position-relative">
          <div class="d-flex flex-column flex-lg-row bg-white rounded-3 p-15">
            <div
              class="login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat">
              <div class="d-flex flex-row-fluid flex-column justify-content-between">
                <div class="login-form position-relative overflow-hidden">
                  <!--begin::Login Header-->
                  <div class="d-flex">
                    <a href="#">
                      <img src="/assets/logos/logo-1.svg" class="h-35px" alt="" />
                    </a>
                  </div>
                  <!--end::Login Header-->
                  <!--begin::Login Sign in form-->
                  <div class="login-signin text-dark">
                    <div class="text-start mb-5 mt-9">
                      <h3 class="fw-bolder fs-2">
                        <codx-label fiedName="Title" formModel="" default="Chào mừng bạn
                                                đến với chúng tôi"></codx-label>
                      </h3>
                    </div>
                    <div class="tabs tabs-login" *ngIf="enableMultiLogin; else loginPW">
                      <ejs-tab class="h-100 w-100" overflowMode="Popup" heightAdjustMode="Auto"
                        (selecting)="select($event)" (selected)="selectedTab($event)">
                        <e-tabitems>
                          <e-tabitem>
                            <ng-template #headerText>
                              <div class="nav-item w-100">
                                <div class="d-flex flex-column w-100 text-center">
                                  <div [class]="'icon-20 icon-i-key mb-2'"></div>
                                  <span class="text-gray-700 fw-bold">
                                    <codx-label default="Đăng nhập"></codx-label>
                                  </span>
                                </div>
                              </div>
                            </ng-template>
                            <ng-template #content>
                              <ng-container *ngTemplateOutlet="loginPW"></ng-container>
                            </ng-template>
                          </e-tabitem>
                          <e-tabitem>
                            <ng-template #headerText>
                              <div class="nav-item w-100">
                                <div class="d-flex flex-column w-100 text-center">
                                  <div [class]="'icon-20 mb-2 icon-email'"></div>
                                  <span class="text-gray-700 fw-bold">
                                    <codx-label default="OTP"></codx-label>
                                  </span>
                                </div>
                              </div>
                            </ng-template>
                            <ng-template #content>
                              <form class="form fv-plugins-bootstrap fv-plugins-framework" method="post"
                                (ngSubmit)="submit('otp')" [formGroup]="loginForm"
                                class="form fv-plugins-bootstrap fv-plugins-framework" novalidate="novalidate">
                                <div class="form-group mb-5 fv-plugins-icon-container mt-5">
                                  <label class="fw-bold">
                                    <codx-label fiedName="Account" formModel="" default="Tài khoản"></codx-label>
                                  </label>
                                  <div
                                    class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                                    <!--begin::Text-->
                                    <div class="d-flex flex-column flex-grow-1">
                                      <input class="form-control border-0 p-0 ps-3" type="text"
                                        placeholder="Nhập tài khoản" formControlName="email" (change)="changeEmail()" />
                                    </div>
                                    <!--end::Text-->
                                  </div>
                                </div>
                                <div class="form-group mb-5 fv-plugins-icon-container">
                                  <label class="fw-bold">
                                    <codx-label fiedName="otp" formModel="" default="OTP"></codx-label></label>
                                  <div
                                    class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                                    <div class="d-flex flex-column flex-grow-1">
                                      <codx-input type="text" field="password" placeholder="OTP"
                                        formControlName="password" [class]="'border-0'"
                                        (valueChange)="valueChange($event)">
                                      </codx-input>
                                    </div>
                                  </div>
                                </div>
                                <div *ngIf="isNotADMode" class="text-start mt-2 mb-2">
                                  <div class="otp-btn w-100">
                                    <button [disabled]="
                                        otpTimeout > 0 ||
                                        !loginForm.controls['email'].value
                                      " type="button" (click)="generateOTP()" tabindex="-1"
                                      class="btn btn-full btn-outline-primary">
                                      <codx-label formModel="" class="text-primary" default="Gửi mã OTP"></codx-label>
                                    </button>
                                  </div>
                                  <div class="d-flex align-items-center" *ngIf="otpTimeout > 0">
                                    <codx-label formModel="" default="Xác thực sẽ hết hạn sau"></codx-label>
                                    <!-- {{ otpTimeout / 1000 }} -->
                                    <span class="ms-2 fw-bold text-danger">
                                      {{ otpMinutes }}:{{ otpTimeout % 60 }}
                                    </span>
                                  </div>
                                </div>
                                <div class="form-group d-grid gap-2 mb-5">
                                  <button [disabled]="loginForm.invalid" type="submit"
                                    class="btn btn-primary fw-bold px-6 py-3">
                                    {{
                                    "Đăng nhập "
                                    | lang : "Login" : "btnLogin"
                                    | async
                                    }}
                                  </button>
                                </div>
                              </form>
                            </ng-template>
                          </e-tabitem>

                          <e-tabitem>
                            <ng-template #headerText>
                              <div class="nav-item w-100">
                                <div class="d-flex flex-column text-center">
                                  <div [class]="
                                      'icon-20 mb-2 icon-qr_code_scanner'
                                    "></div>
                                  <span class="text-gray-700 fw-bold">
                                    <codx-label default="QR"></codx-label>
                                  </span>
                                </div>
                              </div>
                            </ng-template>
                            <ng-template #content>
                              <div
                                class="w-100 h-100 d-flex flex-column justify-content-center align-items-center mt-3">
                                <div class="d-flex flex-column justify-content-center align-items-center mb-3">
                                  <div *ngIf="!isScaned; else avatar"
                                    class="img d-flex justify-content-center position-relative rounded-3">
                                    <img class="w-50 h-50 ratio ratio-1x1 rounded-3" [src]="qrBase64"
                                      alt="/assets/codx/bg/qrCodx.png" />
                                    <div class="w-50 bg-secondary ratio ratio-1x1 position-absolute rounded-3"
                                      [ngClass]="{}" [ngStyle]="{
                                        'z-index': qrTimeout > 0 ? -1 : 1,
                                        'opacity': qrTimeout > 0 ? 0 : 0.9,
                                      }"></div>
                                    <div
                                      class="otp-btn w-100 h-100 d-flex justify-content-center align-items-center position-absolute">
                                      <button [disabled]="qrTimeout > 0" [ngStyle]="{
                                          'z-index': qrTimeout > 0 ? -1 : 2,
                                          'border':'none',
                                          'opacity': 0.8,
                                          'border-radius': '50%',
                                        }" type="button" (click)="generateQR()" tabindex="-1"
                                        class="btn link-dark border border-0 btn-primary w-80px h-80px">
                                        <div class="text-light icon-i-arrow-clockwise"></div>
                                      </button>
                                    </div>
                                  </div>
                                  <ng-template #avatar></ng-template>
                                  <div class="qr-codx-msg mt-3 text-center">
                                    <codx-label class="fs-7 text-gray-600"
                                      default="Chỉ dùng đăng nhập CoDX trên máy tính"></codx-label>
                                  </div>
                                </div>
                                <div class="d-flex align-items-center" *ngIf="qrTimeout > 0">
                                  <codx-label formModel="" default="Xác thực sẽ hết hạn sau ">
                                  </codx-label>
                                  <span class="ms-1 link-primary cursor-pointer" (click)="generateQR()">
                                    (<codx-label formModel="" default="Lấy mã mới"></codx-label>)
                                  </span>
                                  <span class="ms-1 fw-bold text-danger">
                                    {{ qrTimeoutMinutes }}:{{ qrTimeout % 60 }}
                                  </span>
                                </div>
                                <div class="d-flex mt-3" >
                                  
                                </div>
                                <div class="qr-codx-guid d-flex flex-column text-center mt-2">
                                  <codx-label class="fw-bold text-dark fs-6"
                                    default="Sử dụng ứng dụng CoDX trên điện thoại để quét mã QR"></codx-label>
                                  <div class="mt-3">
                                    <button type="button" class="btn btn-primary" (click)="openScanQRGuid()">
                                      <codx-label class="text-primary" default="Hướng dẫn quét"></codx-label>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </ng-template>
                          </e-tabitem>
                        </e-tabitems>
                      </ejs-tab>
                    </div>
                    <!--begin::Form-->
                    <ng-template #loginPW>
                      <form class="form fv-plugins-bootstrap fv-plugins-framework" method="post" (ngSubmit)="submit('')"
                        [formGroup]="loginForm" class="form fv-plugins-bootstrap fv-plugins-framework"
                        novalidate="novalidate">
                        <div class="form-group mb-5 fv-plugins-icon-container mt-5">
                          <label class="fw-bold">
                            <codx-label fiedName="Account" formModel="" default="Tài khoản"></codx-label>
                          </label>
                          <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                            <!--begin::Text-->
                            <div class="d-flex flex-column flex-grow-1">
                              <input class="form-control border-0 p-0 ps-3" type="text" field="email" data-field="email"
                                placeholder="Nhập tài khoản" formControlName="email" />
                            </div>
                            <!--end::Text-->
                          </div>
                        </div>
                        <div class="form-group mb-5 fv-plugins-icon-container">
                          <label class="fw-bold">
                            <codx-label fiedName="Password" formModel="" default="Mật khẩu"></codx-label></label>
                          <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                            <div class="d-flex flex-column flex-grow-1">
                              <codx-input type="password" field="Password" placeholder="Mật khẩu"
                                formControlName="password" [class]="'border-0'" (valueChange)="valueChange($event)">
                              </codx-input>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="isNotADMode" class="form-group text-end mt-3 mb-3">
                          <a (click)="forgotPass()" tabindex="-1" class="link-dark text-decoration-none">
                            <codx-label fiedName="ForgotPassword" formModel=""
                              default="Quên mật khẩu?"></codx-label></a>
                        </div>
                        <div class="form-group d-grid gap-2 mb-5">
                          <!-- //nho xoa -->
                          <!-- [disabled]="loginForm.invalid" -->
                          <button type="submit" [disabled]="loginForm.invalid"
                            class="btn btn-primary fw-bold px-6 py-3">
                            {{
                            "Đăng nhập " | lang : "Login" : "btnLogin" | async
                            }}
                          </button>
                        </div>
                      </form>
                    </ng-template>
                    <div *ngIf="externalLogin">
                      <div class="separator separator-content border-secondary my-10">
                        <span class="w-125px text-gray-500 fw-semibold fs-7">{{
                          "Or with" | lang : "Login" : "lblOrWith" | async
                          }}</span>
                      </div>
                      <div class="row g-3 mb-9">
                        <div class="mt-0" [class]="this.externalLoginCol" *ngIf="environment.externalLogin.amazonId">
                          <button class="btn btn-outline-warning w-100" (click)="submit('a')">
                            <img alt="Logo" src="./assets/media/svg/brand-logos/amazon-icon.svg" class="h-15px"
                              [class]="externalLoginShowText ? 'me-3' : ''" />
                            <span *ngIf="externalLoginShowText">Amazon</span>
                          </button>
                        </div>
                        <div class="mt-0" [class]="this.externalLoginCol" *ngIf="environment.externalLogin.facebookId">
                          <button class="btn btn-outline-primary w-100" (click)="submit('f')">
                            <img alt="Logo" src="./assets/media/svg/brand-logos/facebook-icon.svg" class="h-15px"
                              [class]="externalLoginShowText ? 'me-3' : ''" />
                            <span *ngIf="externalLoginShowText">Facebook</span>
                          </button>
                        </div>
                        <div class="mt-0" [class]="this.externalLoginCol" *ngIf="environment.externalLogin.googleId">
                          <button class="btn btn-outline-danger w-100" (click)="submit('g')">
                            <img alt="Logo" src="./assets/media/svg/brand-logos/google-icon.svg" class="h-15px"
                              [class]="externalLoginShowText ? 'me-3' : ''" />
                            <span *ngIf="externalLoginShowText">Google</span>
                          </button>
                        </div>
                        <div class="mt-0" [class]="this.externalLoginCol" *ngIf="environment.externalLogin.microsoftId">
                          <button class="btn btn-outline-success w-100" (click)="submit('m')">
                            <img alt="Logo" src="./assets/media/svg/brand-logos/microsoft-icon.svg" class="h-15px"
                              [class]="externalLoginShowText ? 'me-3' : ''" />
                            <span *ngIf="externalLoginShowText">Microsoft</span>
                          </button>
                        </div>
                      </div>
                    </div>
                    <!--end::Form-->
                  </div>
                  <!--end::Login Sign in form-->
                </div>
                <!--begin: Aside footer for desktop-->
                <div class="d-flex flex-column-auto justify-content-between" [class]="externalLogin ? 'mt-5' : 'mt-5'">
                  <div class="text-gray-700 order-2 order-sm-1 my-2">
                    Khi đăng nhập, bạn đồng ý với các
                    <a href="#" class="link-dark"> điều kiện và điều khoản</a>
                    <br />
                    cũng như
                    <a href="#" class="link-dark"> chính sách bảo mật</a>
                    của chúng tôi
                  </div>
                </div>
                <!--end: Aside footer for desktop-->
              </div>
            </div>
            <!--begin::Content-->
            <div class="order-2 order-lg-2 flex-column-auto d-flex flex-column p-7">
              <img src="/assets/codx/bg/Line-login.png" class="h-100" alt="" />
            </div>
            <div class="login-image order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7">
              <!--begin::Content body-->
              <div class="d-flex flex-column-fluid flex-lg-center">
                <div class="d-flex flex-column justify-content-center">
                  <img src="/assets/codx/bg/login-right.svg" class="mh-250px mb-7" alt="" />
                  <p class="fw-bold fs-4 text-dark align-items-center mb-0">
                    Trải nghiệm quản lý doanh nghiệp <br />toàn diện cùng CoDX
                    với 1 tháng<br />
                    dùng thử miễn phí
                  </p>
                </div>
              </div>
              <div class="d-flex align-items-center">
                <div class="d-flex flex-column align-items-center" *ngIf="environment.layout.appleStore">
                  <ejs-qrcodegenerator width="120px" height="120px" mode="SVG" [displayText]='qrDisplayText'
                    value="{{environment.layout.appleStore}}"></ejs-qrcodegenerator>
                  <a href="{{environment.layout.appleStore}}" style="position:relative;bottom:25px;"><img
                      class="mx-3 h-60px cursor-pointer" src="./assets/themes/sys/default/img/appstore.png" /></a>
                </div>
                <div class="d-flex flex-column align-items-center" *ngIf="environment.layout.playStore">
                  <ejs-qrcodegenerator width="120px" height="120px" mode="SVG" [displayText]='qrDisplayText'
                    value="{{environment.layout.playStore}}"></ejs-qrcodegenerator>
                  <a href="{{environment.layout.playStore}}" style="position:relative;bottom:25px;"><img
                      class="h-55px cursor-pointer" src="./assets/themes/sys/default/img/chplay.png" /></a>
                </div>
              </div>
              <!--end::Content body-->
            </div>

            <!--end::Content-->
          </div>
        </div>
      </div>
    </div>
    <!--end::Login-->
  </div>
  <!--end::Login-->
  <!--Begin Doi PW-->
  <div class="d-flex flex-column flex-root bg-linear-gradient-blue" style="display: none" *ngIf="mode == 'changePass'">
    <div class="login login-signin-on d-flex flex-row-fluid">
      <div class="d-flex flex-center bgi-size-cover bgi-no-repeat flex-row-fluid"
        style="background-image: url(/assets/codx/bg/bg-login.png)">
        <div class="login-container">
          <div class="d-flex flex-column flex-lg-row bg-white rounded-3 p-15">
            <div
              class="login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat">
              <div class="d-flex flex-row-fluid flex-column justify-content-between">
                <div class="login-form position-relative overflow-hidden">
                  <div class="d-flex">
                    <a href="#">
                      <img src="/assets/logos/logo-1.svg" class="h-35px" alt="" />
                    </a>
                  </div>
                  <div class="login-signin text-dark">
                    <div class="text-start mb-5 mt-9">
                      <h3 class="fw-bolder fs-2">
                        <codx-label fiedName="ChangePassword" formModel="" default="Thay đổi mật khẩu"></codx-label>
                      </h3>
                    </div>
                    <span #Error></span>
                    <form method="post" id="frm_erm_login" (ngSubmit)="submitChangePass()" [formGroup]="changePassForm"
                      class="form fv-plugins-bootstrap fv-plugins-framework" novalidate="novalidate">
                      <div class="form-group mb-5 fv-plugins-icon-container mt-5" #groupemail>
                        <label class="fw-bold">
                          <codx-label fiedName="Account" formModel="" default="Tài khoản"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex flex-column flex-grow-1">
                            <input class="form-control border-0 p-0 ps-3" field="email"
                              placeholder="Nhập tài khoản hoặc email" formControlName="email" />
                          </div>
                        </div>
                      </div>
                      <div class="form-group mb-5 fv-plugins-icon-container" #groupoldpass>
                        <label class="fw-bold">
                          <codx-label fiedName="PassOld" formModel="" default="Mật khẩu cũ"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex flex-column flex-grow-1">
                            <!-- <input
                              type="password"
                              class="form-control border-0 p-0 ps-3"
                              field="PasswordOld"
                              placeholder="Mật khẩu cũ"
                              formControlName="passwordOld"
                            /> -->
                            <codx-input type="password" class="form-control border-0 p-0 ps-3 d-flex"
                              field="PasswordOld" placeholder="Mật khẩu cũ" [Group]="changePassForm"
                              ControlName="passwordOld">
                            </codx-input>
                          </div>
                          <!-- <div
                            *ngIf="
                              changePassForm.controls['passwordOld']?.status ==
                              'INVALID'
                            "
                            (mouseenter)="
                              pwOnHover(changePassForm, 'passwordOld')
                            "
                            popoverClass="userPopoverClass"
                            [ngbPopover]="passPolicy"
                            triggers="mouseenter:mouseleave"
                            placement="right"
                            container="body"
                            #p="ngbPopover"
                            autoClose="outside"
                            class="attendees-tag icon-20 icon-i-info-circle text-danger"
                          ></div> -->
                        </div>
                      </div>
                      <div class="form-group mb-5 fv-plugins-icon-container" #groupnewpass>
                        <label class="fw-bold">
                          <codx-label fiedName="PassNew" formModel="" default="Mật khẩu mới"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex align-items-center flex-grow-1">
                            <!-- <input
                              type="password"
                              class="form-control border-0 p-0 ps-3"
                              field="Password"
                              placeholder="Mật khẩu mới"
                              formControlName="password"
                            /> -->
                            <div class="w-100">
                              <codx-input type="password" class="form-control border-0 p-0 ps-3 d-flex" field="Password"
                                placeholder="Mật khẩu mới" [Group]="" [Group]="changePassForm" ControlName="password">
                              </codx-input>
                            </div>
                            <div *ngIf="
                                changePassForm.controls['password']?.status ==
                                'INVALID'
                              " (mouseenter)="pwOnHover(changePassForm, 'password')" popoverClass="userPopoverClass"
                              [ngbPopover]="passPolicy" triggers="mouseenter:mouseleave" container="body"
                              placement="right" #p="ngbPopover" autoClose="outside"
                              class="attendees-tag icon-20 icon-i-info-circle text-danger"></div>
                          </div>

                        </div>
                      </div>
                      <div class="form-group mb-5 fv-plugins-icon-container" #confirmpass>
                        <label class="fw-bold">
                          <codx-label fiedName="PassNewAgain" formModel=""
                            default="Xác nhận mật khẩu mới"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex flex-column flex-grow-1">
                            <!-- <input
                              type="password"
                              class="form-control border-0 p-0 ps-3"
                              field="Password"
                              placeholder="Xác nhận mật khẩu"
                              formControlName="confirmPassword"
                            /> -->
                            <codx-input type="password" class="form-control border-0 p-0 ps-3 d-flex"
                              field="confirmPassword" placeholder="Xác nhận mật khẩu" [Group]="changePassForm"
                              ControlName="confirmPassword">
                            </codx-input>
                          </div>
                          <div *ngIf="
                              changePassForm.controls['confirmPassword']
                                ?.status == 'INVALID'
                            " (mouseenter)="
                              pwOnHover(changePassForm, 'confirmPassword')
                            " popoverClass="userPopoverClass" [ngbPopover]="passPolicy"
                            triggers="mouseenter:mouseleave" container="body" placement="right" #p="ngbPopover"
                            autoClose="outside" class="attendees-tag icon-20 icon-i-info-circle text-danger"></div>
                        </div>
                      </div>
                      <div class="form-group d-grid gap-2 mb-5">
                        <button type="submit" id="btn-signin" class="btn btn-primary fw-bold px-6 py-3"
                          [disabled]="changePassForm.invalid">
                          {{
                          "Đổi mật khẩu" | lang : "Login" : "btnLogin" | async
                          }}
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
                <div class="d-flex flex-column-auto justify-content-between mt-5">
                  <div class="text-gray-700 order-2 order-sm-1 my-2">
                    Khi đăng nhập, bạn đồng ý với các<a href="#" class="text-underline link-dark">
                      điều kiện và điều khoản</a><br />
                    cũng như<a href="#" class="text-underline link-dark">
                      chính sách bảo mật</a>
                    của chúng tôi
                  </div>
                </div>
              </div>
            </div>
            <div class="order-2 order-lg-2 flex-column-auto d-flex flex-column p-7">
              <img src="/assets/codx/bg/Line-login.png" class="h-100" alt="" />
            </div>
            <div class="login-image order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7">
              <div class="d-flex flex-column-fluid flex-lg-center">
                <div class="d-flex flex-column justify-content-center">
                  <img src="/assets/codx/bg/login-right.svg" class="mh-250px mb-7" alt="" />
                  <p class="fw-bold fs-4 text-dark align-items-center">
                    Trải nghiệm quản lý doanh nghiệp <br />toàn diện cùng CoDX
                    với 1 tháng<br />
                    dùng thử miễn phí
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--end Doi PW-->
  <!--Begin first login-->
  <div class="d-flex flex-column flex-root bg-linear-gradient-blue" style="display: none" *ngIf="mode == 'firstLogin'">
    <div class="login login-signin-on d-flex flex-row-fluid">
      <div class="d-flex flex-center bgi-size-cover bgi-no-repeat flex-row-fluid"
        style="background-image: url(/assets/codx/bg/bg-login.png)">
        <div class="login-container">
          <div class="d-flex flex-column flex-lg-row bg-white rounded-3 p-15">
            <div
              class="login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat">
              <div class="d-flex flex-row-fluid flex-column justify-content-between">
                <div class="login-form position-relative overflow-hidden">
                  <div class="d-flex">
                    <a href="#">
                      <img src="/assets/logos/logo-1.svg" class="h-35px" alt="" />
                    </a>
                  </div>
                  <div class="login-signin text-dark">
                    <div class="text-start mb-5 mt-9">
                      <h3 class="fw-bolder fs-2">Tạo mật khẩu</h3>
                    </div>
                    <span #Error></span>
                    <form method="post" id="frm_erm_login" (ngSubmit)="submitFirstLogin()" [formGroup]="firstLoginForm"
                      class="form fv-plugins-bootstrap fv-plugins-framework" novalidate="novalidate">
                      <div class="form-group mb-5 fv-plugins-icon-container mt-5" #groupemail>
                        <label class="fw-bold">
                          <codx-label fiedName="Account" formModel="" default="Tài khoản"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex flex-column flex-grow-1">
                            <input class="form-control border-0 p-0 ps-3" field="email"
                              placeholder="Nhập tài khoản hoặc email" formControlName="email" />
                          </div>
                        </div>
                      </div>
                      <div class="form-group mb-5 fv-plugins-icon-container" #groupnewpass>
                        <label class="fw-bold">
                          <codx-label fiedName="PassNew" formModel="" default="Mật khẩu mới"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex flex-column flex-grow-1">
                            <input type="password" class="form-control border-0 p-0 ps-3" field="Password"
                              placeholder="Mật khẩu mới" formControlName="password" />
                          </div>
                          <div *ngIf="
                              firstLoginForm.controls['password']?.status ==
                              'INVALID'
                            " (mouseenter)="pwOnHover(firstLoginForm, 'password')" popoverClass="userPopoverClass"
                            [ngbPopover]="passPolicy" triggers="mouseenter:mouseleave" container="body"
                            placement="right" #p="ngbPopover" autoClose="outside"
                            class="attendees-tag icon-20 icon-i-info-circle text-danger"></div>
                        </div>
                      </div>
                      <div class="form-group mb-5 fv-plugins-icon-container" #confirmpass>
                        <label class="fw-bold">
                          <codx-label fiedName="PassNewAgain" formModel=""
                            default="Xác nhận mật khẩu mới"></codx-label></label>
                        <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                          <div class="d-flex flex-column flex-grow-1">
                            <input type="password" class="form-control border-0 p-0 ps-3" field="Password"
                              placeholder="Xác nhận mật khẩu" formControlName="confirmPassword" />
                          </div>
                          <div *ngIf="
                              firstLoginForm.controls['confirmPassword']
                                ?.status == 'INVALID'
                            " (mouseenter)="
                              pwOnHover(firstLoginForm, 'confirmPassword')
                            " popoverClass="userPopoverClass" [ngbPopover]="passPolicy"
                            triggers="mouseenter:mouseleave" container="body" placement="right" #p="ngbPopover"
                            autoClose="outside" class="attendees-tag icon-20 icon-i-info-circle text-danger"></div>
                        </div>
                      </div>
                      <div class="form-group d-grid gap-2 mb-5">
                        <button type="submit" id="btn-signin" class="btn btn-primary fw-bold px-6 py-3"
                          [disabled]="firstLoginForm.invalid">
                          {{
                          "Đăng nhập " | lang : "Login" : "btnLogin" | async
                          }}
                        </button>
                      </div>
                      <input type="hidden" />
                      <div></div>
                    </form>
                  </div>
                </div>
                <div class="d-flex flex-column-auto justify-content-between mt-5">
                  <div class="text-gray-700 order-2 order-sm-1 my-2">
                    Khi đăng nhập, bạn đồng ý với các<a href="#" class="text-underline link-dark">
                      điều kiện và điều khoản</a><br />
                    cũng như<a href="#" class="text-underline link-dark">
                      chính sách bảo mật</a>
                    của chúng tôi
                  </div>
                </div>
              </div>
            </div>
            <div class="order-2 order-lg-2 flex-column-auto d-flex flex-column p-7">
              <img src="/assets/codx/bg/Line-login.png" class="h-100" alt="" />
            </div>
            <div class="login-image order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7">
              <div class="d-flex flex-column-fluid flex-lg-center">
                <div class="d-flex flex-column justify-content-center">
                  <img src="/assets/codx/bg/login-right.svg" class="mh-250px mb-7" alt="" />
                  <p class="fw-bold fs-4 text-dark align-items-center">
                    Trải nghiệm quản lý doanh nghiệp <br />toàn diện cùng CoDX
                    với 1 tháng<br />
                    dùng thử miễn phí
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--end first login-->
  <!-- Begin active Tenant -->
  <div class="d-flex flex-column flex-root bg-linear-gradient-blue" style="display: none"
    *ngIf="mode == 'activeTenant'">
    <div class="login login-signin-on d-flex flex-row-fluid">
      <div class="d-flex flex-center bgi-size-cover bgi-no-repeat flex-row-fluid"
        style="background-image: url(/assets/codx/bg/bg-login.png)">
        <div class="login-container">
          <div class="d-flex flex-column flex-lg-row bg-white rounded-3 p-15">
            <div
              class="login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat">
              <div class="d-flex flex-row-fluid flex-column justify-content-between">
                <div class="login-form position-relative overflow-hidden">
                  <div class="d-flex">
                    <a href="#">
                      <img src="/assets/logos/logo-1.svg" class="h-35px" alt="" />
                    </a>
                  </div>
                  <div class="login-signin text-dark">
                    <div class="text-start mb-6 mt-10">
                      <h3 class="fw-bold">
                        <codx-label fiedName="activeTenantLabel" formModel=""
                          default="Kích hoạt tài khoản"></codx-label>
                      </h3>
                    </div>
                    <span #Error></span>
                    <div class="form-group mb-5 fv-plugins-icon-container mt-5">
                      <label class="fw-bold">
                        <codx-label fiedName="Account" formModel="" default="Tài khoản"></codx-label></label>
                      <div class="d-flex align-items-center form-control form-control-solid form-control-lg px-3">
                        <div class="d-flex flex-column flex-grow-1">
                          <input class="form-control border-0 p-0 ps-3" field="email" formControlName="email"
                            [disabled]="true" [defaultValue]="email" [value]="email" />
                        </div>
                      </div>
                    </div>
                    <div class="form-group d-grid gap-2 mb-5">
                      <button (click)="activeTenantAccount()" class="btn btn-primary fw-bold px-6 py-3">
                        <codx-label fiedName="activeTenant" formModel="" default="Kích hoạt ngay"></codx-label>
                      </button>
                    </div>
                    <input type="hidden" />
                    <div></div>
                    <!-- <form
                      method="post"
                      id="frm_erm_login"
                      (ngSubmit)="submitFirstLogin()"
                      [formGroup]="firstLoginForm"
                      class="form fv-plugins-bootstrap fv-plugins-framework"
                      novalidate="novalidate"
                    >

                    </form> -->
                  </div>
                </div>
                <div class="d-flex flex-column-auto justify-content-between mt-5">
                  <div class="text-gray-700 order-2 order-sm-1 my-2">
                    Khi đăng nhập, bạn đồng ý với các<a href="#" class="text-underline link-dark">
                      điều kiện và điều khoản</a><br />
                    cũng như<a href="#" class="text-underline link-dark">
                      chính sách bảo mật</a>
                    của chúng tôi
                  </div>
                </div>
              </div>
            </div>
            <div class="order-2 order-lg-2 flex-column-auto d-flex flex-column p-7">
              <img src="/assets/codx/bg/Line-login.png" class="h-100" alt="" />
            </div>
            <div class="login-image order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7">
              <div class="d-flex flex-column-fluid flex-lg-center">
                <div class="d-flex flex-column justify-content-center">
                  <img src="/assets/codx/bg/login-right.svg" class="mh-250px mb-7" alt="" />
                  <p class="fw-bold fs-4 text-dark align-items-center">
                    Trải nghiệm quản lý doanh nghiệp <br />toàn diện cùng CoDX
                    với 1 tháng<br />
                    dùng thử miễn phí
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End active Tenant -->
</ng-container>
<div class="container modal-scanqr">
  <div class="modal align-items-center" id="scanQRGuid">
    <div class="modal-dialog w-400px my-0">
      <div class="modal-content">
        <div class="modal-header d-flex flex-column">
          <div class="pt-5">
            <img src="/assets/logos/logo-1.svg" class="h-35px" alt="" />
          </div>
          <codx-label class="text-dark fw-bold fs-3 my-3" default="Hướng dẫn quét mã QR"></codx-label>
          <div class="rounded mt-5">
            <img src="/assets/codx/bg/qrCodx.png" class="h-150px" alt="" />
          </div>
        </div>
        <div class="modal-body">
          <div class="d-flex align-items-center mb-3">
            <div class="ol-number fw-bold fs-6">1</div>
            <codx-label class="text-dark fw-bold"
              default="Đăng nhập ứng dụng CoDX trên điện thoại của bạn"></codx-label>
          </div>
          <div class="d-flex align-items-center mb-3">
            <div class="ol-number fw-bold fs-6">2</div>
            <codx-label class="text-dark fw-bold" default="Tại ứng dụng chọn biểu tượng"></codx-label>
            <span [class]="'icon-16 mx-2 icon-qr_code_scanner'"></span>
          </div>
          <div class="d-flex align-items-center">
            <div class="ol-number fw-bold fs-6">3</div>
            <codx-label class="text-dark fw-bold" default="Quét mã QR trên màn hình máy tính"></codx-label>
          </div>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn w-50 btn-light-primary" (click)="closeScanQRGuid()">
            <codx-label class="text-primary" default="Đóng"></codx-label>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #passPolicy>
  <div class="d-flex flex-column pass-policy">
    <!-- Chiều dài pw -->
    <div class="d-flex align-items-center pw-length m-2" [ngClass]="{
      'text-danger icon-sms_failed': !pwValidate.length,
      'icon-check_circle text-success': pwValidate.length, 
    }">
      <span class="ms-2">
        <codx-label name="pwPolicyLength" formModel="" default="Tối thiểu "></codx-label>
      </span>
      <span class="px-2 fw-bold">
        {{ " " + sysSetting?.pwLength + " " }}
      </span>
      <span>
        <codx-label name="pwPolicyLength2" formModel="" default=" kí tự"></codx-label>
      </span>
    </div>
    <!-- Ký tự hoa -->
    <div class="d-flex align-items-center pw-uppercase m-2" [ngClass]="{
      'text-danger icon-sms_failed': !pwValidate.upper,
      'icon-check_circle text-success': pwValidate.upper, 
    }">
      <codx-label class="ms-2" name="pwPolicy-uppercase" formModel="" default="Bao gồm chữ hoa"></codx-label>
    </div>
    <!-- Ký tự thường -->
    <div class="d-flex align-items-center pw-lowercase m-2" [ngClass]="{
      'text-danger icon-sms_failed': !pwValidate.lower,
      'icon-check_circle text-success': pwValidate.lower, 
    }">
      <codx-label class="ms-2" name="pwPolicy-lowercase" formModel="" default="Bao gồm chữ thường"></codx-label>
    </div>
    <!-- Số -->
    <div class="d-flex align-items-center pw-num m-2" [ngClass]="{
      'text-danger icon-sms_failed': !pwValidate.num,
      'icon-check_circle text-success': pwValidate.num, 
    }">
      <codx-label class="ms-2" name="pwPolicy-num" formModel="" default="Bao gồm chữ số"></codx-label>
    </div>
    <!-- Ký tự đặc biệt -->
    <div class="d-flex align-items-center pw-special m-2" [ngClass]="{
      'text-danger icon-sms_failed': !pwValidate.spcialChar,
      'icon-check_circle text-success': pwValidate.spcialChar, 
    }">
      <codx-label class="ms-2" name="pwPolicy-special" formModel="" default="Bao gồm ký tự đặc biệt"></codx-label>
    </div>
  </div>
</ng-template>