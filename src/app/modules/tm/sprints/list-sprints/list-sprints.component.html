<div class="page-home page-master border-top-erm">
    <div id="erm_content">
        <div class="container-full p-6">
            <div class="font-size-h2 font-weight-bold text-dark mt-6">My board</div>
            <div class="text-muted mb-6">Danh sách view board cá nhân được bạn chia sẻ</div>
            <div class="view-listbox card-with-dropdown pl-6">
                <!-- <div *ngFor="let item of listMyBoard;trackBy:trackByMethod">
                    <ng-container *ngTemplateOutlet="itemViewBoard ;context: {item:item}">
                    </ng-container>
                </div> -->
                <codx-listcard #lstViewBoard [pageSize]="totalRowMyBoard" funcId="TMT04" service="TM" assemblyName="ERM.Business.TM"
                    className="SprintsBusiness" method="GetListSprintAsync" autoLoad="true" entityName="TM_Sprints"
                    [predicate]="predicateViewBoards" [dataValue]="" [gridViewName]="'grvSprints'" class="h-100"
                    [cartTemp]="itemViewBoard">
                </codx-listcard>
            </div>
            <div class="clear mb-6 d-flex justify-content-end pr-9">
                <div (click)="viewMoreMyBoard()" class="read-more d-flex align-items-center"
                    *ngIf="totalRowMyBoard <= totalViewBoards">
                    <span class="icon-keyboard_arrow_right icon-18 text-primary"></span>
                    <span class="text-primary">Read more</span>
                </div>
            </div>
            <div class="font-size-h2 font-weight-bold text-dark mt-6">Project board</div>
            <div class="text-muted mb-6">Danh sách view board theo dự án có bạn tham gia hoặc được bạn chia sẻ</div>
            <div class="view-listbox pl-6">
                <codx-listcard #lstProjectBoard  [pageSize]="5" funcId="TMT04" service="TM"
                    assemblyName="ERM.Business.TM" className="SprintsBusiness" method="GetListSprintAsync"
                    autoLoad="true" entityName="TM_Sprints" [predicate]="predicateProjectBoards"
                    [gridViewName]="'grvSprints'" class="h-100" [cartTemp]="itemViewBoard">
                </codx-listcard>
            </div>
            <div class="clear mb-6 d-flex justify-content-end pr-9">
                <div (click)="viewMoreProjectBoard()" class="read-more d-flex align-items-center"
                    *ngIf="listProjectBoard.length < totalRowProjectBoard">
                    <span class="icon-keyboard_arrow_right icon-18 text-primary"></span>
                    <span class="text-primary">Read more</span>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-template let-item #itemViewBoard>
    <div class="task-card card-with-dropdown-item" style="background-color: rgb(204, 228, 231);  border-radius: 5%; padding:20px ; height: 100%;" (dblclick)="showControl(p,item)"
    [ngbPopover]="popContent" popoverClass="empPopoverClass" #p="ngbPopover" placement="right left" container="body"
    autoClose="outside" triggers="manual">
        <div class="align-items-center justify-content-between">
            <!-- <span class="card-more">
                <base-item-menu [data]="item" ></base-item-menu> 
            </span> -->
            <span  *ngIf="item.isShared" class="icon-share text-primary icon-20 " style="float: right;"></span>
        </div>
        <div class="d-flex justify-content-center mt-3">
            <codx-img class="symbol symbol-50 symbol-circle" [objectId]="item.iterationID" objectType="TM_Sprints"
                [objectName]="item.iterationName">
            </codx-img>
        </div>
        <div class="mt-3 text-center">
            <div class="font-weight-bold font-size-h5 text-dard card-name"><codx-label  name="lblIterationName" formName="Tasks" default="{{item.iterationName}}" ></codx-label></div>
            <div class="text-muted font-size-sm card-des" *ngIf="item.projectName" ><codx-label  name="lblProjectName" formName="Tasks" default= "{{item.projectName}}" ></codx-label  ></div>
            <div class="text-muted font-size-sm card-des"><codx-label  name="lblMemo" formName="Tasks" default= "{{item.memo}}" ></codx-label  ></div>
            
        </div>
        <div class="d-flex justify-content-center symbol-group mt-6">
            <codx-imgs *ngIf="item.resources" class="symbol symbol-30 symbol-circle" width="40"
                [objectId]="item.resources" objectType="AD_Users" numberImages="5"></codx-imgs>
        </div>
    </div>
</ng-template>

<!-- // dung de tesst -->
<ng-template #popContent>
    <a class="action-item" (click)="editTaskBoard(boardAction)" style="cursor: pointer">
      <div class="d-flex align-items-center btn-tooltip">
        <span class="icon-edit icon-18 ml-2 mr-2"></span>
        <span class="tooltiptext">Edit</span>
      </div>
    </a>
    <a class="action-item" (click)="copyTaskBoard(boardAction)" style="cursor: pointer">
      <div class="d-flex align-items-center btn-tooltip">
        <span class="icon-content_copy icon-16 text-warning ml-2 mr-2"></span>
        <span class="tooltiptext">Copy</span>
      </div>
    </a>
    <a class="action-item" (click)="deleteTaskBoard(boardAction)" style="cursor: pointer">
      <div class="d-flex align-items-center btn-tooltip">
        <span class="icon-close icon-20 text-danger ml-2 mr-2"></span>
        <span class="tooltiptext">Delete</span>
      </div>
    </a>
    <a class="action-item" (click)="viewTaskBoard(boardAction)" style="cursor: pointer">
      <div class="d-flex align-items-center btn-tooltip">
        <span class="icon-visibility icon-20 text-primary ml-2 mr-2"></span>
        <span class="tooltiptext">Xem</span>
      </div>
    </a>
    <!-- <a class="action-item" (click)="shareTaskBoard(p2,taskAction)" [ngbPopover]="setupStatusTask"
      popoverClass="empPopoverClass" #p2="ngbPopover" placement="right left" container="body" autoClose="outside"
      triggers="manual" style="cursor: pointer">
      <div class="d-flex align-items-center btn-tooltip">
        <span class="icon-add_box icon-20 text-dark ml-2 mr-2"></span>
        <span class="tooltiptext">Setup trạng thái </span>
      </div>
    </a> -->
  </ng-template>
  